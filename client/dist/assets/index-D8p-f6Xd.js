(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();function D2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ld={exports:{}},Qs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ep;function R2(){if(ep)return Qs;ep=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,a,s){var l=null;if(s!==void 0&&(l=""+s),a.key!==void 0&&(l=""+a.key),"key"in a){s={};for(var d in a)d!=="key"&&(s[d]=a[d])}else s=a;return a=s.ref,{$$typeof:t,type:n,key:l,ref:a!==void 0?a:null,props:s}}return Qs.Fragment=e,Qs.jsx=r,Qs.jsxs=r,Qs}var tp;function I2(){return tp||(tp=1,Ld.exports=R2()),Ld.exports}var c=I2(),Fd={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rp;function M2(){if(rp)return ke;rp=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.iterator;function y(T){return T===null||typeof T!="object"?null:(T=v&&T[v]||T["@@iterator"],typeof T=="function"?T:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,w={};function E(T,V,ue){this.props=T,this.context=V,this.refs=w,this.updater=ue||b}E.prototype.isReactComponent={},E.prototype.setState=function(T,V){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,V,"setState")},E.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function j(){}j.prototype=E.prototype;function A(T,V,ue){this.props=T,this.context=V,this.refs=w,this.updater=ue||b}var C=A.prototype=new j;C.constructor=A,_(C,E.prototype),C.isPureReactComponent=!0;var D=Array.isArray,R={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function $(T,V,ue,fe,U,k){return ue=k.ref,{$$typeof:t,type:T,key:V,ref:ue!==void 0?ue:null,props:k}}function W(T,V){return $(T.type,V,void 0,void 0,void 0,T.props)}function J(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function ae(T){var V={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(ue){return V[ue]})}var be=/\/+/g;function ce(T,V){return typeof T=="object"&&T!==null&&T.key!=null?ae(""+T.key):V.toString(36)}function me(){}function _e(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(me,me):(T.status="pending",T.then(function(V){T.status==="pending"&&(T.status="fulfilled",T.value=V)},function(V){T.status==="pending"&&(T.status="rejected",T.reason=V)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function he(T,V,ue,fe,U){var k=typeof T;(k==="undefined"||k==="boolean")&&(T=null);var de=!1;if(T===null)de=!0;else switch(k){case"bigint":case"string":case"number":de=!0;break;case"object":switch(T.$$typeof){case t:case e:de=!0;break;case p:return de=T._init,he(de(T._payload),V,ue,fe,U)}}if(de)return U=U(T),de=fe===""?"."+ce(T,0):fe,D(U)?(ue="",de!=null&&(ue=de.replace(be,"$&/")+"/"),he(U,V,ue,"",function(Rt){return Rt})):U!=null&&(J(U)&&(U=W(U,ue+(U.key==null||T&&T.key===U.key?"":(""+U.key).replace(be,"$&/")+"/")+de)),V.push(U)),1;de=0;var Ge=fe===""?".":fe+":";if(D(T))for(var Ze=0;Ze<T.length;Ze++)fe=T[Ze],k=Ge+ce(fe,Ze),de+=he(fe,V,ue,k,U);else if(Ze=y(T),typeof Ze=="function")for(T=Ze.call(T),Ze=0;!(fe=T.next()).done;)fe=fe.value,k=Ge+ce(fe,Ze++),de+=he(fe,V,ue,k,U);else if(k==="object"){if(typeof T.then=="function")return he(_e(T),V,ue,fe,U);throw V=String(T),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return de}function P(T,V,ue){if(T==null)return T;var fe=[],U=0;return he(T,fe,"","",function(k){return V.call(ue,k,U++)}),fe}function oe(T){if(T._status===-1){var V=T._result;V=V(),V.then(function(ue){(T._status===0||T._status===-1)&&(T._status=1,T._result=ue)},function(ue){(T._status===0||T._status===-1)&&(T._status=2,T._result=ue)}),T._status===-1&&(T._status=0,T._result=V)}if(T._status===1)return T._result.default;throw T._result}var Y=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function ve(){}return ke.Children={map:P,forEach:function(T,V,ue){P(T,function(){V.apply(this,arguments)},ue)},count:function(T){var V=0;return P(T,function(){V++}),V},toArray:function(T){return P(T,function(V){return V})||[]},only:function(T){if(!J(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},ke.Component=E,ke.Fragment=r,ke.Profiler=a,ke.PureComponent=A,ke.StrictMode=n,ke.Suspense=h,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,ke.__COMPILER_RUNTIME={__proto__:null,c:function(T){return R.H.useMemoCache(T)}},ke.cache=function(T){return function(){return T.apply(null,arguments)}},ke.cloneElement=function(T,V,ue){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var fe=_({},T.props),U=T.key,k=void 0;if(V!=null)for(de in V.ref!==void 0&&(k=void 0),V.key!==void 0&&(U=""+V.key),V)!L.call(V,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&V.ref===void 0||(fe[de]=V[de]);var de=arguments.length-2;if(de===1)fe.children=ue;else if(1<de){for(var Ge=Array(de),Ze=0;Ze<de;Ze++)Ge[Ze]=arguments[Ze+2];fe.children=Ge}return $(T.type,U,void 0,void 0,k,fe)},ke.createContext=function(T){return T={$$typeof:l,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:s,_context:T},T},ke.createElement=function(T,V,ue){var fe,U={},k=null;if(V!=null)for(fe in V.key!==void 0&&(k=""+V.key),V)L.call(V,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(U[fe]=V[fe]);var de=arguments.length-2;if(de===1)U.children=ue;else if(1<de){for(var Ge=Array(de),Ze=0;Ze<de;Ze++)Ge[Ze]=arguments[Ze+2];U.children=Ge}if(T&&T.defaultProps)for(fe in de=T.defaultProps,de)U[fe]===void 0&&(U[fe]=de[fe]);return $(T,k,void 0,void 0,null,U)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(T){return{$$typeof:d,render:T}},ke.isValidElement=J,ke.lazy=function(T){return{$$typeof:p,_payload:{_status:-1,_result:T},_init:oe}},ke.memo=function(T,V){return{$$typeof:m,type:T,compare:V===void 0?null:V}},ke.startTransition=function(T){var V=R.T,ue={};R.T=ue;try{var fe=T(),U=R.S;U!==null&&U(ue,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(ve,Y)}catch(k){Y(k)}finally{R.T=V}},ke.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},ke.use=function(T){return R.H.use(T)},ke.useActionState=function(T,V,ue){return R.H.useActionState(T,V,ue)},ke.useCallback=function(T,V){return R.H.useCallback(T,V)},ke.useContext=function(T){return R.H.useContext(T)},ke.useDebugValue=function(){},ke.useDeferredValue=function(T,V){return R.H.useDeferredValue(T,V)},ke.useEffect=function(T,V,ue){var fe=R.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return fe.useEffect(T,V)},ke.useId=function(){return R.H.useId()},ke.useImperativeHandle=function(T,V,ue){return R.H.useImperativeHandle(T,V,ue)},ke.useInsertionEffect=function(T,V){return R.H.useInsertionEffect(T,V)},ke.useLayoutEffect=function(T,V){return R.H.useLayoutEffect(T,V)},ke.useMemo=function(T,V){return R.H.useMemo(T,V)},ke.useOptimistic=function(T,V){return R.H.useOptimistic(T,V)},ke.useReducer=function(T,V,ue){return R.H.useReducer(T,V,ue)},ke.useRef=function(T){return R.H.useRef(T)},ke.useState=function(T){return R.H.useState(T)},ke.useSyncExternalStore=function(T,V,ue){return R.H.useSyncExternalStore(T,V,ue)},ke.useTransition=function(){return R.H.useTransition()},ke.version="19.1.0",ke}var np;function Lf(){return np||(np=1,Fd.exports=M2()),Fd.exports}var z=Lf();const cn=D2(z);var Ud={exports:{}},Js={},zd={exports:{}},Vd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ap;function B2(){return ap||(ap=1,function(t){function e(P,oe){var Y=P.length;P.push(oe);e:for(;0<Y;){var ve=Y-1>>>1,T=P[ve];if(0<a(T,oe))P[ve]=oe,P[Y]=T,Y=ve;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var oe=P[0],Y=P.pop();if(Y!==oe){P[0]=Y;e:for(var ve=0,T=P.length,V=T>>>1;ve<V;){var ue=2*(ve+1)-1,fe=P[ue],U=ue+1,k=P[U];if(0>a(fe,Y))U<T&&0>a(k,fe)?(P[ve]=k,P[U]=Y,ve=U):(P[ve]=fe,P[ue]=Y,ve=ue);else if(U<T&&0>a(k,Y))P[ve]=k,P[U]=Y,ve=U;else break e}}return oe}function a(P,oe){var Y=P.sortIndex-oe.sortIndex;return Y!==0?Y:P.id-oe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var h=[],m=[],p=1,v=null,y=3,b=!1,_=!1,w=!1,E=!1,j=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(P){for(var oe=r(m);oe!==null;){if(oe.callback===null)n(m);else if(oe.startTime<=P)n(m),oe.sortIndex=oe.expirationTime,e(h,oe);else break;oe=r(m)}}function R(P){if(w=!1,D(P),!_)if(r(h)!==null)_=!0,L||(L=!0,ce());else{var oe=r(m);oe!==null&&he(R,oe.startTime-P)}}var L=!1,$=-1,W=5,J=-1;function ae(){return E?!0:!(t.unstable_now()-J<W)}function be(){if(E=!1,L){var P=t.unstable_now();J=P;var oe=!0;try{e:{_=!1,w&&(w=!1,A($),$=-1),b=!0;var Y=y;try{t:{for(D(P),v=r(h);v!==null&&!(v.expirationTime>P&&ae());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,y=v.priorityLevel;var T=ve(v.expirationTime<=P);if(P=t.unstable_now(),typeof T=="function"){v.callback=T,D(P),oe=!0;break t}v===r(h)&&n(h),D(P)}else n(h);v=r(h)}if(v!==null)oe=!0;else{var V=r(m);V!==null&&he(R,V.startTime-P),oe=!1}}break e}finally{v=null,y=Y,b=!1}oe=void 0}}finally{oe?ce():L=!1}}}var ce;if(typeof C=="function")ce=function(){C(be)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,_e=me.port2;me.port1.onmessage=be,ce=function(){_e.postMessage(null)}}else ce=function(){j(be,0)};function he(P,oe){$=j(function(){P(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(P){switch(y){case 1:case 2:case 3:var oe=3;break;default:oe=y}var Y=y;y=oe;try{return P()}finally{y=Y}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(P,oe){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Y=y;y=P;try{return oe()}finally{y=Y}},t.unstable_scheduleCallback=function(P,oe,Y){var ve=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ve+Y:ve):Y=ve,P){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=Y+T,P={id:p++,callback:oe,priorityLevel:P,startTime:Y,expirationTime:T,sortIndex:-1},Y>ve?(P.sortIndex=Y,e(m,P),r(h)===null&&P===r(m)&&(w?(A($),$=-1):w=!0,he(R,Y-ve))):(P.sortIndex=T,e(h,P),_||b||(_=!0,L||(L=!0,ce()))),P},t.unstable_shouldYield=ae,t.unstable_wrapCallback=function(P){var oe=y;return function(){var Y=y;y=oe;try{return P.apply(this,arguments)}finally{y=Y}}}}(Vd)),Vd}var ip;function P2(){return ip||(ip=1,zd.exports=B2()),zd.exports}var Hd={exports:{}},dr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sp;function k2(){if(sp)return dr;sp=1;var t=Lf();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(h,m,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:h,containerInfo:m,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return dr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,dr.createPortal=function(h,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return s(h,m,null,p)},dr.flushSync=function(h){var m=l.T,p=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=m,n.p=p,n.d.f()}},dr.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(h,m))},dr.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},dr.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var p=m.as,v=d(p,m.crossOrigin),y=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?n.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:b}):p==="script"&&n.d.X(h,{crossOrigin:v,integrity:y,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},dr.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=d(m.as,m.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(h)},dr.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,v=d(p,m.crossOrigin);n.d.L(h,p,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},dr.preloadModule=function(h,m){if(typeof h=="string")if(m){var p=d(m.as,m.crossOrigin);n.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(h)},dr.requestFormReset=function(h){n.d.r(h)},dr.unstable_batchedUpdates=function(h,m){return h(m)},dr.useFormState=function(h,m,p){return l.H.useFormState(h,m,p)},dr.useFormStatus=function(){return l.H.useHostTransitionStatus()},dr.version="19.1.0",dr}var op;function L2(){if(op)return Hd.exports;op=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hd.exports=k2(),Hd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lp;function F2(){if(lp)return Js;lp=1;var t=P2(),e=Lf(),r=L2();function n(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function s(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function l(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function d(i){if(s(i)!==i)throw Error(n(188))}function h(i){var o=i.alternate;if(!o){if(o=s(i),o===null)throw Error(n(188));return o!==i?null:i}for(var u=i,f=o;;){var x=u.return;if(x===null)break;var g=x.alternate;if(g===null){if(f=x.return,f!==null){u=f;continue}break}if(x.child===g.child){for(g=x.child;g;){if(g===u)return d(x),i;if(g===f)return d(x),o;g=g.sibling}throw Error(n(188))}if(u.return!==f.return)u=x,f=g;else{for(var N=!1,S=x.child;S;){if(S===u){N=!0,u=x,f=g;break}if(S===f){N=!0,f=x,u=g;break}S=S.sibling}if(!N){for(S=g.child;S;){if(S===u){N=!0,u=g,f=x;break}if(S===f){N=!0,f=g,u=x;break}S=S.sibling}if(!N)throw Error(n(189))}}if(u.alternate!==f)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?i:o}function m(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=m(i),o!==null)return o;i=i.sibling}return null}var p=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),j=Symbol.for("react.provider"),A=Symbol.for("react.consumer"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),J=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function ce(i){return i===null||typeof i!="object"?null:(i=be&&i[be]||i["@@iterator"],typeof i=="function"?i:null)}var me=Symbol.for("react.client.reference");function _e(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===me?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case _:return"Fragment";case E:return"Profiler";case w:return"StrictMode";case R:return"Suspense";case L:return"SuspenseList";case J:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case C:return(i.displayName||"Context")+".Provider";case A:return(i._context.displayName||"Context")+".Consumer";case D:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case $:return o=i.displayName||null,o!==null?o:_e(i.type)||"Memo";case W:o=i._payload,i=i._init;try{return _e(i(o))}catch{}}return null}var he=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},ve=[],T=-1;function V(i){return{current:i}}function ue(i){0>T||(i.current=ve[T],ve[T]=null,T--)}function fe(i,o){T++,ve[T]=i.current,i.current=o}var U=V(null),k=V(null),de=V(null),Ge=V(null);function Ze(i,o){switch(fe(de,o),fe(k,i),fe(U,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?jm(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=jm(o),i=Om(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ue(U),fe(U,i)}function Rt(){ue(U),ue(k),ue(de)}function Pr(i){i.memoizedState!==null&&fe(Ge,i);var o=U.current,u=Om(o,i.type);o!==u&&(fe(k,i),fe(U,u))}function tr(i){k.current===i&&(ue(U),ue(k)),Ge.current===i&&(ue(Ge),qs._currentValue=Y)}var ne=Object.prototype.hasOwnProperty,je=t.unstable_scheduleCallback,rt=t.unstable_cancelCallback,wt=t.unstable_shouldYield,$n=t.unstable_requestPaint,kr=t.unstable_now,ts=t.unstable_getCurrentPriorityLevel,rs=t.unstable_ImmediatePriority,M=t.unstable_UserBlockingPriority,X=t.unstable_NormalPriority,re=t.unstable_LowPriority,we=t.unstable_IdlePriority,ge=t.log,pe=t.unstable_setDisableYieldValue,Se=null,Be=null;function Xe(i){if(typeof ge=="function"&&pe(i),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(Se,i)}catch{}}var ht=Math.clz32?Math.clz32:Sc,ii=Math.log,gn=Math.LN2;function Sc(i){return i>>>=0,i===0?32:31-(ii(i)/gn|0)|0}var Yn=256,Kn=4194304;function Tn(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Sa(i,o,u){var f=i.pendingLanes;if(f===0)return 0;var x=0,g=i.suspendedLanes,N=i.pingedLanes;i=i.warmLanes;var S=f&134217727;return S!==0?(f=S&~g,f!==0?x=Tn(f):(N&=S,N!==0?x=Tn(N):u||(u=S&~i,u!==0&&(x=Tn(u))))):(S=f&~g,S!==0?x=Tn(S):N!==0?x=Tn(N):u||(u=f&~i,u!==0&&(x=Tn(u)))),x===0?0:o!==0&&o!==x&&(o&g)===0&&(g=x&-x,u=o&-o,g>=u||g===32&&(u&4194048)!==0)?o:x}function Ca(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function So(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d0(){var i=Yn;return Yn<<=1,(Yn&4194048)===0&&(Yn=256),i}function f0(){var i=Kn;return Kn<<=1,(Kn&62914560)===0&&(Kn=4194304),i}function Cc(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function ns(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function yg(i,o,u,f,x,g){var N=i.pendingLanes;i.pendingLanes=u,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=u,i.entangledLanes&=u,i.errorRecoveryDisabledLanes&=u,i.shellSuspendCounter=0;var S=i.entanglements,I=i.expirationTimes,G=i.hiddenUpdates;for(u=N&~u;0<u;){var te=31-ht(u),se=1<<te;S[te]=0,I[te]=-1;var q=G[te];if(q!==null)for(G[te]=null,te=0;te<q.length;te++){var K=q[te];K!==null&&(K.lane&=-536870913)}u&=~se}f!==0&&h0(i,f,0),g!==0&&x===0&&i.tag!==0&&(i.suspendedLanes|=g&~(N&~o))}function h0(i,o,u){i.pendingLanes|=o,i.suspendedLanes&=~o;var f=31-ht(o);i.entangledLanes|=o,i.entanglements[f]=i.entanglements[f]|1073741824|u&4194090}function m0(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var f=31-ht(u),x=1<<f;x&o|i[f]&o&&(i[f]|=o),u&=~x}}function jc(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Oc(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function p0(){var i=oe.p;return i!==0?i:(i=window.event,i===void 0?32:$m(i.type))}function bg(i,o){var u=oe.p;try{return oe.p=i,o()}finally{oe.p=u}}var Wn=Math.random().toString(36).slice(2),cr="__reactFiber$"+Wn,Ar="__reactProps$"+Wn,si="__reactContainer$"+Wn,Tc="__reactEvents$"+Wn,_g="__reactListeners$"+Wn,wg="__reactHandles$"+Wn,x0="__reactResources$"+Wn,as="__reactMarker$"+Wn;function Dc(i){delete i[cr],delete i[Ar],delete i[Tc],delete i[_g],delete i[wg]}function oi(i){var o=i[cr];if(o)return o;for(var u=i.parentNode;u;){if(o=u[si]||u[cr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Im(i);i!==null;){if(u=i[cr])return u;i=Im(i)}return o}i=u,u=i.parentNode}return null}function li(i){if(i=i[cr]||i[si]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function is(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(n(33))}function ci(i){var o=i[x0];return o||(o=i[x0]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Xt(i){i[as]=!0}var v0=new Set,g0={};function ja(i,o){ui(i,o),ui(i+"Capture",o)}function ui(i,o){for(g0[i]=o,i=0;i<o.length;i++)v0.add(o[i])}var Ag=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),y0={},b0={};function Ng(i){return ne.call(b0,i)?!0:ne.call(y0,i)?!1:Ag.test(i)?b0[i]=!0:(y0[i]=!0,!1)}function Co(i,o,u){if(Ng(o))if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+u)}}function jo(i,o,u){if(u===null)i.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+u)}}function Dn(i,o,u,f){if(f===null)i.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(u);return}i.setAttributeNS(o,u,""+f)}}var Rc,_0;function di(i){if(Rc===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Rc=o&&o[1]||"",_0=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rc+i+_0}var Ic=!1;function Mc(i,o){if(!i||Ic)return"";Ic=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(K){var q=K}Reflect.construct(i,[],se)}else{try{se.call()}catch(K){q=K}i.call(se.prototype)}}else{try{throw Error()}catch(K){q=K}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(K){if(K&&q&&typeof K.stack=="string")return[K.stack,q.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=f.DetermineComponentFrameRoot(),N=g[0],S=g[1];if(N&&S){var I=N.split(`
`),G=S.split(`
`);for(x=f=0;f<I.length&&!I[f].includes("DetermineComponentFrameRoot");)f++;for(;x<G.length&&!G[x].includes("DetermineComponentFrameRoot");)x++;if(f===I.length||x===G.length)for(f=I.length-1,x=G.length-1;1<=f&&0<=x&&I[f]!==G[x];)x--;for(;1<=f&&0<=x;f--,x--)if(I[f]!==G[x]){if(f!==1||x!==1)do if(f--,x--,0>x||I[f]!==G[x]){var te=`
`+I[f].replace(" at new "," at ");return i.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",i.displayName)),te}while(1<=f&&0<=x);break}}}finally{Ic=!1,Error.prepareStackTrace=u}return(u=i?i.displayName||i.name:"")?di(u):""}function Eg(i){switch(i.tag){case 26:case 27:case 5:return di(i.type);case 16:return di("Lazy");case 13:return di("Suspense");case 19:return di("SuspenseList");case 0:case 15:return Mc(i.type,!1);case 11:return Mc(i.type.render,!1);case 1:return Mc(i.type,!0);case 31:return di("Activity");default:return""}}function w0(i){try{var o="";do o+=Eg(i),i=i.return;while(i);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Xr(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function A0(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Sg(i){var o=A0(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var x=u.get,g=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return x.call(this)},set:function(N){f=""+N,g.call(this,N)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(N){f=""+N},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Oo(i){i._valueTracker||(i._valueTracker=Sg(i))}function N0(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return i&&(f=A0(i)?i.checked?"true":"false":i.value),i=f,i!==u?(o.setValue(i),!0):!1}function To(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Cg=/[\n"\\]/g;function qr(i){return i.replace(Cg,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Bc(i,o,u,f,x,g,N,S){i.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?i.type=N:i.removeAttribute("type"),o!=null?N==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Xr(o)):i.value!==""+Xr(o)&&(i.value=""+Xr(o)):N!=="submit"&&N!=="reset"||i.removeAttribute("value"),o!=null?Pc(i,N,Xr(o)):u!=null?Pc(i,N,Xr(u)):f!=null&&i.removeAttribute("value"),x==null&&g!=null&&(i.defaultChecked=!!g),x!=null&&(i.checked=x&&typeof x!="function"&&typeof x!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+Xr(S):i.removeAttribute("name")}function E0(i,o,u,f,x,g,N,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),o!=null||u!=null){if(!(g!=="submit"&&g!=="reset"||o!=null))return;u=u!=null?""+Xr(u):"",o=o!=null?""+Xr(o):u,S||o===i.value||(i.value=o),i.defaultValue=o}f=f??x,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=S?i.checked:!!f,i.defaultChecked=!!f,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(i.name=N)}function Pc(i,o,u){o==="number"&&To(i.ownerDocument)===i||i.defaultValue===""+u||(i.defaultValue=""+u)}function fi(i,o,u,f){if(i=i.options,o){o={};for(var x=0;x<u.length;x++)o["$"+u[x]]=!0;for(u=0;u<i.length;u++)x=o.hasOwnProperty("$"+i[u].value),i[u].selected!==x&&(i[u].selected=x),x&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Xr(u),o=null,x=0;x<i.length;x++){if(i[x].value===u){i[x].selected=!0,f&&(i[x].defaultSelected=!0);return}o!==null||i[x].disabled||(o=i[x])}o!==null&&(o.selected=!0)}}function S0(i,o,u){if(o!=null&&(o=""+Xr(o),o!==i.value&&(i.value=o),u==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=u!=null?""+Xr(u):""}function C0(i,o,u,f){if(o==null){if(f!=null){if(u!=null)throw Error(n(92));if(he(f)){if(1<f.length)throw Error(n(93));f=f[0]}u=f}u==null&&(u=""),o=u}u=Xr(o),i.defaultValue=u,f=i.textContent,f===u&&f!==""&&f!==null&&(i.value=f)}function hi(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var jg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function j0(i,o,u){var f=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":f?i.setProperty(o,u):typeof u!="number"||u===0||jg.has(o)?o==="float"?i.cssFloat=u:i[o]=(""+u).trim():i[o]=u+"px"}function O0(i,o,u){if(o!=null&&typeof o!="object")throw Error(n(62));if(i=i.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var x in o)f=o[x],o.hasOwnProperty(x)&&u[x]!==f&&j0(i,x,f)}else for(var g in o)o.hasOwnProperty(g)&&j0(i,g,o[g])}function kc(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Og=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Do(i){return Tg.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Lc=null;function Fc(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mi=null,pi=null;function T0(i){var o=li(i);if(o&&(i=o.stateNode)){var u=i[Ar]||null;e:switch(i=o.stateNode,o.type){case"input":if(Bc(i,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+qr(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==i&&f.form===i.form){var x=f[Ar]||null;if(!x)throw Error(n(90));Bc(f,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(o=0;o<u.length;o++)f=u[o],f.form===i.form&&N0(f)}break e;case"textarea":S0(i,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&fi(i,!!u.multiple,o,!1)}}}var Uc=!1;function D0(i,o,u){if(Uc)return i(o,u);Uc=!0;try{var f=i(o);return f}finally{if(Uc=!1,(mi!==null||pi!==null)&&(xl(),mi&&(o=mi,i=pi,pi=mi=null,T0(o),i)))for(o=0;o<i.length;o++)T0(i[o])}}function ss(i,o){var u=i.stateNode;if(u===null)return null;var f=u[Ar]||null;if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zc=!1;if(Rn)try{var os={};Object.defineProperty(os,"passive",{get:function(){zc=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{zc=!1}var Qn=null,Vc=null,Ro=null;function R0(){if(Ro)return Ro;var i,o=Vc,u=o.length,f,x="value"in Qn?Qn.value:Qn.textContent,g=x.length;for(i=0;i<u&&o[i]===x[i];i++);var N=u-i;for(f=1;f<=N&&o[u-f]===x[g-f];f++);return Ro=x.slice(i,1<f?1-f:void 0)}function Io(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Mo(){return!0}function I0(){return!1}function Nr(i){function o(u,f,x,g,N){this._reactName=u,this._targetInst=x,this.type=f,this.nativeEvent=g,this.target=N,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(u=i[S],this[S]=u?u(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Mo:I0,this.isPropagationStopped=I0,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Mo)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Mo)},persist:function(){},isPersistent:Mo}),o}var Oa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bo=Nr(Oa),ls=p({},Oa,{view:0,detail:0}),Dg=Nr(ls),Hc,Gc,cs,Po=p({},ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==cs&&(cs&&i.type==="mousemove"?(Hc=i.screenX-cs.screenX,Gc=i.screenY-cs.screenY):Gc=Hc=0,cs=i),Hc)},movementY:function(i){return"movementY"in i?i.movementY:Gc}}),M0=Nr(Po),Rg=p({},Po,{dataTransfer:0}),Ig=Nr(Rg),Mg=p({},ls,{relatedTarget:0}),Zc=Nr(Mg),Bg=p({},Oa,{animationName:0,elapsedTime:0,pseudoElement:0}),Pg=Nr(Bg),kg=p({},Oa,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Lg=Nr(kg),Fg=p({},Oa,{data:0}),B0=Nr(Fg),Ug={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hg(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Vg[i])?!!o[i]:!1}function Xc(){return Hg}var Gg=p({},ls,{key:function(i){if(i.key){var o=Ug[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Io(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?zg[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xc,charCode:function(i){return i.type==="keypress"?Io(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Io(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Zg=Nr(Gg),Xg=p({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P0=Nr(Xg),qg=p({},ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xc}),$g=Nr(qg),Yg=p({},Oa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kg=Nr(Yg),Wg=p({},Po,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Qg=Nr(Wg),Jg=p({},Oa,{newState:0,oldState:0}),ey=Nr(Jg),ty=[9,13,27,32],qc=Rn&&"CompositionEvent"in window,us=null;Rn&&"documentMode"in document&&(us=document.documentMode);var ry=Rn&&"TextEvent"in window&&!us,k0=Rn&&(!qc||us&&8<us&&11>=us),L0=" ",F0=!1;function U0(i,o){switch(i){case"keyup":return ty.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z0(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var xi=!1;function ny(i,o){switch(i){case"compositionend":return z0(o);case"keypress":return o.which!==32?null:(F0=!0,L0);case"textInput":return i=o.data,i===L0&&F0?null:i;default:return null}}function ay(i,o){if(xi)return i==="compositionend"||!qc&&U0(i,o)?(i=R0(),Ro=Vc=Qn=null,xi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return k0&&o.locale!=="ko"?null:o.data;default:return null}}var iy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function V0(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!iy[i.type]:o==="textarea"}function H0(i,o,u,f){mi?pi?pi.push(f):pi=[f]:mi=f,o=wl(o,"onChange"),0<o.length&&(u=new Bo("onChange","change",null,u,f),i.push({event:u,listeners:o}))}var ds=null,fs=null;function sy(i){Am(i,0)}function ko(i){var o=is(i);if(N0(o))return i}function G0(i,o){if(i==="change")return o}var Z0=!1;if(Rn){var $c;if(Rn){var Yc="oninput"in document;if(!Yc){var X0=document.createElement("div");X0.setAttribute("oninput","return;"),Yc=typeof X0.oninput=="function"}$c=Yc}else $c=!1;Z0=$c&&(!document.documentMode||9<document.documentMode)}function q0(){ds&&(ds.detachEvent("onpropertychange",$0),fs=ds=null)}function $0(i){if(i.propertyName==="value"&&ko(fs)){var o=[];H0(o,fs,i,Fc(i)),D0(sy,o)}}function oy(i,o,u){i==="focusin"?(q0(),ds=o,fs=u,ds.attachEvent("onpropertychange",$0)):i==="focusout"&&q0()}function ly(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ko(fs)}function cy(i,o){if(i==="click")return ko(o)}function uy(i,o){if(i==="input"||i==="change")return ko(o)}function dy(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Lr=typeof Object.is=="function"?Object.is:dy;function hs(i,o){if(Lr(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var x=u[f];if(!ne.call(o,x)||!Lr(i[x],o[x]))return!1}return!0}function Y0(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function K0(i,o){var u=Y0(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=o&&f>=o)return{node:u,offset:o-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Y0(u)}}function W0(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?W0(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Q0(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=To(i.document);o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=To(i.document)}return o}function Kc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var fy=Rn&&"documentMode"in document&&11>=document.documentMode,vi=null,Wc=null,ms=null,Qc=!1;function J0(i,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Qc||vi==null||vi!==To(f)||(f=vi,"selectionStart"in f&&Kc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),ms&&hs(ms,f)||(ms=f,f=wl(Wc,"onSelect"),0<f.length&&(o=new Bo("onSelect","select",null,o,u),i.push({event:o,listeners:f}),o.target=vi)))}function Ta(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var gi={animationend:Ta("Animation","AnimationEnd"),animationiteration:Ta("Animation","AnimationIteration"),animationstart:Ta("Animation","AnimationStart"),transitionrun:Ta("Transition","TransitionRun"),transitionstart:Ta("Transition","TransitionStart"),transitioncancel:Ta("Transition","TransitionCancel"),transitionend:Ta("Transition","TransitionEnd")},Jc={},eh={};Rn&&(eh=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function Da(i){if(Jc[i])return Jc[i];if(!gi[i])return i;var o=gi[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in eh)return Jc[i]=o[u];return i}var th=Da("animationend"),rh=Da("animationiteration"),nh=Da("animationstart"),hy=Da("transitionrun"),my=Da("transitionstart"),py=Da("transitioncancel"),ah=Da("transitionend"),ih=new Map,eu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eu.push("scrollEnd");function an(i,o){ih.set(i,o),ja(o,[i])}var sh=new WeakMap;function $r(i,o){if(typeof i=="object"&&i!==null){var u=sh.get(i);return u!==void 0?u:(o={value:i,source:o,stack:w0(o)},sh.set(i,o),o)}return{value:i,source:o,stack:w0(o)}}var Yr=[],yi=0,tu=0;function Lo(){for(var i=yi,o=tu=yi=0;o<i;){var u=Yr[o];Yr[o++]=null;var f=Yr[o];Yr[o++]=null;var x=Yr[o];Yr[o++]=null;var g=Yr[o];if(Yr[o++]=null,f!==null&&x!==null){var N=f.pending;N===null?x.next=x:(x.next=N.next,N.next=x),f.pending=x}g!==0&&oh(u,x,g)}}function Fo(i,o,u,f){Yr[yi++]=i,Yr[yi++]=o,Yr[yi++]=u,Yr[yi++]=f,tu|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function ru(i,o,u,f){return Fo(i,o,u,f),Uo(i)}function bi(i,o){return Fo(i,null,null,o),Uo(i)}function oh(i,o,u){i.lanes|=u;var f=i.alternate;f!==null&&(f.lanes|=u);for(var x=!1,g=i.return;g!==null;)g.childLanes|=u,f=g.alternate,f!==null&&(f.childLanes|=u),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(x=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,x&&o!==null&&(x=31-ht(u),i=g.hiddenUpdates,f=i[x],f===null?i[x]=[o]:f.push(o),o.lane=u|536870912),g):null}function Uo(i){if(50<Fs)throw Fs=0,ld=null,Error(n(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var _i={};function xy(i,o,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(i,o,u,f){return new xy(i,o,u,f)}function nu(i){return i=i.prototype,!(!i||!i.isReactComponent)}function In(i,o){var u=i.alternate;return u===null?(u=Fr(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&65011712,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u.refCleanup=i.refCleanup,u}function lh(i,o){i.flags&=65011714;var u=i.alternate;return u===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,o=u.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function zo(i,o,u,f,x,g){var N=0;if(f=i,typeof i=="function")nu(i)&&(N=1);else if(typeof i=="string")N=g2(i,u,U.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case J:return i=Fr(31,u,o,x),i.elementType=J,i.lanes=g,i;case _:return Ra(u.children,x,g,o);case w:N=8,x|=24;break;case E:return i=Fr(12,u,o,x|2),i.elementType=E,i.lanes=g,i;case R:return i=Fr(13,u,o,x),i.elementType=R,i.lanes=g,i;case L:return i=Fr(19,u,o,x),i.elementType=L,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:case C:N=10;break e;case A:N=9;break e;case D:N=11;break e;case $:N=14;break e;case W:N=16,f=null;break e}N=29,u=Error(n(130,i===null?"null":typeof i,"")),f=null}return o=Fr(N,u,o,x),o.elementType=i,o.type=f,o.lanes=g,o}function Ra(i,o,u,f){return i=Fr(7,i,f,o),i.lanes=u,i}function au(i,o,u){return i=Fr(6,i,null,o),i.lanes=u,i}function iu(i,o,u){return o=Fr(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var wi=[],Ai=0,Vo=null,Ho=0,Kr=[],Wr=0,Ia=null,Mn=1,Bn="";function Ma(i,o){wi[Ai++]=Ho,wi[Ai++]=Vo,Vo=i,Ho=o}function ch(i,o,u){Kr[Wr++]=Mn,Kr[Wr++]=Bn,Kr[Wr++]=Ia,Ia=i;var f=Mn;i=Bn;var x=32-ht(f)-1;f&=~(1<<x),u+=1;var g=32-ht(o)+x;if(30<g){var N=x-x%5;g=(f&(1<<N)-1).toString(32),f>>=N,x-=N,Mn=1<<32-ht(o)+x|u<<x|f,Bn=g+i}else Mn=1<<g|u<<x|f,Bn=i}function su(i){i.return!==null&&(Ma(i,1),ch(i,1,0))}function ou(i){for(;i===Vo;)Vo=wi[--Ai],wi[Ai]=null,Ho=wi[--Ai],wi[Ai]=null;for(;i===Ia;)Ia=Kr[--Wr],Kr[Wr]=null,Bn=Kr[--Wr],Kr[Wr]=null,Mn=Kr[--Wr],Kr[Wr]=null}var xr=null,Et=null,Qe=!1,Ba=null,yn=!1,lu=Error(n(519));function Pa(i){var o=Error(n(418,""));throw vs($r(o,i)),lu}function uh(i){var o=i.stateNode,u=i.type,f=i.memoizedProps;switch(o[cr]=i,o[Ar]=f,u){case"dialog":He("cancel",o),He("close",o);break;case"iframe":case"object":case"embed":He("load",o);break;case"video":case"audio":for(u=0;u<zs.length;u++)He(zs[u],o);break;case"source":He("error",o);break;case"img":case"image":case"link":He("error",o),He("load",o);break;case"details":He("toggle",o);break;case"input":He("invalid",o),E0(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),Oo(o);break;case"select":He("invalid",o);break;case"textarea":He("invalid",o),C0(o,f.value,f.defaultValue,f.children),Oo(o)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||f.suppressHydrationWarning===!0||Cm(o.textContent,u)?(f.popover!=null&&(He("beforetoggle",o),He("toggle",o)),f.onScroll!=null&&He("scroll",o),f.onScrollEnd!=null&&He("scrollend",o),f.onClick!=null&&(o.onclick=Al),o=!0):o=!1,o||Pa(i)}function dh(i){for(xr=i.return;xr;)switch(xr.tag){case 5:case 13:yn=!1;return;case 27:case 3:yn=!0;return;default:xr=xr.return}}function ps(i){if(i!==xr)return!1;if(!Qe)return dh(i),Qe=!0,!1;var o=i.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=i.type,u=!(u!=="form"&&u!=="button")||Nd(i.type,i.memoizedProps)),u=!u),u&&Et&&Pa(i),dh(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(u=i.data,u==="/$"){if(o===0){Et=on(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++;i=i.nextSibling}Et=null}}else o===27?(o=Et,ma(i.type)?(i=jd,jd=null,Et=i):Et=o):Et=xr?on(i.stateNode.nextSibling):null;return!0}function xs(){Et=xr=null,Qe=!1}function fh(){var i=Ba;return i!==null&&(Cr===null?Cr=i:Cr.push.apply(Cr,i),Ba=null),i}function vs(i){Ba===null?Ba=[i]:Ba.push(i)}var cu=V(null),ka=null,Pn=null;function Jn(i,o,u){fe(cu,o._currentValue),o._currentValue=u}function kn(i){i._currentValue=cu.current,ue(cu)}function uu(i,o,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===u)break;i=i.return}}function du(i,o,u,f){var x=i.child;for(x!==null&&(x.return=i);x!==null;){var g=x.dependencies;if(g!==null){var N=x.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=x;for(var I=0;I<o.length;I++)if(S.context===o[I]){g.lanes|=u,S=g.alternate,S!==null&&(S.lanes|=u),uu(g.return,u,i),f||(N=null);break e}g=S.next}}else if(x.tag===18){if(N=x.return,N===null)throw Error(n(341));N.lanes|=u,g=N.alternate,g!==null&&(g.lanes|=u),uu(N,u,i),N=null}else N=x.child;if(N!==null)N.return=x;else for(N=x;N!==null;){if(N===i){N=null;break}if(x=N.sibling,x!==null){x.return=N.return,N=x;break}N=N.return}x=N}}function gs(i,o,u,f){i=null;for(var x=o,g=!1;x!==null;){if(!g){if((x.flags&524288)!==0)g=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var N=x.alternate;if(N===null)throw Error(n(387));if(N=N.memoizedProps,N!==null){var S=x.type;Lr(x.pendingProps.value,N.value)||(i!==null?i.push(S):i=[S])}}else if(x===Ge.current){if(N=x.alternate,N===null)throw Error(n(387));N.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(i!==null?i.push(qs):i=[qs])}x=x.return}i!==null&&du(o,i,u,f),o.flags|=262144}function Go(i){for(i=i.firstContext;i!==null;){if(!Lr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function La(i){ka=i,Pn=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ur(i){return hh(ka,i)}function Zo(i,o){return ka===null&&La(i),hh(i,o)}function hh(i,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Pn===null){if(i===null)throw Error(n(308));Pn=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Pn=Pn.next=o;return u}var vy=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(u,f){i.push(f)}};this.abort=function(){o.aborted=!0,i.forEach(function(u){return u()})}},gy=t.unstable_scheduleCallback,yy=t.unstable_NormalPriority,kt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fu(){return{controller:new vy,data:new Map,refCount:0}}function ys(i){i.refCount--,i.refCount===0&&gy(yy,function(){i.controller.abort()})}var bs=null,hu=0,Ni=0,Ei=null;function by(i,o){if(bs===null){var u=bs=[];hu=0,Ni=pd(),Ei={status:"pending",value:void 0,then:function(f){u.push(f)}}}return hu++,o.then(mh,mh),o}function mh(){if(--hu===0&&bs!==null){Ei!==null&&(Ei.status="fulfilled");var i=bs;bs=null,Ni=0,Ei=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function _y(i,o){var u=[],f={status:"pending",value:null,reason:null,then:function(x){u.push(x)}};return i.then(function(){f.status="fulfilled",f.value=o;for(var x=0;x<u.length;x++)(0,u[x])(o)},function(x){for(f.status="rejected",f.reason=x,x=0;x<u.length;x++)(0,u[x])(void 0)}),f}var ph=P.S;P.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&by(i,o),ph!==null&&ph(i,o)};var Fa=V(null);function mu(){var i=Fa.current;return i!==null?i:mt.pooledCache}function Xo(i,o){o===null?fe(Fa,Fa.current):fe(Fa,o.pool)}function xh(){var i=mu();return i===null?null:{parent:kt._currentValue,pool:i}}var _s=Error(n(460)),vh=Error(n(474)),qo=Error(n(542)),pu={then:function(){}};function gh(i){return i=i.status,i==="fulfilled"||i==="rejected"}function $o(){}function yh(i,o,u){switch(u=i[u],u===void 0?i.push(o):u!==o&&(o.then($o,$o),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,_h(i),i;default:if(typeof o.status=="string")o.then($o,$o);else{if(i=mt,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=o,i.status="pending",i.then(function(f){if(o.status==="pending"){var x=o;x.status="fulfilled",x.value=f}},function(f){if(o.status==="pending"){var x=o;x.status="rejected",x.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,_h(i),i}throw ws=o,_s}}var ws=null;function bh(){if(ws===null)throw Error(n(459));var i=ws;return ws=null,i}function _h(i){if(i===_s||i===qo)throw Error(n(483))}var ea=!1;function xu(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vu(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ta(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ra(i,o,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(nt&2)!==0){var x=f.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),f.pending=o,o=Uo(i),oh(i,null,u),o}return Fo(i,f,o,u),Uo(i)}function As(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,m0(i,u)}}function gu(i,o){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var x=null,g=null;if(u=u.firstBaseUpdate,u!==null){do{var N={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};g===null?x=g=N:g=g.next=N,u=u.next}while(u!==null);g===null?x=g=o:g=g.next=o}else x=g=o;u={baseState:f.baseState,firstBaseUpdate:x,lastBaseUpdate:g,shared:f.shared,callbacks:f.callbacks},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}var yu=!1;function Ns(){if(yu){var i=Ei;if(i!==null)throw i}}function Es(i,o,u,f){yu=!1;var x=i.updateQueue;ea=!1;var g=x.firstBaseUpdate,N=x.lastBaseUpdate,S=x.shared.pending;if(S!==null){x.shared.pending=null;var I=S,G=I.next;I.next=null,N===null?g=G:N.next=G,N=I;var te=i.alternate;te!==null&&(te=te.updateQueue,S=te.lastBaseUpdate,S!==N&&(S===null?te.firstBaseUpdate=G:S.next=G,te.lastBaseUpdate=I))}if(g!==null){var se=x.baseState;N=0,te=G=I=null,S=g;do{var q=S.lane&-536870913,K=q!==S.lane;if(K?(qe&q)===q:(f&q)===q){q!==0&&q===Ni&&(yu=!0),te!==null&&(te=te.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Me=i,Re=S;q=o;var ct=u;switch(Re.tag){case 1:if(Me=Re.payload,typeof Me=="function"){se=Me.call(ct,se,q);break e}se=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=Re.payload,q=typeof Me=="function"?Me.call(ct,se,q):Me,q==null)break e;se=p({},se,q);break e;case 2:ea=!0}}q=S.callback,q!==null&&(i.flags|=64,K&&(i.flags|=8192),K=x.callbacks,K===null?x.callbacks=[q]:K.push(q))}else K={lane:q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},te===null?(G=te=K,I=se):te=te.next=K,N|=q;if(S=S.next,S===null){if(S=x.shared.pending,S===null)break;K=S,S=K.next,K.next=null,x.lastBaseUpdate=K,x.shared.pending=null}}while(!0);te===null&&(I=se),x.baseState=I,x.firstBaseUpdate=G,x.lastBaseUpdate=te,g===null&&(x.shared.lanes=0),ua|=N,i.lanes=N,i.memoizedState=se}}function wh(i,o){if(typeof i!="function")throw Error(n(191,i));i.call(o)}function Ah(i,o){var u=i.callbacks;if(u!==null)for(i.callbacks=null,i=0;i<u.length;i++)wh(u[i],o)}var Si=V(null),Yo=V(0);function Nh(i,o){i=Gn,fe(Yo,i),fe(Si,o),Gn=i|o.baseLanes}function bu(){fe(Yo,Gn),fe(Si,Si.current)}function _u(){Gn=Yo.current,ue(Si),ue(Yo)}var na=0,Le=null,ot=null,It=null,Ko=!1,Ci=!1,Ua=!1,Wo=0,Ss=0,ji=null,wy=0;function Ct(){throw Error(n(321))}function wu(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Lr(i[u],o[u]))return!1;return!0}function Au(i,o,u,f,x,g){return na=g,Le=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,P.H=i===null||i.memoizedState===null?o1:l1,Ua=!1,g=u(f,x),Ua=!1,Ci&&(g=Sh(o,u,f,x)),Eh(i),g}function Eh(i){P.H=nl;var o=ot!==null&&ot.next!==null;if(na=0,It=ot=Le=null,Ko=!1,Ss=0,ji=null,o)throw Error(n(300));i===null||qt||(i=i.dependencies,i!==null&&Go(i)&&(qt=!0))}function Sh(i,o,u,f){Le=i;var x=0;do{if(Ci&&(ji=null),Ss=0,Ci=!1,25<=x)throw Error(n(301));if(x+=1,It=ot=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}P.H=Oy,g=o(u,f)}while(Ci);return g}function Ay(){var i=P.H,o=i.useState()[0];return o=typeof o.then=="function"?Cs(o):o,i=i.useState()[0],(ot!==null?ot.memoizedState:null)!==i&&(Le.flags|=1024),o}function Nu(){var i=Wo!==0;return Wo=0,i}function Eu(i,o,u){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~u}function Su(i){if(Ko){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Ko=!1}na=0,It=ot=Le=null,Ci=!1,Ss=Wo=0,ji=null}function Er(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Le.memoizedState=It=i:It=It.next=i,It}function Mt(){if(ot===null){var i=Le.alternate;i=i!==null?i.memoizedState:null}else i=ot.next;var o=It===null?Le.memoizedState:It.next;if(o!==null)It=o,ot=i;else{if(i===null)throw Le.alternate===null?Error(n(467)):Error(n(310));ot=i,i={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},It===null?Le.memoizedState=It=i:It=It.next=i}return It}function Cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cs(i){var o=Ss;return Ss+=1,ji===null&&(ji=[]),i=yh(ji,i,o),o=Le,(It===null?o.memoizedState:It.next)===null&&(o=o.alternate,P.H=o===null||o.memoizedState===null?o1:l1),i}function Qo(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Cs(i);if(i.$$typeof===C)return ur(i)}throw Error(n(438,String(i)))}function ju(i){var o=null,u=Le.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var f=Le.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(x){return x.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Cu(),Le.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(i),f=0;f<i;f++)u[f]=ae;return o.index++,u}function Ln(i,o){return typeof o=="function"?o(i):o}function Jo(i){var o=Mt();return Ou(o,ot,i)}function Ou(i,o,u){var f=i.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=u;var x=i.baseQueue,g=f.pending;if(g!==null){if(x!==null){var N=x.next;x.next=g.next,g.next=N}o.baseQueue=x=g,f.pending=null}if(g=i.baseState,x===null)i.memoizedState=g;else{o=x.next;var S=N=null,I=null,G=o,te=!1;do{var se=G.lane&-536870913;if(se!==G.lane?(qe&se)===se:(na&se)===se){var q=G.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),se===Ni&&(te=!0);else if((na&q)===q){G=G.next,q===Ni&&(te=!0);continue}else se={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(S=I=se,N=g):I=I.next=se,Le.lanes|=q,ua|=q;se=G.action,Ua&&u(g,se),g=G.hasEagerState?G.eagerState:u(g,se)}else q={lane:se,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},I===null?(S=I=q,N=g):I=I.next=q,Le.lanes|=se,ua|=se;G=G.next}while(G!==null&&G!==o);if(I===null?N=g:I.next=S,!Lr(g,i.memoizedState)&&(qt=!0,te&&(u=Ei,u!==null)))throw u;i.memoizedState=g,i.baseState=N,i.baseQueue=I,f.lastRenderedState=g}return x===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Tu(i){var o=Mt(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=i;var f=u.dispatch,x=u.pending,g=o.memoizedState;if(x!==null){u.pending=null;var N=x=x.next;do g=i(g,N.action),N=N.next;while(N!==x);Lr(g,o.memoizedState)||(qt=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),u.lastRenderedState=g}return[g,f]}function Ch(i,o,u){var f=Le,x=Mt(),g=Qe;if(g){if(u===void 0)throw Error(n(407));u=u()}else u=o();var N=!Lr((ot||x).memoizedState,u);N&&(x.memoizedState=u,qt=!0),x=x.queue;var S=Th.bind(null,f,x,i);if(js(2048,8,S,[i]),x.getSnapshot!==o||N||It!==null&&It.memoizedState.tag&1){if(f.flags|=2048,Oi(9,el(),Oh.bind(null,f,x,u,o),null),mt===null)throw Error(n(349));g||(na&124)!==0||jh(f,o,u)}return u}function jh(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Le.updateQueue,o===null?(o=Cu(),Le.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function Oh(i,o,u,f){o.value=u,o.getSnapshot=f,Dh(o)&&Rh(i)}function Th(i,o,u){return u(function(){Dh(o)&&Rh(i)})}function Dh(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Lr(i,u)}catch{return!0}}function Rh(i){var o=bi(i,2);o!==null&&Gr(o,i,2)}function Du(i){var o=Er();if(typeof i=="function"){var u=i;if(i=u(),Ua){Xe(!0);try{u()}finally{Xe(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:i},o}function Ih(i,o,u,f){return i.baseState=u,Ou(i,ot,typeof f=="function"?f:Ln)}function Ny(i,o,u,f,x){if(rl(i))throw Error(n(485));if(i=o.action,i!==null){var g={payload:x,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){g.listeners.push(N)}};P.T!==null?u(!0):g.isTransition=!1,f(g),u=o.pending,u===null?(g.next=o.pending=g,Mh(o,g)):(g.next=u.next,o.pending=u.next=g)}}function Mh(i,o){var u=o.action,f=o.payload,x=i.state;if(o.isTransition){var g=P.T,N={};P.T=N;try{var S=u(x,f),I=P.S;I!==null&&I(N,S),Bh(i,o,S)}catch(G){Ru(i,o,G)}finally{P.T=g}}else try{g=u(x,f),Bh(i,o,g)}catch(G){Ru(i,o,G)}}function Bh(i,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){Ph(i,o,f)},function(f){return Ru(i,o,f)}):Ph(i,o,u)}function Ph(i,o,u){o.status="fulfilled",o.value=u,kh(o),i.state=u,o=i.pending,o!==null&&(u=o.next,u===o?i.pending=null:(u=u.next,o.next=u,Mh(i,u)))}function Ru(i,o,u){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=u,kh(o),o=o.next;while(o!==f)}i.action=null}function kh(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Lh(i,o){return o}function Fh(i,o){if(Qe){var u=mt.formState;if(u!==null){e:{var f=Le;if(Qe){if(Et){t:{for(var x=Et,g=yn;x.nodeType!==8;){if(!g){x=null;break t}if(x=on(x.nextSibling),x===null){x=null;break t}}g=x.data,x=g==="F!"||g==="F"?x:null}if(x){Et=on(x.nextSibling),f=x.data==="F!";break e}}Pa(f)}f=!1}f&&(o=u[0])}}return u=Er(),u.memoizedState=u.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lh,lastRenderedState:o},u.queue=f,u=a1.bind(null,Le,f),f.dispatch=u,f=Du(!1),g=ku.bind(null,Le,!1,f.queue),f=Er(),x={state:o,dispatch:null,action:i,pending:null},f.queue=x,u=Ny.bind(null,Le,x,g,u),x.dispatch=u,f.memoizedState=i,[o,u,!1]}function Uh(i){var o=Mt();return zh(o,ot,i)}function zh(i,o,u){if(o=Ou(i,o,Lh)[0],i=Jo(Ln)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Cs(o)}catch(N){throw N===_s?qo:N}else f=o;o=Mt();var x=o.queue,g=x.dispatch;return u!==o.memoizedState&&(Le.flags|=2048,Oi(9,el(),Ey.bind(null,x,u),null)),[f,g,i]}function Ey(i,o){i.action=o}function Vh(i){var o=Mt(),u=ot;if(u!==null)return zh(o,u,i);Mt(),o=o.memoizedState,u=Mt();var f=u.queue.dispatch;return u.memoizedState=i,[o,f,!1]}function Oi(i,o,u,f){return i={tag:i,create:u,deps:f,inst:o,next:null},o=Le.updateQueue,o===null&&(o=Cu(),Le.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,o.lastEffect=i),i}function el(){return{destroy:void 0,resource:void 0}}function Hh(){return Mt().memoizedState}function tl(i,o,u,f){var x=Er();f=f===void 0?null:f,Le.flags|=i,x.memoizedState=Oi(1|o,el(),u,f)}function js(i,o,u,f){var x=Mt();f=f===void 0?null:f;var g=x.memoizedState.inst;ot!==null&&f!==null&&wu(f,ot.memoizedState.deps)?x.memoizedState=Oi(o,g,u,f):(Le.flags|=i,x.memoizedState=Oi(1|o,g,u,f))}function Gh(i,o){tl(8390656,8,i,o)}function Zh(i,o){js(2048,8,i,o)}function Xh(i,o){return js(4,2,i,o)}function qh(i,o){return js(4,4,i,o)}function $h(i,o){if(typeof o=="function"){i=i();var u=o(i);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Yh(i,o,u){u=u!=null?u.concat([i]):null,js(4,4,$h.bind(null,o,i),u)}function Iu(){}function Kh(i,o){var u=Mt();o=o===void 0?null:o;var f=u.memoizedState;return o!==null&&wu(o,f[1])?f[0]:(u.memoizedState=[i,o],i)}function Wh(i,o){var u=Mt();o=o===void 0?null:o;var f=u.memoizedState;if(o!==null&&wu(o,f[1]))return f[0];if(f=i(),Ua){Xe(!0);try{i()}finally{Xe(!1)}}return u.memoizedState=[f,o],f}function Mu(i,o,u){return u===void 0||(na&1073741824)!==0?i.memoizedState=o:(i.memoizedState=u,i=em(),Le.lanes|=i,ua|=i,u)}function Qh(i,o,u,f){return Lr(u,o)?u:Si.current!==null?(i=Mu(i,u,f),Lr(i,o)||(qt=!0),i):(na&42)===0?(qt=!0,i.memoizedState=u):(i=em(),Le.lanes|=i,ua|=i,o)}function Jh(i,o,u,f,x){var g=oe.p;oe.p=g!==0&&8>g?g:8;var N=P.T,S={};P.T=S,ku(i,!1,o,u);try{var I=x(),G=P.S;if(G!==null&&G(S,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var te=_y(I,f);Os(i,o,te,Hr(i))}else Os(i,o,f,Hr(i))}catch(se){Os(i,o,{then:function(){},status:"rejected",reason:se},Hr())}finally{oe.p=g,P.T=N}}function Sy(){}function Bu(i,o,u,f){if(i.tag!==5)throw Error(n(476));var x=e1(i).queue;Jh(i,x,o,Y,u===null?Sy:function(){return t1(i),u(f)})}function e1(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:Y},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:u},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function t1(i){var o=e1(i).next.queue;Os(i,o,{},Hr())}function Pu(){return ur(qs)}function r1(){return Mt().memoizedState}function n1(){return Mt().memoizedState}function Cy(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var u=Hr();i=ta(u);var f=ra(o,i,u);f!==null&&(Gr(f,o,u),As(f,o,u)),o={cache:fu()},i.payload=o;return}o=o.return}}function jy(i,o,u){var f=Hr();u={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},rl(i)?i1(o,u):(u=ru(i,o,u,f),u!==null&&(Gr(u,i,f),s1(u,o,f)))}function a1(i,o,u){var f=Hr();Os(i,o,u,f)}function Os(i,o,u,f){var x={lane:f,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(rl(i))i1(o,x);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var N=o.lastRenderedState,S=g(N,u);if(x.hasEagerState=!0,x.eagerState=S,Lr(S,N))return Fo(i,o,x,0),mt===null&&Lo(),!1}catch{}finally{}if(u=ru(i,o,x,f),u!==null)return Gr(u,i,f),s1(u,o,f),!0}return!1}function ku(i,o,u,f){if(f={lane:2,revertLane:pd(),action:f,hasEagerState:!1,eagerState:null,next:null},rl(i)){if(o)throw Error(n(479))}else o=ru(i,u,f,2),o!==null&&Gr(o,i,2)}function rl(i){var o=i.alternate;return i===Le||o!==null&&o===Le}function i1(i,o){Ci=Ko=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function s1(i,o,u){if((u&4194048)!==0){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,m0(i,u)}}var nl={readContext:ur,use:Qo,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct},o1={readContext:ur,use:Qo,useCallback:function(i,o){return Er().memoizedState=[i,o===void 0?null:o],i},useContext:ur,useEffect:Gh,useImperativeHandle:function(i,o,u){u=u!=null?u.concat([i]):null,tl(4194308,4,$h.bind(null,o,i),u)},useLayoutEffect:function(i,o){return tl(4194308,4,i,o)},useInsertionEffect:function(i,o){tl(4,2,i,o)},useMemo:function(i,o){var u=Er();o=o===void 0?null:o;var f=i();if(Ua){Xe(!0);try{i()}finally{Xe(!1)}}return u.memoizedState=[f,o],f},useReducer:function(i,o,u){var f=Er();if(u!==void 0){var x=u(o);if(Ua){Xe(!0);try{u(o)}finally{Xe(!1)}}}else x=o;return f.memoizedState=f.baseState=x,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:x},f.queue=i,i=i.dispatch=jy.bind(null,Le,i),[f.memoizedState,i]},useRef:function(i){var o=Er();return i={current:i},o.memoizedState=i},useState:function(i){i=Du(i);var o=i.queue,u=a1.bind(null,Le,o);return o.dispatch=u,[i.memoizedState,u]},useDebugValue:Iu,useDeferredValue:function(i,o){var u=Er();return Mu(u,i,o)},useTransition:function(){var i=Du(!1);return i=Jh.bind(null,Le,i.queue,!0,!1),Er().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,u){var f=Le,x=Er();if(Qe){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),mt===null)throw Error(n(349));(qe&124)!==0||jh(f,o,u)}x.memoizedState=u;var g={value:u,getSnapshot:o};return x.queue=g,Gh(Th.bind(null,f,g,i),[i]),f.flags|=2048,Oi(9,el(),Oh.bind(null,f,g,u,o),null),u},useId:function(){var i=Er(),o=mt.identifierPrefix;if(Qe){var u=Bn,f=Mn;u=(f&~(1<<32-ht(f)-1)).toString(32)+u,o="«"+o+"R"+u,u=Wo++,0<u&&(o+="H"+u.toString(32)),o+="»"}else u=wy++,o="«"+o+"r"+u.toString(32)+"»";return i.memoizedState=o},useHostTransitionStatus:Pu,useFormState:Fh,useActionState:Fh,useOptimistic:function(i){var o=Er();o.memoizedState=o.baseState=i;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=ku.bind(null,Le,!0,u),u.dispatch=o,[i,o]},useMemoCache:ju,useCacheRefresh:function(){return Er().memoizedState=Cy.bind(null,Le)}},l1={readContext:ur,use:Qo,useCallback:Kh,useContext:ur,useEffect:Zh,useImperativeHandle:Yh,useInsertionEffect:Xh,useLayoutEffect:qh,useMemo:Wh,useReducer:Jo,useRef:Hh,useState:function(){return Jo(Ln)},useDebugValue:Iu,useDeferredValue:function(i,o){var u=Mt();return Qh(u,ot.memoizedState,i,o)},useTransition:function(){var i=Jo(Ln)[0],o=Mt().memoizedState;return[typeof i=="boolean"?i:Cs(i),o]},useSyncExternalStore:Ch,useId:r1,useHostTransitionStatus:Pu,useFormState:Uh,useActionState:Uh,useOptimistic:function(i,o){var u=Mt();return Ih(u,ot,i,o)},useMemoCache:ju,useCacheRefresh:n1},Oy={readContext:ur,use:Qo,useCallback:Kh,useContext:ur,useEffect:Zh,useImperativeHandle:Yh,useInsertionEffect:Xh,useLayoutEffect:qh,useMemo:Wh,useReducer:Tu,useRef:Hh,useState:function(){return Tu(Ln)},useDebugValue:Iu,useDeferredValue:function(i,o){var u=Mt();return ot===null?Mu(u,i,o):Qh(u,ot.memoizedState,i,o)},useTransition:function(){var i=Tu(Ln)[0],o=Mt().memoizedState;return[typeof i=="boolean"?i:Cs(i),o]},useSyncExternalStore:Ch,useId:r1,useHostTransitionStatus:Pu,useFormState:Vh,useActionState:Vh,useOptimistic:function(i,o){var u=Mt();return ot!==null?Ih(u,ot,i,o):(u.baseState=i,[i,u.queue.dispatch])},useMemoCache:ju,useCacheRefresh:n1},Ti=null,Ts=0;function al(i){var o=Ts;return Ts+=1,Ti===null&&(Ti=[]),yh(Ti,i,o)}function Ds(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function il(i,o){throw o.$$typeof===v?Error(n(525)):(i=Object.prototype.toString.call(o),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function c1(i){var o=i._init;return o(i._payload)}function u1(i){function o(F,B){if(i){var H=F.deletions;H===null?(F.deletions=[B],F.flags|=16):H.push(B)}}function u(F,B){if(!i)return null;for(;B!==null;)o(F,B),B=B.sibling;return null}function f(F){for(var B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function x(F,B){return F=In(F,B),F.index=0,F.sibling=null,F}function g(F,B,H){return F.index=H,i?(H=F.alternate,H!==null?(H=H.index,H<B?(F.flags|=67108866,B):H):(F.flags|=67108866,B)):(F.flags|=1048576,B)}function N(F){return i&&F.alternate===null&&(F.flags|=67108866),F}function S(F,B,H,ie){return B===null||B.tag!==6?(B=au(H,F.mode,ie),B.return=F,B):(B=x(B,H),B.return=F,B)}function I(F,B,H,ie){var Ae=H.type;return Ae===_?te(F,B,H.props.children,ie,H.key):B!==null&&(B.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===W&&c1(Ae)===B.type)?(B=x(B,H.props),Ds(B,H),B.return=F,B):(B=zo(H.type,H.key,H.props,null,F.mode,ie),Ds(B,H),B.return=F,B)}function G(F,B,H,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==H.containerInfo||B.stateNode.implementation!==H.implementation?(B=iu(H,F.mode,ie),B.return=F,B):(B=x(B,H.children||[]),B.return=F,B)}function te(F,B,H,ie,Ae){return B===null||B.tag!==7?(B=Ra(H,F.mode,ie,Ae),B.return=F,B):(B=x(B,H),B.return=F,B)}function se(F,B,H){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=au(""+B,F.mode,H),B.return=F,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case y:return H=zo(B.type,B.key,B.props,null,F.mode,H),Ds(H,B),H.return=F,H;case b:return B=iu(B,F.mode,H),B.return=F,B;case W:var ie=B._init;return B=ie(B._payload),se(F,B,H)}if(he(B)||ce(B))return B=Ra(B,F.mode,H,null),B.return=F,B;if(typeof B.then=="function")return se(F,al(B),H);if(B.$$typeof===C)return se(F,Zo(F,B),H);il(F,B)}return null}function q(F,B,H,ie){var Ae=B!==null?B.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ae!==null?null:S(F,B,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case y:return H.key===Ae?I(F,B,H,ie):null;case b:return H.key===Ae?G(F,B,H,ie):null;case W:return Ae=H._init,H=Ae(H._payload),q(F,B,H,ie)}if(he(H)||ce(H))return Ae!==null?null:te(F,B,H,ie,null);if(typeof H.then=="function")return q(F,B,al(H),ie);if(H.$$typeof===C)return q(F,B,Zo(F,H),ie);il(F,H)}return null}function K(F,B,H,ie,Ae){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return F=F.get(H)||null,S(B,F,""+ie,Ae);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:return F=F.get(ie.key===null?H:ie.key)||null,I(B,F,ie,Ae);case b:return F=F.get(ie.key===null?H:ie.key)||null,G(B,F,ie,Ae);case W:var Ue=ie._init;return ie=Ue(ie._payload),K(F,B,H,ie,Ae)}if(he(ie)||ce(ie))return F=F.get(H)||null,te(B,F,ie,Ae,null);if(typeof ie.then=="function")return K(F,B,H,al(ie),Ae);if(ie.$$typeof===C)return K(F,B,H,Zo(B,ie),Ae);il(B,ie)}return null}function Me(F,B,H,ie){for(var Ae=null,Ue=null,Ce=B,Ie=B=0,Yt=null;Ce!==null&&Ie<H.length;Ie++){Ce.index>Ie?(Yt=Ce,Ce=null):Yt=Ce.sibling;var Ke=q(F,Ce,H[Ie],ie);if(Ke===null){Ce===null&&(Ce=Yt);break}i&&Ce&&Ke.alternate===null&&o(F,Ce),B=g(Ke,B,Ie),Ue===null?Ae=Ke:Ue.sibling=Ke,Ue=Ke,Ce=Yt}if(Ie===H.length)return u(F,Ce),Qe&&Ma(F,Ie),Ae;if(Ce===null){for(;Ie<H.length;Ie++)Ce=se(F,H[Ie],ie),Ce!==null&&(B=g(Ce,B,Ie),Ue===null?Ae=Ce:Ue.sibling=Ce,Ue=Ce);return Qe&&Ma(F,Ie),Ae}for(Ce=f(Ce);Ie<H.length;Ie++)Yt=K(Ce,F,Ie,H[Ie],ie),Yt!==null&&(i&&Yt.alternate!==null&&Ce.delete(Yt.key===null?Ie:Yt.key),B=g(Yt,B,Ie),Ue===null?Ae=Yt:Ue.sibling=Yt,Ue=Yt);return i&&Ce.forEach(function(ya){return o(F,ya)}),Qe&&Ma(F,Ie),Ae}function Re(F,B,H,ie){if(H==null)throw Error(n(151));for(var Ae=null,Ue=null,Ce=B,Ie=B=0,Yt=null,Ke=H.next();Ce!==null&&!Ke.done;Ie++,Ke=H.next()){Ce.index>Ie?(Yt=Ce,Ce=null):Yt=Ce.sibling;var ya=q(F,Ce,Ke.value,ie);if(ya===null){Ce===null&&(Ce=Yt);break}i&&Ce&&ya.alternate===null&&o(F,Ce),B=g(ya,B,Ie),Ue===null?Ae=ya:Ue.sibling=ya,Ue=ya,Ce=Yt}if(Ke.done)return u(F,Ce),Qe&&Ma(F,Ie),Ae;if(Ce===null){for(;!Ke.done;Ie++,Ke=H.next())Ke=se(F,Ke.value,ie),Ke!==null&&(B=g(Ke,B,Ie),Ue===null?Ae=Ke:Ue.sibling=Ke,Ue=Ke);return Qe&&Ma(F,Ie),Ae}for(Ce=f(Ce);!Ke.done;Ie++,Ke=H.next())Ke=K(Ce,F,Ie,Ke.value,ie),Ke!==null&&(i&&Ke.alternate!==null&&Ce.delete(Ke.key===null?Ie:Ke.key),B=g(Ke,B,Ie),Ue===null?Ae=Ke:Ue.sibling=Ke,Ue=Ke);return i&&Ce.forEach(function(T2){return o(F,T2)}),Qe&&Ma(F,Ie),Ae}function ct(F,B,H,ie){if(typeof H=="object"&&H!==null&&H.type===_&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case y:e:{for(var Ae=H.key;B!==null;){if(B.key===Ae){if(Ae=H.type,Ae===_){if(B.tag===7){u(F,B.sibling),ie=x(B,H.props.children),ie.return=F,F=ie;break e}}else if(B.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===W&&c1(Ae)===B.type){u(F,B.sibling),ie=x(B,H.props),Ds(ie,H),ie.return=F,F=ie;break e}u(F,B);break}else o(F,B);B=B.sibling}H.type===_?(ie=Ra(H.props.children,F.mode,ie,H.key),ie.return=F,F=ie):(ie=zo(H.type,H.key,H.props,null,F.mode,ie),Ds(ie,H),ie.return=F,F=ie)}return N(F);case b:e:{for(Ae=H.key;B!==null;){if(B.key===Ae)if(B.tag===4&&B.stateNode.containerInfo===H.containerInfo&&B.stateNode.implementation===H.implementation){u(F,B.sibling),ie=x(B,H.children||[]),ie.return=F,F=ie;break e}else{u(F,B);break}else o(F,B);B=B.sibling}ie=iu(H,F.mode,ie),ie.return=F,F=ie}return N(F);case W:return Ae=H._init,H=Ae(H._payload),ct(F,B,H,ie)}if(he(H))return Me(F,B,H,ie);if(ce(H)){if(Ae=ce(H),typeof Ae!="function")throw Error(n(150));return H=Ae.call(H),Re(F,B,H,ie)}if(typeof H.then=="function")return ct(F,B,al(H),ie);if(H.$$typeof===C)return ct(F,B,Zo(F,H),ie);il(F,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,B!==null&&B.tag===6?(u(F,B.sibling),ie=x(B,H),ie.return=F,F=ie):(u(F,B),ie=au(H,F.mode,ie),ie.return=F,F=ie),N(F)):u(F,B)}return function(F,B,H,ie){try{Ts=0;var Ae=ct(F,B,H,ie);return Ti=null,Ae}catch(Ce){if(Ce===_s||Ce===qo)throw Ce;var Ue=Fr(29,Ce,null,F.mode);return Ue.lanes=ie,Ue.return=F,Ue}finally{}}}var Di=u1(!0),d1=u1(!1),Qr=V(null),bn=null;function aa(i){var o=i.alternate;fe(Lt,Lt.current&1),fe(Qr,i),bn===null&&(o===null||Si.current!==null||o.memoizedState!==null)&&(bn=i)}function f1(i){if(i.tag===22){if(fe(Lt,Lt.current),fe(Qr,i),bn===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(bn=i)}}else ia()}function ia(){fe(Lt,Lt.current),fe(Qr,Qr.current)}function Fn(i){ue(Qr),bn===i&&(bn=null),ue(Lt)}var Lt=V(0);function sl(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Cd(u)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Lu(i,o,u,f){o=i.memoizedState,u=u(f,o),u=u==null?o:p({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Fu={enqueueSetState:function(i,o,u){i=i._reactInternals;var f=Hr(),x=ta(f);x.payload=o,u!=null&&(x.callback=u),o=ra(i,x,f),o!==null&&(Gr(o,i,f),As(o,i,f))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var f=Hr(),x=ta(f);x.tag=1,x.payload=o,u!=null&&(x.callback=u),o=ra(i,x,f),o!==null&&(Gr(o,i,f),As(o,i,f))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Hr(),f=ta(u);f.tag=2,o!=null&&(f.callback=o),o=ra(i,f,u),o!==null&&(Gr(o,i,u),As(o,i,u))}};function h1(i,o,u,f,x,g,N){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,g,N):o.prototype&&o.prototype.isPureReactComponent?!hs(u,f)||!hs(x,g):!0}function m1(i,o,u,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==i&&Fu.enqueueReplaceState(o,o.state,null)}function za(i,o){var u=o;if("ref"in o){u={};for(var f in o)f!=="ref"&&(u[f]=o[f])}if(i=i.defaultProps){u===o&&(u=p({},u));for(var x in i)u[x]===void 0&&(u[x]=i[x])}return u}var ol=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function p1(i){ol(i)}function x1(i){console.error(i)}function v1(i){ol(i)}function ll(i,o){try{var u=i.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function g1(i,o,u){try{var f=i.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Uu(i,o,u){return u=ta(u),u.tag=3,u.payload={element:null},u.callback=function(){ll(i,o)},u}function y1(i){return i=ta(i),i.tag=3,i}function b1(i,o,u,f){var x=u.type.getDerivedStateFromError;if(typeof x=="function"){var g=f.value;i.payload=function(){return x(g)},i.callback=function(){g1(o,u,f)}}var N=u.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(i.callback=function(){g1(o,u,f),typeof x!="function"&&(da===null?da=new Set([this]):da.add(this));var S=f.stack;this.componentDidCatch(f.value,{componentStack:S!==null?S:""})})}function Ty(i,o,u,f,x){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=u.alternate,o!==null&&gs(o,u,x,!0),u=Qr.current,u!==null){switch(u.tag){case 13:return bn===null?ud():u.alternate===null&&St===0&&(St=3),u.flags&=-257,u.flags|=65536,u.lanes=x,f===pu?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([f]):o.add(f),fd(i,f,x)),!1;case 22:return u.flags|=65536,f===pu?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([f]):u.add(f)),fd(i,f,x)),!1}throw Error(n(435,u.tag))}return fd(i,f,x),ud(),!1}if(Qe)return o=Qr.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=x,f!==lu&&(i=Error(n(422),{cause:f}),vs($r(i,u)))):(f!==lu&&(o=Error(n(423),{cause:f}),vs($r(o,u))),i=i.current.alternate,i.flags|=65536,x&=-x,i.lanes|=x,f=$r(f,u),x=Uu(i.stateNode,f,x),gu(i,x),St!==4&&(St=2)),!1;var g=Error(n(520),{cause:f});if(g=$r(g,u),Ls===null?Ls=[g]:Ls.push(g),St!==4&&(St=2),o===null)return!0;f=$r(f,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,i=x&-x,u.lanes|=i,i=Uu(u.stateNode,f,i),gu(u,i),!1;case 1:if(o=u.type,g=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(da===null||!da.has(g))))return u.flags|=65536,x&=-x,u.lanes|=x,x=y1(x),b1(x,i,u,f),gu(u,x),!1}u=u.return}while(u!==null);return!1}var _1=Error(n(461)),qt=!1;function rr(i,o,u,f){o.child=i===null?d1(o,null,u,f):Di(o,i.child,u,f)}function w1(i,o,u,f,x){u=u.render;var g=o.ref;if("ref"in f){var N={};for(var S in f)S!=="ref"&&(N[S]=f[S])}else N=f;return La(o),f=Au(i,o,u,N,g,x),S=Nu(),i!==null&&!qt?(Eu(i,o,x),Un(i,o,x)):(Qe&&S&&su(o),o.flags|=1,rr(i,o,f,x),o.child)}function A1(i,o,u,f,x){if(i===null){var g=u.type;return typeof g=="function"&&!nu(g)&&g.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=g,N1(i,o,g,f,x)):(i=zo(u.type,null,f,o,o.mode,x),i.ref=o.ref,i.return=o,o.child=i)}if(g=i.child,!$u(i,x)){var N=g.memoizedProps;if(u=u.compare,u=u!==null?u:hs,u(N,f)&&i.ref===o.ref)return Un(i,o,x)}return o.flags|=1,i=In(g,f),i.ref=o.ref,i.return=o,o.child=i}function N1(i,o,u,f,x){if(i!==null){var g=i.memoizedProps;if(hs(g,f)&&i.ref===o.ref)if(qt=!1,o.pendingProps=f=g,$u(i,x))(i.flags&131072)!==0&&(qt=!0);else return o.lanes=i.lanes,Un(i,o,x)}return zu(i,o,u,f,x)}function E1(i,o,u){var f=o.pendingProps,x=f.children,g=i!==null?i.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=g!==null?g.baseLanes|u:u,i!==null){for(x=o.child=i.child,g=0;x!==null;)g=g|x.lanes|x.childLanes,x=x.sibling;o.childLanes=g&~f}else o.childLanes=0,o.child=null;return S1(i,o,f,u)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Xo(o,g!==null?g.cachePool:null),g!==null?Nh(o,g):bu(),f1(o);else return o.lanes=o.childLanes=536870912,S1(i,o,g!==null?g.baseLanes|u:u,u)}else g!==null?(Xo(o,g.cachePool),Nh(o,g),ia(),o.memoizedState=null):(i!==null&&Xo(o,null),bu(),ia());return rr(i,o,x,u),o.child}function S1(i,o,u,f){var x=mu();return x=x===null?null:{parent:kt._currentValue,pool:x},o.memoizedState={baseLanes:u,cachePool:x},i!==null&&Xo(o,null),bu(),f1(o),i!==null&&gs(i,o,f,!0),null}function cl(i,o){var u=o.ref;if(u===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(n(284));(i===null||i.ref!==u)&&(o.flags|=4194816)}}function zu(i,o,u,f,x){return La(o),u=Au(i,o,u,f,void 0,x),f=Nu(),i!==null&&!qt?(Eu(i,o,x),Un(i,o,x)):(Qe&&f&&su(o),o.flags|=1,rr(i,o,u,x),o.child)}function C1(i,o,u,f,x,g){return La(o),o.updateQueue=null,u=Sh(o,f,u,x),Eh(i),f=Nu(),i!==null&&!qt?(Eu(i,o,g),Un(i,o,g)):(Qe&&f&&su(o),o.flags|=1,rr(i,o,u,g),o.child)}function j1(i,o,u,f,x){if(La(o),o.stateNode===null){var g=_i,N=u.contextType;typeof N=="object"&&N!==null&&(g=ur(N)),g=new u(f,g),o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Fu,o.stateNode=g,g._reactInternals=o,g=o.stateNode,g.props=f,g.state=o.memoizedState,g.refs={},xu(o),N=u.contextType,g.context=typeof N=="object"&&N!==null?ur(N):_i,g.state=o.memoizedState,N=u.getDerivedStateFromProps,typeof N=="function"&&(Lu(o,u,N,f),g.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(N=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),N!==g.state&&Fu.enqueueReplaceState(g,g.state,null),Es(o,f,g,x),Ns(),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(i===null){g=o.stateNode;var S=o.memoizedProps,I=za(u,S);g.props=I;var G=g.context,te=u.contextType;N=_i,typeof te=="object"&&te!==null&&(N=ur(te));var se=u.getDerivedStateFromProps;te=typeof se=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=o.pendingProps!==S,te||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||G!==N)&&m1(o,g,f,N),ea=!1;var q=o.memoizedState;g.state=q,Es(o,f,g,x),Ns(),G=o.memoizedState,S||q!==G||ea?(typeof se=="function"&&(Lu(o,u,se,f),G=o.memoizedState),(I=ea||h1(o,u,I,f,q,G,N))?(te||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(o.flags|=4194308)):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=G),g.props=f,g.state=G,g.context=N,f=I):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{g=o.stateNode,vu(i,o),N=o.memoizedProps,te=za(u,N),g.props=te,se=o.pendingProps,q=g.context,G=u.contextType,I=_i,typeof G=="object"&&G!==null&&(I=ur(G)),S=u.getDerivedStateFromProps,(G=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(N!==se||q!==I)&&m1(o,g,f,I),ea=!1,q=o.memoizedState,g.state=q,Es(o,f,g,x),Ns();var K=o.memoizedState;N!==se||q!==K||ea||i!==null&&i.dependencies!==null&&Go(i.dependencies)?(typeof S=="function"&&(Lu(o,u,S,f),K=o.memoizedState),(te=ea||h1(o,u,te,f,q,K,I)||i!==null&&i.dependencies!==null&&Go(i.dependencies))?(G||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(f,K,I),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(f,K,I)),typeof g.componentDidUpdate=="function"&&(o.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof g.componentDidUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=K),g.props=f,g.state=K,g.context=I,f=te):(typeof g.componentDidUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=1024),f=!1)}return g=f,cl(i,o),f=(o.flags&128)!==0,g||f?(g=o.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:g.render(),o.flags|=1,i!==null&&f?(o.child=Di(o,i.child,null,x),o.child=Di(o,null,u,x)):rr(i,o,u,x),o.memoizedState=g.state,i=o.child):i=Un(i,o,x),i}function O1(i,o,u,f){return xs(),o.flags|=256,rr(i,o,u,f),o.child}var Vu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hu(i){return{baseLanes:i,cachePool:xh()}}function Gu(i,o,u){return i=i!==null?i.childLanes&~u:0,o&&(i|=Jr),i}function T1(i,o,u){var f=o.pendingProps,x=!1,g=(o.flags&128)!==0,N;if((N=g)||(N=i!==null&&i.memoizedState===null?!1:(Lt.current&2)!==0),N&&(x=!0,o.flags&=-129),N=(o.flags&32)!==0,o.flags&=-33,i===null){if(Qe){if(x?aa(o):ia(),Qe){var S=Et,I;if(I=S){e:{for(I=S,S=yn;I.nodeType!==8;){if(!S){S=null;break e}if(I=on(I.nextSibling),I===null){S=null;break e}}S=I}S!==null?(o.memoizedState={dehydrated:S,treeContext:Ia!==null?{id:Mn,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},I=Fr(18,null,null,0),I.stateNode=S,I.return=o,o.child=I,xr=o,Et=null,I=!0):I=!1}I||Pa(o)}if(S=o.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Cd(S)?o.lanes=32:o.lanes=536870912,null;Fn(o)}return S=f.children,f=f.fallback,x?(ia(),x=o.mode,S=ul({mode:"hidden",children:S},x),f=Ra(f,x,u,null),S.return=o,f.return=o,S.sibling=f,o.child=S,x=o.child,x.memoizedState=Hu(u),x.childLanes=Gu(i,N,u),o.memoizedState=Vu,f):(aa(o),Zu(o,S))}if(I=i.memoizedState,I!==null&&(S=I.dehydrated,S!==null)){if(g)o.flags&256?(aa(o),o.flags&=-257,o=Xu(i,o,u)):o.memoizedState!==null?(ia(),o.child=i.child,o.flags|=128,o=null):(ia(),x=f.fallback,S=o.mode,f=ul({mode:"visible",children:f.children},S),x=Ra(x,S,u,null),x.flags|=2,f.return=o,x.return=o,f.sibling=x,o.child=f,Di(o,i.child,null,u),f=o.child,f.memoizedState=Hu(u),f.childLanes=Gu(i,N,u),o.memoizedState=Vu,o=x);else if(aa(o),Cd(S)){if(N=S.nextSibling&&S.nextSibling.dataset,N)var G=N.dgst;N=G,f=Error(n(419)),f.stack="",f.digest=N,vs({value:f,source:null,stack:null}),o=Xu(i,o,u)}else if(qt||gs(i,o,u,!1),N=(u&i.childLanes)!==0,qt||N){if(N=mt,N!==null&&(f=u&-u,f=(f&42)!==0?1:jc(f),f=(f&(N.suspendedLanes|u))!==0?0:f,f!==0&&f!==I.retryLane))throw I.retryLane=f,bi(i,f),Gr(N,i,f),_1;S.data==="$?"||ud(),o=Xu(i,o,u)}else S.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=I.treeContext,Et=on(S.nextSibling),xr=o,Qe=!0,Ba=null,yn=!1,i!==null&&(Kr[Wr++]=Mn,Kr[Wr++]=Bn,Kr[Wr++]=Ia,Mn=i.id,Bn=i.overflow,Ia=o),o=Zu(o,f.children),o.flags|=4096);return o}return x?(ia(),x=f.fallback,S=o.mode,I=i.child,G=I.sibling,f=In(I,{mode:"hidden",children:f.children}),f.subtreeFlags=I.subtreeFlags&65011712,G!==null?x=In(G,x):(x=Ra(x,S,u,null),x.flags|=2),x.return=o,f.return=o,f.sibling=x,o.child=f,f=x,x=o.child,S=i.child.memoizedState,S===null?S=Hu(u):(I=S.cachePool,I!==null?(G=kt._currentValue,I=I.parent!==G?{parent:G,pool:G}:I):I=xh(),S={baseLanes:S.baseLanes|u,cachePool:I}),x.memoizedState=S,x.childLanes=Gu(i,N,u),o.memoizedState=Vu,f):(aa(o),u=i.child,i=u.sibling,u=In(u,{mode:"visible",children:f.children}),u.return=o,u.sibling=null,i!==null&&(N=o.deletions,N===null?(o.deletions=[i],o.flags|=16):N.push(i)),o.child=u,o.memoizedState=null,u)}function Zu(i,o){return o=ul({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function ul(i,o){return i=Fr(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function Xu(i,o,u){return Di(o,i.child,null,u),i=Zu(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function D1(i,o,u){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),uu(i.return,o,u)}function qu(i,o,u,f,x){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:x}:(g.isBackwards=o,g.rendering=null,g.renderingStartTime=0,g.last=f,g.tail=u,g.tailMode=x)}function R1(i,o,u){var f=o.pendingProps,x=f.revealOrder,g=f.tail;if(rr(i,o,f.children,u),f=Lt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&D1(i,u,o);else if(i.tag===19)D1(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}switch(fe(Lt,f),x){case"forwards":for(u=o.child,x=null;u!==null;)i=u.alternate,i!==null&&sl(i)===null&&(x=u),u=u.sibling;u=x,u===null?(x=o.child,o.child=null):(x=u.sibling,u.sibling=null),qu(o,!1,x,u,g);break;case"backwards":for(u=null,x=o.child,o.child=null;x!==null;){if(i=x.alternate,i!==null&&sl(i)===null){o.child=x;break}i=x.sibling,x.sibling=u,u=x,x=i}qu(o,!0,u,null,g);break;case"together":qu(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Un(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),ua|=o.lanes,(u&o.childLanes)===0)if(i!==null){if(gs(i,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(n(153));if(o.child!==null){for(i=o.child,u=In(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=In(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function $u(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Go(i)))}function Dy(i,o,u){switch(o.tag){case 3:Ze(o,o.stateNode.containerInfo),Jn(o,kt,i.memoizedState.cache),xs();break;case 27:case 5:Pr(o);break;case 4:Ze(o,o.stateNode.containerInfo);break;case 10:Jn(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(aa(o),o.flags|=128,null):(u&o.child.childLanes)!==0?T1(i,o,u):(aa(o),i=Un(i,o,u),i!==null?i.sibling:null);aa(o);break;case 19:var x=(i.flags&128)!==0;if(f=(u&o.childLanes)!==0,f||(gs(i,o,u,!1),f=(u&o.childLanes)!==0),x){if(f)return R1(i,o,u);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),fe(Lt,Lt.current),f)break;return null;case 22:case 23:return o.lanes=0,E1(i,o,u);case 24:Jn(o,kt,i.memoizedState.cache)}return Un(i,o,u)}function I1(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps)qt=!0;else{if(!$u(i,u)&&(o.flags&128)===0)return qt=!1,Dy(i,o,u);qt=(i.flags&131072)!==0}else qt=!1,Qe&&(o.flags&1048576)!==0&&ch(o,Ho,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var f=o.elementType,x=f._init;if(f=x(f._payload),o.type=f,typeof f=="function")nu(f)?(i=za(f,i),o.tag=1,o=j1(null,o,f,i,u)):(o.tag=0,o=zu(null,o,f,i,u));else{if(f!=null){if(x=f.$$typeof,x===D){o.tag=11,o=w1(null,o,f,i,u);break e}else if(x===$){o.tag=14,o=A1(null,o,f,i,u);break e}}throw o=_e(f)||f,Error(n(306,o,""))}}return o;case 0:return zu(i,o,o.type,o.pendingProps,u);case 1:return f=o.type,x=za(f,o.pendingProps),j1(i,o,f,x,u);case 3:e:{if(Ze(o,o.stateNode.containerInfo),i===null)throw Error(n(387));f=o.pendingProps;var g=o.memoizedState;x=g.element,vu(i,o),Es(o,f,null,u);var N=o.memoizedState;if(f=N.cache,Jn(o,kt,f),f!==g.cache&&du(o,[kt],u,!0),Ns(),f=N.element,g.isDehydrated)if(g={element:f,isDehydrated:!1,cache:N.cache},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){o=O1(i,o,f,u);break e}else if(f!==x){x=$r(Error(n(424)),o),vs(x),o=O1(i,o,f,u);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Et=on(i.firstChild),xr=o,Qe=!0,Ba=null,yn=!0,u=d1(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(xs(),f===x){o=Un(i,o,u);break e}rr(i,o,f,u)}o=o.child}return o;case 26:return cl(i,o),i===null?(u=km(o.type,null,o.pendingProps,null))?o.memoizedState=u:Qe||(u=o.type,i=o.pendingProps,f=Nl(de.current).createElement(u),f[cr]=o,f[Ar]=i,ar(f,u,i),Xt(f),o.stateNode=f):o.memoizedState=km(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Pr(o),i===null&&Qe&&(f=o.stateNode=Mm(o.type,o.pendingProps,de.current),xr=o,yn=!0,x=Et,ma(o.type)?(jd=x,Et=on(f.firstChild)):Et=x),rr(i,o,o.pendingProps.children,u),cl(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Qe&&((x=f=Et)&&(f=i2(f,o.type,o.pendingProps,yn),f!==null?(o.stateNode=f,xr=o,Et=on(f.firstChild),yn=!1,x=!0):x=!1),x||Pa(o)),Pr(o),x=o.type,g=o.pendingProps,N=i!==null?i.memoizedProps:null,f=g.children,Nd(x,g)?f=null:N!==null&&Nd(x,N)&&(o.flags|=32),o.memoizedState!==null&&(x=Au(i,o,Ay,null,null,u),qs._currentValue=x),cl(i,o),rr(i,o,f,u),o.child;case 6:return i===null&&Qe&&((i=u=Et)&&(u=s2(u,o.pendingProps,yn),u!==null?(o.stateNode=u,xr=o,Et=null,i=!0):i=!1),i||Pa(o)),null;case 13:return T1(i,o,u);case 4:return Ze(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Di(o,null,f,u):rr(i,o,f,u),o.child;case 11:return w1(i,o,o.type,o.pendingProps,u);case 7:return rr(i,o,o.pendingProps,u),o.child;case 8:return rr(i,o,o.pendingProps.children,u),o.child;case 12:return rr(i,o,o.pendingProps.children,u),o.child;case 10:return f=o.pendingProps,Jn(o,o.type,f.value),rr(i,o,f.children,u),o.child;case 9:return x=o.type._context,f=o.pendingProps.children,La(o),x=ur(x),f=f(x),o.flags|=1,rr(i,o,f,u),o.child;case 14:return A1(i,o,o.type,o.pendingProps,u);case 15:return N1(i,o,o.type,o.pendingProps,u);case 19:return R1(i,o,u);case 31:return f=o.pendingProps,u=o.mode,f={mode:f.mode,children:f.children},i===null?(u=ul(f,u),u.ref=o.ref,o.child=u,u.return=o,o=u):(u=In(i.child,f),u.ref=o.ref,o.child=u,u.return=o,o=u),o;case 22:return E1(i,o,u);case 24:return La(o),f=ur(kt),i===null?(x=mu(),x===null&&(x=mt,g=fu(),x.pooledCache=g,g.refCount++,g!==null&&(x.pooledCacheLanes|=u),x=g),o.memoizedState={parent:f,cache:x},xu(o),Jn(o,kt,x)):((i.lanes&u)!==0&&(vu(i,o),Es(o,null,null,u),Ns()),x=i.memoizedState,g=o.memoizedState,x.parent!==f?(x={parent:f,cache:f},o.memoizedState=x,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=x),Jn(o,kt,f)):(f=g.cache,Jn(o,kt,f),f!==x.cache&&du(o,[kt],u,!0))),rr(i,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function zn(i){i.flags|=4}function M1(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Vm(o)){if(o=Qr.current,o!==null&&((qe&4194048)===qe?bn!==null:(qe&62914560)!==qe&&(qe&536870912)===0||o!==bn))throw ws=pu,vh;i.flags|=8192}}function dl(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?f0():536870912,i.lanes|=o,Bi|=o)}function Rs(i,o){if(!Qe)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function At(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(o)for(var x=i.child;x!==null;)u|=x.lanes|x.childLanes,f|=x.subtreeFlags&65011712,f|=x.flags&65011712,x.return=i,x=x.sibling;else for(x=i.child;x!==null;)u|=x.lanes|x.childLanes,f|=x.subtreeFlags,f|=x.flags,x.return=i,x=x.sibling;return i.subtreeFlags|=f,i.childLanes=u,o}function Ry(i,o,u){var f=o.pendingProps;switch(ou(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(o),null;case 1:return At(o),null;case 3:return u=o.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),kn(kt),Rt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(i===null||i.child===null)&&(ps(o)?zn(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,fh())),At(o),null;case 26:return u=o.memoizedState,i===null?(zn(o),u!==null?(At(o),M1(o,u)):(At(o),o.flags&=-16777217)):u?u!==i.memoizedState?(zn(o),At(o),M1(o,u)):(At(o),o.flags&=-16777217):(i.memoizedProps!==f&&zn(o),At(o),o.flags&=-16777217),null;case 27:tr(o),u=de.current;var x=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==f&&zn(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return At(o),null}i=U.current,ps(o)?uh(o):(i=Mm(x,f,u),o.stateNode=i,zn(o))}return At(o),null;case 5:if(tr(o),u=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==f&&zn(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return At(o),null}if(i=U.current,ps(o))uh(o);else{switch(x=Nl(de.current),i){case 1:i=x.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:i=x.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":i=x.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":i=x.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":i=x.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof f.is=="string"?x.createElement("select",{is:f.is}):x.createElement("select"),f.multiple?i.multiple=!0:f.size&&(i.size=f.size);break;default:i=typeof f.is=="string"?x.createElement(u,{is:f.is}):x.createElement(u)}}i[cr]=o,i[Ar]=f;e:for(x=o.child;x!==null;){if(x.tag===5||x.tag===6)i.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===o)break e;for(;x.sibling===null;){if(x.return===null||x.return===o)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}o.stateNode=i;e:switch(ar(i,u,f),u){case"button":case"input":case"select":case"textarea":i=!!f.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&zn(o)}}return At(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==f&&zn(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(i=de.current,ps(o)){if(i=o.stateNode,u=o.memoizedProps,f=null,x=xr,x!==null)switch(x.tag){case 27:case 5:f=x.memoizedProps}i[cr]=o,i=!!(i.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||Cm(i.nodeValue,u)),i||Pa(o)}else i=Nl(i).createTextNode(f),i[cr]=o,o.stateNode=i}return At(o),null;case 13:if(f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(x=ps(o),f!==null&&f.dehydrated!==null){if(i===null){if(!x)throw Error(n(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[cr]=o}else xs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;At(o),x=!1}else x=fh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=x),x=!0;if(!x)return o.flags&256?(Fn(o),o):(Fn(o),null)}if(Fn(o),(o.flags&128)!==0)return o.lanes=u,o;if(u=f!==null,i=i!==null&&i.memoizedState!==null,u){f=o.child,x=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(x=f.alternate.memoizedState.cachePool.pool);var g=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(g=f.memoizedState.cachePool.pool),g!==x&&(f.flags|=2048)}return u!==i&&u&&(o.child.flags|=8192),dl(o,o.updateQueue),At(o),null;case 4:return Rt(),i===null&&yd(o.stateNode.containerInfo),At(o),null;case 10:return kn(o.type),At(o),null;case 19:if(ue(Lt),x=o.memoizedState,x===null)return At(o),null;if(f=(o.flags&128)!==0,g=x.rendering,g===null)if(f)Rs(x,!1);else{if(St!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(g=sl(i),g!==null){for(o.flags|=128,Rs(x,!1),i=g.updateQueue,o.updateQueue=i,dl(o,i),o.subtreeFlags=0,i=u,u=o.child;u!==null;)lh(u,i),u=u.sibling;return fe(Lt,Lt.current&1|2),o.child}i=i.sibling}x.tail!==null&&kr()>ml&&(o.flags|=128,f=!0,Rs(x,!1),o.lanes=4194304)}else{if(!f)if(i=sl(g),i!==null){if(o.flags|=128,f=!0,i=i.updateQueue,o.updateQueue=i,dl(o,i),Rs(x,!0),x.tail===null&&x.tailMode==="hidden"&&!g.alternate&&!Qe)return At(o),null}else 2*kr()-x.renderingStartTime>ml&&u!==536870912&&(o.flags|=128,f=!0,Rs(x,!1),o.lanes=4194304);x.isBackwards?(g.sibling=o.child,o.child=g):(i=x.last,i!==null?i.sibling=g:o.child=g,x.last=g)}return x.tail!==null?(o=x.tail,x.rendering=o,x.tail=o.sibling,x.renderingStartTime=kr(),o.sibling=null,i=Lt.current,fe(Lt,f?i&1|2:i&1),o):(At(o),null);case 22:case 23:return Fn(o),_u(),f=o.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(u&536870912)!==0&&(o.flags&128)===0&&(At(o),o.subtreeFlags&6&&(o.flags|=8192)):At(o),u=o.updateQueue,u!==null&&dl(o,u.retryQueue),u=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048),i!==null&&ue(Fa),null;case 24:return u=null,i!==null&&(u=i.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),kn(kt),At(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function Iy(i,o){switch(ou(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return kn(kt),Rt(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return tr(o),null;case 13:if(Fn(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(n(340));xs()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return ue(Lt),null;case 4:return Rt(),null;case 10:return kn(o.type),null;case 22:case 23:return Fn(o),_u(),i!==null&&ue(Fa),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return kn(kt),null;case 25:return null;default:return null}}function B1(i,o){switch(ou(o),o.tag){case 3:kn(kt),Rt();break;case 26:case 27:case 5:tr(o);break;case 4:Rt();break;case 13:Fn(o);break;case 19:ue(Lt);break;case 10:kn(o.type);break;case 22:case 23:Fn(o),_u(),i!==null&&ue(Fa);break;case 24:kn(kt)}}function Is(i,o){try{var u=o.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var x=f.next;u=x;do{if((u.tag&i)===i){f=void 0;var g=u.create,N=u.inst;f=g(),N.destroy=f}u=u.next}while(u!==x)}}catch(S){dt(o,o.return,S)}}function sa(i,o,u){try{var f=o.updateQueue,x=f!==null?f.lastEffect:null;if(x!==null){var g=x.next;f=g;do{if((f.tag&i)===i){var N=f.inst,S=N.destroy;if(S!==void 0){N.destroy=void 0,x=o;var I=u,G=S;try{G()}catch(te){dt(x,I,te)}}}f=f.next}while(f!==g)}}catch(te){dt(o,o.return,te)}}function P1(i){var o=i.updateQueue;if(o!==null){var u=i.stateNode;try{Ah(o,u)}catch(f){dt(i,i.return,f)}}}function k1(i,o,u){u.props=za(i.type,i.memoizedProps),u.state=i.memoizedState;try{u.componentWillUnmount()}catch(f){dt(i,o,f)}}function Ms(i,o){try{var u=i.ref;if(u!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof u=="function"?i.refCleanup=u(f):u.current=f}}catch(x){dt(i,o,x)}}function _n(i,o){var u=i.ref,f=i.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(x){dt(i,o,x)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(x){dt(i,o,x)}else u.current=null}function L1(i){var o=i.type,u=i.memoizedProps,f=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(x){dt(i,i.return,x)}}function Yu(i,o,u){try{var f=i.stateNode;e2(f,i.type,u,o),f[Ar]=o}catch(x){dt(i,i.return,x)}}function F1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ma(i.type)||i.tag===4}function Ku(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||F1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ma(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wu(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(i,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(i),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Al));else if(f!==4&&(f===27&&ma(i.type)&&(u=i.stateNode,o=null),i=i.child,i!==null))for(Wu(i,o,u),i=i.sibling;i!==null;)Wu(i,o,u),i=i.sibling}function fl(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(f!==4&&(f===27&&ma(i.type)&&(u=i.stateNode),i=i.child,i!==null))for(fl(i,o,u),i=i.sibling;i!==null;)fl(i,o,u),i=i.sibling}function U1(i){var o=i.stateNode,u=i.memoizedProps;try{for(var f=i.type,x=o.attributes;x.length;)o.removeAttributeNode(x[0]);ar(o,f,u),o[cr]=i,o[Ar]=u}catch(g){dt(i,i.return,g)}}var Vn=!1,jt=!1,Qu=!1,z1=typeof WeakSet=="function"?WeakSet:Set,$t=null;function My(i,o){if(i=i.containerInfo,wd=Tl,i=Q0(i),Kc(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var x=f.anchorOffset,g=f.focusNode;f=f.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break e}var N=0,S=-1,I=-1,G=0,te=0,se=i,q=null;t:for(;;){for(var K;se!==u||x!==0&&se.nodeType!==3||(S=N+x),se!==g||f!==0&&se.nodeType!==3||(I=N+f),se.nodeType===3&&(N+=se.nodeValue.length),(K=se.firstChild)!==null;)q=se,se=K;for(;;){if(se===i)break t;if(q===u&&++G===x&&(S=N),q===g&&++te===f&&(I=N),(K=se.nextSibling)!==null)break;se=q,q=se.parentNode}se=K}u=S===-1||I===-1?null:{start:S,end:I}}else u=null}u=u||{start:0,end:0}}else u=null;for(Ad={focusedElem:i,selectionRange:u},Tl=!1,$t=o;$t!==null;)if(o=$t,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,$t=i;else for(;$t!==null;){switch(o=$t,g=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,u=o,x=g.memoizedProps,g=g.memoizedState,f=u.stateNode;try{var Me=za(u.type,x,u.elementType===u.type);i=f.getSnapshotBeforeUpdate(Me,g),f.__reactInternalSnapshotBeforeUpdate=i}catch(Re){dt(u,u.return,Re)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,u=i.nodeType,u===9)Sd(i);else if(u===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Sd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=o.sibling,i!==null){i.return=o.return,$t=i;break}$t=o.return}}function V1(i,o,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:oa(i,u),f&4&&Is(5,u);break;case 1:if(oa(i,u),f&4)if(i=u.stateNode,o===null)try{i.componentDidMount()}catch(N){dt(u,u.return,N)}else{var x=za(u.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(x,o,i.__reactInternalSnapshotBeforeUpdate)}catch(N){dt(u,u.return,N)}}f&64&&P1(u),f&512&&Ms(u,u.return);break;case 3:if(oa(i,u),f&64&&(i=u.updateQueue,i!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Ah(i,o)}catch(N){dt(u,u.return,N)}}break;case 27:o===null&&f&4&&U1(u);case 26:case 5:oa(i,u),o===null&&f&4&&L1(u),f&512&&Ms(u,u.return);break;case 12:oa(i,u);break;case 13:oa(i,u),f&4&&Z1(i,u),f&64&&(i=u.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(u=Hy.bind(null,u),o2(i,u))));break;case 22:if(f=u.memoizedState!==null||Vn,!f){o=o!==null&&o.memoizedState!==null||jt,x=Vn;var g=jt;Vn=f,(jt=o)&&!g?la(i,u,(u.subtreeFlags&8772)!==0):oa(i,u),Vn=x,jt=g}break;case 30:break;default:oa(i,u)}}function H1(i){var o=i.alternate;o!==null&&(i.alternate=null,H1(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Dc(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var yt=null,Sr=!1;function Hn(i,o,u){for(u=u.child;u!==null;)G1(i,o,u),u=u.sibling}function G1(i,o,u){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(Se,u)}catch{}switch(u.tag){case 26:jt||_n(u,o),Hn(i,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:jt||_n(u,o);var f=yt,x=Sr;ma(u.type)&&(yt=u.stateNode,Sr=!1),Hn(i,o,u),Hs(u.stateNode),yt=f,Sr=x;break;case 5:jt||_n(u,o);case 6:if(f=yt,x=Sr,yt=null,Hn(i,o,u),yt=f,Sr=x,yt!==null)if(Sr)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(u.stateNode)}catch(g){dt(u,o,g)}else try{yt.removeChild(u.stateNode)}catch(g){dt(u,o,g)}break;case 18:yt!==null&&(Sr?(i=yt,Rm(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,u.stateNode),Ws(i)):Rm(yt,u.stateNode));break;case 4:f=yt,x=Sr,yt=u.stateNode.containerInfo,Sr=!0,Hn(i,o,u),yt=f,Sr=x;break;case 0:case 11:case 14:case 15:jt||sa(2,u,o),jt||sa(4,u,o),Hn(i,o,u);break;case 1:jt||(_n(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"&&k1(u,o,f)),Hn(i,o,u);break;case 21:Hn(i,o,u);break;case 22:jt=(f=jt)||u.memoizedState!==null,Hn(i,o,u),jt=f;break;default:Hn(i,o,u)}}function Z1(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Ws(i)}catch(u){dt(o,o.return,u)}}function By(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new z1),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new z1),o;default:throw Error(n(435,i.tag))}}function Ju(i,o){var u=By(i);o.forEach(function(f){var x=Gy.bind(null,i,f);u.has(f)||(u.add(f),f.then(x,x))})}function Ur(i,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var x=u[f],g=i,N=o,S=N;e:for(;S!==null;){switch(S.tag){case 27:if(ma(S.type)){yt=S.stateNode,Sr=!1;break e}break;case 5:yt=S.stateNode,Sr=!1;break e;case 3:case 4:yt=S.stateNode.containerInfo,Sr=!0;break e}S=S.return}if(yt===null)throw Error(n(160));G1(g,N,x),yt=null,Sr=!1,g=x.alternate,g!==null&&(g.return=null),x.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)X1(o,i),o=o.sibling}var sn=null;function X1(i,o){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ur(o,i),zr(i),f&4&&(sa(3,i,i.return),Is(3,i),sa(5,i,i.return));break;case 1:Ur(o,i),zr(i),f&512&&(jt||u===null||_n(u,u.return)),f&64&&Vn&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(u=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var x=sn;if(Ur(o,i),zr(i),f&512&&(jt||u===null||_n(u,u.return)),f&4){var g=u!==null?u.memoizedState:null;if(f=i.memoizedState,u===null)if(f===null)if(i.stateNode===null){e:{f=i.type,u=i.memoizedProps,x=x.ownerDocument||x;t:switch(f){case"title":g=x.getElementsByTagName("title")[0],(!g||g[as]||g[cr]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=x.createElement(f),x.head.insertBefore(g,x.querySelector("head > title"))),ar(g,f,u),g[cr]=i,Xt(g),f=g;break e;case"link":var N=Um("link","href",x).get(f+(u.href||""));if(N){for(var S=0;S<N.length;S++)if(g=N[S],g.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&g.getAttribute("rel")===(u.rel==null?null:u.rel)&&g.getAttribute("title")===(u.title==null?null:u.title)&&g.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){N.splice(S,1);break t}}g=x.createElement(f),ar(g,f,u),x.head.appendChild(g);break;case"meta":if(N=Um("meta","content",x).get(f+(u.content||""))){for(S=0;S<N.length;S++)if(g=N[S],g.getAttribute("content")===(u.content==null?null:""+u.content)&&g.getAttribute("name")===(u.name==null?null:u.name)&&g.getAttribute("property")===(u.property==null?null:u.property)&&g.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&g.getAttribute("charset")===(u.charSet==null?null:u.charSet)){N.splice(S,1);break t}}g=x.createElement(f),ar(g,f,u),x.head.appendChild(g);break;default:throw Error(n(468,f))}g[cr]=i,Xt(g),f=g}i.stateNode=f}else zm(x,i.type,i.stateNode);else i.stateNode=Fm(x,f,i.memoizedProps);else g!==f?(g===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):g.count--,f===null?zm(x,i.type,i.stateNode):Fm(x,f,i.memoizedProps)):f===null&&i.stateNode!==null&&Yu(i,i.memoizedProps,u.memoizedProps)}break;case 27:Ur(o,i),zr(i),f&512&&(jt||u===null||_n(u,u.return)),u!==null&&f&4&&Yu(i,i.memoizedProps,u.memoizedProps);break;case 5:if(Ur(o,i),zr(i),f&512&&(jt||u===null||_n(u,u.return)),i.flags&32){x=i.stateNode;try{hi(x,"")}catch(K){dt(i,i.return,K)}}f&4&&i.stateNode!=null&&(x=i.memoizedProps,Yu(i,x,u!==null?u.memoizedProps:x)),f&1024&&(Qu=!0);break;case 6:if(Ur(o,i),zr(i),f&4){if(i.stateNode===null)throw Error(n(162));f=i.memoizedProps,u=i.stateNode;try{u.nodeValue=f}catch(K){dt(i,i.return,K)}}break;case 3:if(Cl=null,x=sn,sn=El(o.containerInfo),Ur(o,i),sn=x,zr(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Ws(o.containerInfo)}catch(K){dt(i,i.return,K)}Qu&&(Qu=!1,q1(i));break;case 4:f=sn,sn=El(i.stateNode.containerInfo),Ur(o,i),zr(i),sn=f;break;case 12:Ur(o,i),zr(i);break;case 13:Ur(o,i),zr(i),i.child.flags&8192&&i.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(id=kr()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ju(i,f)));break;case 22:x=i.memoizedState!==null;var I=u!==null&&u.memoizedState!==null,G=Vn,te=jt;if(Vn=G||x,jt=te||I,Ur(o,i),jt=te,Vn=G,zr(i),f&8192)e:for(o=i.stateNode,o._visibility=x?o._visibility&-2:o._visibility|1,x&&(u===null||I||Vn||jt||Va(i)),u=null,o=i;;){if(o.tag===5||o.tag===26){if(u===null){I=u=o;try{if(g=I.stateNode,x)N=g.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{S=I.stateNode;var se=I.memoizedProps.style,q=se!=null&&se.hasOwnProperty("display")?se.display:null;S.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(K){dt(I,I.return,K)}}}else if(o.tag===6){if(u===null){I=o;try{I.stateNode.nodeValue=x?"":I.memoizedProps}catch(K){dt(I,I.return,K)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=i.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Ju(i,u))));break;case 19:Ur(o,i),zr(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,Ju(i,f)));break;case 30:break;case 21:break;default:Ur(o,i),zr(i)}}function zr(i){var o=i.flags;if(o&2){try{for(var u,f=i.return;f!==null;){if(F1(f)){u=f;break}f=f.return}if(u==null)throw Error(n(160));switch(u.tag){case 27:var x=u.stateNode,g=Ku(i);fl(i,g,x);break;case 5:var N=u.stateNode;u.flags&32&&(hi(N,""),u.flags&=-33);var S=Ku(i);fl(i,S,N);break;case 3:case 4:var I=u.stateNode.containerInfo,G=Ku(i);Wu(i,G,I);break;default:throw Error(n(161))}}catch(te){dt(i,i.return,te)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function q1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;q1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function oa(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)V1(i,o.alternate,o),o=o.sibling}function Va(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:sa(4,o,o.return),Va(o);break;case 1:_n(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&k1(o,o.return,u),Va(o);break;case 27:Hs(o.stateNode);case 26:case 5:_n(o,o.return),Va(o);break;case 22:o.memoizedState===null&&Va(o);break;case 30:Va(o);break;default:Va(o)}i=i.sibling}}function la(i,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,x=i,g=o,N=g.flags;switch(g.tag){case 0:case 11:case 15:la(x,g,u),Is(4,g);break;case 1:if(la(x,g,u),f=g,x=f.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(G){dt(f,f.return,G)}if(f=g,x=f.updateQueue,x!==null){var S=f.stateNode;try{var I=x.shared.hiddenCallbacks;if(I!==null)for(x.shared.hiddenCallbacks=null,x=0;x<I.length;x++)wh(I[x],S)}catch(G){dt(f,f.return,G)}}u&&N&64&&P1(g),Ms(g,g.return);break;case 27:U1(g);case 26:case 5:la(x,g,u),u&&f===null&&N&4&&L1(g),Ms(g,g.return);break;case 12:la(x,g,u);break;case 13:la(x,g,u),u&&N&4&&Z1(x,g);break;case 22:g.memoizedState===null&&la(x,g,u),Ms(g,g.return);break;case 30:break;default:la(x,g,u)}o=o.sibling}}function ed(i,o){var u=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==u&&(i!=null&&i.refCount++,u!=null&&ys(u))}function td(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ys(i))}function wn(i,o,u,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)$1(i,o,u,f),o=o.sibling}function $1(i,o,u,f){var x=o.flags;switch(o.tag){case 0:case 11:case 15:wn(i,o,u,f),x&2048&&Is(9,o);break;case 1:wn(i,o,u,f);break;case 3:wn(i,o,u,f),x&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ys(i)));break;case 12:if(x&2048){wn(i,o,u,f),i=o.stateNode;try{var g=o.memoizedProps,N=g.id,S=g.onPostCommit;typeof S=="function"&&S(N,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(I){dt(o,o.return,I)}}else wn(i,o,u,f);break;case 13:wn(i,o,u,f);break;case 23:break;case 22:g=o.stateNode,N=o.alternate,o.memoizedState!==null?g._visibility&2?wn(i,o,u,f):Bs(i,o):g._visibility&2?wn(i,o,u,f):(g._visibility|=2,Ri(i,o,u,f,(o.subtreeFlags&10256)!==0)),x&2048&&ed(N,o);break;case 24:wn(i,o,u,f),x&2048&&td(o.alternate,o);break;default:wn(i,o,u,f)}}function Ri(i,o,u,f,x){for(x=x&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var g=i,N=o,S=u,I=f,G=N.flags;switch(N.tag){case 0:case 11:case 15:Ri(g,N,S,I,x),Is(8,N);break;case 23:break;case 22:var te=N.stateNode;N.memoizedState!==null?te._visibility&2?Ri(g,N,S,I,x):Bs(g,N):(te._visibility|=2,Ri(g,N,S,I,x)),x&&G&2048&&ed(N.alternate,N);break;case 24:Ri(g,N,S,I,x),x&&G&2048&&td(N.alternate,N);break;default:Ri(g,N,S,I,x)}o=o.sibling}}function Bs(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=i,f=o,x=f.flags;switch(f.tag){case 22:Bs(u,f),x&2048&&ed(f.alternate,f);break;case 24:Bs(u,f),x&2048&&td(f.alternate,f);break;default:Bs(u,f)}o=o.sibling}}var Ps=8192;function Ii(i){if(i.subtreeFlags&Ps)for(i=i.child;i!==null;)Y1(i),i=i.sibling}function Y1(i){switch(i.tag){case 26:Ii(i),i.flags&Ps&&i.memoizedState!==null&&b2(sn,i.memoizedState,i.memoizedProps);break;case 5:Ii(i);break;case 3:case 4:var o=sn;sn=El(i.stateNode.containerInfo),Ii(i),sn=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=Ps,Ps=16777216,Ii(i),Ps=o):Ii(i));break;default:Ii(i)}}function K1(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function ks(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];$t=f,Q1(f,i)}K1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)W1(i),i=i.sibling}function W1(i){switch(i.tag){case 0:case 11:case 15:ks(i),i.flags&2048&&sa(9,i,i.return);break;case 3:ks(i);break;case 12:ks(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,hl(i)):ks(i);break;default:ks(i)}}function hl(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var f=o[u];$t=f,Q1(f,i)}K1(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:sa(8,o,o.return),hl(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,hl(o));break;default:hl(o)}i=i.sibling}}function Q1(i,o){for(;$t!==null;){var u=$t;switch(u.tag){case 0:case 11:case 15:sa(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ys(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,$t=f;else e:for(u=i;$t!==null;){f=$t;var x=f.sibling,g=f.return;if(H1(f),f===u){$t=null;break e}if(x!==null){x.return=g,$t=x;break e}$t=g}}}var Py={getCacheForType:function(i){var o=ur(kt),u=o.data.get(i);return u===void 0&&(u=i(),o.data.set(i,u)),u}},ky=typeof WeakMap=="function"?WeakMap:Map,nt=0,mt=null,Ve=null,qe=0,at=0,Vr=null,ca=!1,Mi=!1,rd=!1,Gn=0,St=0,ua=0,Ha=0,nd=0,Jr=0,Bi=0,Ls=null,Cr=null,ad=!1,id=0,ml=1/0,pl=null,da=null,nr=0,fa=null,Pi=null,ki=0,sd=0,od=null,J1=null,Fs=0,ld=null;function Hr(){if((nt&2)!==0&&qe!==0)return qe&-qe;if(P.T!==null){var i=Ni;return i!==0?i:pd()}return p0()}function em(){Jr===0&&(Jr=(qe&536870912)===0||Qe?d0():536870912);var i=Qr.current;return i!==null&&(i.flags|=32),Jr}function Gr(i,o,u){(i===mt&&(at===2||at===9)||i.cancelPendingCommit!==null)&&(Li(i,0),ha(i,qe,Jr,!1)),ns(i,u),((nt&2)===0||i!==mt)&&(i===mt&&((nt&2)===0&&(Ha|=u),St===4&&ha(i,qe,Jr,!1)),An(i))}function tm(i,o,u){if((nt&6)!==0)throw Error(n(327));var f=!u&&(o&124)===0&&(o&i.expiredLanes)===0||Ca(i,o),x=f?Uy(i,o):dd(i,o,!0),g=f;do{if(x===0){Mi&&!f&&ha(i,o,0,!1);break}else{if(u=i.current.alternate,g&&!Ly(u)){x=dd(i,o,!1),g=!1;continue}if(x===2){if(g=o,i.errorRecoveryDisabledLanes&g)var N=0;else N=i.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){o=N;e:{var S=i;x=Ls;var I=S.current.memoizedState.isDehydrated;if(I&&(Li(S,N).flags|=256),N=dd(S,N,!1),N!==2){if(rd&&!I){S.errorRecoveryDisabledLanes|=g,Ha|=g,x=4;break e}g=Cr,Cr=x,g!==null&&(Cr===null?Cr=g:Cr.push.apply(Cr,g))}x=N}if(g=!1,x!==2)continue}}if(x===1){Li(i,0),ha(i,o,0,!0);break}e:{switch(f=i,g=x,g){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:ha(f,o,Jr,!ca);break e;case 2:Cr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(x=id+300-kr(),10<x)){if(ha(f,o,Jr,!ca),Sa(f,0,!0)!==0)break e;f.timeoutHandle=Tm(rm.bind(null,f,u,Cr,pl,ad,o,Jr,Ha,Bi,ca,g,2,-0,0),x);break e}rm(f,u,Cr,pl,ad,o,Jr,Ha,Bi,ca,g,0,-0,0)}}break}while(!0);An(i)}function rm(i,o,u,f,x,g,N,S,I,G,te,se,q,K){if(i.timeoutHandle=-1,se=o.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(Xs={stylesheets:null,count:0,unsuspend:y2},Y1(o),se=_2(),se!==null)){i.cancelPendingCommit=se(cm.bind(null,i,o,g,u,f,x,N,S,I,te,1,q,K)),ha(i,g,N,!G);return}cm(i,o,g,u,f,x,N,S,I)}function Ly(i){for(var o=i;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var x=u[f],g=x.getSnapshot;x=x.value;try{if(!Lr(g(),x))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ha(i,o,u,f){o&=~nd,o&=~Ha,i.suspendedLanes|=o,i.pingedLanes&=~o,f&&(i.warmLanes|=o),f=i.expirationTimes;for(var x=o;0<x;){var g=31-ht(x),N=1<<g;f[g]=-1,x&=~N}u!==0&&h0(i,u,o)}function xl(){return(nt&6)===0?(Us(0),!1):!0}function cd(){if(Ve!==null){if(at===0)var i=Ve.return;else i=Ve,Pn=ka=null,Su(i),Ti=null,Ts=0,i=Ve;for(;i!==null;)B1(i.alternate,i),i=i.return;Ve=null}}function Li(i,o){var u=i.timeoutHandle;u!==-1&&(i.timeoutHandle=-1,r2(u)),u=i.cancelPendingCommit,u!==null&&(i.cancelPendingCommit=null,u()),cd(),mt=i,Ve=u=In(i.current,null),qe=o,at=0,Vr=null,ca=!1,Mi=Ca(i,o),rd=!1,Bi=Jr=nd=Ha=ua=St=0,Cr=Ls=null,ad=!1,(o&8)!==0&&(o|=o&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=o;0<f;){var x=31-ht(f),g=1<<x;o|=i[x],f&=~g}return Gn=o,Lo(),u}function nm(i,o){Le=null,P.H=nl,o===_s||o===qo?(o=bh(),at=3):o===vh?(o=bh(),at=4):at=o===_1?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Vr=o,Ve===null&&(St=1,ll(i,$r(o,i.current)))}function am(){var i=P.H;return P.H=nl,i===null?nl:i}function im(){var i=P.A;return P.A=Py,i}function ud(){St=4,ca||(qe&4194048)!==qe&&Qr.current!==null||(Mi=!0),(ua&134217727)===0&&(Ha&134217727)===0||mt===null||ha(mt,qe,Jr,!1)}function dd(i,o,u){var f=nt;nt|=2;var x=am(),g=im();(mt!==i||qe!==o)&&(pl=null,Li(i,o)),o=!1;var N=St;e:do try{if(at!==0&&Ve!==null){var S=Ve,I=Vr;switch(at){case 8:cd(),N=6;break e;case 3:case 2:case 9:case 6:Qr.current===null&&(o=!0);var G=at;if(at=0,Vr=null,Fi(i,S,I,G),u&&Mi){N=0;break e}break;default:G=at,at=0,Vr=null,Fi(i,S,I,G)}}Fy(),N=St;break}catch(te){nm(i,te)}while(!0);return o&&i.shellSuspendCounter++,Pn=ka=null,nt=f,P.H=x,P.A=g,Ve===null&&(mt=null,qe=0,Lo()),N}function Fy(){for(;Ve!==null;)sm(Ve)}function Uy(i,o){var u=nt;nt|=2;var f=am(),x=im();mt!==i||qe!==o?(pl=null,ml=kr()+500,Li(i,o)):Mi=Ca(i,o);e:do try{if(at!==0&&Ve!==null){o=Ve;var g=Vr;t:switch(at){case 1:at=0,Vr=null,Fi(i,o,g,1);break;case 2:case 9:if(gh(g)){at=0,Vr=null,om(o);break}o=function(){at!==2&&at!==9||mt!==i||(at=7),An(i)},g.then(o,o);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:gh(g)?(at=0,Vr=null,om(o)):(at=0,Vr=null,Fi(i,o,g,7));break;case 5:var N=null;switch(Ve.tag){case 26:N=Ve.memoizedState;case 5:case 27:var S=Ve;if(!N||Vm(N)){at=0,Vr=null;var I=S.sibling;if(I!==null)Ve=I;else{var G=S.return;G!==null?(Ve=G,vl(G)):Ve=null}break t}}at=0,Vr=null,Fi(i,o,g,5);break;case 6:at=0,Vr=null,Fi(i,o,g,6);break;case 8:cd(),St=6;break e;default:throw Error(n(462))}}zy();break}catch(te){nm(i,te)}while(!0);return Pn=ka=null,P.H=f,P.A=x,nt=u,Ve!==null?0:(mt=null,qe=0,Lo(),St)}function zy(){for(;Ve!==null&&!wt();)sm(Ve)}function sm(i){var o=I1(i.alternate,i,Gn);i.memoizedProps=i.pendingProps,o===null?vl(i):Ve=o}function om(i){var o=i,u=o.alternate;switch(o.tag){case 15:case 0:o=C1(u,o,o.pendingProps,o.type,void 0,qe);break;case 11:o=C1(u,o,o.pendingProps,o.type.render,o.ref,qe);break;case 5:Su(o);default:B1(u,o),o=Ve=lh(o,Gn),o=I1(u,o,Gn)}i.memoizedProps=i.pendingProps,o===null?vl(i):Ve=o}function Fi(i,o,u,f){Pn=ka=null,Su(o),Ti=null,Ts=0;var x=o.return;try{if(Ty(i,x,o,u,qe)){St=1,ll(i,$r(u,i.current)),Ve=null;return}}catch(g){if(x!==null)throw Ve=x,g;St=1,ll(i,$r(u,i.current)),Ve=null;return}o.flags&32768?(Qe||f===1?i=!0:Mi||(qe&536870912)!==0?i=!1:(ca=i=!0,(f===2||f===9||f===3||f===6)&&(f=Qr.current,f!==null&&f.tag===13&&(f.flags|=16384))),lm(o,i)):vl(o)}function vl(i){var o=i;do{if((o.flags&32768)!==0){lm(o,ca);return}i=o.return;var u=Ry(o.alternate,o,Gn);if(u!==null){Ve=u;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=i}while(o!==null);St===0&&(St=5)}function lm(i,o){do{var u=Iy(i.alternate,i);if(u!==null){u.flags&=32767,Ve=u;return}if(u=i.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=u}while(i!==null);St=6,Ve=null}function cm(i,o,u,f,x,g,N,S,I){i.cancelPendingCommit=null;do gl();while(nr!==0);if((nt&6)!==0)throw Error(n(327));if(o!==null){if(o===i.current)throw Error(n(177));if(g=o.lanes|o.childLanes,g|=tu,yg(i,u,g,N,S,I),i===mt&&(Ve=mt=null,qe=0),Pi=o,fa=i,ki=u,sd=g,od=x,J1=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Zy(X,function(){return mm(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=P.T,P.T=null,x=oe.p,oe.p=2,N=nt,nt|=4;try{My(i,o,u)}finally{nt=N,oe.p=x,P.T=f}}nr=1,um(),dm(),fm()}}function um(){if(nr===1){nr=0;var i=fa,o=Pi,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=P.T,P.T=null;var f=oe.p;oe.p=2;var x=nt;nt|=4;try{X1(o,i);var g=Ad,N=Q0(i.containerInfo),S=g.focusedElem,I=g.selectionRange;if(N!==S&&S&&S.ownerDocument&&W0(S.ownerDocument.documentElement,S)){if(I!==null&&Kc(S)){var G=I.start,te=I.end;if(te===void 0&&(te=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(te,S.value.length);else{var se=S.ownerDocument||document,q=se&&se.defaultView||window;if(q.getSelection){var K=q.getSelection(),Me=S.textContent.length,Re=Math.min(I.start,Me),ct=I.end===void 0?Re:Math.min(I.end,Me);!K.extend&&Re>ct&&(N=ct,ct=Re,Re=N);var F=K0(S,Re),B=K0(S,ct);if(F&&B&&(K.rangeCount!==1||K.anchorNode!==F.node||K.anchorOffset!==F.offset||K.focusNode!==B.node||K.focusOffset!==B.offset)){var H=se.createRange();H.setStart(F.node,F.offset),K.removeAllRanges(),Re>ct?(K.addRange(H),K.extend(B.node,B.offset)):(H.setEnd(B.node,B.offset),K.addRange(H))}}}}for(se=[],K=S;K=K.parentNode;)K.nodeType===1&&se.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<se.length;S++){var ie=se[S];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Tl=!!wd,Ad=wd=null}finally{nt=x,oe.p=f,P.T=u}}i.current=o,nr=2}}function dm(){if(nr===2){nr=0;var i=fa,o=Pi,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=P.T,P.T=null;var f=oe.p;oe.p=2;var x=nt;nt|=4;try{V1(i,o.alternate,o)}finally{nt=x,oe.p=f,P.T=u}}nr=3}}function fm(){if(nr===4||nr===3){nr=0,$n();var i=fa,o=Pi,u=ki,f=J1;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?nr=5:(nr=0,Pi=fa=null,hm(i,i.pendingLanes));var x=i.pendingLanes;if(x===0&&(da=null),Oc(u),o=o.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(Se,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=P.T,x=oe.p,oe.p=2,P.T=null;try{for(var g=i.onRecoverableError,N=0;N<f.length;N++){var S=f[N];g(S.value,{componentStack:S.stack})}}finally{P.T=o,oe.p=x}}(ki&3)!==0&&gl(),An(i),x=i.pendingLanes,(u&4194090)!==0&&(x&42)!==0?i===ld?Fs++:(Fs=0,ld=i):Fs=0,Us(0)}}function hm(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,ys(o)))}function gl(i){return um(),dm(),fm(),mm()}function mm(){if(nr!==5)return!1;var i=fa,o=sd;sd=0;var u=Oc(ki),f=P.T,x=oe.p;try{oe.p=32>u?32:u,P.T=null,u=od,od=null;var g=fa,N=ki;if(nr=0,Pi=fa=null,ki=0,(nt&6)!==0)throw Error(n(331));var S=nt;if(nt|=4,W1(g.current),$1(g,g.current,N,u),nt=S,Us(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(Se,g)}catch{}return!0}finally{oe.p=x,P.T=f,hm(i,o)}}function pm(i,o,u){o=$r(u,o),o=Uu(i.stateNode,o,2),i=ra(i,o,2),i!==null&&(ns(i,2),An(i))}function dt(i,o,u){if(i.tag===3)pm(i,i,u);else for(;o!==null;){if(o.tag===3){pm(o,i,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(da===null||!da.has(f))){i=$r(u,i),u=y1(2),f=ra(o,u,2),f!==null&&(b1(u,f,o,i),ns(f,2),An(f));break}}o=o.return}}function fd(i,o,u){var f=i.pingCache;if(f===null){f=i.pingCache=new ky;var x=new Set;f.set(o,x)}else x=f.get(o),x===void 0&&(x=new Set,f.set(o,x));x.has(u)||(rd=!0,x.add(u),i=Vy.bind(null,i,o,u),o.then(i,i))}function Vy(i,o,u){var f=i.pingCache;f!==null&&f.delete(o),i.pingedLanes|=i.suspendedLanes&u,i.warmLanes&=~u,mt===i&&(qe&u)===u&&(St===4||St===3&&(qe&62914560)===qe&&300>kr()-id?(nt&2)===0&&Li(i,0):nd|=u,Bi===qe&&(Bi=0)),An(i)}function xm(i,o){o===0&&(o=f0()),i=bi(i,o),i!==null&&(ns(i,o),An(i))}function Hy(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),xm(i,u)}function Gy(i,o){var u=0;switch(i.tag){case 13:var f=i.stateNode,x=i.memoizedState;x!==null&&(u=x.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(o),xm(i,u)}function Zy(i,o){return je(i,o)}var yl=null,Ui=null,hd=!1,bl=!1,md=!1,Ga=0;function An(i){i!==Ui&&i.next===null&&(Ui===null?yl=Ui=i:Ui=Ui.next=i),bl=!0,hd||(hd=!0,qy())}function Us(i,o){if(!md&&bl){md=!0;do for(var u=!1,f=yl;f!==null;){if(i!==0){var x=f.pendingLanes;if(x===0)var g=0;else{var N=f.suspendedLanes,S=f.pingedLanes;g=(1<<31-ht(42|i)+1)-1,g&=x&~(N&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(u=!0,bm(f,g))}else g=qe,g=Sa(f,f===mt?g:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(g&3)===0||Ca(f,g)||(u=!0,bm(f,g));f=f.next}while(u);md=!1}}function Xy(){vm()}function vm(){bl=hd=!1;var i=0;Ga!==0&&(t2()&&(i=Ga),Ga=0);for(var o=kr(),u=null,f=yl;f!==null;){var x=f.next,g=gm(f,o);g===0?(f.next=null,u===null?yl=x:u.next=x,x===null&&(Ui=u)):(u=f,(i!==0||(g&3)!==0)&&(bl=!0)),f=x}Us(i)}function gm(i,o){for(var u=i.suspendedLanes,f=i.pingedLanes,x=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var N=31-ht(g),S=1<<N,I=x[N];I===-1?((S&u)===0||(S&f)!==0)&&(x[N]=So(S,o)):I<=o&&(i.expiredLanes|=S),g&=~S}if(o=mt,u=qe,u=Sa(i,i===o?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,u===0||i===o&&(at===2||at===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&rt(f),i.callbackNode=null,i.callbackPriority=0;if((u&3)===0||Ca(i,u)){if(o=u&-u,o===i.callbackPriority)return o;switch(f!==null&&rt(f),Oc(u)){case 2:case 8:u=M;break;case 32:u=X;break;case 268435456:u=we;break;default:u=X}return f=ym.bind(null,i),u=je(u,f),i.callbackPriority=o,i.callbackNode=u,o}return f!==null&&f!==null&&rt(f),i.callbackPriority=2,i.callbackNode=null,2}function ym(i,o){if(nr!==0&&nr!==5)return i.callbackNode=null,i.callbackPriority=0,null;var u=i.callbackNode;if(gl()&&i.callbackNode!==u)return null;var f=qe;return f=Sa(i,i===mt?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(tm(i,f,o),gm(i,kr()),i.callbackNode!=null&&i.callbackNode===u?ym.bind(null,i):null)}function bm(i,o){if(gl())return null;tm(i,o,!0)}function qy(){n2(function(){(nt&6)!==0?je(rs,Xy):vm()})}function pd(){return Ga===0&&(Ga=d0()),Ga}function _m(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Do(""+i)}function wm(i,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,i.id&&u.setAttribute("form",i.id),o.parentNode.insertBefore(u,o),i=new FormData(i),u.parentNode.removeChild(u),i}function $y(i,o,u,f,x){if(o==="submit"&&u&&u.stateNode===x){var g=_m((x[Ar]||null).action),N=f.submitter;N&&(o=(o=N[Ar]||null)?_m(o.formAction):N.getAttribute("formAction"),o!==null&&(g=o,N=null));var S=new Bo("action","action",null,f,x);i.push({event:S,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ga!==0){var I=N?wm(x,N):new FormData(x);Bu(u,{pending:!0,data:I,method:x.method,action:g},null,I)}}else typeof g=="function"&&(S.preventDefault(),I=N?wm(x,N):new FormData(x),Bu(u,{pending:!0,data:I,method:x.method,action:g},g,I))},currentTarget:x}]})}}for(var xd=0;xd<eu.length;xd++){var vd=eu[xd],Yy=vd.toLowerCase(),Ky=vd[0].toUpperCase()+vd.slice(1);an(Yy,"on"+Ky)}an(th,"onAnimationEnd"),an(rh,"onAnimationIteration"),an(nh,"onAnimationStart"),an("dblclick","onDoubleClick"),an("focusin","onFocus"),an("focusout","onBlur"),an(hy,"onTransitionRun"),an(my,"onTransitionStart"),an(py,"onTransitionCancel"),an(ah,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ja("onBeforeInput",["compositionend","keypress","textInput","paste"]),ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zs));function Am(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],x=f.event;f=f.listeners;e:{var g=void 0;if(o)for(var N=f.length-1;0<=N;N--){var S=f[N],I=S.instance,G=S.currentTarget;if(S=S.listener,I!==g&&x.isPropagationStopped())break e;g=S,x.currentTarget=G;try{g(x)}catch(te){ol(te)}x.currentTarget=null,g=I}else for(N=0;N<f.length;N++){if(S=f[N],I=S.instance,G=S.currentTarget,S=S.listener,I!==g&&x.isPropagationStopped())break e;g=S,x.currentTarget=G;try{g(x)}catch(te){ol(te)}x.currentTarget=null,g=I}}}}function He(i,o){var u=o[Tc];u===void 0&&(u=o[Tc]=new Set);var f=i+"__bubble";u.has(f)||(Nm(o,i,2,!1),u.add(f))}function gd(i,o,u){var f=0;o&&(f|=4),Nm(u,i,f,o)}var _l="_reactListening"+Math.random().toString(36).slice(2);function yd(i){if(!i[_l]){i[_l]=!0,v0.forEach(function(u){u!=="selectionchange"&&(Wy.has(u)||gd(u,!1,i),gd(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[_l]||(o[_l]=!0,gd("selectionchange",!1,o))}}function Nm(i,o,u,f){switch($m(o)){case 2:var x=N2;break;case 8:x=E2;break;default:x=Id}u=x.bind(null,o,u,i),x=void 0,!zc||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),f?x!==void 0?i.addEventListener(o,u,{capture:!0,passive:x}):i.addEventListener(o,u,!0):x!==void 0?i.addEventListener(o,u,{passive:x}):i.addEventListener(o,u,!1)}function bd(i,o,u,f,x){var g=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var N=f.tag;if(N===3||N===4){var S=f.stateNode.containerInfo;if(S===x)break;if(N===4)for(N=f.return;N!==null;){var I=N.tag;if((I===3||I===4)&&N.stateNode.containerInfo===x)return;N=N.return}for(;S!==null;){if(N=oi(S),N===null)return;if(I=N.tag,I===5||I===6||I===26||I===27){f=g=N;continue e}S=S.parentNode}}f=f.return}D0(function(){var G=g,te=Fc(u),se=[];e:{var q=ih.get(i);if(q!==void 0){var K=Bo,Me=i;switch(i){case"keypress":if(Io(u)===0)break e;case"keydown":case"keyup":K=Zg;break;case"focusin":Me="focus",K=Zc;break;case"focusout":Me="blur",K=Zc;break;case"beforeblur":case"afterblur":K=Zc;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=M0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Ig;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=$g;break;case th:case rh:case nh:K=Pg;break;case ah:K=Kg;break;case"scroll":case"scrollend":K=Dg;break;case"wheel":K=Qg;break;case"copy":case"cut":case"paste":K=Lg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=P0;break;case"toggle":case"beforetoggle":K=ey}var Re=(o&4)!==0,ct=!Re&&(i==="scroll"||i==="scrollend"),F=Re?q!==null?q+"Capture":null:q;Re=[];for(var B=G,H;B!==null;){var ie=B;if(H=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||H===null||F===null||(ie=ss(B,F),ie!=null&&Re.push(Vs(B,ie,H))),ct)break;B=B.return}0<Re.length&&(q=new K(q,Me,null,u,te),se.push({event:q,listeners:Re}))}}if((o&7)===0){e:{if(q=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",q&&u!==Lc&&(Me=u.relatedTarget||u.fromElement)&&(oi(Me)||Me[si]))break e;if((K||q)&&(q=te.window===te?te:(q=te.ownerDocument)?q.defaultView||q.parentWindow:window,K?(Me=u.relatedTarget||u.toElement,K=G,Me=Me?oi(Me):null,Me!==null&&(ct=s(Me),Re=Me.tag,Me!==ct||Re!==5&&Re!==27&&Re!==6)&&(Me=null)):(K=null,Me=G),K!==Me)){if(Re=M0,ie="onMouseLeave",F="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(Re=P0,ie="onPointerLeave",F="onPointerEnter",B="pointer"),ct=K==null?q:is(K),H=Me==null?q:is(Me),q=new Re(ie,B+"leave",K,u,te),q.target=ct,q.relatedTarget=H,ie=null,oi(te)===G&&(Re=new Re(F,B+"enter",Me,u,te),Re.target=H,Re.relatedTarget=ct,ie=Re),ct=ie,K&&Me)t:{for(Re=K,F=Me,B=0,H=Re;H;H=zi(H))B++;for(H=0,ie=F;ie;ie=zi(ie))H++;for(;0<B-H;)Re=zi(Re),B--;for(;0<H-B;)F=zi(F),H--;for(;B--;){if(Re===F||F!==null&&Re===F.alternate)break t;Re=zi(Re),F=zi(F)}Re=null}else Re=null;K!==null&&Em(se,q,K,Re,!1),Me!==null&&ct!==null&&Em(se,ct,Me,Re,!0)}}e:{if(q=G?is(G):window,K=q.nodeName&&q.nodeName.toLowerCase(),K==="select"||K==="input"&&q.type==="file")var Ae=G0;else if(V0(q))if(Z0)Ae=uy;else{Ae=ly;var Ue=oy}else K=q.nodeName,!K||K.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?G&&kc(G.elementType)&&(Ae=G0):Ae=cy;if(Ae&&(Ae=Ae(i,G))){H0(se,Ae,u,te);break e}Ue&&Ue(i,q,G),i==="focusout"&&G&&q.type==="number"&&G.memoizedProps.value!=null&&Pc(q,"number",q.value)}switch(Ue=G?is(G):window,i){case"focusin":(V0(Ue)||Ue.contentEditable==="true")&&(vi=Ue,Wc=G,ms=null);break;case"focusout":ms=Wc=vi=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,J0(se,u,te);break;case"selectionchange":if(fy)break;case"keydown":case"keyup":J0(se,u,te)}var Ce;if(qc)e:{switch(i){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else xi?U0(i,u)&&(Ie="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ie="onCompositionStart");Ie&&(k0&&u.locale!=="ko"&&(xi||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&xi&&(Ce=R0()):(Qn=te,Vc="value"in Qn?Qn.value:Qn.textContent,xi=!0)),Ue=wl(G,Ie),0<Ue.length&&(Ie=new B0(Ie,i,null,u,te),se.push({event:Ie,listeners:Ue}),Ce?Ie.data=Ce:(Ce=z0(u),Ce!==null&&(Ie.data=Ce)))),(Ce=ry?ny(i,u):ay(i,u))&&(Ie=wl(G,"onBeforeInput"),0<Ie.length&&(Ue=new B0("onBeforeInput","beforeinput",null,u,te),se.push({event:Ue,listeners:Ie}),Ue.data=Ce)),$y(se,i,G,u,te)}Am(se,o)})}function Vs(i,o,u){return{instance:i,listener:o,currentTarget:u}}function wl(i,o){for(var u=o+"Capture",f=[];i!==null;){var x=i,g=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||g===null||(x=ss(i,u),x!=null&&f.unshift(Vs(i,x,g)),x=ss(i,o),x!=null&&f.push(Vs(i,x,g))),i.tag===3)return f;i=i.return}return[]}function zi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Em(i,o,u,f,x){for(var g=o._reactName,N=[];u!==null&&u!==f;){var S=u,I=S.alternate,G=S.stateNode;if(S=S.tag,I!==null&&I===f)break;S!==5&&S!==26&&S!==27||G===null||(I=G,x?(G=ss(u,g),G!=null&&N.unshift(Vs(u,G,I))):x||(G=ss(u,g),G!=null&&N.push(Vs(u,G,I)))),u=u.return}N.length!==0&&i.push({event:o,listeners:N})}var Qy=/\r\n?/g,Jy=/\u0000|\uFFFD/g;function Sm(i){return(typeof i=="string"?i:""+i).replace(Qy,`
`).replace(Jy,"")}function Cm(i,o){return o=Sm(o),Sm(i)===o}function Al(){}function lt(i,o,u,f,x,g){switch(u){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||hi(i,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&hi(i,""+f);break;case"className":jo(i,"class",f);break;case"tabIndex":jo(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":jo(i,u,f);break;case"style":O0(i,f,g);break;case"data":if(o!=="object"){jo(i,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||u!=="href")){i.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=Do(""+f),i.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(u==="formAction"?(o!=="input"&&lt(i,o,"name",x.name,x,null),lt(i,o,"formEncType",x.formEncType,x,null),lt(i,o,"formMethod",x.formMethod,x,null),lt(i,o,"formTarget",x.formTarget,x,null)):(lt(i,o,"encType",x.encType,x,null),lt(i,o,"method",x.method,x,null),lt(i,o,"target",x.target,x,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(u);break}f=Do(""+f),i.setAttribute(u,f);break;case"onClick":f!=null&&(i.onclick=Al);break;case"onScroll":f!=null&&He("scroll",i);break;case"onScrollEnd":f!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(x.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}u=Do(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""+f):i.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,""):i.removeAttribute(u);break;case"capture":case"download":f===!0?i.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(u,f):i.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(u,f):i.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(u):i.setAttribute(u,f);break;case"popover":He("beforetoggle",i),He("toggle",i),Co(i,"popover",f);break;case"xlinkActuate":Dn(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Dn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Dn(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Dn(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Dn(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Dn(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Dn(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Dn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Dn(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Co(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Og.get(u)||u,Co(i,u,f))}}function _d(i,o,u,f,x,g){switch(u){case"style":O0(i,f,g);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(u=f.__html,u!=null){if(x.children!=null)throw Error(n(60));i.innerHTML=u}}break;case"children":typeof f=="string"?hi(i,f):(typeof f=="number"||typeof f=="bigint")&&hi(i,""+f);break;case"onScroll":f!=null&&He("scroll",i);break;case"onScrollEnd":f!=null&&He("scrollend",i);break;case"onClick":f!=null&&(i.onclick=Al);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!g0.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(x=u.endsWith("Capture"),o=u.slice(2,x?u.length-7:void 0),g=i[Ar]||null,g=g!=null?g[u]:null,typeof g=="function"&&i.removeEventListener(o,g,x),typeof f=="function")){typeof g!="function"&&g!==null&&(u in i?i[u]=null:i.hasAttribute(u)&&i.removeAttribute(u)),i.addEventListener(o,f,x);break e}u in i?i[u]=f:f===!0?i.setAttribute(u,""):Co(i,u,f)}}}function ar(i,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var f=!1,x=!1,g;for(g in u)if(u.hasOwnProperty(g)){var N=u[g];if(N!=null)switch(g){case"src":f=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:lt(i,o,g,N,u,null)}}x&&lt(i,o,"srcSet",u.srcSet,u,null),f&&lt(i,o,"src",u.src,u,null);return;case"input":He("invalid",i);var S=g=N=x=null,I=null,G=null;for(f in u)if(u.hasOwnProperty(f)){var te=u[f];if(te!=null)switch(f){case"name":x=te;break;case"type":N=te;break;case"checked":I=te;break;case"defaultChecked":G=te;break;case"value":g=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(137,o));break;default:lt(i,o,f,te,u,null)}}E0(i,g,S,I,G,N,x,!1),Oo(i);return;case"select":He("invalid",i),f=N=g=null;for(x in u)if(u.hasOwnProperty(x)&&(S=u[x],S!=null))switch(x){case"value":g=S;break;case"defaultValue":N=S;break;case"multiple":f=S;default:lt(i,o,x,S,u,null)}o=g,u=N,i.multiple=!!f,o!=null?fi(i,!!f,o,!1):u!=null&&fi(i,!!f,u,!0);return;case"textarea":He("invalid",i),g=x=f=null;for(N in u)if(u.hasOwnProperty(N)&&(S=u[N],S!=null))switch(N){case"value":f=S;break;case"defaultValue":x=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:lt(i,o,N,S,u,null)}C0(i,f,x,g),Oo(i);return;case"option":for(I in u)if(u.hasOwnProperty(I)&&(f=u[I],f!=null))switch(I){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:lt(i,o,I,f,u,null)}return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(f=0;f<zs.length;f++)He(zs[f],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in u)if(u.hasOwnProperty(G)&&(f=u[G],f!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:lt(i,o,G,f,u,null)}return;default:if(kc(o)){for(te in u)u.hasOwnProperty(te)&&(f=u[te],f!==void 0&&_d(i,o,te,f,u,void 0));return}}for(S in u)u.hasOwnProperty(S)&&(f=u[S],f!=null&&lt(i,o,S,f,u,null))}function e2(i,o,u,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,g=null,N=null,S=null,I=null,G=null,te=null;for(K in u){var se=u[K];if(u.hasOwnProperty(K)&&se!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":I=se;default:f.hasOwnProperty(K)||lt(i,o,K,null,f,se)}}for(var q in f){var K=f[q];if(se=u[q],f.hasOwnProperty(q)&&(K!=null||se!=null))switch(q){case"type":g=K;break;case"name":x=K;break;case"checked":G=K;break;case"defaultChecked":te=K;break;case"value":N=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,o));break;default:K!==se&&lt(i,o,q,K,f,se)}}Bc(i,N,S,I,G,te,g,x);return;case"select":K=N=S=q=null;for(g in u)if(I=u[g],u.hasOwnProperty(g)&&I!=null)switch(g){case"value":break;case"multiple":K=I;default:f.hasOwnProperty(g)||lt(i,o,g,null,f,I)}for(x in f)if(g=f[x],I=u[x],f.hasOwnProperty(x)&&(g!=null||I!=null))switch(x){case"value":q=g;break;case"defaultValue":S=g;break;case"multiple":N=g;default:g!==I&&lt(i,o,x,g,f,I)}o=S,u=N,f=K,q!=null?fi(i,!!u,q,!1):!!f!=!!u&&(o!=null?fi(i,!!u,o,!0):fi(i,!!u,u?[]:"",!1));return;case"textarea":K=q=null;for(S in u)if(x=u[S],u.hasOwnProperty(S)&&x!=null&&!f.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:lt(i,o,S,null,f,x)}for(N in f)if(x=f[N],g=u[N],f.hasOwnProperty(N)&&(x!=null||g!=null))switch(N){case"value":q=x;break;case"defaultValue":K=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==g&&lt(i,o,N,x,f,g)}S0(i,q,K);return;case"option":for(var Me in u)if(q=u[Me],u.hasOwnProperty(Me)&&q!=null&&!f.hasOwnProperty(Me))switch(Me){case"selected":i.selected=!1;break;default:lt(i,o,Me,null,f,q)}for(I in f)if(q=f[I],K=u[I],f.hasOwnProperty(I)&&q!==K&&(q!=null||K!=null))switch(I){case"selected":i.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:lt(i,o,I,q,f,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in u)q=u[Re],u.hasOwnProperty(Re)&&q!=null&&!f.hasOwnProperty(Re)&&lt(i,o,Re,null,f,q);for(G in f)if(q=f[G],K=u[G],f.hasOwnProperty(G)&&q!==K&&(q!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,o));break;default:lt(i,o,G,q,f,K)}return;default:if(kc(o)){for(var ct in u)q=u[ct],u.hasOwnProperty(ct)&&q!==void 0&&!f.hasOwnProperty(ct)&&_d(i,o,ct,void 0,f,q);for(te in f)q=f[te],K=u[te],!f.hasOwnProperty(te)||q===K||q===void 0&&K===void 0||_d(i,o,te,q,f,K);return}}for(var F in u)q=u[F],u.hasOwnProperty(F)&&q!=null&&!f.hasOwnProperty(F)&&lt(i,o,F,null,f,q);for(se in f)q=f[se],K=u[se],!f.hasOwnProperty(se)||q===K||q==null&&K==null||lt(i,o,se,q,f,K)}var wd=null,Ad=null;function Nl(i){return i.nodeType===9?i:i.ownerDocument}function jm(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Om(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Nd(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ed=null;function t2(){var i=window.event;return i&&i.type==="popstate"?i===Ed?!1:(Ed=i,!0):(Ed=null,!1)}var Tm=typeof setTimeout=="function"?setTimeout:void 0,r2=typeof clearTimeout=="function"?clearTimeout:void 0,Dm=typeof Promise=="function"?Promise:void 0,n2=typeof queueMicrotask=="function"?queueMicrotask:typeof Dm<"u"?function(i){return Dm.resolve(null).then(i).catch(a2)}:Tm;function a2(i){setTimeout(function(){throw i})}function ma(i){return i==="head"}function Rm(i,o){var u=o,f=0,x=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(0<f&&8>f){u=f;var N=i.ownerDocument;if(u&1&&Hs(N.documentElement),u&2&&Hs(N.body),u&4)for(u=N.head,Hs(u),N=u.firstChild;N;){var S=N.nextSibling,I=N.nodeName;N[as]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&N.rel.toLowerCase()==="stylesheet"||u.removeChild(N),N=S}}if(x===0){i.removeChild(g),Ws(o);return}x--}else u==="$"||u==="$?"||u==="$!"?x++:f=u.charCodeAt(0)-48;else f=0;u=g}while(u);Ws(o)}function Sd(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Sd(u),Dc(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}i.removeChild(u)}}function i2(i,o,u,f){for(;i.nodeType===1;){var x=u;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[as])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==x.rel||i.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||i.getAttribute("title")!==(x.title==null?null:x.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(x.src==null?null:x.src)||i.getAttribute("type")!==(x.type==null?null:x.type)||i.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var g=x.name==null?null:""+x.name;if(x.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=on(i.nextSibling),i===null)break}return null}function s2(i,o,u){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!u||(i=on(i.nextSibling),i===null))return null;return i}function Cd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function o2(i,o){var u=i.ownerDocument;if(i.data!=="$?"||u.readyState==="complete")o();else{var f=function(){o(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function on(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var jd=null;function Im(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}function Mm(i,o,u){switch(o=Nl(u),i){case"html":if(i=o.documentElement,!i)throw Error(n(452));return i;case"head":if(i=o.head,!i)throw Error(n(453));return i;case"body":if(i=o.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function Hs(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Dc(i)}var en=new Map,Bm=new Set;function El(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Zn=oe.d;oe.d={f:l2,r:c2,D:u2,C:d2,L:f2,m:h2,X:p2,S:m2,M:x2};function l2(){var i=Zn.f(),o=xl();return i||o}function c2(i){var o=li(i);o!==null&&o.tag===5&&o.type==="form"?t1(o):Zn.r(i)}var Vi=typeof document>"u"?null:document;function Pm(i,o,u){var f=Vi;if(f&&typeof o=="string"&&o){var x=qr(o);x='link[rel="'+i+'"][href="'+x+'"]',typeof u=="string"&&(x+='[crossorigin="'+u+'"]'),Bm.has(x)||(Bm.add(x),i={rel:i,crossOrigin:u,href:o},f.querySelector(x)===null&&(o=f.createElement("link"),ar(o,"link",i),Xt(o),f.head.appendChild(o)))}}function u2(i){Zn.D(i),Pm("dns-prefetch",i,null)}function d2(i,o){Zn.C(i,o),Pm("preconnect",i,o)}function f2(i,o,u){Zn.L(i,o,u);var f=Vi;if(f&&i&&o){var x='link[rel="preload"][as="'+qr(o)+'"]';o==="image"&&u&&u.imageSrcSet?(x+='[imagesrcset="'+qr(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(x+='[imagesizes="'+qr(u.imageSizes)+'"]')):x+='[href="'+qr(i)+'"]';var g=x;switch(o){case"style":g=Hi(i);break;case"script":g=Gi(i)}en.has(g)||(i=p({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:i,as:o},u),en.set(g,i),f.querySelector(x)!==null||o==="style"&&f.querySelector(Gs(g))||o==="script"&&f.querySelector(Zs(g))||(o=f.createElement("link"),ar(o,"link",i),Xt(o),f.head.appendChild(o)))}}function h2(i,o){Zn.m(i,o);var u=Vi;if(u&&i){var f=o&&typeof o.as=="string"?o.as:"script",x='link[rel="modulepreload"][as="'+qr(f)+'"][href="'+qr(i)+'"]',g=x;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Gi(i)}if(!en.has(g)&&(i=p({rel:"modulepreload",href:i},o),en.set(g,i),u.querySelector(x)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Zs(g)))return}f=u.createElement("link"),ar(f,"link",i),Xt(f),u.head.appendChild(f)}}}function m2(i,o,u){Zn.S(i,o,u);var f=Vi;if(f&&i){var x=ci(f).hoistableStyles,g=Hi(i);o=o||"default";var N=x.get(g);if(!N){var S={loading:0,preload:null};if(N=f.querySelector(Gs(g)))S.loading=5;else{i=p({rel:"stylesheet",href:i,"data-precedence":o},u),(u=en.get(g))&&Od(i,u);var I=N=f.createElement("link");Xt(I),ar(I,"link",i),I._p=new Promise(function(G,te){I.onload=G,I.onerror=te}),I.addEventListener("load",function(){S.loading|=1}),I.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Sl(N,o,f)}N={type:"stylesheet",instance:N,count:1,state:S},x.set(g,N)}}}function p2(i,o){Zn.X(i,o);var u=Vi;if(u&&i){var f=ci(u).hoistableScripts,x=Gi(i),g=f.get(x);g||(g=u.querySelector(Zs(x)),g||(i=p({src:i,async:!0},o),(o=en.get(x))&&Td(i,o),g=u.createElement("script"),Xt(g),ar(g,"link",i),u.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},f.set(x,g))}}function x2(i,o){Zn.M(i,o);var u=Vi;if(u&&i){var f=ci(u).hoistableScripts,x=Gi(i),g=f.get(x);g||(g=u.querySelector(Zs(x)),g||(i=p({src:i,async:!0,type:"module"},o),(o=en.get(x))&&Td(i,o),g=u.createElement("script"),Xt(g),ar(g,"link",i),u.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},f.set(x,g))}}function km(i,o,u,f){var x=(x=de.current)?El(x):null;if(!x)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Hi(u.href),u=ci(x).hoistableStyles,f=u.get(o),f||(f={type:"style",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){i=Hi(u.href);var g=ci(x).hoistableStyles,N=g.get(i);if(N||(x=x.ownerDocument||x,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,N),(g=x.querySelector(Gs(i)))&&!g._p&&(N.instance=g,N.state.loading=5),en.has(i)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},en.set(i,u),g||v2(x,i,u,N.state))),o&&f===null)throw Error(n(528,""));return N}if(o&&f!==null)throw Error(n(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Gi(u),u=ci(x).hoistableScripts,f=u.get(o),f||(f={type:"script",instance:null,count:0,state:null},u.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function Hi(i){return'href="'+qr(i)+'"'}function Gs(i){return'link[rel="stylesheet"]['+i+"]"}function Lm(i){return p({},i,{"data-precedence":i.precedence,precedence:null})}function v2(i,o,u,f){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=i.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),ar(o,"link",u),Xt(o),i.head.appendChild(o))}function Gi(i){return'[src="'+qr(i)+'"]'}function Zs(i){return"script[async]"+i}function Fm(i,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var f=i.querySelector('style[data-href~="'+qr(u.href)+'"]');if(f)return o.instance=f,Xt(f),f;var x=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),Xt(f),ar(f,"style",x),Sl(f,u.precedence,i),o.instance=f;case"stylesheet":x=Hi(u.href);var g=i.querySelector(Gs(x));if(g)return o.state.loading|=4,o.instance=g,Xt(g),g;f=Lm(u),(x=en.get(x))&&Od(f,x),g=(i.ownerDocument||i).createElement("link"),Xt(g);var N=g;return N._p=new Promise(function(S,I){N.onload=S,N.onerror=I}),ar(g,"link",f),o.state.loading|=4,Sl(g,u.precedence,i),o.instance=g;case"script":return g=Gi(u.src),(x=i.querySelector(Zs(g)))?(o.instance=x,Xt(x),x):(f=u,(x=en.get(g))&&(f=p({},u),Td(f,x)),i=i.ownerDocument||i,x=i.createElement("script"),Xt(x),ar(x,"link",f),i.head.appendChild(x),o.instance=x);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,Sl(f,u.precedence,i));return o.instance}function Sl(i,o,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=f.length?f[f.length-1]:null,g=x,N=0;N<f.length;N++){var S=f[N];if(S.dataset.precedence===o)g=S;else if(g!==x)break}g?g.parentNode.insertBefore(i,g.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(i,o.firstChild))}function Od(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function Td(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Cl=null;function Um(i,o,u){if(Cl===null){var f=new Map,x=Cl=new Map;x.set(u,f)}else x=Cl,f=x.get(u),f||(f=new Map,x.set(u,f));if(f.has(i))return f;for(f.set(i,null),u=u.getElementsByTagName(i),x=0;x<u.length;x++){var g=u[x];if(!(g[as]||g[cr]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var N=g.getAttribute(o)||"";N=i+N;var S=f.get(N);S?S.push(g):f.set(N,[g])}}return f}function zm(i,o,u){i=i.ownerDocument||i,i.head.insertBefore(u,o==="title"?i.querySelector("head > title"):null)}function g2(i,o,u){if(u===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Vm(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Xs=null;function y2(){}function b2(i,o,u){if(Xs===null)throw Error(n(475));var f=Xs;if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var x=Hi(u.href),g=i.querySelector(Gs(x));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(f.count++,f=jl.bind(f),i.then(f,f)),o.state.loading|=4,o.instance=g,Xt(g);return}g=i.ownerDocument||i,u=Lm(u),(x=en.get(x))&&Od(u,x),g=g.createElement("link"),Xt(g);var N=g;N._p=new Promise(function(S,I){N.onload=S,N.onerror=I}),ar(g,"link",u),o.instance=g}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=jl.bind(f),i.addEventListener("load",o),i.addEventListener("error",o))}}function _2(){if(Xs===null)throw Error(n(475));var i=Xs;return i.stylesheets&&i.count===0&&Dd(i,i.stylesheets),0<i.count?function(o){var u=setTimeout(function(){if(i.stylesheets&&Dd(i,i.stylesheets),i.unsuspend){var f=i.unsuspend;i.unsuspend=null,f()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(u)}}:null}function jl(){if(this.count--,this.count===0){if(this.stylesheets)Dd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ol=null;function Dd(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ol=new Map,o.forEach(w2,i),Ol=null,jl.call(i))}function w2(i,o){if(!(o.state.loading&4)){var u=Ol.get(i);if(u)var f=u.get(null);else{u=new Map,Ol.set(i,u);for(var x=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<x.length;g++){var N=x[g];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(u.set(N.dataset.precedence,N),f=N)}f&&u.set(null,f)}x=o.instance,N=x.getAttribute("data-precedence"),g=u.get(N)||f,g===f&&u.set(null,x),u.set(N,x),this.count++,f=jl.bind(this),x.addEventListener("load",f),x.addEventListener("error",f),g?g.parentNode.insertBefore(x,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(x,i.firstChild)),o.state.loading|=4}}var qs={$$typeof:C,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function A2(i,o,u,f,x,g,N,S){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Cc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cc(0),this.hiddenUpdates=Cc(null),this.identifierPrefix=f,this.onUncaughtError=x,this.onCaughtError=g,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function Hm(i,o,u,f,x,g,N,S,I,G,te,se){return i=new A2(i,o,u,N,S,I,G,se),o=1,g===!0&&(o|=24),g=Fr(3,null,null,o),i.current=g,g.stateNode=i,o=fu(),o.refCount++,i.pooledCache=o,o.refCount++,g.memoizedState={element:f,isDehydrated:u,cache:o},xu(g),i}function Gm(i){return i?(i=_i,i):_i}function Zm(i,o,u,f,x,g){x=Gm(x),f.context===null?f.context=x:f.pendingContext=x,f=ta(o),f.payload={element:u},g=g===void 0?null:g,g!==null&&(f.callback=g),u=ra(i,f,o),u!==null&&(Gr(u,i,o),As(u,i,o))}function Xm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function Rd(i,o){Xm(i,o),(i=i.alternate)&&Xm(i,o)}function qm(i){if(i.tag===13){var o=bi(i,67108864);o!==null&&Gr(o,i,67108864),Rd(i,67108864)}}var Tl=!0;function N2(i,o,u,f){var x=P.T;P.T=null;var g=oe.p;try{oe.p=2,Id(i,o,u,f)}finally{oe.p=g,P.T=x}}function E2(i,o,u,f){var x=P.T;P.T=null;var g=oe.p;try{oe.p=8,Id(i,o,u,f)}finally{oe.p=g,P.T=x}}function Id(i,o,u,f){if(Tl){var x=Md(f);if(x===null)bd(i,o,f,Dl,u),Ym(i,f);else if(C2(x,i,o,u,f))f.stopPropagation();else if(Ym(i,f),o&4&&-1<S2.indexOf(i)){for(;x!==null;){var g=li(x);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var N=Tn(g.pendingLanes);if(N!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;N;){var I=1<<31-ht(N);S.entanglements[1]|=I,N&=~I}An(g),(nt&6)===0&&(ml=kr()+500,Us(0))}}break;case 13:S=bi(g,2),S!==null&&Gr(S,g,2),xl(),Rd(g,2)}if(g=Md(f),g===null&&bd(i,o,f,Dl,u),g===x)break;x=g}x!==null&&f.stopPropagation()}else bd(i,o,f,null,u)}}function Md(i){return i=Fc(i),Bd(i)}var Dl=null;function Bd(i){if(Dl=null,i=oi(i),i!==null){var o=s(i);if(o===null)i=null;else{var u=o.tag;if(u===13){if(i=l(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Dl=i,null}function $m(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ts()){case rs:return 2;case M:return 8;case X:case re:return 32;case we:return 268435456;default:return 32}default:return 32}}var Pd=!1,pa=null,xa=null,va=null,$s=new Map,Ys=new Map,ga=[],S2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ym(i,o){switch(i){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":va=null;break;case"pointerover":case"pointerout":$s.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ys.delete(o.pointerId)}}function Ks(i,o,u,f,x,g){return i===null||i.nativeEvent!==g?(i={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:g,targetContainers:[x]},o!==null&&(o=li(o),o!==null&&qm(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),i)}function C2(i,o,u,f,x){switch(o){case"focusin":return pa=Ks(pa,i,o,u,f,x),!0;case"dragenter":return xa=Ks(xa,i,o,u,f,x),!0;case"mouseover":return va=Ks(va,i,o,u,f,x),!0;case"pointerover":var g=x.pointerId;return $s.set(g,Ks($s.get(g)||null,i,o,u,f,x)),!0;case"gotpointercapture":return g=x.pointerId,Ys.set(g,Ks(Ys.get(g)||null,i,o,u,f,x)),!0}return!1}function Km(i){var o=oi(i.target);if(o!==null){var u=s(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){i.blockedOn=o,bg(i.priority,function(){if(u.tag===13){var f=Hr();f=jc(f);var x=bi(u,f);x!==null&&Gr(x,u,f),Rd(u,f)}});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Rl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Md(i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Lc=f,u.target.dispatchEvent(f),Lc=null}else return o=li(u),o!==null&&qm(o),i.blockedOn=u,!1;o.shift()}return!0}function Wm(i,o,u){Rl(i)&&u.delete(o)}function j2(){Pd=!1,pa!==null&&Rl(pa)&&(pa=null),xa!==null&&Rl(xa)&&(xa=null),va!==null&&Rl(va)&&(va=null),$s.forEach(Wm),Ys.forEach(Wm)}function Il(i,o){i.blockedOn===o&&(i.blockedOn=null,Pd||(Pd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,j2)))}var Ml=null;function Qm(i){Ml!==i&&(Ml=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ml===i&&(Ml=null);for(var o=0;o<i.length;o+=3){var u=i[o],f=i[o+1],x=i[o+2];if(typeof f!="function"){if(Bd(f||u)===null)continue;break}var g=li(u);g!==null&&(i.splice(o,3),o-=3,Bu(g,{pending:!0,data:x,method:u.method,action:f},f,x))}}))}function Ws(i){function o(I){return Il(I,i)}pa!==null&&Il(pa,i),xa!==null&&Il(xa,i),va!==null&&Il(va,i),$s.forEach(o),Ys.forEach(o);for(var u=0;u<ga.length;u++){var f=ga[u];f.blockedOn===i&&(f.blockedOn=null)}for(;0<ga.length&&(u=ga[0],u.blockedOn===null);)Km(u),u.blockedOn===null&&ga.shift();if(u=(i.ownerDocument||i).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var x=u[f],g=u[f+1],N=x[Ar]||null;if(typeof g=="function")N||Qm(u);else if(N){var S=null;if(g&&g.hasAttribute("formAction")){if(x=g,N=g[Ar]||null)S=N.formAction;else if(Bd(x)!==null)continue}else S=N.action;typeof S=="function"?u[f+1]=S:(u.splice(f,3),f-=3),Qm(u)}}}function kd(i){this._internalRoot=i}Bl.prototype.render=kd.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(n(409));var u=o.current,f=Hr();Zm(u,f,i,o,null,null)},Bl.prototype.unmount=kd.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Zm(i.current,2,null,i,null,null),xl(),o[si]=null}};function Bl(i){this._internalRoot=i}Bl.prototype.unstable_scheduleHydration=function(i){if(i){var o=p0();i={blockedOn:null,target:i,priority:o};for(var u=0;u<ga.length&&o!==0&&o<ga[u].priority;u++);ga.splice(u,0,i),u===0&&Km(i)}};var Jm=e.version;if(Jm!=="19.1.0")throw Error(n(527,Jm,"19.1.0"));oe.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=h(o),i=i!==null?m(i):null,i=i===null?null:i.stateNode,i};var O2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{Se=Pl.inject(O2),Be=Pl}catch{}}return Js.createRoot=function(i,o){if(!a(i))throw Error(n(299));var u=!1,f="",x=p1,g=x1,N=v1,S=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(S=o.unstable_transitionCallbacks)),o=Hm(i,1,!1,null,null,u,f,x,g,N,S,null),i[si]=o.current,yd(i),new kd(o)},Js.hydrateRoot=function(i,o,u){if(!a(i))throw Error(n(299));var f=!1,x="",g=p1,N=x1,S=v1,I=null,G=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(x=u.identifierPrefix),u.onUncaughtError!==void 0&&(g=u.onUncaughtError),u.onCaughtError!==void 0&&(N=u.onCaughtError),u.onRecoverableError!==void 0&&(S=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(I=u.unstable_transitionCallbacks),u.formState!==void 0&&(G=u.formState)),o=Hm(i,1,!0,o,u??null,f,x,g,N,S,I,G),o.context=Gm(null),u=o.current,f=Hr(),f=jc(f),x=ta(f),x.callback=null,ra(u,x,f),u=f,o.current.lanes=u,ns(o,u),An(o),i[si]=o.current,yd(i),new Bl(o)},Js.version="19.1.0",Js}var cp;function U2(){if(cp)return Ud.exports;cp=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ud.exports=F2(),Ud.exports}var z2=U2(),cc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},uc=typeof window>"u"||"Deno"in globalThis;function dn(){}function V2(t,e){return typeof t=="function"?t(e):t}function H2(t){return typeof t=="number"&&t>=0&&t!==1/0}function G2(t,e){return Math.max(t+(e||0)-Date.now(),0)}function lf(t,e){return typeof t=="function"?t(e):t}function Z2(t,e){return typeof t=="function"?t(e):t}function up(t,e){const{type:r="all",exact:n,fetchStatus:a,predicate:s,queryKey:l,stale:d}=t;if(l){if(n){if(e.queryHash!==Ff(l,e.options))return!1}else if(!vo(e.queryKey,l))return!1}if(r!=="all"){const h=e.isActive();if(r==="active"&&!h||r==="inactive"&&h)return!1}return!(typeof d=="boolean"&&e.isStale()!==d||a&&a!==e.state.fetchStatus||s&&!s(e))}function dp(t,e){const{exact:r,status:n,predicate:a,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(xo(e.options.mutationKey)!==xo(s))return!1}else if(!vo(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||a&&!a(e))}function Ff(t,e){return(e?.queryKeyHashFn||xo)(t)}function xo(t){return JSON.stringify(t,(e,r)=>cf(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function vo(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>vo(t[r],e[r])):!1}function qx(t,e){if(t===e)return t;const r=fp(t)&&fp(e);if(r||cf(t)&&cf(e)){const n=r?t:Object.keys(t),a=n.length,s=r?e:Object.keys(e),l=s.length,d=r?[]:{},h=new Set(n);let m=0;for(let p=0;p<l;p++){const v=r?p:s[p];(!r&&h.has(v)||r)&&t[v]===void 0&&e[v]===void 0?(d[v]=void 0,m++):(d[v]=qx(t[v],e[v]),d[v]===t[v]&&t[v]!==void 0&&m++)}return a===l&&m===a?t:d}return e}function fp(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function cf(t){if(!hp(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!hp(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function hp(t){return Object.prototype.toString.call(t)==="[object Object]"}function X2(t){return new Promise(e=>{setTimeout(e,t)})}function q2(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?qx(t,e):e}function $2(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function Y2(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Uf=Symbol();function $x(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:!t.queryFn||t.queryFn===Uf?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var K2=class extends cc{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!uc&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(e=>{typeof e=="boolean"?this.setFocused(e):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Yx=new K2,W2=class extends cc{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!uc&&window.addEventListener){const e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},ec=new W2;function Q2(){let t,e;const r=new Promise((a,s)=>{t=a,e=s});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),e(a)},r}function J2(t){return Math.min(1e3*2**t,3e4)}function Kx(t){return(t??"online")==="online"?ec.isOnline():!0}var Wx=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function Gd(t){return t instanceof Wx}function Qx(t){let e=!1,r=0,n=!1,a;const s=Q2(),l=w=>{n||(y(new Wx(w)),t.abort?.())},d=()=>{e=!0},h=()=>{e=!1},m=()=>Yx.isFocused()&&(t.networkMode==="always"||ec.isOnline())&&t.canRun(),p=()=>Kx(t.networkMode)&&t.canRun(),v=w=>{n||(n=!0,t.onSuccess?.(w),a?.(),s.resolve(w))},y=w=>{n||(n=!0,t.onError?.(w),a?.(),s.reject(w))},b=()=>new Promise(w=>{a=E=>{(n||m())&&w(E)},t.onPause?.()}).then(()=>{a=void 0,n||t.onContinue?.()}),_=()=>{if(n)return;let w;const E=r===0?t.initialPromise:void 0;try{w=E??t.fn()}catch(j){w=Promise.reject(j)}Promise.resolve(w).then(v).catch(j=>{if(n)return;const A=t.retry??(uc?0:3),C=t.retryDelay??J2,D=typeof C=="function"?C(r,j):C,R=A===!0||typeof A=="number"&&r<A||typeof A=="function"&&A(r,j);if(e||!R){y(j);return}r++,t.onFail?.(r,j),X2(D).then(()=>m()?void 0:b()).then(()=>{e?y(j):_()})})};return{promise:s,cancel:l,continue:()=>(a?.(),s),cancelRetry:d,continueRetry:h,canStart:p,start:()=>(p()?_():b().then(_),s)}}var eb=t=>setTimeout(t,0);function tb(){let t=[],e=0,r=d=>{d()},n=d=>{d()},a=eb;const s=d=>{e?t.push(d):a(()=>{r(d)})},l=()=>{const d=t;t=[],d.length&&a(()=>{n(()=>{d.forEach(h=>{r(h)})})})};return{batch:d=>{let h;e++;try{h=d()}finally{e--,e||l()}return h},batchCalls:d=>(...h)=>{s(()=>{d(...h)})},schedule:s,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{n=d},setScheduler:d=>{a=d}}}var wr=tb(),Jx=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),H2(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(uc?1/0:300*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},rb=class extends Jx{#e;#t;#r;#a;#n;#s;#o;constructor(t){super(),this.#o=!1,this.#s=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#a=t.client,this.#r=this.#a.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=ab(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(t){this.options={...this.#s,...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,e){const r=q2(this.state.data,t,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:e?.updatedAt,manual:e?.manual}),r}setState(t,e){this.#i({type:"setState",state:t,setStateOptions:e})}cancel(t){const e=this.#n?.promise;return this.#n?.cancel(t),e?e.then(dn).catch(dn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Z2(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Uf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>lf(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!G2(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(e=>e.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(e=>e.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}fetch(t,e){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&e?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},a=()=>{const h=$x(this.options,e),p=(()=>{const v={client:this.#a,queryKey:this.queryKey,meta:this.meta};return n(v),v})();return this.#o=!1,this.options.persister?this.options.persister(h,p,this):h(p)},l=(()=>{const h={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:a};return n(h),h})();this.options.behavior?.onFetch(l,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==l.fetchOptions?.meta)&&this.#i({type:"fetch",meta:l.fetchOptions?.meta});const d=h=>{Gd(h)&&h.silent||this.#i({type:"error",error:h}),Gd(h)||(this.#r.config.onError?.(h,this),this.#r.config.onSettled?.(this.state.data,h,this)),this.scheduleGc()};return this.#n=Qx({initialPromise:e?.initialPromise,fn:l.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{if(h===void 0){d(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(m){d(m);return}this.#r.config.onSuccess?.(h,this),this.#r.config.onSettled?.(h,this.state.error,this),this.scheduleGc()},onError:d,onFail:(h,m)=>{this.#i({type:"failed",failureCount:h,error:m})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}),this.#n.start()}#i(t){const e=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...nb(r.data,this.options),fetchMeta:t.meta??null};case"success":return this.#t=void 0,{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return Gd(n)&&n.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=e(this.state),wr.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function nb(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Kx(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function ab(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var ib=class extends cc{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,e,r){const n=e.queryKey,a=e.queryHash??Ff(n,e);let s=this.get(a);return s||(s=new rb({client:t,queryKey:n,queryHash:a,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(s)),s}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#e.get(t.queryHash);e&&(t.destroy(),e===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){wr.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(r=>up(e,r))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(r=>up(t,r)):e}notify(t){wr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){wr.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){wr.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},sb=class extends Jx{#e;#t;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||ob(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const e=()=>{this.#a({type:"continue"})};this.#r=Qx({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(a,s)=>{this.#a({type:"failed",failureCount:a,error:s})},onPause:()=>{this.#a({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const r=this.state.status==="pending",n=!this.#r.canStart();try{if(r)e();else{this.#a({type:"pending",variables:t,isPaused:n}),await this.#t.config.onMutate?.(t,this);const s=await this.options.onMutate?.(t);s!==this.state.context&&this.#a({type:"pending",context:s,variables:t,isPaused:n})}const a=await this.#r.start();return await this.#t.config.onSuccess?.(a,t,this.state.context,this),await this.options.onSuccess?.(a,t,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,t,this.state.context),this.#a({type:"success",data:a}),a}catch(a){try{throw await this.#t.config.onError?.(a,t,this.state.context,this),await this.options.onError?.(a,t,this.state.context),await this.#t.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,t,this.state.context),a}finally{this.#a({type:"error",error:a})}}finally{this.#t.runNext(this)}}#a(t){const e=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),wr.batch(()=>{this.#e.forEach(r=>{r.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function ob(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var lb=class extends cc{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,e,r){const n=new sb({mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(e),state:r});return this.add(n),n}add(t){this.#e.add(t);const e=kl(t);if(typeof e=="string"){const r=this.#t.get(e);r?r.push(t):this.#t.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const e=kl(t);if(typeof e=="string"){const r=this.#t.get(e);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&this.#t.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=kl(t);if(typeof e=="string"){const n=this.#t.get(e)?.find(a=>a.state.status==="pending");return!n||n===t}else return!0}runNext(t){const e=kl(t);return typeof e=="string"?this.#t.get(e)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){wr.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const e={exact:!0,...t};return this.getAll().find(r=>dp(e,r))}findAll(t={}){return this.getAll().filter(e=>dp(t,e))}notify(t){wr.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return wr.batch(()=>Promise.all(t.map(e=>e.continue().catch(dn))))}};function kl(t){return t.options.scope?.id}function mp(t){return{onFetch:(e,r)=>{const n=e.options,a=e.fetchOptions?.meta?.fetchMore?.direction,s=e.state.data?.pages||[],l=e.state.data?.pageParams||[];let d={pages:[],pageParams:[]},h=0;const m=async()=>{let p=!1;const v=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},y=$x(e.options,e.fetchOptions),b=async(_,w,E)=>{if(p)return Promise.reject();if(w==null&&_.pages.length)return Promise.resolve(_);const A=(()=>{const L={client:e.client,queryKey:e.queryKey,pageParam:w,direction:E?"backward":"forward",meta:e.options.meta};return v(L),L})(),C=await y(A),{maxPages:D}=e.options,R=E?Y2:$2;return{pages:R(_.pages,C,D),pageParams:R(_.pageParams,w,D)}};if(a&&s.length){const _=a==="backward",w=_?cb:pp,E={pages:s,pageParams:l},j=w(n,E);d=await b(E,j,_)}else{const _=t??s.length;do{const w=h===0?l[0]??n.initialPageParam:pp(n,d);if(h>0&&w==null)break;d=await b(d,w),h++}while(h<_)}return d};e.options.persister?e.fetchFn=()=>e.options.persister?.(m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r):e.fetchFn=m}}}function pp(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function cb(t,{pages:e,pageParams:r}){return e.length>0?t.getPreviousPageParam?.(e[0],e,r[0],r):void 0}var ub=class{#e;#t;#r;#a;#n;#s;#o;#i;constructor(t={}){this.#e=t.queryCache||new ib,this.#t=t.mutationCache||new lb,this.#r=t.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#s=0}mount(){this.#s++,this.#s===1&&(this.#o=Yx.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=ec.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#s--,this.#s===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=this.#e.build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(lf(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),s=this.#e.get(n.queryHash)?.state.data,l=V2(e,s);if(l!==void 0)return this.#e.build(this,n).setData(l,{...r,manual:!0})}setQueriesData(t,e,r){return wr.batch(()=>this.#e.findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#e.get(e.queryHash)?.state}removeQueries(t){const e=this.#e;wr.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=this.#e;return wr.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=wr.batch(()=>this.#e.findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(dn).catch(dn)}invalidateQueries(t,e={}){return wr.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=wr.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let s=a.fetch(void 0,r);return r.throwOnError||(s=s.catch(dn)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(dn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=this.#e.build(this,e);return r.isStaleByTime(lf(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(dn).catch(dn)}fetchInfiniteQuery(t){return t.behavior=mp(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(dn).catch(dn)}ensureInfiniteQueryData(t){return t.behavior=mp(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ec.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,e){this.#a.set(xo(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#a.values()],r={};return e.forEach(n=>{vo(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){this.#n.set(xo(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#n.values()],r={};return e.forEach(n=>{vo(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Ff(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Uf&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},db=z.createContext(void 0),fb=({client:t,children:e})=>(z.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(db.Provider,{value:t,children:e}));function ev(t,e){return function(){return t.apply(e,arguments)}}const{toString:hb}=Object.prototype,{getPrototypeOf:zf}=Object,{iterator:dc,toStringTag:tv}=Symbol,fc=(t=>e=>{const r=hb.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),xn=t=>(t=t.toLowerCase(),e=>fc(e)===t),hc=t=>e=>typeof e===t,{isArray:Wi}=Array,go=hc("undefined");function mb(t){return t!==null&&!go(t)&&t.constructor!==null&&!go(t.constructor)&&Rr(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const rv=xn("ArrayBuffer");function pb(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&rv(t.buffer),e}const xb=hc("string"),Rr=hc("function"),nv=hc("number"),mc=t=>t!==null&&typeof t=="object",vb=t=>t===!0||t===!1,ql=t=>{if(fc(t)!=="object")return!1;const e=zf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(tv in t)&&!(dc in t)},gb=xn("Date"),yb=xn("File"),bb=xn("Blob"),_b=xn("FileList"),wb=t=>mc(t)&&Rr(t.pipe),Ab=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Rr(t.append)&&((e=fc(t))==="formdata"||e==="object"&&Rr(t.toString)&&t.toString()==="[object FormData]"))},Nb=xn("URLSearchParams"),[Eb,Sb,Cb,jb]=["ReadableStream","Request","Response","Headers"].map(xn),Ob=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function _o(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,a;if(typeof t!="object"&&(t=[t]),Wi(t))for(n=0,a=t.length;n<a;n++)e.call(null,t[n],n,t);else{const s=r?Object.getOwnPropertyNames(t):Object.keys(t),l=s.length;let d;for(n=0;n<l;n++)d=s[n],e.call(null,t[d],d,t)}}function av(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,a;for(;n-- >0;)if(a=r[n],e===a.toLowerCase())return a;return null}const $a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,iv=t=>!go(t)&&t!==$a;function uf(){const{caseless:t}=iv(this)&&this||{},e={},r=(n,a)=>{const s=t&&av(e,a)||a;ql(e[s])&&ql(n)?e[s]=uf(e[s],n):ql(n)?e[s]=uf({},n):Wi(n)?e[s]=n.slice():e[s]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&_o(arguments[n],r);return e}const Tb=(t,e,r,{allOwnKeys:n}={})=>(_o(e,(a,s)=>{r&&Rr(a)?t[s]=ev(a,r):t[s]=a},{allOwnKeys:n}),t),Db=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Rb=(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Ib=(t,e,r,n)=>{let a,s,l;const d={};if(e=e||{},t==null)return e;do{for(a=Object.getOwnPropertyNames(t),s=a.length;s-- >0;)l=a[s],(!n||n(l,t,e))&&!d[l]&&(e[l]=t[l],d[l]=!0);t=r!==!1&&zf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Mb=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},Bb=t=>{if(!t)return null;if(Wi(t))return t;let e=t.length;if(!nv(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Pb=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&zf(Uint8Array)),kb=(t,e)=>{const n=(t&&t[dc]).call(t);let a;for(;(a=n.next())&&!a.done;){const s=a.value;e.call(t,s[0],s[1])}},Lb=(t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},Fb=xn("HTMLFormElement"),Ub=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),xp=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),zb=xn("RegExp"),sv=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};_o(r,(a,s)=>{let l;(l=e(a,s,t))!==!1&&(n[s]=l||a)}),Object.defineProperties(t,n)},Vb=t=>{sv(t,(e,r)=>{if(Rr(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Rr(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Hb=(t,e)=>{const r={},n=a=>{a.forEach(s=>{r[s]=!0})};return Wi(t)?n(t):n(String(t).split(e)),r},Gb=()=>{},Zb=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Xb(t){return!!(t&&Rr(t.append)&&t[tv]==="FormData"&&t[dc])}const qb=t=>{const e=new Array(10),r=(n,a)=>{if(mc(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[a]=n;const s=Wi(n)?[]:{};return _o(n,(l,d)=>{const h=r(l,a+1);!go(h)&&(s[d]=h)}),e[a]=void 0,s}}return n};return r(t,0)},$b=xn("AsyncFunction"),Yb=t=>t&&(mc(t)||Rr(t))&&Rr(t.then)&&Rr(t.catch),ov=((t,e)=>t?setImmediate:e?((r,n)=>($a.addEventListener("message",({source:a,data:s})=>{a===$a&&s===r&&n.length&&n.shift()()},!1),a=>{n.push(a),$a.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Rr($a.postMessage)),Kb=typeof queueMicrotask<"u"?queueMicrotask.bind($a):typeof process<"u"&&process.nextTick||ov,Wb=t=>t!=null&&Rr(t[dc]),Q={isArray:Wi,isArrayBuffer:rv,isBuffer:mb,isFormData:Ab,isArrayBufferView:pb,isString:xb,isNumber:nv,isBoolean:vb,isObject:mc,isPlainObject:ql,isReadableStream:Eb,isRequest:Sb,isResponse:Cb,isHeaders:jb,isUndefined:go,isDate:gb,isFile:yb,isBlob:bb,isRegExp:zb,isFunction:Rr,isStream:wb,isURLSearchParams:Nb,isTypedArray:Pb,isFileList:_b,forEach:_o,merge:uf,extend:Tb,trim:Ob,stripBOM:Db,inherits:Rb,toFlatObject:Ib,kindOf:fc,kindOfTest:xn,endsWith:Mb,toArray:Bb,forEachEntry:kb,matchAll:Lb,isHTMLForm:Fb,hasOwnProperty:xp,hasOwnProp:xp,reduceDescriptors:sv,freezeMethods:Vb,toObjectSet:Hb,toCamelCase:Ub,noop:Gb,toFiniteNumber:Zb,findKey:av,global:$a,isContextDefined:iv,isSpecCompliantForm:Xb,toJSONObject:qb,isAsyncFn:$b,isThenable:Yb,setImmediate:ov,asap:Kb,isIterable:Wb};function Pe(t,e,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Q.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Q.toJSONObject(this.config),code:this.code,status:this.status}}});const lv=Pe.prototype,cv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{cv[t]={value:t}});Object.defineProperties(Pe,cv);Object.defineProperty(lv,"isAxiosError",{value:!0});Pe.from=(t,e,r,n,a,s)=>{const l=Object.create(lv);return Q.toFlatObject(t,l,function(h){return h!==Error.prototype},d=>d!=="isAxiosError"),Pe.call(l,t.message,e,r,n,a),l.cause=t,l.name=t.name,s&&Object.assign(l,s),l};const Qb=null;function df(t){return Q.isPlainObject(t)||Q.isArray(t)}function uv(t){return Q.endsWith(t,"[]")?t.slice(0,-2):t}function vp(t,e,r){return t?t.concat(e).map(function(a,s){return a=uv(a),!r&&s?"["+a+"]":a}).join(r?".":""):e}function Jb(t){return Q.isArray(t)&&!t.some(df)}const e_=Q.toFlatObject(Q,{},null,function(e){return/^is[A-Z]/.test(e)});function pc(t,e,r){if(!Q.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=Q.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,E){return!Q.isUndefined(E[w])});const n=r.metaTokens,a=r.visitor||p,s=r.dots,l=r.indexes,h=(r.Blob||typeof Blob<"u"&&Blob)&&Q.isSpecCompliantForm(e);if(!Q.isFunction(a))throw new TypeError("visitor must be a function");function m(_){if(_===null)return"";if(Q.isDate(_))return _.toISOString();if(Q.isBoolean(_))return _.toString();if(!h&&Q.isBlob(_))throw new Pe("Blob is not supported. Use a Buffer instead.");return Q.isArrayBuffer(_)||Q.isTypedArray(_)?h&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function p(_,w,E){let j=_;if(_&&!E&&typeof _=="object"){if(Q.endsWith(w,"{}"))w=n?w:w.slice(0,-2),_=JSON.stringify(_);else if(Q.isArray(_)&&Jb(_)||(Q.isFileList(_)||Q.endsWith(w,"[]"))&&(j=Q.toArray(_)))return w=uv(w),j.forEach(function(C,D){!(Q.isUndefined(C)||C===null)&&e.append(l===!0?vp([w],D,s):l===null?w:w+"[]",m(C))}),!1}return df(_)?!0:(e.append(vp(E,w,s),m(_)),!1)}const v=[],y=Object.assign(e_,{defaultVisitor:p,convertValue:m,isVisitable:df});function b(_,w){if(!Q.isUndefined(_)){if(v.indexOf(_)!==-1)throw Error("Circular reference detected in "+w.join("."));v.push(_),Q.forEach(_,function(j,A){(!(Q.isUndefined(j)||j===null)&&a.call(e,j,Q.isString(A)?A.trim():A,w,y))===!0&&b(j,w?w.concat(A):[A])}),v.pop()}}if(!Q.isObject(t))throw new TypeError("data must be an object");return b(t),e}function gp(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Vf(t,e){this._pairs=[],t&&pc(t,this,e)}const dv=Vf.prototype;dv.append=function(e,r){this._pairs.push([e,r])};dv.toString=function(e){const r=e?function(n){return e.call(this,n,gp)}:gp;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function t_(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fv(t,e,r){if(!e)return t;const n=r&&r.encode||t_;Q.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let s;if(a?s=a(e,r):s=Q.isURLSearchParams(e)?e.toString():new Vf(e,r).toString(n),s){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class yp{constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Q.forEach(this.handlers,function(n){n!==null&&e(n)})}}const hv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},r_=typeof URLSearchParams<"u"?URLSearchParams:Vf,n_=typeof FormData<"u"?FormData:null,a_=typeof Blob<"u"?Blob:null,i_={isBrowser:!0,classes:{URLSearchParams:r_,FormData:n_,Blob:a_},protocols:["http","https","file","blob","url","data"]},Hf=typeof window<"u"&&typeof document<"u",ff=typeof navigator=="object"&&navigator||void 0,s_=Hf&&(!ff||["ReactNative","NativeScript","NS"].indexOf(ff.product)<0),o_=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",l_=Hf&&window.location.href||"http://localhost",c_=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Hf,hasStandardBrowserEnv:s_,hasStandardBrowserWebWorkerEnv:o_,navigator:ff,origin:l_},Symbol.toStringTag,{value:"Module"})),hr={...c_,...i_};function u_(t,e){return pc(t,new hr.classes.URLSearchParams,Object.assign({visitor:function(r,n,a,s){return hr.isNode&&Q.isBuffer(r)?(this.append(n,r.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function d_(t){return Q.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function f_(t){const e={},r=Object.keys(t);let n;const a=r.length;let s;for(n=0;n<a;n++)s=r[n],e[s]=t[s];return e}function mv(t){function e(r,n,a,s){let l=r[s++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),h=s>=r.length;return l=!l&&Q.isArray(a)?a.length:l,h?(Q.hasOwnProp(a,l)?a[l]=[a[l],n]:a[l]=n,!d):((!a[l]||!Q.isObject(a[l]))&&(a[l]=[]),e(r,n,a[l],s)&&Q.isArray(a[l])&&(a[l]=f_(a[l])),!d)}if(Q.isFormData(t)&&Q.isFunction(t.entries)){const r={};return Q.forEachEntry(t,(n,a)=>{e(d_(n),a,r,0)}),r}return null}function h_(t,e,r){if(Q.isString(t))try{return(e||JSON.parse)(t),Q.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const wo={transitional:hv,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,s=Q.isObject(e);if(s&&Q.isHTMLForm(e)&&(e=new FormData(e)),Q.isFormData(e))return a?JSON.stringify(mv(e)):e;if(Q.isArrayBuffer(e)||Q.isBuffer(e)||Q.isStream(e)||Q.isFile(e)||Q.isBlob(e)||Q.isReadableStream(e))return e;if(Q.isArrayBufferView(e))return e.buffer;if(Q.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return u_(e,this.formSerializer).toString();if((d=Q.isFileList(e))||n.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return pc(d?{"files[]":e}:e,h&&new h,this.formSerializer)}}return s||a?(r.setContentType("application/json",!1),h_(e)):e}],transformResponse:[function(e){const r=this.transitional||wo.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(Q.isResponse(e)||Q.isReadableStream(e))return e;if(e&&Q.isString(e)&&(n&&!this.responseType||a)){const l=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(d){if(l)throw d.name==="SyntaxError"?Pe.from(d,Pe.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hr.classes.FormData,Blob:hr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Q.forEach(["delete","get","head","post","put","patch"],t=>{wo.headers[t]={}});const m_=Q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),p_=t=>{const e={};let r,n,a;return t&&t.split(`
`).forEach(function(l){a=l.indexOf(":"),r=l.substring(0,a).trim().toLowerCase(),n=l.substring(a+1).trim(),!(!r||e[r]&&m_[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)}),e},bp=Symbol("internals");function eo(t){return t&&String(t).trim().toLowerCase()}function $l(t){return t===!1||t==null?t:Q.isArray(t)?t.map($l):String(t)}function x_(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}const v_=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Zd(t,e,r,n,a){if(Q.isFunction(n))return n.call(this,e,r);if(a&&(e=r),!!Q.isString(e)){if(Q.isString(n))return e.indexOf(n)!==-1;if(Q.isRegExp(n))return n.test(e)}}function g_(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}function y_(t,e){const r=Q.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(a,s,l){return this[n].call(this,e,a,s,l)},configurable:!0})})}let Ir=class{constructor(e){e&&this.set(e)}set(e,r,n){const a=this;function s(d,h,m){const p=eo(h);if(!p)throw new Error("header name must be a non-empty string");const v=Q.findKey(a,p);(!v||a[v]===void 0||m===!0||m===void 0&&a[v]!==!1)&&(a[v||h]=$l(d))}const l=(d,h)=>Q.forEach(d,(m,p)=>s(m,p,h));if(Q.isPlainObject(e)||e instanceof this.constructor)l(e,r);else if(Q.isString(e)&&(e=e.trim())&&!v_(e))l(p_(e),r);else if(Q.isObject(e)&&Q.isIterable(e)){let d={},h,m;for(const p of e){if(!Q.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[m=p[0]]=(h=d[m])?Q.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}l(d,r)}else e!=null&&s(r,e,n);return this}get(e,r){if(e=eo(e),e){const n=Q.findKey(this,e);if(n){const a=this[n];if(!r)return a;if(r===!0)return x_(a);if(Q.isFunction(r))return r.call(this,a,n);if(Q.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=eo(e),e){const n=Q.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Zd(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let a=!1;function s(l){if(l=eo(l),l){const d=Q.findKey(n,l);d&&(!r||Zd(n,n[d],d,r))&&(delete n[d],a=!0)}}return Q.isArray(e)?e.forEach(s):s(e),a}clear(e){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const s=r[n];(!e||Zd(this,this[s],s,e,!0))&&(delete this[s],a=!0)}return a}normalize(e){const r=this,n={};return Q.forEach(this,(a,s)=>{const l=Q.findKey(n,s);if(l){r[l]=$l(a),delete r[s];return}const d=e?g_(s):String(s).trim();d!==s&&delete r[s],r[d]=$l(a),n[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return Q.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=e&&Q.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(a=>n.set(a)),n}static accessor(e){const n=(this[bp]=this[bp]={accessors:{}}).accessors,a=this.prototype;function s(l){const d=eo(l);n[d]||(y_(a,l),n[d]=!0)}return Q.isArray(e)?e.forEach(s):s(e),this}};Ir.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Q.reduceDescriptors(Ir.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});Q.freezeMethods(Ir);function Xd(t,e){const r=this||wo,n=e||r,a=Ir.from(n.headers);let s=n.data;return Q.forEach(t,function(d){s=d.call(r,s,a.normalize(),e?e.status:void 0)}),a.normalize(),s}function pv(t){return!!(t&&t.__CANCEL__)}function Qi(t,e,r){Pe.call(this,t??"canceled",Pe.ERR_CANCELED,e,r),this.name="CanceledError"}Q.inherits(Qi,Pe,{__CANCEL__:!0});function xv(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new Pe("Request failed with status code "+r.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function b_(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function __(t,e){t=t||10;const r=new Array(t),n=new Array(t);let a=0,s=0,l;return e=e!==void 0?e:1e3,function(h){const m=Date.now(),p=n[s];l||(l=m),r[a]=h,n[a]=m;let v=s,y=0;for(;v!==a;)y+=r[v++],v=v%t;if(a=(a+1)%t,a===s&&(s=(s+1)%t),m-l<e)return;const b=p&&m-p;return b?Math.round(y*1e3/b):void 0}}function w_(t,e){let r=0,n=1e3/e,a,s;const l=(m,p=Date.now())=>{r=p,a=null,s&&(clearTimeout(s),s=null),t.apply(null,m)};return[(...m)=>{const p=Date.now(),v=p-r;v>=n?l(m,p):(a=m,s||(s=setTimeout(()=>{s=null,l(a)},n-v)))},()=>a&&l(a)]}const tc=(t,e,r=3)=>{let n=0;const a=__(50,250);return w_(s=>{const l=s.loaded,d=s.lengthComputable?s.total:void 0,h=l-n,m=a(h),p=l<=d;n=l;const v={loaded:l,total:d,progress:d?l/d:void 0,bytes:h,rate:m||void 0,estimated:m&&d&&p?(d-l)/m:void 0,event:s,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(v)},r)},_p=(t,e)=>{const r=t!=null;return[n=>e[0]({lengthComputable:r,total:t,loaded:n}),e[1]]},wp=t=>(...e)=>Q.asap(()=>t(...e)),A_=hr.hasStandardBrowserEnv?((t,e)=>r=>(r=new URL(r,hr.origin),t.protocol===r.protocol&&t.host===r.host&&(e||t.port===r.port)))(new URL(hr.origin),hr.navigator&&/(msie|trident)/i.test(hr.navigator.userAgent)):()=>!0,N_=hr.hasStandardBrowserEnv?{write(t,e,r,n,a,s){const l=[t+"="+encodeURIComponent(e)];Q.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),Q.isString(n)&&l.push("path="+n),Q.isString(a)&&l.push("domain="+a),s===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function E_(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function S_(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function vv(t,e,r){let n=!E_(e);return t&&(n||r==!1)?S_(t,e):e}const Ap=t=>t instanceof Ir?{...t}:t;function ei(t,e){e=e||{};const r={};function n(m,p,v,y){return Q.isPlainObject(m)&&Q.isPlainObject(p)?Q.merge.call({caseless:y},m,p):Q.isPlainObject(p)?Q.merge({},p):Q.isArray(p)?p.slice():p}function a(m,p,v,y){if(Q.isUndefined(p)){if(!Q.isUndefined(m))return n(void 0,m,v,y)}else return n(m,p,v,y)}function s(m,p){if(!Q.isUndefined(p))return n(void 0,p)}function l(m,p){if(Q.isUndefined(p)){if(!Q.isUndefined(m))return n(void 0,m)}else return n(void 0,p)}function d(m,p,v){if(v in e)return n(m,p);if(v in t)return n(void 0,m)}const h={url:s,method:s,data:s,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(m,p,v)=>a(Ap(m),Ap(p),v,!0)};return Q.forEach(Object.keys(Object.assign({},t,e)),function(p){const v=h[p]||a,y=v(t[p],e[p],p);Q.isUndefined(y)&&v!==d||(r[p]=y)}),r}const gv=t=>{const e=ei({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:l,auth:d}=e;e.headers=l=Ir.from(l),e.url=fv(vv(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let h;if(Q.isFormData(r)){if(hr.hasStandardBrowserEnv||hr.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((h=l.getContentType())!==!1){const[m,...p]=h?h.split(";").map(v=>v.trim()).filter(Boolean):[];l.setContentType([m||"multipart/form-data",...p].join("; "))}}if(hr.hasStandardBrowserEnv&&(n&&Q.isFunction(n)&&(n=n(e)),n||n!==!1&&A_(e.url))){const m=a&&s&&N_.read(s);m&&l.set(a,m)}return e},C_=typeof XMLHttpRequest<"u",j_=C_&&function(t){return new Promise(function(r,n){const a=gv(t);let s=a.data;const l=Ir.from(a.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:m}=a,p,v,y,b,_;function w(){b&&b(),_&&_(),a.cancelToken&&a.cancelToken.unsubscribe(p),a.signal&&a.signal.removeEventListener("abort",p)}let E=new XMLHttpRequest;E.open(a.method.toUpperCase(),a.url,!0),E.timeout=a.timeout;function j(){if(!E)return;const C=Ir.from("getAllResponseHeaders"in E&&E.getAllResponseHeaders()),R={data:!d||d==="text"||d==="json"?E.responseText:E.response,status:E.status,statusText:E.statusText,headers:C,config:t,request:E};xv(function($){r($),w()},function($){n($),w()},R),E=null}"onloadend"in E?E.onloadend=j:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(j)},E.onabort=function(){E&&(n(new Pe("Request aborted",Pe.ECONNABORTED,t,E)),E=null)},E.onerror=function(){n(new Pe("Network Error",Pe.ERR_NETWORK,t,E)),E=null},E.ontimeout=function(){let D=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const R=a.transitional||hv;a.timeoutErrorMessage&&(D=a.timeoutErrorMessage),n(new Pe(D,R.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,t,E)),E=null},s===void 0&&l.setContentType(null),"setRequestHeader"in E&&Q.forEach(l.toJSON(),function(D,R){E.setRequestHeader(R,D)}),Q.isUndefined(a.withCredentials)||(E.withCredentials=!!a.withCredentials),d&&d!=="json"&&(E.responseType=a.responseType),m&&([y,_]=tc(m,!0),E.addEventListener("progress",y)),h&&E.upload&&([v,b]=tc(h),E.upload.addEventListener("progress",v),E.upload.addEventListener("loadend",b)),(a.cancelToken||a.signal)&&(p=C=>{E&&(n(!C||C.type?new Qi(null,t,E):C),E.abort(),E=null)},a.cancelToken&&a.cancelToken.subscribe(p),a.signal&&(a.signal.aborted?p():a.signal.addEventListener("abort",p)));const A=b_(a.url);if(A&&hr.protocols.indexOf(A)===-1){n(new Pe("Unsupported protocol "+A+":",Pe.ERR_BAD_REQUEST,t));return}E.send(s||null)})},O_=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let n=new AbortController,a;const s=function(m){if(!a){a=!0,d();const p=m instanceof Error?m:this.reason;n.abort(p instanceof Pe?p:new Qi(p instanceof Error?p.message:p))}};let l=e&&setTimeout(()=>{l=null,s(new Pe(`timeout ${e} of ms exceeded`,Pe.ETIMEDOUT))},e);const d=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(m=>{m.unsubscribe?m.unsubscribe(s):m.removeEventListener("abort",s)}),t=null)};t.forEach(m=>m.addEventListener("abort",s));const{signal:h}=n;return h.unsubscribe=()=>Q.asap(d),h}},T_=function*(t,e){let r=t.byteLength;if(r<e){yield t;return}let n=0,a;for(;n<r;)a=n+e,yield t.slice(n,a),n=a},D_=async function*(t,e){for await(const r of R_(t))yield*T_(r,e)},R_=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)break;yield n}}finally{await e.cancel()}},Np=(t,e,r,n)=>{const a=D_(t,e);let s=0,l,d=h=>{l||(l=!0,n&&n(h))};return new ReadableStream({async pull(h){try{const{done:m,value:p}=await a.next();if(m){d(),h.close();return}let v=p.byteLength;if(r){let y=s+=v;r(y)}h.enqueue(new Uint8Array(p))}catch(m){throw d(m),m}},cancel(h){return d(h),a.return()}},{highWaterMark:2})},xc=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",yv=xc&&typeof ReadableStream=="function",I_=xc&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),bv=(t,...e)=>{try{return!!t(...e)}catch{return!1}},M_=yv&&bv(()=>{let t=!1;const e=new Request(hr.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),Ep=64*1024,hf=yv&&bv(()=>Q.isReadableStream(new Response("").body)),rc={stream:hf&&(t=>t.body)};xc&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!rc[e]&&(rc[e]=Q.isFunction(t[e])?r=>r[e]():(r,n)=>{throw new Pe(`Response type '${e}' is not supported`,Pe.ERR_NOT_SUPPORT,n)})})})(new Response);const B_=async t=>{if(t==null)return 0;if(Q.isBlob(t))return t.size;if(Q.isSpecCompliantForm(t))return(await new Request(hr.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Q.isArrayBufferView(t)||Q.isArrayBuffer(t))return t.byteLength;if(Q.isURLSearchParams(t)&&(t=t+""),Q.isString(t))return(await I_(t)).byteLength},P_=async(t,e)=>{const r=Q.toFiniteNumber(t.getContentLength());return r??B_(e)},k_=xc&&(async t=>{let{url:e,method:r,data:n,signal:a,cancelToken:s,timeout:l,onDownloadProgress:d,onUploadProgress:h,responseType:m,headers:p,withCredentials:v="same-origin",fetchOptions:y}=gv(t);m=m?(m+"").toLowerCase():"text";let b=O_([a,s&&s.toAbortSignal()],l),_;const w=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let E;try{if(h&&M_&&r!=="get"&&r!=="head"&&(E=await P_(p,n))!==0){let R=new Request(e,{method:"POST",body:n,duplex:"half"}),L;if(Q.isFormData(n)&&(L=R.headers.get("content-type"))&&p.setContentType(L),R.body){const[$,W]=_p(E,tc(wp(h)));n=Np(R.body,Ep,$,W)}}Q.isString(v)||(v=v?"include":"omit");const j="credentials"in Request.prototype;_=new Request(e,{...y,signal:b,method:r.toUpperCase(),headers:p.normalize().toJSON(),body:n,duplex:"half",credentials:j?v:void 0});let A=await fetch(_,y);const C=hf&&(m==="stream"||m==="response");if(hf&&(d||C&&w)){const R={};["status","statusText","headers"].forEach(J=>{R[J]=A[J]});const L=Q.toFiniteNumber(A.headers.get("content-length")),[$,W]=d&&_p(L,tc(wp(d),!0))||[];A=new Response(Np(A.body,Ep,$,()=>{W&&W(),w&&w()}),R)}m=m||"text";let D=await rc[Q.findKey(rc,m)||"text"](A,t);return!C&&w&&w(),await new Promise((R,L)=>{xv(R,L,{data:D,headers:Ir.from(A.headers),status:A.status,statusText:A.statusText,config:t,request:_})})}catch(j){throw w&&w(),j&&j.name==="TypeError"&&/Load failed|fetch/i.test(j.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,t,_),{cause:j.cause||j}):Pe.from(j,j&&j.code,t,_)}}),mf={http:Qb,xhr:j_,fetch:k_};Q.forEach(mf,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Sp=t=>`- ${t}`,L_=t=>Q.isFunction(t)||t===null||t===!1,_v={getAdapter:t=>{t=Q.isArray(t)?t:[t];const{length:e}=t;let r,n;const a={};for(let s=0;s<e;s++){r=t[s];let l;if(n=r,!L_(r)&&(n=mf[(l=String(r)).toLowerCase()],n===void 0))throw new Pe(`Unknown adapter '${l}'`);if(n)break;a[l||"#"+s]=n}if(!n){const s=Object.entries(a).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let l=e?s.length>1?`since :
`+s.map(Sp).join(`
`):" "+Sp(s[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n},adapters:mf};function qd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Qi(null,t)}function Cp(t){return qd(t),t.headers=Ir.from(t.headers),t.data=Xd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),_v.getAdapter(t.adapter||wo.adapter)(t).then(function(n){return qd(t),n.data=Xd.call(t,t.transformResponse,n),n.headers=Ir.from(n.headers),n},function(n){return pv(n)||(qd(t),n&&n.response&&(n.response.data=Xd.call(t,t.transformResponse,n.response),n.response.headers=Ir.from(n.response.headers))),Promise.reject(n)})}const wv="1.10.0",vc={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{vc[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const jp={};vc.transitional=function(e,r,n){function a(s,l){return"[Axios v"+wv+"] Transitional option '"+s+"'"+l+(n?". "+n:"")}return(s,l,d)=>{if(e===!1)throw new Pe(a(l," has been removed"+(r?" in "+r:"")),Pe.ERR_DEPRECATED);return r&&!jp[l]&&(jp[l]=!0,console.warn(a(l," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,l,d):!0}};vc.spelling=function(e){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function F_(t,e,r){if(typeof t!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let a=n.length;for(;a-- >0;){const s=n[a],l=e[s];if(l){const d=t[s],h=d===void 0||l(d,s,t);if(h!==!0)throw new Pe("option "+s+" must be "+h,Pe.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Pe("Unknown option "+s,Pe.ERR_BAD_OPTION)}}const Yl={assertOptions:F_,validators:vc},Nn=Yl.validators;let Qa=class{constructor(e){this.defaults=e||{},this.interceptors={request:new yp,response:new yp}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const s=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=ei(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:s}=r;n!==void 0&&Yl.assertOptions(n,{silentJSONParsing:Nn.transitional(Nn.boolean),forcedJSONParsing:Nn.transitional(Nn.boolean),clarifyTimeoutError:Nn.transitional(Nn.boolean)},!1),a!=null&&(Q.isFunction(a)?r.paramsSerializer={serialize:a}:Yl.assertOptions(a,{encode:Nn.function,serialize:Nn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Yl.assertOptions(r,{baseUrl:Nn.spelling("baseURL"),withXsrfToken:Nn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=s&&Q.merge(s.common,s[r.method]);s&&Q.forEach(["delete","get","head","post","put","patch","common"],_=>{delete s[_]}),r.headers=Ir.concat(l,s);const d=[];let h=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(r)===!1||(h=h&&w.synchronous,d.unshift(w.fulfilled,w.rejected))});const m=[];this.interceptors.response.forEach(function(w){m.push(w.fulfilled,w.rejected)});let p,v=0,y;if(!h){const _=[Cp.bind(this),void 0];for(_.unshift.apply(_,d),_.push.apply(_,m),y=_.length,p=Promise.resolve(r);v<y;)p=p.then(_[v++],_[v++]);return p}y=d.length;let b=r;for(v=0;v<y;){const _=d[v++],w=d[v++];try{b=_(b)}catch(E){w.call(this,E);break}}try{p=Cp.call(this,b)}catch(_){return Promise.reject(_)}for(v=0,y=m.length;v<y;)p=p.then(m[v++],m[v++]);return p}getUri(e){e=ei(this.defaults,e);const r=vv(e.baseURL,e.url,e.allowAbsoluteUrls);return fv(r,e.params,e.paramsSerializer)}};Q.forEach(["delete","get","head","options"],function(e){Qa.prototype[e]=function(r,n){return this.request(ei(n||{},{method:e,url:r,data:(n||{}).data}))}});Q.forEach(["post","put","patch"],function(e){function r(n){return function(s,l,d){return this.request(ei(d||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:l}))}}Qa.prototype[e]=r(),Qa.prototype[e+"Form"]=r(!0)});let U_=class Av{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(s){r=s});const n=this;this.promise.then(a=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](a);n._listeners=null}),this.promise.then=a=>{let s;const l=new Promise(d=>{n.subscribe(d),s=d}).then(a);return l.cancel=function(){n.unsubscribe(s)},l},e(function(s,l,d){n.reason||(n.reason=new Qi(s,l,d),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=n=>{e.abort(n)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new Av(function(a){e=a}),cancel:e}}};function z_(t){return function(r){return t.apply(null,r)}}function V_(t){return Q.isObject(t)&&t.isAxiosError===!0}const pf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pf).forEach(([t,e])=>{pf[e]=t});function Nv(t){const e=new Qa(t),r=ev(Qa.prototype.request,e);return Q.extend(r,Qa.prototype,e,{allOwnKeys:!0}),Q.extend(r,e,null,{allOwnKeys:!0}),r.create=function(a){return Nv(ei(t,a))},r}const Tt=Nv(wo);Tt.Axios=Qa;Tt.CanceledError=Qi;Tt.CancelToken=U_;Tt.isCancel=pv;Tt.VERSION=wv;Tt.toFormData=pc;Tt.AxiosError=Pe;Tt.Cancel=Tt.CanceledError;Tt.all=function(e){return Promise.all(e)};Tt.spread=z_;Tt.isAxiosError=V_;Tt.mergeConfig=ei;Tt.AxiosHeaders=Ir;Tt.formToJSON=t=>mv(Q.isHTMLForm(t)?new FormData(t):t);Tt.getAdapter=_v.getAdapter;Tt.HttpStatusCode=pf;Tt.default=Tt;const{Axios:PC,AxiosError:kC,CanceledError:LC,isCancel:FC,CancelToken:UC,VERSION:zC,all:VC,Cancel:HC,isAxiosError:GC,spread:ZC,toFormData:XC,AxiosHeaders:qC,HttpStatusCode:$C,formToJSON:YC,getAdapter:KC,mergeConfig:WC}=Tt,H_="https://henrydiagnostics-production.up.railway.app",ye=Tt.create({baseURL:`${H_}/api`,headers:{"Content-Type":"application/json"}});ye.interceptors.request.use(t=>{const e=localStorage.getItem("auth_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t});ye.interceptors.response.use(t=>t,t=>(t.response?.status===401&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t)));const $d={login:async t=>(await ye.post("/auth/login",t)).data,logout:async()=>{const t=await ye.post("/auth/logout");return localStorage.removeItem("auth_token"),localStorage.removeItem("user"),t.data},getProfile:async()=>(await ye.get("/auth/profile")).data,changePassword:async t=>(await ye.put("/auth/change-password",t)).data},Ev=z.createContext(null),G_=({children:t})=>{const[e,r]=z.useState(null),[n,a]=z.useState(!0);z.useEffect(()=>{(async()=>{const m=localStorage.getItem("auth_token"),p=localStorage.getItem("user");if(m&&p)try{const v=await $d.getProfile();r(v.user)}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("user")}a(!1)})()},[]);const d={user:e,isLoading:n,login:async h=>{try{const m=await $d.login(h);localStorage.setItem("auth_token",m.token),localStorage.setItem("user",JSON.stringify(m.user)),r(m.user)}catch(m){throw m}},logout:async()=>{try{await $d.logout()}catch(h){console.error("Error during logout:",h)}finally{r(null),localStorage.removeItem("auth_token"),localStorage.removeItem("user")}},isAuthenticated:!!e};return c.jsx(Ev.Provider,{value:d,children:t})},vn=()=>{const t=z.useContext(Ev);if(!t)throw new Error("useAuth debe ser usado dentro de un AuthProvider");return t};var Ao=t=>t.type==="checkbox",Ya=t=>t instanceof Date,_r=t=>t==null;const Sv=t=>typeof t=="object";var Ot=t=>!_r(t)&&!Array.isArray(t)&&Sv(t)&&!Ya(t),Z_=t=>Ot(t)&&t.target?Ao(t.target)?t.target.checked:t.target.value:t,X_=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,q_=(t,e)=>t.has(X_(e)),$_=t=>{const e=t.constructor&&t.constructor.prototype;return Ot(e)&&e.hasOwnProperty("isPrototypeOf")},Gf=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Kt(t){let e;const r=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Gf&&(t instanceof Blob||n))&&(r||Ot(t)))if(e=r?[]:{},!r&&!$_(t))e=t;else for(const a in t)t.hasOwnProperty(a)&&(e[a]=Kt(t[a]));else return t;return e}var gc=t=>/^\w*$/.test(t),Pt=t=>t===void 0,Zf=t=>Array.isArray(t)?t.filter(Boolean):[],Xf=t=>Zf(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ne=(t,e,r)=>{if(!e||!Ot(t))return r;const n=(gc(e)?[e]:Xf(e)).reduce((a,s)=>_r(a)?a:a[s],t);return Pt(n)||n===t?Pt(t[e])?r:t[e]:n},Sn=t=>typeof t=="boolean",ft=(t,e,r)=>{let n=-1;const a=gc(e)?[e]:Xf(e),s=a.length,l=s-1;for(;++n<s;){const d=a[n];let h=r;if(n!==l){const m=t[d];h=Ot(m)||Array.isArray(m)?m:isNaN(+a[n+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;t[d]=h,t=t[d]}};const Op={BLUR:"blur",FOCUS_OUT:"focusout"},fn={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Xn={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Y_=cn.createContext(null);Y_.displayName="HookFormContext";var K_=(t,e,r,n=!0)=>{const a={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(a,s,{get:()=>{const l=s;return e._proxyFormState[l]!==fn.all&&(e._proxyFormState[l]=!n||fn.all),t[l]}});return a};const W_=typeof window<"u"?z.useLayoutEffect:z.useEffect;var Cn=t=>typeof t=="string",Q_=(t,e,r,n,a)=>Cn(t)?(n&&e.watch.add(t),Ne(r,t,a)):Array.isArray(t)?t.map(s=>(n&&e.watch.add(s),Ne(r,s))):(n&&(e.watchAll=!0),r),qf=(t,e,r,n,a)=>e?{...r[t],types:{...r[t]&&r[t].types?r[t].types:{},[n]:a||!0}}:{},ho=t=>Array.isArray(t)?t:[t],Tp=()=>{let t=[];return{get observers(){return t},next:a=>{for(const s of t)s.next&&s.next(a)},subscribe:a=>(t.push(a),{unsubscribe:()=>{t=t.filter(s=>s!==a)}}),unsubscribe:()=>{t=[]}}},xf=t=>_r(t)||!Sv(t);function Aa(t,e,r=new WeakSet){if(xf(t)||xf(e))return t===e;if(Ya(t)&&Ya(e))return t.getTime()===e.getTime();const n=Object.keys(t),a=Object.keys(e);if(n.length!==a.length)return!1;if(r.has(t)||r.has(e))return!0;r.add(t),r.add(e);for(const s of n){const l=t[s];if(!a.includes(s))return!1;if(s!=="ref"){const d=e[s];if(Ya(l)&&Ya(d)||Ot(l)&&Ot(d)||Array.isArray(l)&&Array.isArray(d)?!Aa(l,d,r):l!==d)return!1}}return!0}var Or=t=>Ot(t)&&!Object.keys(t).length,$f=t=>t.type==="file",hn=t=>typeof t=="function",nc=t=>{if(!Gf)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Cv=t=>t.type==="select-multiple",Yf=t=>t.type==="radio",J_=t=>Yf(t)||Ao(t),Yd=t=>nc(t)&&t.isConnected;function e3(t,e){const r=e.slice(0,-1).length;let n=0;for(;n<r;)t=Pt(t)?n++:t[e[n++]];return t}function t3(t){for(const e in t)if(t.hasOwnProperty(e)&&!Pt(t[e]))return!1;return!0}function Bt(t,e){const r=Array.isArray(e)?e:gc(e)?[e]:Xf(e),n=r.length===1?t:e3(t,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Ot(n)&&Or(n)||Array.isArray(n)&&t3(n))&&Bt(t,r.slice(0,-1)),t}var jv=t=>{for(const e in t)if(hn(t[e]))return!0;return!1};function ac(t,e={}){const r=Array.isArray(t);if(Ot(t)||r)for(const n in t)Array.isArray(t[n])||Ot(t[n])&&!jv(t[n])?(e[n]=Array.isArray(t[n])?[]:{},ac(t[n],e[n])):_r(t[n])||(e[n]=!0);return e}function Ov(t,e,r){const n=Array.isArray(t);if(Ot(t)||n)for(const a in t)Array.isArray(t[a])||Ot(t[a])&&!jv(t[a])?Pt(e)||xf(r[a])?r[a]=Array.isArray(t[a])?ac(t[a],[]):{...ac(t[a])}:Ov(t[a],_r(e)?{}:e[a],r[a]):r[a]=!Aa(t[a],e[a]);return r}var to=(t,e)=>Ov(t,e,ac(e));const Dp={value:!1,isValid:!1},Rp={value:!0,isValid:!0};var Tv=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Pt(t[0].attributes.value)?Pt(t[0].value)||t[0].value===""?Rp:{value:t[0].value,isValid:!0}:Rp:Dp}return Dp},Dv=(t,{valueAsNumber:e,valueAsDate:r,setValueAs:n})=>Pt(t)?t:e?t===""?NaN:t&&+t:r&&Cn(t)?new Date(t):n?n(t):t;const Ip={isValid:!1,value:null};var Rv=t=>Array.isArray(t)?t.reduce((e,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:e,Ip):Ip;function Mp(t){const e=t.ref;return $f(e)?e.files:Yf(e)?Rv(t.refs).value:Cv(e)?[...e.selectedOptions].map(({value:r})=>r):Ao(e)?Tv(t.refs).value:Dv(Pt(e.value)?t.ref.value:e.value,t)}var r3=(t,e,r,n)=>{const a={};for(const s of t){const l=Ne(e,s);l&&ft(a,s,l._f)}return{criteriaMode:r,names:[...t],fields:a,shouldUseNativeValidation:n}},ic=t=>t instanceof RegExp,ro=t=>Pt(t)?t:ic(t)?t.source:Ot(t)?ic(t.value)?t.value.source:t.value:t,Bp=t=>({isOnSubmit:!t||t===fn.onSubmit,isOnBlur:t===fn.onBlur,isOnChange:t===fn.onChange,isOnAll:t===fn.all,isOnTouch:t===fn.onTouched});const Pp="AsyncFunction";var n3=t=>!!t&&!!t.validate&&!!(hn(t.validate)&&t.validate.constructor.name===Pp||Ot(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===Pp)),a3=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),kp=(t,e,r)=>!r&&(e.watchAll||e.watch.has(t)||[...e.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const mo=(t,e,r,n)=>{for(const a of r||Object.keys(t)){const s=Ne(t,a);if(s){const{_f:l,...d}=s;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],a)&&!n)return!0;if(l.ref&&e(l.ref,l.name)&&!n)return!0;if(mo(d,e))break}else if(Ot(d)&&mo(d,e))break}}};function Lp(t,e,r){const n=Ne(t,r);if(n||gc(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),l=Ne(e,s),d=Ne(t,s);if(l&&!Array.isArray(l)&&r!==s)return{name:r};if(d&&d.type)return{name:s,error:d};if(d&&d.root&&d.root.type)return{name:`${s}.root`,error:d.root};a.pop()}return{name:r}}var i3=(t,e,r,n)=>{r(t);const{name:a,...s}=t;return Or(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(l=>e[l]===(!n||fn.all))},s3=(t,e,r)=>!t||!e||t===e||ho(t).some(n=>n&&(r?n===e:n.startsWith(e)||e.startsWith(n))),o3=(t,e,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(e||t):(r?n.isOnBlur:a.isOnBlur)?!t:(r?n.isOnChange:a.isOnChange)?t:!0,l3=(t,e)=>!Zf(Ne(t,e)).length&&Bt(t,e),c3=(t,e,r)=>{const n=ho(Ne(t,r));return ft(n,"root",e[r]),ft(t,r,n),t},Kl=t=>Cn(t);function Fp(t,e,r="validate"){if(Kl(t)||Array.isArray(t)&&t.every(Kl)||Sn(t)&&!t)return{type:r,message:Kl(t)?t:"",ref:e}}var Zi=t=>Ot(t)&&!ic(t)?t:{value:t,message:""},Up=async(t,e,r,n,a,s)=>{const{ref:l,refs:d,required:h,maxLength:m,minLength:p,min:v,max:y,pattern:b,validate:_,name:w,valueAsNumber:E,mount:j}=t._f,A=Ne(r,w);if(!j||e.has(w))return{};const C=d?d[0]:l,D=ce=>{a&&C.reportValidity&&(C.setCustomValidity(Sn(ce)?"":ce||""),C.reportValidity())},R={},L=Yf(l),$=Ao(l),W=L||$,J=(E||$f(l))&&Pt(l.value)&&Pt(A)||nc(l)&&l.value===""||A===""||Array.isArray(A)&&!A.length,ae=qf.bind(null,w,n,R),be=(ce,me,_e,he=Xn.maxLength,P=Xn.minLength)=>{const oe=ce?me:_e;R[w]={type:ce?he:P,message:oe,ref:l,...ae(ce?he:P,oe)}};if(s?!Array.isArray(A)||!A.length:h&&(!W&&(J||_r(A))||Sn(A)&&!A||$&&!Tv(d).isValid||L&&!Rv(d).isValid)){const{value:ce,message:me}=Kl(h)?{value:!!h,message:h}:Zi(h);if(ce&&(R[w]={type:Xn.required,message:me,ref:C,...ae(Xn.required,me)},!n))return D(me),R}if(!J&&(!_r(v)||!_r(y))){let ce,me;const _e=Zi(y),he=Zi(v);if(!_r(A)&&!isNaN(A)){const P=l.valueAsNumber||A&&+A;_r(_e.value)||(ce=P>_e.value),_r(he.value)||(me=P<he.value)}else{const P=l.valueAsDate||new Date(A),oe=T=>new Date(new Date().toDateString()+" "+T),Y=l.type=="time",ve=l.type=="week";Cn(_e.value)&&A&&(ce=Y?oe(A)>oe(_e.value):ve?A>_e.value:P>new Date(_e.value)),Cn(he.value)&&A&&(me=Y?oe(A)<oe(he.value):ve?A<he.value:P<new Date(he.value))}if((ce||me)&&(be(!!ce,_e.message,he.message,Xn.max,Xn.min),!n))return D(R[w].message),R}if((m||p)&&!J&&(Cn(A)||s&&Array.isArray(A))){const ce=Zi(m),me=Zi(p),_e=!_r(ce.value)&&A.length>+ce.value,he=!_r(me.value)&&A.length<+me.value;if((_e||he)&&(be(_e,ce.message,me.message),!n))return D(R[w].message),R}if(b&&!J&&Cn(A)){const{value:ce,message:me}=Zi(b);if(ic(ce)&&!A.match(ce)&&(R[w]={type:Xn.pattern,message:me,ref:l,...ae(Xn.pattern,me)},!n))return D(me),R}if(_){if(hn(_)){const ce=await _(A,r),me=Fp(ce,C);if(me&&(R[w]={...me,...ae(Xn.validate,me.message)},!n))return D(me.message),R}else if(Ot(_)){let ce={};for(const me in _){if(!Or(ce)&&!n)break;const _e=Fp(await _[me](A,r),C,me);_e&&(ce={..._e,...ae(me,_e.message)},D(_e.message),n&&(R[w]=ce))}if(!Or(ce)&&(R[w]={ref:C,...ce},!n))return R}}return D(!0),R};const u3={mode:fn.onSubmit,reValidateMode:fn.onChange,shouldFocusError:!0};function d3(t={}){let e={...u3,...t},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:hn(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},n={},a=Ot(e.defaultValues)||Ot(e.values)?Kt(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Kt(a),l={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,m=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let v={...p};const y={array:Tp(),state:Tp()},b=e.criteriaMode===fn.all,_=M=>X=>{clearTimeout(m),m=setTimeout(M,X)},w=async M=>{if(!e.disabled&&(p.isValid||v.isValid||M)){const X=e.resolver?Or((await $()).errors):await J(n,!0);X!==r.isValid&&y.state.next({isValid:X})}},E=(M,X)=>{!e.disabled&&(p.isValidating||p.validatingFields||v.isValidating||v.validatingFields)&&((M||Array.from(d.mount)).forEach(re=>{re&&(X?ft(r.validatingFields,re,X):Bt(r.validatingFields,re))}),y.state.next({validatingFields:r.validatingFields,isValidating:!Or(r.validatingFields)}))},j=(M,X=[],re,we,ge=!0,pe=!0)=>{if(we&&re&&!e.disabled){if(l.action=!0,pe&&Array.isArray(Ne(n,M))){const Se=re(Ne(n,M),we.argA,we.argB);ge&&ft(n,M,Se)}if(pe&&Array.isArray(Ne(r.errors,M))){const Se=re(Ne(r.errors,M),we.argA,we.argB);ge&&ft(r.errors,M,Se),l3(r.errors,M)}if((p.touchedFields||v.touchedFields)&&pe&&Array.isArray(Ne(r.touchedFields,M))){const Se=re(Ne(r.touchedFields,M),we.argA,we.argB);ge&&ft(r.touchedFields,M,Se)}(p.dirtyFields||v.dirtyFields)&&(r.dirtyFields=to(a,s)),y.state.next({name:M,isDirty:be(M,X),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ft(s,M,X)},A=(M,X)=>{ft(r.errors,M,X),y.state.next({errors:r.errors})},C=M=>{r.errors=M,y.state.next({errors:r.errors,isValid:!1})},D=(M,X,re,we)=>{const ge=Ne(n,M);if(ge){const pe=Ne(s,M,Pt(re)?Ne(a,M):re);Pt(pe)||we&&we.defaultChecked||X?ft(s,M,X?pe:Mp(ge._f)):_e(M,pe),l.mount&&w()}},R=(M,X,re,we,ge)=>{let pe=!1,Se=!1;const Be={name:M};if(!e.disabled){if(!re||we){(p.isDirty||v.isDirty)&&(Se=r.isDirty,r.isDirty=Be.isDirty=be(),pe=Se!==Be.isDirty);const Xe=Aa(Ne(a,M),X);Se=!!Ne(r.dirtyFields,M),Xe?Bt(r.dirtyFields,M):ft(r.dirtyFields,M,!0),Be.dirtyFields=r.dirtyFields,pe=pe||(p.dirtyFields||v.dirtyFields)&&Se!==!Xe}if(re){const Xe=Ne(r.touchedFields,M);Xe||(ft(r.touchedFields,M,re),Be.touchedFields=r.touchedFields,pe=pe||(p.touchedFields||v.touchedFields)&&Xe!==re)}pe&&ge&&y.state.next(Be)}return pe?Be:{}},L=(M,X,re,we)=>{const ge=Ne(r.errors,M),pe=(p.isValid||v.isValid)&&Sn(X)&&r.isValid!==X;if(e.delayError&&re?(h=_(()=>A(M,re)),h(e.delayError)):(clearTimeout(m),h=null,re?ft(r.errors,M,re):Bt(r.errors,M)),(re?!Aa(ge,re):ge)||!Or(we)||pe){const Se={...we,...pe&&Sn(X)?{isValid:X}:{},errors:r.errors,name:M};r={...r,...Se},y.state.next(Se)}},$=async M=>{E(M,!0);const X=await e.resolver(s,e.context,r3(M||d.mount,n,e.criteriaMode,e.shouldUseNativeValidation));return E(M),X},W=async M=>{const{errors:X}=await $(M);if(M)for(const re of M){const we=Ne(X,re);we?ft(r.errors,re,we):Bt(r.errors,re)}else r.errors=X;return X},J=async(M,X,re={valid:!0})=>{for(const we in M){const ge=M[we];if(ge){const{_f:pe,...Se}=ge;if(pe){const Be=d.array.has(pe.name),Xe=ge._f&&n3(ge._f);Xe&&p.validatingFields&&E([we],!0);const ht=await Up(ge,d.disabled,s,b,e.shouldUseNativeValidation&&!X,Be);if(Xe&&p.validatingFields&&E([we]),ht[pe.name]&&(re.valid=!1,X))break;!X&&(Ne(ht,pe.name)?Be?c3(r.errors,ht,pe.name):ft(r.errors,pe.name,ht[pe.name]):Bt(r.errors,pe.name))}!Or(Se)&&await J(Se,X,re)}}return re.valid},ae=()=>{for(const M of d.unMount){const X=Ne(n,M);X&&(X._f.refs?X._f.refs.every(re=>!Yd(re)):!Yd(X._f.ref))&&Ge(M)}d.unMount=new Set},be=(M,X)=>!e.disabled&&(M&&X&&ft(s,M,X),!Aa(T(),a)),ce=(M,X,re)=>Q_(M,d,{...l.mount?s:Pt(X)?a:Cn(M)?{[M]:X}:X},re,X),me=M=>Zf(Ne(l.mount?s:a,M,e.shouldUnregister?Ne(a,M,[]):[])),_e=(M,X,re={})=>{const we=Ne(n,M);let ge=X;if(we){const pe=we._f;pe&&(!pe.disabled&&ft(s,M,Dv(X,pe)),ge=nc(pe.ref)&&_r(X)?"":X,Cv(pe.ref)?[...pe.ref.options].forEach(Se=>Se.selected=ge.includes(Se.value)):pe.refs?Ao(pe.ref)?pe.refs.forEach(Se=>{(!Se.defaultChecked||!Se.disabled)&&(Array.isArray(ge)?Se.checked=!!ge.find(Be=>Be===Se.value):Se.checked=ge===Se.value||!!ge)}):pe.refs.forEach(Se=>Se.checked=Se.value===ge):$f(pe.ref)?pe.ref.value="":(pe.ref.value=ge,pe.ref.type||y.state.next({name:M,values:Kt(s)})))}(re.shouldDirty||re.shouldTouch)&&R(M,ge,re.shouldTouch,re.shouldDirty,!0),re.shouldValidate&&ve(M)},he=(M,X,re)=>{for(const we in X){if(!X.hasOwnProperty(we))return;const ge=X[we],pe=M+"."+we,Se=Ne(n,pe);(d.array.has(M)||Ot(ge)||Se&&!Se._f)&&!Ya(ge)?he(pe,ge,re):_e(pe,ge,re)}},P=(M,X,re={})=>{const we=Ne(n,M),ge=d.array.has(M),pe=Kt(X);ft(s,M,pe),ge?(y.array.next({name:M,values:Kt(s)}),(p.isDirty||p.dirtyFields||v.isDirty||v.dirtyFields)&&re.shouldDirty&&y.state.next({name:M,dirtyFields:to(a,s),isDirty:be(M,pe)})):we&&!we._f&&!_r(pe)?he(M,pe,re):_e(M,pe,re),kp(M,d)&&y.state.next({...r}),y.state.next({name:l.mount?M:void 0,values:Kt(s)})},oe=async M=>{l.mount=!0;const X=M.target;let re=X.name,we=!0;const ge=Ne(n,re),pe=Xe=>{we=Number.isNaN(Xe)||Ya(Xe)&&isNaN(Xe.getTime())||Aa(Xe,Ne(s,re,Xe))},Se=Bp(e.mode),Be=Bp(e.reValidateMode);if(ge){let Xe,ht;const ii=X.type?Mp(ge._f):Z_(M),gn=M.type===Op.BLUR||M.type===Op.FOCUS_OUT,Sc=!a3(ge._f)&&!e.resolver&&!Ne(r.errors,re)&&!ge._f.deps||o3(gn,Ne(r.touchedFields,re),r.isSubmitted,Be,Se),Yn=kp(re,d,gn);ft(s,re,ii),gn?(ge._f.onBlur&&ge._f.onBlur(M),h&&h(0)):ge._f.onChange&&ge._f.onChange(M);const Kn=R(re,ii,gn),Tn=!Or(Kn)||Yn;if(!gn&&y.state.next({name:re,type:M.type,values:Kt(s)}),Sc)return(p.isValid||v.isValid)&&(e.mode==="onBlur"?gn&&w():gn||w()),Tn&&y.state.next({name:re,...Yn?{}:Kn});if(!gn&&Yn&&y.state.next({...r}),e.resolver){const{errors:Sa}=await $([re]);if(pe(ii),we){const Ca=Lp(r.errors,n,re),So=Lp(Sa,n,Ca.name||re);Xe=So.error,re=So.name,ht=Or(Sa)}}else E([re],!0),Xe=(await Up(ge,d.disabled,s,b,e.shouldUseNativeValidation))[re],E([re]),pe(ii),we&&(Xe?ht=!1:(p.isValid||v.isValid)&&(ht=await J(n,!0)));we&&(ge._f.deps&&ve(ge._f.deps),L(re,ht,Xe,Kn))}},Y=(M,X)=>{if(Ne(r.errors,X)&&M.focus)return M.focus(),1},ve=async(M,X={})=>{let re,we;const ge=ho(M);if(e.resolver){const pe=await W(Pt(M)?M:ge);re=Or(pe),we=M?!ge.some(Se=>Ne(pe,Se)):re}else M?(we=(await Promise.all(ge.map(async pe=>{const Se=Ne(n,pe);return await J(Se&&Se._f?{[pe]:Se}:Se)}))).every(Boolean),!(!we&&!r.isValid)&&w()):we=re=await J(n);return y.state.next({...!Cn(M)||(p.isValid||v.isValid)&&re!==r.isValid?{}:{name:M},...e.resolver||!M?{isValid:re}:{},errors:r.errors}),X.shouldFocus&&!we&&mo(n,Y,M?ge:d.mount),we},T=M=>{const X={...l.mount?s:a};return Pt(M)?X:Cn(M)?Ne(X,M):M.map(re=>Ne(X,re))},V=(M,X)=>({invalid:!!Ne((X||r).errors,M),isDirty:!!Ne((X||r).dirtyFields,M),error:Ne((X||r).errors,M),isValidating:!!Ne(r.validatingFields,M),isTouched:!!Ne((X||r).touchedFields,M)}),ue=M=>{M&&ho(M).forEach(X=>Bt(r.errors,X)),y.state.next({errors:M?r.errors:{}})},fe=(M,X,re)=>{const we=(Ne(n,M,{_f:{}})._f||{}).ref,ge=Ne(r.errors,M)||{},{ref:pe,message:Se,type:Be,...Xe}=ge;ft(r.errors,M,{...Xe,...X,ref:we}),y.state.next({name:M,errors:r.errors,isValid:!1}),re&&re.shouldFocus&&we&&we.focus&&we.focus()},U=(M,X)=>hn(M)?y.state.subscribe({next:re=>M(ce(void 0,X),re)}):ce(M,X,!0),k=M=>y.state.subscribe({next:X=>{s3(M.name,X.name,M.exact)&&i3(X,M.formState||p,kr,M.reRenderRoot)&&M.callback({values:{...s},...r,...X})}}).unsubscribe,de=M=>(l.mount=!0,v={...v,...M.formState},k({...M,formState:v})),Ge=(M,X={})=>{for(const re of M?ho(M):d.mount)d.mount.delete(re),d.array.delete(re),X.keepValue||(Bt(n,re),Bt(s,re)),!X.keepError&&Bt(r.errors,re),!X.keepDirty&&Bt(r.dirtyFields,re),!X.keepTouched&&Bt(r.touchedFields,re),!X.keepIsValidating&&Bt(r.validatingFields,re),!e.shouldUnregister&&!X.keepDefaultValue&&Bt(a,re);y.state.next({values:Kt(s)}),y.state.next({...r,...X.keepDirty?{isDirty:be()}:{}}),!X.keepIsValid&&w()},Ze=({disabled:M,name:X})=>{(Sn(M)&&l.mount||M||d.disabled.has(X))&&(M?d.disabled.add(X):d.disabled.delete(X))},Rt=(M,X={})=>{let re=Ne(n,M);const we=Sn(X.disabled)||Sn(e.disabled);return ft(n,M,{...re||{},_f:{...re&&re._f?re._f:{ref:{name:M}},name:M,mount:!0,...X}}),d.mount.add(M),re?Ze({disabled:Sn(X.disabled)?X.disabled:e.disabled,name:M}):D(M,!0,X.value),{...we?{disabled:X.disabled||e.disabled}:{},...e.progressive?{required:!!X.required,min:ro(X.min),max:ro(X.max),minLength:ro(X.minLength),maxLength:ro(X.maxLength),pattern:ro(X.pattern)}:{},name:M,onChange:oe,onBlur:oe,ref:ge=>{if(ge){Rt(M,X),re=Ne(n,M);const pe=Pt(ge.value)&&ge.querySelectorAll&&ge.querySelectorAll("input,select,textarea")[0]||ge,Se=J_(pe),Be=re._f.refs||[];if(Se?Be.find(Xe=>Xe===pe):pe===re._f.ref)return;ft(n,M,{_f:{...re._f,...Se?{refs:[...Be.filter(Yd),pe,...Array.isArray(Ne(a,M))?[{}]:[]],ref:{type:pe.type,name:M}}:{ref:pe}}}),D(M,!1,void 0,pe)}else re=Ne(n,M,{}),re._f&&(re._f.mount=!1),(e.shouldUnregister||X.shouldUnregister)&&!(q_(d.array,M)&&l.action)&&d.unMount.add(M)}}},Pr=()=>e.shouldFocusError&&mo(n,Y,d.mount),tr=M=>{Sn(M)&&(y.state.next({disabled:M}),mo(n,(X,re)=>{const we=Ne(n,re);we&&(X.disabled=we._f.disabled||M,Array.isArray(we._f.refs)&&we._f.refs.forEach(ge=>{ge.disabled=we._f.disabled||M}))},0,!1))},ne=(M,X)=>async re=>{let we;re&&(re.preventDefault&&re.preventDefault(),re.persist&&re.persist());let ge=Kt(s);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:pe,values:Se}=await $();r.errors=pe,ge=Kt(Se)}else await J(n);if(d.disabled.size)for(const pe of d.disabled)Bt(ge,pe);if(Bt(r.errors,"root"),Or(r.errors)){y.state.next({errors:{}});try{await M(ge,re)}catch(pe){we=pe}}else X&&await X({...r.errors},re),Pr(),setTimeout(Pr);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Or(r.errors)&&!we,submitCount:r.submitCount+1,errors:r.errors}),we)throw we},je=(M,X={})=>{Ne(n,M)&&(Pt(X.defaultValue)?P(M,Kt(Ne(a,M))):(P(M,X.defaultValue),ft(a,M,Kt(X.defaultValue))),X.keepTouched||Bt(r.touchedFields,M),X.keepDirty||(Bt(r.dirtyFields,M),r.isDirty=X.defaultValue?be(M,Kt(Ne(a,M))):be()),X.keepError||(Bt(r.errors,M),p.isValid&&w()),y.state.next({...r}))},rt=(M,X={})=>{const re=M?Kt(M):a,we=Kt(re),ge=Or(M),pe=ge?a:we;if(X.keepDefaultValues||(a=re),!X.keepValues){if(X.keepDirtyValues){const Se=new Set([...d.mount,...Object.keys(to(a,s))]);for(const Be of Array.from(Se))Ne(r.dirtyFields,Be)?ft(pe,Be,Ne(s,Be)):P(Be,Ne(pe,Be))}else{if(Gf&&Pt(M))for(const Se of d.mount){const Be=Ne(n,Se);if(Be&&Be._f){const Xe=Array.isArray(Be._f.refs)?Be._f.refs[0]:Be._f.ref;if(nc(Xe)){const ht=Xe.closest("form");if(ht){ht.reset();break}}}}if(X.keepFieldsRef)for(const Se of d.mount)P(Se,Ne(pe,Se));else n={}}s=e.shouldUnregister?X.keepDefaultValues?Kt(a):{}:Kt(pe),y.array.next({values:{...pe}}),y.state.next({values:{...pe}})}d={mount:X.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!p.isValid||!!X.keepIsValid||!!X.keepDirtyValues,l.watch=!!e.shouldUnregister,y.state.next({submitCount:X.keepSubmitCount?r.submitCount:0,isDirty:ge?!1:X.keepDirty?r.isDirty:!!(X.keepDefaultValues&&!Aa(M,a)),isSubmitted:X.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ge?{}:X.keepDirtyValues?X.keepDefaultValues&&s?to(a,s):r.dirtyFields:X.keepDefaultValues&&M?to(a,M):X.keepDirty?r.dirtyFields:{},touchedFields:X.keepTouched?r.touchedFields:{},errors:X.keepErrors?r.errors:{},isSubmitSuccessful:X.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},wt=(M,X)=>rt(hn(M)?M(s):M,X),$n=(M,X={})=>{const re=Ne(n,M),we=re&&re._f;if(we){const ge=we.refs?we.refs[0]:we.ref;ge.focus&&(ge.focus(),X.shouldSelect&&hn(ge.select)&&ge.select())}},kr=M=>{r={...r,...M}},rs={control:{register:Rt,unregister:Ge,getFieldState:V,handleSubmit:ne,setError:fe,_subscribe:k,_runSchema:$,_focusError:Pr,_getWatch:ce,_getDirty:be,_setValid:w,_setFieldArray:j,_setDisabledField:Ze,_setErrors:C,_getFieldArray:me,_reset:rt,_resetDefaultValues:()=>hn(e.defaultValues)&&e.defaultValues().then(M=>{wt(M,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:ae,_disableForm:tr,_subjects:y,_proxyFormState:p,get _fields(){return n},get _formValues(){return s},get _state(){return l},set _state(M){l=M},get _defaultValues(){return a},get _names(){return d},set _names(M){d=M},get _formState(){return r},get _options(){return e},set _options(M){e={...e,...M}}},subscribe:de,trigger:ve,register:Rt,handleSubmit:ne,watch:U,setValue:P,getValues:T,reset:wt,resetField:je,clearErrors:ue,unregister:Ge,setError:fe,setFocus:$n,getFieldState:V};return{...rs,formControl:rs}}function Zr(t={}){const e=cn.useRef(void 0),r=cn.useRef(void 0),[n,a]=cn.useState({isDirty:!1,isValidating:!1,isLoading:hn(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:hn(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:n},t.defaultValues&&!hn(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...d}=d3(t);e.current={...d,formState:n}}const s=e.current.control;return s._options=t,W_(()=>{const l=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(d=>({...d,isReady:!0})),s._formState.isReady=!0,l},[s]),cn.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),cn.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),cn.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),cn.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),cn.useEffect(()=>{if(s._proxyFormState.isDirty){const l=s._getDirty();l!==n.isDirty&&s._subjects.state.next({isDirty:l})}},[s,n.isDirty]),cn.useEffect(()=>{t.values&&!Aa(t.values,r.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=t.values,a(l=>({...l}))):s._resetDefaultValues()},[s,t.values]),cn.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=K_(n,s),e.current}const zp=(t,e,r)=>{if(t&&"reportValidity"in t){const n=Ne(r,e);t.setCustomValidity(n&&n.message||""),t.reportValidity()}},vf=(t,e)=>{for(const r in e.fields){const n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?zp(n.ref,r,t):n&&n.refs&&n.refs.forEach(a=>zp(a,r,t))}},Vp=(t,e)=>{e.shouldUseNativeValidation&&vf(t,e);const r={};for(const n in t){const a=Ne(e.fields,n),s=Object.assign(t[n]||{},{ref:a&&a.ref});if(f3(e.names||Object.keys(t),n)){const l=Object.assign({},Ne(r,n));ft(l,"root",s),ft(r,n,l)}else ft(r,n,s)}return r},f3=(t,e)=>{const r=Hp(e);return t.some(n=>Hp(n).match(`^${r}\\.\\d+`))};function Hp(t){return t.replace(/\]|\[/g,"")}function le(t,e,r){function n(d,h){var m;Object.defineProperty(d,"_zod",{value:d._zod??{},enumerable:!1}),(m=d._zod).traits??(m.traits=new Set),d._zod.traits.add(t),e(d,h);for(const p in l.prototype)p in d||Object.defineProperty(d,p,{value:l.prototype[p].bind(d)});d._zod.constr=l,d._zod.def=h}const a=r?.Parent??Object;class s extends a{}Object.defineProperty(s,"name",{value:t});function l(d){var h;const m=r?.Parent?new s:this;n(m,d),(h=m._zod).deferred??(h.deferred=[]);for(const p of m._zod.deferred)p();return m}return Object.defineProperty(l,"init",{value:n}),Object.defineProperty(l,Symbol.hasInstance,{value:d=>r?.Parent&&d instanceof r.Parent?!0:d?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class yo extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Iv={};function ti(t){return Iv}function h3(t){const e=Object.values(t).filter(n=>typeof n=="number");return Object.entries(t).filter(([n,a])=>e.indexOf(+n)===-1).map(([n,a])=>a)}function m3(t,e){return typeof e=="bigint"?e.toString():e}function Mv(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Kf(t){return t==null}function Wf(t){const e=t.startsWith("^")?1:0,r=t.endsWith("$")?t.length-1:t.length;return t.slice(e,r)}function p3(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,a=r>n?r:n,s=Number.parseInt(t.toFixed(a).replace(".","")),l=Number.parseInt(e.toFixed(a).replace(".",""));return s%l/10**a}function gt(t,e,r){Object.defineProperty(t,e,{get(){{const n=r();return t[e]=n,n}},set(n){Object.defineProperty(t,e,{value:n})},configurable:!0})}function Qf(t,e,r){Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0})}function no(t){return JSON.stringify(t)}const Bv=Error.captureStackTrace?Error.captureStackTrace:(...t)=>{};function gf(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const x3=Mv(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function yf(t){if(gf(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(gf(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const v3=new Set(["string","number","symbol"]);function yc(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ni(t,e,r){const n=new t._zod.constr(e??t._zod.def);return(!e||r?.parent)&&(n._zod.parent=t),n}function De(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function g3(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const y3={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function b3(t,e){const r={},n=t._zod.def;for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&(r[a]=n.shape[a])}return ni(t,{...t._zod.def,shape:r,checks:[]})}function _3(t,e){const r={...t._zod.def.shape},n=t._zod.def;for(const a in e){if(!(a in n.shape))throw new Error(`Unrecognized key: "${a}"`);e[a]&&delete r[a]}return ni(t,{...t._zod.def,shape:r,checks:[]})}function w3(t,e){if(!yf(e))throw new Error("Invalid input to extend: expected a plain object");const r={...t._zod.def,get shape(){const n={...t._zod.def.shape,...e};return Qf(this,"shape",n),n},checks:[]};return ni(t,r)}function A3(t,e){return ni(t,{...t._zod.def,get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return Qf(this,"shape",r),r},catchall:e._zod.def.catchall,checks:[]})}function N3(t,e,r){const n=e._zod.def.shape,a={...n};if(r)for(const s in r){if(!(s in n))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(a[s]=t?new t({type:"optional",innerType:n[s]}):n[s])}else for(const s in n)a[s]=t?new t({type:"optional",innerType:n[s]}):n[s];return ni(e,{...e._zod.def,shape:a,checks:[]})}function E3(t,e,r){const n=e._zod.def.shape,a={...n};if(r)for(const s in r){if(!(s in a))throw new Error(`Unrecognized key: "${s}"`);r[s]&&(a[s]=new t({type:"nonoptional",innerType:n[s]}))}else for(const s in n)a[s]=new t({type:"nonoptional",innerType:n[s]});return ni(e,{...e._zod.def,shape:a,checks:[]})}function po(t,e=0){for(let r=e;r<t.issues.length;r++)if(t.issues[r]?.continue!==!0)return!0;return!1}function Jf(t,e){return e.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(t),r})}function Ll(t){return typeof t=="string"?t:t?.message}function ri(t,e,r){const n={...t,path:t.path??[]};if(!t.message){const a=Ll(t.inst?._zod.def?.error?.(t))??Ll(e?.error?.(t))??Ll(r.customError?.(t))??Ll(r.localeError?.(t))??"Invalid input";n.message=a}return delete n.inst,delete n.continue,e?.reportInput||delete n.input,n}function e0(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function bo(...t){const[e,r,n]=t;return typeof e=="string"?{message:e,code:"custom",input:r,inst:n}:{...e}}const Pv=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),Object.defineProperty(t,"message",{get(){return JSON.stringify(e,m3,2)},enumerable:!0}),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},t0=le("$ZodError",Pv),bc=le("$ZodError",Pv,{Parent:Error});function S3(t,e=r=>r.message){const r={},n=[];for(const a of t.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(e(a))):n.push(e(a));return{formErrors:n,fieldErrors:r}}function C3(t,e){const r=e||function(s){return s.message},n={_errors:[]},a=s=>{for(const l of s.issues)if(l.code==="invalid_union"&&l.errors.length)l.errors.map(d=>a({issues:d}));else if(l.code==="invalid_key")a({issues:l.issues});else if(l.code==="invalid_element")a({issues:l.issues});else if(l.path.length===0)n._errors.push(r(l));else{let d=n,h=0;for(;h<l.path.length;){const m=l.path[h];h===l.path.length-1?(d[m]=d[m]||{_errors:[]},d[m]._errors.push(r(l))):d[m]=d[m]||{_errors:[]},d=d[m],h++}}};return a(t),n}const kv=t=>(e,r,n,a)=>{const s=n?Object.assign(n,{async:!1}):{async:!1},l=e._zod.run({value:r,issues:[]},s);if(l instanceof Promise)throw new yo;if(l.issues.length){const d=new(a?.Err??t)(l.issues.map(h=>ri(h,s,ti())));throw Bv(d,a?.callee),d}return l.value},j3=kv(bc),Lv=t=>async(e,r,n,a)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let l=e._zod.run({value:r,issues:[]},s);if(l instanceof Promise&&(l=await l),l.issues.length){const d=new(a?.Err??t)(l.issues.map(h=>ri(h,s,ti())));throw Bv(d,a?.callee),d}return l.value},O3=Lv(bc),Fv=t=>(e,r,n)=>{const a=n?{...n,async:!1}:{async:!1},s=e._zod.run({value:r,issues:[]},a);if(s instanceof Promise)throw new yo;return s.issues.length?{success:!1,error:new(t??t0)(s.issues.map(l=>ri(l,a,ti())))}:{success:!0,data:s.value}},T3=Fv(bc),Uv=t=>async(e,r,n)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let s=e._zod.run({value:r,issues:[]},a);return s instanceof Promise&&(s=await s),s.issues.length?{success:!1,error:new t(s.issues.map(l=>ri(l,a,ti())))}:{success:!0,data:s.value}},D3=Uv(bc),R3=/^[cC][^\s-]{8,}$/,I3=/^[0-9a-z]+$/,M3=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,B3=/^[0-9a-vA-V]{20}$/,P3=/^[A-Za-z0-9]{27}$/,k3=/^[a-zA-Z0-9_-]{21}$/,L3=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,F3=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Gp=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,U3=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,z3="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function V3(){return new RegExp(z3,"u")}const H3=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,G3=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Z3=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,X3=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,q3=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,zv=/^[A-Za-z0-9_-]*$/,$3=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Y3=/^\+(?:[0-9]){6,14}[0-9]$/,Vv="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",K3=new RegExp(`^${Vv}$`);function Hv(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function W3(t){return new RegExp(`^${Hv(t)}$`)}function Q3(t){const e=Hv({precision:t.precision}),r=["Z"];t.local&&r.push(""),t.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${e}(?:${r.join("|")})`;return new RegExp(`^${Vv}T(?:${n})$`)}const J3=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},ew=/^\d+$/,tw=/^-?\d+(?:\.\d+)?/i,rw=/^[^A-Z]*$/,nw=/^[^a-z]*$/,Mr=le("$ZodCheck",(t,e)=>{var r;t._zod??(t._zod={}),t._zod.def=e,(r=t._zod).onattach??(r.onattach=[])}),Gv={number:"number",bigint:"bigint",object:"date"},Zv=le("$ZodCheckLessThan",(t,e)=>{Mr.init(t,e);const r=Gv[typeof e.value];t._zod.onattach.push(n=>{const a=n._zod.bag,s=(e.inclusive?a.maximum:a.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<s&&(e.inclusive?a.maximum=e.value:a.exclusiveMaximum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value<=e.value:n.value<e.value)||n.issues.push({origin:r,code:"too_big",maximum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Xv=le("$ZodCheckGreaterThan",(t,e)=>{Mr.init(t,e);const r=Gv[typeof e.value];t._zod.onattach.push(n=>{const a=n._zod.bag,s=(e.inclusive?a.minimum:a.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>s&&(e.inclusive?a.minimum=e.value:a.exclusiveMinimum=e.value)}),t._zod.check=n=>{(e.inclusive?n.value>=e.value:n.value>e.value)||n.issues.push({origin:r,code:"too_small",minimum:e.value,input:n.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),aw=le("$ZodCheckMultipleOf",(t,e)=>{Mr.init(t,e),t._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=e.value)}),t._zod.check=r=>{if(typeof r.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%e.value===BigInt(0):p3(r.value,e.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:e.value,input:r.value,inst:t,continue:!e.abort})}}),iw=le("$ZodCheckNumberFormat",(t,e)=>{Mr.init(t,e),e.format=e.format||"float64";const r=e.format?.includes("int"),n=r?"int":"number",[a,s]=y3[e.format];t._zod.onattach.push(l=>{const d=l._zod.bag;d.format=e.format,d.minimum=a,d.maximum=s,r&&(d.pattern=ew)}),t._zod.check=l=>{const d=l.value;if(r){if(!Number.isInteger(d)){l.issues.push({expected:n,format:e.format,code:"invalid_type",input:d,inst:t});return}if(!Number.isSafeInteger(d)){d>0?l.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort}):l.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:n,continue:!e.abort});return}}d<a&&l.issues.push({origin:"number",input:d,code:"too_small",minimum:a,inclusive:!0,inst:t,continue:!e.abort}),d>s&&l.issues.push({origin:"number",input:d,code:"too_big",maximum:s,inst:t})}}),sw=le("$ZodCheckMaxLength",(t,e)=>{var r;Mr.init(t,e),(r=t._zod.def).when??(r.when=n=>{const a=n.value;return!Kf(a)&&a.length!==void 0}),t._zod.onattach.push(n=>{const a=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<a&&(n._zod.bag.maximum=e.maximum)}),t._zod.check=n=>{const a=n.value;if(a.length<=e.maximum)return;const l=e0(a);n.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:a,inst:t,continue:!e.abort})}}),ow=le("$ZodCheckMinLength",(t,e)=>{var r;Mr.init(t,e),(r=t._zod.def).when??(r.when=n=>{const a=n.value;return!Kf(a)&&a.length!==void 0}),t._zod.onattach.push(n=>{const a=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>a&&(n._zod.bag.minimum=e.minimum)}),t._zod.check=n=>{const a=n.value;if(a.length>=e.minimum)return;const l=e0(a);n.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:a,inst:t,continue:!e.abort})}}),lw=le("$ZodCheckLengthEquals",(t,e)=>{var r;Mr.init(t,e),(r=t._zod.def).when??(r.when=n=>{const a=n.value;return!Kf(a)&&a.length!==void 0}),t._zod.onattach.push(n=>{const a=n._zod.bag;a.minimum=e.length,a.maximum=e.length,a.length=e.length}),t._zod.check=n=>{const a=n.value,s=a.length;if(s===e.length)return;const l=e0(a),d=s>e.length;n.issues.push({origin:l,...d?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:t,continue:!e.abort})}}),_c=le("$ZodCheckStringFormat",(t,e)=>{var r,n;Mr.init(t,e),t._zod.onattach.push(a=>{const s=a._zod.bag;s.format=e.format,e.pattern&&(s.patterns??(s.patterns=new Set),s.patterns.add(e.pattern))}),e.pattern?(r=t._zod).check??(r.check=a=>{e.pattern.lastIndex=0,!e.pattern.test(a.value)&&a.issues.push({origin:"string",code:"invalid_format",format:e.format,input:a.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(n=t._zod).check??(n.check=()=>{})}),cw=le("$ZodCheckRegex",(t,e)=>{_c.init(t,e),t._zod.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),uw=le("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=rw),_c.init(t,e)}),dw=le("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=nw),_c.init(t,e)}),fw=le("$ZodCheckIncludes",(t,e)=>{Mr.init(t,e);const r=yc(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${r}`:r);e.pattern=n,t._zod.onattach.push(a=>{const s=a._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=a=>{a.value.includes(e.includes,e.position)||a.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:a.value,inst:t,continue:!e.abort})}}),hw=le("$ZodCheckStartsWith",(t,e)=>{Mr.init(t,e);const r=new RegExp(`^${yc(e.prefix)}.*`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:t,continue:!e.abort})}}),mw=le("$ZodCheckEndsWith",(t,e)=>{Mr.init(t,e);const r=new RegExp(`.*${yc(e.suffix)}$`);e.pattern??(e.pattern=r),t._zod.onattach.push(n=>{const a=n._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(r)}),t._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:t,continue:!e.abort})}}),pw=le("$ZodCheckOverwrite",(t,e)=>{Mr.init(t,e),t._zod.check=r=>{r.value=e.tx(r.value)}});class xw{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const n=e.split(`
`).filter(l=>l),a=Math.min(...n.map(l=>l.length-l.trimStart().length)),s=n.map(l=>l.slice(a)).map(l=>" ".repeat(this.indent*2)+l);for(const l of s)this.content.push(l)}compile(){const e=Function,r=this?.args,a=[...(this?.content??[""]).map(s=>`  ${s}`)];return new e(...r,a.join(`
`))}}const vw={major:4,minor:0,patch:5},Dt=le("$ZodType",(t,e)=>{var r;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=vw;const n=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&n.unshift(t);for(const a of n)for(const s of a._zod.onattach)s(t);if(n.length===0)(r=t._zod).deferred??(r.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const a=(s,l,d)=>{let h=po(s),m;for(const p of l){if(p._zod.def.when){if(!p._zod.def.when(s))continue}else if(h)continue;const v=s.issues.length,y=p._zod.check(s);if(y instanceof Promise&&d?.async===!1)throw new yo;if(m||y instanceof Promise)m=(m??Promise.resolve()).then(async()=>{await y,s.issues.length!==v&&(h||(h=po(s,v)))});else{if(s.issues.length===v)continue;h||(h=po(s,v))}}return m?m.then(()=>s):s};t._zod.run=(s,l)=>{const d=t._zod.parse(s,l);if(d instanceof Promise){if(l.async===!1)throw new yo;return d.then(h=>a(h,n,l))}return a(d,n,l)}}t["~standard"]={validate:a=>{try{const s=T3(t,a);return s.success?{value:s.data}:{issues:s.error?.issues}}catch{return D3(t,a).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}}),r0=le("$ZodString",(t,e)=>{Dt.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??J3(t._zod.bag),t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),_t=le("$ZodStringFormat",(t,e)=>{_c.init(t,e),r0.init(t,e)}),gw=le("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=F3),_t.init(t,e)}),yw=le("$ZodUUID",(t,e)=>{if(e.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Gp(n))}else e.pattern??(e.pattern=Gp());_t.init(t,e)}),bw=le("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=U3),_t.init(t,e)}),_w=le("$ZodURL",(t,e)=>{_t.init(t,e),t._zod.check=r=>{try{const n=r.value,a=new URL(n),s=a.href;e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(a.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:$3.source,input:r.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(a.protocol.endsWith(":")?a.protocol.slice(0,-1):a.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:r.value,inst:t,continue:!e.abort})),!n.endsWith("/")&&s.endsWith("/")?r.value=s.slice(0,-1):r.value=s;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:t,continue:!e.abort})}}}),ww=le("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=V3()),_t.init(t,e)}),Aw=le("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=k3),_t.init(t,e)}),Nw=le("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=R3),_t.init(t,e)}),Ew=le("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=I3),_t.init(t,e)}),Sw=le("$ZodULID",(t,e)=>{e.pattern??(e.pattern=M3),_t.init(t,e)}),Cw=le("$ZodXID",(t,e)=>{e.pattern??(e.pattern=B3),_t.init(t,e)}),jw=le("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=P3),_t.init(t,e)}),Ow=le("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=Q3(e)),_t.init(t,e)}),Tw=le("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=K3),_t.init(t,e)}),Dw=le("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=W3(e)),_t.init(t,e)}),Rw=le("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=L3),_t.init(t,e)}),Iw=le("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=H3),_t.init(t,e),t._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Mw=le("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=G3),_t.init(t,e),t._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),t._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:t,continue:!e.abort})}}}),Bw=le("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=Z3),_t.init(t,e)}),Pw=le("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=X3),_t.init(t,e),t._zod.check=r=>{const[n,a]=r.value.split("/");try{if(!a)throw new Error;const s=Number(a);if(`${s}`!==a)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:t,continue:!e.abort})}}});function qv(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const kw=le("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=q3),_t.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),t._zod.check=r=>{qv(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:t,continue:!e.abort})}});function Lw(t){if(!zv.test(t))return!1;const e=t.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=e.padEnd(Math.ceil(e.length/4)*4,"=");return qv(r)}const Fw=le("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=zv),_t.init(t,e),t._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),t._zod.check=r=>{Lw(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:t,continue:!e.abort})}}),Uw=le("$ZodE164",(t,e)=>{e.pattern??(e.pattern=Y3),_t.init(t,e)});function zw(t,e=null){try{const r=t.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const a=JSON.parse(atob(n));return!("typ"in a&&a?.typ!=="JWT"||!a.alg||e&&(!("alg"in a)||a.alg!==e))}catch{return!1}}const Vw=le("$ZodJWT",(t,e)=>{_t.init(t,e),t._zod.check=r=>{zw(r.value,e.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:t,continue:!e.abort})}}),$v=le("$ZodNumber",(t,e)=>{Dt.init(t,e),t._zod.pattern=t._zod.bag.pattern??tw,t._zod.parse=(r,n)=>{if(e.coerce)try{r.value=Number(r.value)}catch{}const a=r.value;if(typeof a=="number"&&!Number.isNaN(a)&&Number.isFinite(a))return r;const s=typeof a=="number"?Number.isNaN(a)?"NaN":Number.isFinite(a)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:a,inst:t,...s?{received:s}:{}}),r}}),Hw=le("$ZodNumber",(t,e)=>{iw.init(t,e),$v.init(t,e)}),Gw=le("$ZodUnknown",(t,e)=>{Dt.init(t,e),t._zod.parse=r=>r}),Zw=le("$ZodNever",(t,e)=>{Dt.init(t,e),t._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:t}),r)});function Zp(t,e,r){t.issues.length&&e.issues.push(...Jf(r,t.issues)),e.value[r]=t.value}const Xw=le("$ZodArray",(t,e)=>{Dt.init(t,e),t._zod.parse=(r,n)=>{const a=r.value;if(!Array.isArray(a))return r.issues.push({expected:"array",code:"invalid_type",input:a,inst:t}),r;r.value=Array(a.length);const s=[];for(let l=0;l<a.length;l++){const d=a[l],h=e.element._zod.run({value:d,issues:[]},n);h instanceof Promise?s.push(h.then(m=>Zp(m,r,l))):Zp(h,r,l)}return s.length?Promise.all(s).then(()=>r):r}});function Fl(t,e,r){t.issues.length&&e.issues.push(...Jf(r,t.issues)),e.value[r]=t.value}function Xp(t,e,r,n){t.issues.length?n[r]===void 0?r in n?e.value[r]=void 0:e.value[r]=t.value:e.issues.push(...Jf(r,t.issues)):t.value===void 0?r in n&&(e.value[r]=void 0):e.value[r]=t.value}const qw=le("$ZodObject",(t,e)=>{Dt.init(t,e);const r=Mv(()=>{const v=Object.keys(e.shape);for(const b of v)if(!(e.shape[b]instanceof Dt))throw new Error(`Invalid element at key "${b}": expected a Zod schema`);const y=g3(e.shape);return{shape:e.shape,keys:v,keySet:new Set(v),numKeys:v.length,optionalKeys:new Set(y)}});gt(t._zod,"propValues",()=>{const v=e.shape,y={};for(const b in v){const _=v[b]._zod;if(_.values){y[b]??(y[b]=new Set);for(const w of _.values)y[b].add(w)}}return y});const n=v=>{const y=new xw(["shape","payload","ctx"]),b=r.value,_=A=>{const C=no(A);return`shape[${C}]._zod.run({ value: input[${C}], issues: [] }, ctx)`};y.write("const input = payload.value;");const w=Object.create(null);let E=0;for(const A of b.keys)w[A]=`key_${E++}`;y.write("const newResult = {}");for(const A of b.keys)if(b.optionalKeys.has(A)){const C=w[A];y.write(`const ${C} = ${_(A)};`);const D=no(A);y.write(`
        if (${C}.issues.length) {
          if (input[${D}] === undefined) {
            if (${D} in input) {
              newResult[${D}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${C}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${D}, ...iss.path] : [${D}],
              }))
            );
          }
        } else if (${C}.value === undefined) {
          if (${D} in input) newResult[${D}] = undefined;
        } else {
          newResult[${D}] = ${C}.value;
        }
        `)}else{const C=w[A];y.write(`const ${C} = ${_(A)};`),y.write(`
          if (${C}.issues.length) payload.issues = payload.issues.concat(${C}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${no(A)}, ...iss.path] : [${no(A)}]
          })));`),y.write(`newResult[${no(A)}] = ${C}.value`)}y.write("payload.value = newResult;"),y.write("return payload;");const j=y.compile();return(A,C)=>j(v,A,C)};let a;const s=gf,l=!Iv.jitless,h=l&&x3.value,m=e.catchall;let p;t._zod.parse=(v,y)=>{p??(p=r.value);const b=v.value;if(!s(b))return v.issues.push({expected:"object",code:"invalid_type",input:b,inst:t}),v;const _=[];if(l&&h&&y?.async===!1&&y.jitless!==!0)a||(a=n(e.shape)),v=a(v,y);else{v.value={};const C=p.shape;for(const D of p.keys){const R=C[D],L=R._zod.run({value:b[D],issues:[]},y),$=R._zod.optin==="optional"&&R._zod.optout==="optional";L instanceof Promise?_.push(L.then(W=>$?Xp(W,v,D,b):Fl(W,v,D))):$?Xp(L,v,D,b):Fl(L,v,D)}}if(!m)return _.length?Promise.all(_).then(()=>v):v;const w=[],E=p.keySet,j=m._zod,A=j.def.type;for(const C of Object.keys(b)){if(E.has(C))continue;if(A==="never"){w.push(C);continue}const D=j.run({value:b[C],issues:[]},y);D instanceof Promise?_.push(D.then(R=>Fl(R,v,C))):Fl(D,v,C)}return w.length&&v.issues.push({code:"unrecognized_keys",keys:w,input:b,inst:t}),_.length?Promise.all(_).then(()=>v):v}});function qp(t,e,r,n){for(const a of t)if(a.issues.length===0)return e.value=a.value,e;return e.issues.push({code:"invalid_union",input:e.value,inst:r,errors:t.map(a=>a.issues.map(s=>ri(s,n,ti())))}),e}const $w=le("$ZodUnion",(t,e)=>{Dt.init(t,e),gt(t._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),gt(t._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),gt(t._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),gt(t._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){const r=e.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>Wf(n.source)).join("|")})$`)}}),t._zod.parse=(r,n)=>{let a=!1;const s=[];for(const l of e.options){const d=l._zod.run({value:r.value,issues:[]},n);if(d instanceof Promise)s.push(d),a=!0;else{if(d.issues.length===0)return d;s.push(d)}}return a?Promise.all(s).then(l=>qp(l,r,t,n)):qp(s,r,t,n)}}),Yw=le("$ZodIntersection",(t,e)=>{Dt.init(t,e),t._zod.parse=(r,n)=>{const a=r.value,s=e.left._zod.run({value:a,issues:[]},n),l=e.right._zod.run({value:a,issues:[]},n);return s instanceof Promise||l instanceof Promise?Promise.all([s,l]).then(([h,m])=>$p(r,h,m)):$p(r,s,l)}});function bf(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(yf(t)&&yf(e)){const r=Object.keys(e),n=Object.keys(t).filter(s=>r.indexOf(s)!==-1),a={...t,...e};for(const s of n){const l=bf(t[s],e[s]);if(!l.valid)return{valid:!1,mergeErrorPath:[s,...l.mergeErrorPath]};a[s]=l.data}return{valid:!0,data:a}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<t.length;n++){const a=t[n],s=e[n],l=bf(a,s);if(!l.valid)return{valid:!1,mergeErrorPath:[n,...l.mergeErrorPath]};r.push(l.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function $p(t,e,r){if(e.issues.length&&t.issues.push(...e.issues),r.issues.length&&t.issues.push(...r.issues),po(t))return t;const n=bf(e.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return t.value=n.data,t}const Kw=le("$ZodEnum",(t,e)=>{Dt.init(t,e);const r=h3(e.entries);t._zod.values=new Set(r),t._zod.pattern=new RegExp(`^(${r.filter(n=>v3.has(typeof n)).map(n=>typeof n=="string"?yc(n):n.toString()).join("|")})$`),t._zod.parse=(n,a)=>{const s=n.value;return t._zod.values.has(s)||n.issues.push({code:"invalid_value",values:r,input:s,inst:t}),n}}),Ww=le("$ZodTransform",(t,e)=>{Dt.init(t,e),t._zod.parse=(r,n)=>{const a=e.transform(r.value,r);if(n.async)return(a instanceof Promise?a:Promise.resolve(a)).then(l=>(r.value=l,r));if(a instanceof Promise)throw new yo;return r.value=a,r}}),Qw=le("$ZodOptional",(t,e)=>{Dt.init(t,e),t._zod.optin="optional",t._zod.optout="optional",gt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),gt(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${Wf(r.source)})?$`):void 0}),t._zod.parse=(r,n)=>e.innerType._zod.optin==="optional"?e.innerType._zod.run(r,n):r.value===void 0?r:e.innerType._zod.run(r,n)}),Jw=le("$ZodNullable",(t,e)=>{Dt.init(t,e),gt(t._zod,"optin",()=>e.innerType._zod.optin),gt(t._zod,"optout",()=>e.innerType._zod.optout),gt(t._zod,"pattern",()=>{const r=e.innerType._zod.pattern;return r?new RegExp(`^(${Wf(r.source)}|null)$`):void 0}),gt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(r,n)=>r.value===null?r:e.innerType._zod.run(r,n)}),e4=le("$ZodDefault",(t,e)=>{Dt.init(t,e),t._zod.optin="optional",gt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=e.defaultValue,r;const a=e.innerType._zod.run(r,n);return a instanceof Promise?a.then(s=>Yp(s,e)):Yp(a,e)}});function Yp(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const t4=le("$ZodPrefault",(t,e)=>{Dt.init(t,e),t._zod.optin="optional",gt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>(r.value===void 0&&(r.value=e.defaultValue),e.innerType._zod.run(r,n))}),r4=le("$ZodNonOptional",(t,e)=>{Dt.init(t,e),gt(t._zod,"values",()=>{const r=e.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),t._zod.parse=(r,n)=>{const a=e.innerType._zod.run(r,n);return a instanceof Promise?a.then(s=>Kp(s,t)):Kp(a,t)}});function Kp(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const n4=le("$ZodCatch",(t,e)=>{Dt.init(t,e),t._zod.optin="optional",gt(t._zod,"optout",()=>e.innerType._zod.optout),gt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(r,n)=>{const a=e.innerType._zod.run(r,n);return a instanceof Promise?a.then(s=>(r.value=s.value,s.issues.length&&(r.value=e.catchValue({...r,error:{issues:s.issues.map(l=>ri(l,n,ti()))},input:r.value}),r.issues=[]),r)):(r.value=a.value,a.issues.length&&(r.value=e.catchValue({...r,error:{issues:a.issues.map(s=>ri(s,n,ti()))},input:r.value}),r.issues=[]),r)}}),a4=le("$ZodPipe",(t,e)=>{Dt.init(t,e),gt(t._zod,"values",()=>e.in._zod.values),gt(t._zod,"optin",()=>e.in._zod.optin),gt(t._zod,"optout",()=>e.out._zod.optout),gt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(r,n)=>{const a=e.in._zod.run(r,n);return a instanceof Promise?a.then(s=>Wp(s,e,n)):Wp(a,e,n)}});function Wp(t,e,r){return po(t)?t:e.out._zod.run({value:t.value,issues:t.issues},r)}const i4=le("$ZodReadonly",(t,e)=>{Dt.init(t,e),gt(t._zod,"propValues",()=>e.innerType._zod.propValues),gt(t._zod,"values",()=>e.innerType._zod.values),gt(t._zod,"optin",()=>e.innerType._zod.optin),gt(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(r,n)=>{const a=e.innerType._zod.run(r,n);return a instanceof Promise?a.then(Qp):Qp(a)}});function Qp(t){return t.value=Object.freeze(t.value),t}const s4=le("$ZodCustom",(t,e)=>{Mr.init(t,e),Dt.init(t,e),t._zod.parse=(r,n)=>r,t._zod.check=r=>{const n=r.value,a=e.fn(n);if(a instanceof Promise)return a.then(s=>Jp(s,r,n,t));Jp(a,r,n,t)}});function Jp(t,e,r,n){if(!t){const a={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(a.params=n._zod.def.params),e.issues.push(bo(a))}}class o4{constructor(){this._map=new Map,this._idmap=new Map}add(e,...r){const n=r[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const r=this._map.get(e);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(e),this}get(e){const r=e._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function l4(){return new o4}const Ul=l4();function c4(t,e){return new t({type:"string",...De(e)})}function u4(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...De(e)})}function ex(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...De(e)})}function d4(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...De(e)})}function f4(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...De(e)})}function h4(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...De(e)})}function m4(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...De(e)})}function p4(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...De(e)})}function x4(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...De(e)})}function v4(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...De(e)})}function g4(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...De(e)})}function y4(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...De(e)})}function b4(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...De(e)})}function _4(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...De(e)})}function w4(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...De(e)})}function A4(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...De(e)})}function N4(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...De(e)})}function E4(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...De(e)})}function S4(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...De(e)})}function C4(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...De(e)})}function j4(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...De(e)})}function O4(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...De(e)})}function T4(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...De(e)})}function D4(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...De(e)})}function R4(t,e){return new t({type:"string",format:"date",check:"string_format",...De(e)})}function I4(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...De(e)})}function M4(t,e){return new t({type:"string",format:"duration",check:"string_format",...De(e)})}function B4(t,e){return new t({type:"number",checks:[],...De(e)})}function P4(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...De(e)})}function k4(t){return new t({type:"unknown"})}function L4(t,e){return new t({type:"never",...De(e)})}function tx(t,e){return new Zv({check:"less_than",...De(e),value:t,inclusive:!1})}function Kd(t,e){return new Zv({check:"less_than",...De(e),value:t,inclusive:!0})}function rx(t,e){return new Xv({check:"greater_than",...De(e),value:t,inclusive:!1})}function Wd(t,e){return new Xv({check:"greater_than",...De(e),value:t,inclusive:!0})}function nx(t,e){return new aw({check:"multiple_of",...De(e),value:t})}function Yv(t,e){return new sw({check:"max_length",...De(e),maximum:t})}function sc(t,e){return new ow({check:"min_length",...De(e),minimum:t})}function Kv(t,e){return new lw({check:"length_equals",...De(e),length:t})}function F4(t,e){return new cw({check:"string_format",format:"regex",...De(e),pattern:t})}function U4(t){return new uw({check:"string_format",format:"lowercase",...De(t)})}function z4(t){return new dw({check:"string_format",format:"uppercase",...De(t)})}function V4(t,e){return new fw({check:"string_format",format:"includes",...De(e),includes:t})}function H4(t,e){return new hw({check:"string_format",format:"starts_with",...De(e),prefix:t})}function G4(t,e){return new mw({check:"string_format",format:"ends_with",...De(e),suffix:t})}function No(t){return new pw({check:"overwrite",tx:t})}function Z4(t){return No(e=>e.normalize(t))}function X4(){return No(t=>t.trim())}function q4(){return No(t=>t.toLowerCase())}function $4(){return No(t=>t.toUpperCase())}function Y4(t,e,r){return new t({type:"array",element:e,...De(r)})}function K4(t,e,r){return new t({type:"custom",check:"custom",fn:e,...De(r)})}function ax(t,e){try{var r=t()}catch(n){return e(n)}return r&&r.then?r.then(void 0,e):r}function W4(t,e){for(var r={};t.length;){var n=t[0],a=n.code,s=n.message,l=n.path.join(".");if(!r[l])if("unionErrors"in n){var d=n.unionErrors[0].errors[0];r[l]={message:d.message,type:d.code}}else r[l]={message:s,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(p){return p.errors.forEach(function(v){return t.push(v)})}),e){var h=r[l].types,m=h&&h[n.code];r[l]=qf(l,e,r,a,m?[].concat(m,n.message):n.message)}t.shift()}return r}function Q4(t,e){for(var r={};t.length;){var n=t[0],a=n.code,s=n.message,l=n.path.join(".");if(!r[l])if(n.code==="invalid_union"){var d=n.errors[0][0];r[l]={message:d.message,type:d.code}}else r[l]={message:s,type:a};if(n.code==="invalid_union"&&n.errors.forEach(function(p){return p.forEach(function(v){return t.push(v)})}),e){var h=r[l].types,m=h&&h[n.code];r[l]=qf(l,e,r,a,m?[].concat(m,n.message):n.message)}t.shift()}return r}function Ji(t,e,r){if(r===void 0&&(r={}),function(n){return"_def"in n&&typeof n._def=="object"&&"typeName"in n._def}(t))return function(n,a,s){try{return Promise.resolve(ax(function(){return Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](n,e)).then(function(l){return s.shouldUseNativeValidation&&vf({},s),{errors:{},values:r.raw?Object.assign({},n):l}})},function(l){if(function(d){return Array.isArray(d?.issues)}(l))return{values:{},errors:Vp(W4(l.errors,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw l}))}catch(l){return Promise.reject(l)}};if(function(n){return"_zod"in n&&typeof n._zod=="object"}(t))return function(n,a,s){try{return Promise.resolve(ax(function(){return Promise.resolve((r.mode==="sync"?j3:O3)(t,n,e)).then(function(l){return s.shouldUseNativeValidation&&vf({},s),{errors:{},values:r.raw?Object.assign({},n):l}})},function(l){if(function(d){return d instanceof t0}(l))return{values:{},errors:Vp(Q4(l.issues,!s.shouldUseNativeValidation&&s.criteriaMode==="all"),s)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}const J4=le("ZodISODateTime",(t,e)=>{Ow.init(t,e),Nt.init(t,e)});function eA(t){return D4(J4,t)}const tA=le("ZodISODate",(t,e)=>{Tw.init(t,e),Nt.init(t,e)});function rA(t){return R4(tA,t)}const nA=le("ZodISOTime",(t,e)=>{Dw.init(t,e),Nt.init(t,e)});function aA(t){return I4(nA,t)}const iA=le("ZodISODuration",(t,e)=>{Rw.init(t,e),Nt.init(t,e)});function sA(t){return M4(iA,t)}const oA=(t,e)=>{t0.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:r=>C3(t,r)},flatten:{value:r=>S3(t,r)},addIssue:{value:r=>t.issues.push(r)},addIssues:{value:r=>t.issues.push(...r)},isEmpty:{get(){return t.issues.length===0}}})},wc=le("ZodError",oA,{Parent:Error}),lA=kv(wc),cA=Lv(wc),uA=Fv(wc),dA=Uv(wc),Zt=le("ZodType",(t,e)=>(Dt.init(t,e),t.def=e,Object.defineProperty(t,"_def",{value:e}),t.check=(...r)=>t.clone({...e,checks:[...e.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),t.clone=(r,n)=>ni(t,r,n),t.brand=()=>t,t.register=(r,n)=>(r.add(t,n),t),t.parse=(r,n)=>lA(t,r,n,{callee:t.parse}),t.safeParse=(r,n)=>uA(t,r,n),t.parseAsync=async(r,n)=>cA(t,r,n,{callee:t.parseAsync}),t.safeParseAsync=async(r,n)=>dA(t,r,n),t.spa=t.safeParseAsync,t.refine=(r,n)=>t.check(rN(r,n)),t.superRefine=r=>t.check(nN(r)),t.overwrite=r=>t.check(No(r)),t.optional=()=>lx(t),t.nullable=()=>cx(t),t.nullish=()=>lx(cx(t)),t.nonoptional=r=>$A(t,r),t.array=()=>BA(t),t.or=r=>LA([t,r]),t.and=r=>UA(t,r),t.transform=r=>ux(t,VA(r)),t.default=r=>ZA(t,r),t.prefault=r=>qA(t,r),t.catch=r=>KA(t,r),t.pipe=r=>ux(t,r),t.readonly=()=>JA(t),t.describe=r=>{const n=t.clone();return Ul.add(n,{description:r}),n},Object.defineProperty(t,"description",{get(){return Ul.get(t)?.description},configurable:!0}),t.meta=(...r)=>{if(r.length===0)return Ul.get(t);const n=t.clone();return Ul.add(n,r[0]),n},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),Wv=le("_ZodString",(t,e)=>{r0.init(t,e),Zt.init(t,e);const r=t._zod.bag;t.format=r.format??null,t.minLength=r.minimum??null,t.maxLength=r.maximum??null,t.regex=(...n)=>t.check(F4(...n)),t.includes=(...n)=>t.check(V4(...n)),t.startsWith=(...n)=>t.check(H4(...n)),t.endsWith=(...n)=>t.check(G4(...n)),t.min=(...n)=>t.check(sc(...n)),t.max=(...n)=>t.check(Yv(...n)),t.length=(...n)=>t.check(Kv(...n)),t.nonempty=(...n)=>t.check(sc(1,...n)),t.lowercase=n=>t.check(U4(n)),t.uppercase=n=>t.check(z4(n)),t.trim=()=>t.check(X4()),t.normalize=(...n)=>t.check(Z4(...n)),t.toLowerCase=()=>t.check(q4()),t.toUpperCase=()=>t.check($4())}),fA=le("ZodString",(t,e)=>{r0.init(t,e),Wv.init(t,e),t.email=r=>t.check(u4(hA,r)),t.url=r=>t.check(p4(mA,r)),t.jwt=r=>t.check(T4(OA,r)),t.emoji=r=>t.check(x4(pA,r)),t.guid=r=>t.check(ex(ix,r)),t.uuid=r=>t.check(d4(zl,r)),t.uuidv4=r=>t.check(f4(zl,r)),t.uuidv6=r=>t.check(h4(zl,r)),t.uuidv7=r=>t.check(m4(zl,r)),t.nanoid=r=>t.check(v4(xA,r)),t.guid=r=>t.check(ex(ix,r)),t.cuid=r=>t.check(g4(vA,r)),t.cuid2=r=>t.check(y4(gA,r)),t.ulid=r=>t.check(b4(yA,r)),t.base64=r=>t.check(C4(SA,r)),t.base64url=r=>t.check(j4(CA,r)),t.xid=r=>t.check(_4(bA,r)),t.ksuid=r=>t.check(w4(_A,r)),t.ipv4=r=>t.check(A4(wA,r)),t.ipv6=r=>t.check(N4(AA,r)),t.cidrv4=r=>t.check(E4(NA,r)),t.cidrv6=r=>t.check(S4(EA,r)),t.e164=r=>t.check(O4(jA,r)),t.datetime=r=>t.check(eA(r)),t.date=r=>t.check(rA(r)),t.time=r=>t.check(aA(r)),t.duration=r=>t.check(sA(r))});function or(t){return c4(fA,t)}const Nt=le("ZodStringFormat",(t,e)=>{_t.init(t,e),Wv.init(t,e)}),hA=le("ZodEmail",(t,e)=>{bw.init(t,e),Nt.init(t,e)}),ix=le("ZodGUID",(t,e)=>{gw.init(t,e),Nt.init(t,e)}),zl=le("ZodUUID",(t,e)=>{yw.init(t,e),Nt.init(t,e)}),mA=le("ZodURL",(t,e)=>{_w.init(t,e),Nt.init(t,e)}),pA=le("ZodEmoji",(t,e)=>{ww.init(t,e),Nt.init(t,e)}),xA=le("ZodNanoID",(t,e)=>{Aw.init(t,e),Nt.init(t,e)}),vA=le("ZodCUID",(t,e)=>{Nw.init(t,e),Nt.init(t,e)}),gA=le("ZodCUID2",(t,e)=>{Ew.init(t,e),Nt.init(t,e)}),yA=le("ZodULID",(t,e)=>{Sw.init(t,e),Nt.init(t,e)}),bA=le("ZodXID",(t,e)=>{Cw.init(t,e),Nt.init(t,e)}),_A=le("ZodKSUID",(t,e)=>{jw.init(t,e),Nt.init(t,e)}),wA=le("ZodIPv4",(t,e)=>{Iw.init(t,e),Nt.init(t,e)}),AA=le("ZodIPv6",(t,e)=>{Mw.init(t,e),Nt.init(t,e)}),NA=le("ZodCIDRv4",(t,e)=>{Bw.init(t,e),Nt.init(t,e)}),EA=le("ZodCIDRv6",(t,e)=>{Pw.init(t,e),Nt.init(t,e)}),SA=le("ZodBase64",(t,e)=>{kw.init(t,e),Nt.init(t,e)}),CA=le("ZodBase64URL",(t,e)=>{Fw.init(t,e),Nt.init(t,e)}),jA=le("ZodE164",(t,e)=>{Uw.init(t,e),Nt.init(t,e)}),OA=le("ZodJWT",(t,e)=>{Vw.init(t,e),Nt.init(t,e)}),Qv=le("ZodNumber",(t,e)=>{$v.init(t,e),Zt.init(t,e),t.gt=(n,a)=>t.check(rx(n,a)),t.gte=(n,a)=>t.check(Wd(n,a)),t.min=(n,a)=>t.check(Wd(n,a)),t.lt=(n,a)=>t.check(tx(n,a)),t.lte=(n,a)=>t.check(Kd(n,a)),t.max=(n,a)=>t.check(Kd(n,a)),t.int=n=>t.check(sx(n)),t.safe=n=>t.check(sx(n)),t.positive=n=>t.check(rx(0,n)),t.nonnegative=n=>t.check(Wd(0,n)),t.negative=n=>t.check(tx(0,n)),t.nonpositive=n=>t.check(Kd(0,n)),t.multipleOf=(n,a)=>t.check(nx(n,a)),t.step=(n,a)=>t.check(nx(n,a)),t.finite=()=>t;const r=t._zod.bag;t.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),t.isFinite=!0,t.format=r.format??null});function Ka(t){return B4(Qv,t)}const TA=le("ZodNumberFormat",(t,e)=>{Hw.init(t,e),Qv.init(t,e)});function sx(t){return P4(TA,t)}const DA=le("ZodUnknown",(t,e)=>{Gw.init(t,e),Zt.init(t,e)});function ox(){return k4(DA)}const RA=le("ZodNever",(t,e)=>{Zw.init(t,e),Zt.init(t,e)});function IA(t){return L4(RA,t)}const MA=le("ZodArray",(t,e)=>{Xw.init(t,e),Zt.init(t,e),t.element=e.element,t.min=(r,n)=>t.check(sc(r,n)),t.nonempty=r=>t.check(sc(1,r)),t.max=(r,n)=>t.check(Yv(r,n)),t.length=(r,n)=>t.check(Kv(r,n)),t.unwrap=()=>t.element});function BA(t,e){return Y4(MA,t,e)}const PA=le("ZodObject",(t,e)=>{qw.init(t,e),Zt.init(t,e),gt(t,"shape",()=>e.shape),t.keyof=()=>Yi(Object.keys(t._zod.def.shape)),t.catchall=r=>t.clone({...t._zod.def,catchall:r}),t.passthrough=()=>t.clone({...t._zod.def,catchall:ox()}),t.loose=()=>t.clone({...t._zod.def,catchall:ox()}),t.strict=()=>t.clone({...t._zod.def,catchall:IA()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=r=>w3(t,r),t.merge=r=>A3(t,r),t.pick=r=>b3(t,r),t.omit=r=>_3(t,r),t.partial=(...r)=>N3(Jv,t,r[0]),t.required=(...r)=>E3(eg,t,r[0])});function es(t,e){const r={type:"object",get shape(){return Qf(this,"shape",{...t}),this.shape},...De(e)};return new PA(r)}const kA=le("ZodUnion",(t,e)=>{$w.init(t,e),Zt.init(t,e),t.options=e.options});function LA(t,e){return new kA({type:"union",options:t,...De(e)})}const FA=le("ZodIntersection",(t,e)=>{Yw.init(t,e),Zt.init(t,e)});function UA(t,e){return new FA({type:"intersection",left:t,right:e})}const _f=le("ZodEnum",(t,e)=>{Kw.init(t,e),Zt.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const r=new Set(Object.keys(e.entries));t.extract=(n,a)=>{const s={};for(const l of n)if(r.has(l))s[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new _f({...e,checks:[],...De(a),entries:s})},t.exclude=(n,a)=>{const s={...e.entries};for(const l of n)if(r.has(l))delete s[l];else throw new Error(`Key ${l} not found in enum`);return new _f({...e,checks:[],...De(a),entries:s})}});function Yi(t,e){const r=Array.isArray(t)?Object.fromEntries(t.map(n=>[n,n])):t;return new _f({type:"enum",entries:r,...De(e)})}const zA=le("ZodTransform",(t,e)=>{Ww.init(t,e),Zt.init(t,e),t._zod.parse=(r,n)=>{r.addIssue=s=>{if(typeof s=="string")r.issues.push(bo(s,r.value,e));else{const l=s;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=r.value),l.inst??(l.inst=t),l.continue??(l.continue=!0),r.issues.push(bo(l))}};const a=e.transform(r.value,r);return a instanceof Promise?a.then(s=>(r.value=s,r)):(r.value=a,r)}});function VA(t){return new zA({type:"transform",transform:t})}const Jv=le("ZodOptional",(t,e)=>{Qw.init(t,e),Zt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function lx(t){return new Jv({type:"optional",innerType:t})}const HA=le("ZodNullable",(t,e)=>{Jw.init(t,e),Zt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function cx(t){return new HA({type:"nullable",innerType:t})}const GA=le("ZodDefault",(t,e)=>{e4.init(t,e),Zt.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function ZA(t,e){return new GA({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const XA=le("ZodPrefault",(t,e)=>{t4.init(t,e),Zt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function qA(t,e){return new XA({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():e}})}const eg=le("ZodNonOptional",(t,e)=>{r4.init(t,e),Zt.init(t,e),t.unwrap=()=>t._zod.def.innerType});function $A(t,e){return new eg({type:"nonoptional",innerType:t,...De(e)})}const YA=le("ZodCatch",(t,e)=>{n4.init(t,e),Zt.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function KA(t,e){return new YA({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const WA=le("ZodPipe",(t,e)=>{a4.init(t,e),Zt.init(t,e),t.in=e.in,t.out=e.out});function ux(t,e){return new WA({type:"pipe",in:t,out:e})}const QA=le("ZodReadonly",(t,e)=>{i4.init(t,e),Zt.init(t,e)});function JA(t){return new QA({type:"readonly",innerType:t})}const eN=le("ZodCustom",(t,e)=>{s4.init(t,e),Zt.init(t,e)});function tN(t){const e=new Mr({check:"custom"});return e._zod.check=t,e}function rN(t,e={}){return K4(eN,t,e)}function nN(t){const e=tN(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(bo(n,r.value,e._zod.def));else{const a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=e),a.continue??(a.continue=!e._zod.def.abort),r.issues.push(bo(a))}},t(r.value,r)));return e}const tg=({className:t="",size:e="md"})=>{const r={sm:"h-8",md:"h-12",lg:"h-16"};return c.jsxs("div",{className:`flex items-center space-x-3 ${t}`,children:[c.jsx("img",{src:"/logo-henrys-diagnostics.png",alt:"Henry Diagnostics",className:`${r[e]} w-auto object-contain`,onError:n=>{n.currentTarget.style.display="none",n.currentTarget.nextElementSibling?.classList.remove("hidden")}}),c.jsx("span",{className:"hidden text-xl font-bold text-blue-600",children:"HENRY DIAGNOSTICS"})]})},aN=es({email:or().email("Email inválido"),password:or().min(1,"Contraseña requerida")}),iN=()=>{const[t,e]=z.useState(!1),[r,n]=z.useState(null),{login:a}=vn(),{register:s,handleSubmit:l,formState:{errors:d}}=Zr({resolver:Ji(aN)}),h=async m=>{e(!0),n(null);try{await a(m)}catch(p){n(p.response?.data?.message||"Error al iniciar sesión")}finally{e(!1)}};return c.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[c.jsx("div",{className:"flex justify-center",children:c.jsx(tg,{size:"lg"})}),c.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Iniciar Sesión"}),c.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sistema de Seguimiento de Clientes"})]}),c.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:c.jsxs("div",{className:"card px-6 py-8",children:[r&&c.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-sm text-red-600",children:r})}),c.jsxs("form",{className:"space-y-6",onSubmit:l(h),children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),c.jsxs("div",{className:"mt-1",children:[c.jsx("input",{...s("email"),type:"email",autoComplete:"email",className:"input-field",placeholder:"tu@email.com"}),d.email&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email.message})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Contraseña"}),c.jsxs("div",{className:"mt-1",children:[c.jsx("input",{...s("password"),type:"password",autoComplete:"current-password",className:"input-field",placeholder:"Tu contraseña"}),d.password&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.password.message})]})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",disabled:t,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Iniciando sesión...":"Iniciar Sesión"})})]}),c.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:c.jsxs("div",{className:"text-sm text-gray-600",children:[c.jsx("p",{className:"font-semibold mb-2",children:"Credenciales de prueba:"}),c.jsxs("div",{className:"space-y-1 text-xs",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Admin:"})," rik@rikmarquez.com / HenryDiag2024$"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Mecánico:"})," mecanico@henrydiagnostics.com / MecanicoHD2024!"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Seguimiento:"})," ventas@henrydiagnostics.com / VentasHD2024!"]})]})]})})]})})]})},sN=({currentPage:t,onPageChange:e})=>{const{user:r,logout:n}=vn(),[a,s]=z.useState(!1),l=async()=>{try{await n()}catch(p){console.error("Error al cerrar sesión:",p)}},d=[{id:"dashboard",label:"Dashboard",icon:"🏠"},{id:"services",label:"Servicios",icon:"🔧"},{id:"appointments",label:"Citas",icon:"📅"},{id:"opportunities",label:"Oportunidades",icon:"💼"}],h=[{id:"reception",label:"Recepción",icon:"🚪"},{id:"appointmentList",label:"Lista Completa",icon:"📋"},{id:"vehicles",label:"Vehículos",icon:"🚗"},{id:"customers",label:"Clientes",icon:"👥"},{id:"mechanics",label:"Mecánicos",icon:"🔧"},...r?.rol==="administrador"?[{id:"users",label:"Usuarios",icon:"👤"}]:[]],m=()=>{s(!a)};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"flex justify-between items-center h-14",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx(tg,{size:"sm"}),c.jsx("span",{className:"ml-3 text-xl font-semibold text-gray-900",children:"Henry Diagnostics"})]}),c.jsxs("button",{onClick:m,className:`flex items-center space-x-1 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${a?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,title:"Más opciones",children:[c.jsx("span",{children:"⚙️"}),c.jsx("span",{className:"hidden sm:inline",children:"Más"}),c.jsx("span",{className:`transition-transform duration-200 ${a?"rotate-180":""}`,children:"▼"})]})]}),c.jsx("div",{className:"hidden sm:block border-t border-gray-100 py-2",children:c.jsxs("nav",{className:"flex items-center justify-center space-x-3 lg:space-x-6",children:[d.map(p=>c.jsxs("button",{onClick:()=>e(p.id),className:`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${t===p.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[c.jsx("span",{children:p.icon}),c.jsx("span",{children:p.label})]},p.id)),c.jsxs("button",{onClick:l,className:"flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium text-red-600 hover:text-red-800 hover:bg-red-50 transition-colors whitespace-nowrap",children:[c.jsx("span",{children:"🚪"}),c.jsx("span",{children:"Cerrar Sesión"})]})]})})]})}),c.jsx("div",{className:`bg-gray-50 border-b border-gray-200 shadow-sm transition-all duration-300 ease-in-out overflow-hidden ${a?"max-h-20 opacity-100":"max-h-0 opacity-0"}`,children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsx("nav",{className:"flex items-center justify-center space-x-4 lg:space-x-6 py-4",children:h.map(p=>c.jsxs("button",{onClick:()=>{e(p.id),s(!1)},className:`flex items-center space-x-1 lg:space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${t===p.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[c.jsx("span",{children:p.icon}),c.jsx("span",{children:p.label})]},p.id))})})}),c.jsx("div",{className:"sm:hidden border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"px-4 py-2",children:[c.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Principal"}),c.jsxs("nav",{className:"flex overflow-x-auto space-x-3 mb-3",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[d.map(p=>c.jsxs("button",{onClick:()=>e(p.id),className:`flex flex-col items-center p-2 rounded-lg text-xs font-medium whitespace-nowrap transition-colors min-w-0 flex-shrink-0 ${t===p.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[c.jsx("span",{className:"text-base mb-1",children:p.icon}),c.jsx("span",{className:"text-xs",children:p.label})]},p.id)),c.jsxs("button",{onClick:l,className:"flex flex-col items-center p-2 rounded-lg text-xs font-medium whitespace-nowrap transition-colors min-w-0 flex-shrink-0 text-red-600 hover:text-red-800 hover:bg-red-50",children:[c.jsx("span",{className:"text-base mb-1",children:"🚪"}),c.jsx("span",{className:"text-xs",children:"Cerrar"})]})]}),c.jsx("div",{className:"text-xs text-gray-500 mb-2 font-medium",children:"Administración"}),c.jsx("nav",{className:"flex overflow-x-auto space-x-3",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:h.map(p=>c.jsxs("button",{onClick:()=>e(p.id),className:`flex flex-col items-center p-2 rounded-lg text-xs font-medium whitespace-nowrap transition-colors min-w-0 flex-shrink-0 ${t===p.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[c.jsx("span",{className:"text-base mb-1",children:p.icon}),c.jsx("span",{className:"text-xs",children:p.label})]},p.id))})]})})]})},mr={search:async t=>(await ye.get("/opportunities/search",{params:t})).data,create:async t=>(await ye.post("/opportunities",t)).data,getById:async t=>(await ye.get(`/opportunities/${t}`)).data,update:async(t,e)=>(await ye.put(`/opportunities/${t}`,e)).data,getByVehicle:async t=>(await ye.get(`/opportunities/vehicle/${t}`)).data,getRemindersToday:async()=>(await ye.get("/opportunities/reminders/today")).data,addNote:async(t,e)=>(await ye.post(`/opportunities/${t}/notes`,e)).data,changeStatus:async(t,e)=>(await ye.put(`/opportunities/${t}`,{estado:e})).data,assignUser:async(t,e)=>(await ye.put(`/opportunities/${t}`,{usuario_asignado:e})).data,getPending:async()=>(await ye.get("/opportunities/search",{params:{estado:"pendiente",limit:50}})).data,getByPriority:async t=>(await ye.get("/opportunities/search",{params:{prioridad:t,limit:50}})).data,getAppointmentsToday:async()=>{const t=new Date().toISOString().split("T")[0];console.log("🗓️ getAppointmentsToday: Buscando citas para fecha:",t);const e=await ye.get("/opportunities/search",{params:{tiene_cita:"true",fecha_desde:t,fecha_hasta:t,limit:50}});return console.log("📊 getAppointmentsToday: Resultado completo:",JSON.stringify(e.data,null,2)),console.log("📊 getAppointmentsToday: Total opportunities:",e.data?.opportunities?.length||0),e.data},convertToAppointment:async(t,e)=>(await ye.post(`/opportunities/${t}/convert-to-appointment`,e)).data,delete:async t=>(await ye.delete(`/opportunities/${t}`)).data},Tr={search:async t=>(await ye.get("/vehicles/search",{params:t})).data,create:async t=>(await ye.post("/vehicles",t)).data,getByVin:async t=>(await ye.get(`/vehicles/${t}`)).data,getById:async t=>(await ye.get(`/vehicles/id/${t}`)).data,update:async(t,e)=>(await ye.put(`/vehicles/${t}`,e)).data,delete:async t=>(await ye.delete(`/vehicles/${t}`)).data,getHistory:async t=>(await ye.get(`/vehicles/${t}/history`)).data,getCustomerVehicles:async t=>(await ye.get("/vehicles/search",{params:{customer_id:t,limit:100}})).data,searchByPlate:async t=>(await ye.get("/vehicles/search",{params:{placa:t,limit:10}})).data,searchByCustomer:async t=>(await ye.get("/vehicles/search",{params:{customer_name:t,limit:20}})).data,getCount:async()=>(await ye.get("/vehicles/count")).data};class oN{async getStats(){return(await ye.get("/services/stats")).data}async getCountThisMonth(){return(await ye.get("/services/count/month")).data}async getServices(e={},r=1,n=50){const a=new URLSearchParams;return e.fecha_desde&&a.append("fecha_desde",e.fecha_desde),e.fecha_hasta&&a.append("fecha_hasta",e.fecha_hasta),e.estado&&a.append("estado",e.estado),e.cliente&&a.append("cliente",e.cliente),e.vehiculo&&a.append("vehiculo",e.vehiculo),e.mechanic_id&&a.append("mechanic_id",e.mechanic_id.toString()),e.branch_id&&a.append("branch_id",e.branch_id.toString()),a.append("page",r.toString()),a.append("limit",n.toString()),(await ye.get(`/services?${a.toString()}`)).data}async getServiceById(e){return(await ye.get(`/services/${e}`)).data}async updateServiceStatus(e,r,n){return(await ye.put(`/services/${e}/status`,{estado:r,notas:n})).data}async updateService(e,r){return(await ye.put(`/services/${e}`,r)).data}async completeService(e,r){return(await ye.put(`/services/${e}/complete`,r)).data}async getServicesByVehicle(e){return(await ye.get(`/services/vehicle/${e}`)).data}async getServicesByCustomer(e){return(await ye.get(`/services/customer/${e}`)).data}async getRecentServices(e=10){return(await ye.get(`/services/recent?limit=${e}`)).data}async getAvailableMechanics(){return(await ye.get("/mechanics?activo=true&limit=100")).data}}const En=new oN,lN=({onNavigate:t,onNavigateToVehicleForm:e})=>{const{user:r,isLoading:n}=vn(),[a,s]=z.useState({vehiclesCount:0,opportunitiesPending:0,remindersToday:0,servicesThisMonth:0,appointmentsToday:0}),[l,d]=z.useState(!0),[h,m]=z.useState(""),[p,v]=z.useState(!1);z.useEffect(()=>{!n&&r&&y()},[n,r]);const y=async()=>{try{console.log("🔄 Dashboard: Iniciando carga de datos...");const w=new Date().toISOString().split("T")[0],[E,j,A,C,D]=await Promise.all([mr.getRemindersToday(),mr.getPending(),Tr.getCount(),mr.getAppointmentsToday(),En.getCountThisMonth()]);console.log("📊 Dashboard: Datos recibidos",{vehicles:A,opportunities:j,reminders:E,appointments:C,services:D}),console.log("🔍 Dashboard: Detalle appointments:",{appointmentsResult:C,appointmentsArray:C?.opportunities,appointmentsLength:C?.opportunities?.length,finalCount:C?.opportunities?.length||0}),s({vehiclesCount:A.count||0,opportunitiesPending:j.opportunities?.length||0,remindersToday:E.reminders?.length||0,servicesThisMonth:D.count||0,appointmentsToday:C.opportunities?.length||0})}catch(w){console.error("❌ Dashboard: Error loading dashboard data:",w)}finally{d(!1)}},b=async()=>{if(h.trim()){v(!0);try{const w=await Tr.searchByPlate(h.trim());w.vehicles&&w.vehicles.length>0?(t("vehicles"),localStorage.setItem("vehicleSearchResults",JSON.stringify(w.vehicles)),localStorage.setItem("vehicleSearchQuery",h.trim())):alert("No se encontró ningún vehículo con esas placas")}catch(w){console.error("Error searching vehicle:",w),alert("Error al buscar el vehículo")}finally{v(!1)}}},_=w=>{w.key==="Enter"&&b()};return n?c.jsx("div",{className:"bg-gray-50 min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Cargando..."})]})}):c.jsx("div",{className:"bg-gray-50",children:c.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"px-4 py-6 sm:px-0",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Bienvenido, ",r?.nombre]}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Sistema de seguimiento de clientes y vehículos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[c.jsx("div",{className:"card p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Vehículos Registrados"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l?"--":a.vehiclesCount})]}),c.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:c.jsx("span",{className:"text-blue-600 text-xl",children:"🚗"})})]})}),c.jsxs("div",{className:`card p-6 ${a.appointmentsToday>0?"ring-2 ring-blue-200 bg-blue-50":""}`,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Citas"}),c.jsx("p",{className:`text-2xl font-bold ${a.appointmentsToday>0?"text-blue-600":"text-gray-900"}`,children:l?"--":a.appointmentsToday})]}),c.jsx("div",{className:`p-3 rounded-full ${a.appointmentsToday>0?"bg-blue-100":"bg-gray-100"}`,children:c.jsx("span",{className:`text-xl ${a.appointmentsToday>0?"text-blue-600":"text-gray-600"}`,children:"📅"})})]}),a.appointmentsToday>0&&c.jsx("div",{className:"mt-3",children:c.jsx("button",{onClick:()=>t("appointments"),className:"text-xs bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-full font-medium",children:"Ver Citas"})})]}),c.jsx("div",{className:"card p-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Oportunidades Pendientes"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:l?"--":a.opportunitiesPending})]}),c.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:c.jsx("span",{className:"text-yellow-600 text-xl",children:"💼"})})]})}),c.jsxs("div",{className:`card p-6 cursor-pointer hover:shadow-lg transition-shadow ${a.servicesThisMonth>0?"ring-2 ring-green-200 bg-green-50":""}`,onClick:()=>t("services"),children:[c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Servicios del Mes"}),c.jsx("p",{className:`text-2xl font-bold ${a.servicesThisMonth>0?"text-green-600":"text-gray-900"}`,children:l?"--":a.servicesThisMonth})]}),c.jsx("div",{className:`p-3 rounded-full ${a.servicesThisMonth>0?"bg-green-100":"bg-gray-100"}`,children:c.jsx("span",{className:`text-xl ${a.servicesThisMonth>0?"text-green-600":"text-gray-600"}`,children:"✅"})})]}),a.servicesThisMonth>0&&c.jsx("div",{className:"mt-3",children:c.jsx("button",{onClick:w=>{w.stopPropagation(),t("services")},className:"text-xs bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-full font-medium",children:"Ver Servicios"})})]}),c.jsxs("div",{className:`card p-6 ${a.remindersToday>0?"ring-2 ring-red-200 bg-red-50":""}`,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recordatorios Hoy"}),c.jsx("p",{className:`text-2xl font-bold ${a.remindersToday>0?"text-red-600":"text-gray-900"}`,children:l?"--":a.remindersToday})]}),c.jsx("div",{className:`p-3 rounded-full ${a.remindersToday>0?"bg-red-100":"bg-gray-100"}`,children:c.jsx("span",{className:`text-xl ${a.remindersToday>0?"text-red-600":"text-gray-600"}`,children:a.remindersToday>0?"🔥":"⏰"})})]}),a.remindersToday>0&&c.jsx("div",{className:"mt-3",children:c.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("navigate",{detail:"reminders"})),className:"text-xs bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-full font-medium",children:"Ver Recordatorios"})})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Búsqueda Rápida"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("input",{type:"text",value:h,onChange:w=>m(w.target.value.toUpperCase()),onKeyPress:_,placeholder:"Buscar por placas (ABC-123-A)",className:"input-field text-sm"}),c.jsx("button",{onClick:b,disabled:p||!h.trim(),className:"w-full btn-primary text-sm disabled:opacity-50",children:p?"Buscando...":"Buscar Vehículo"})]})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones Rápidas"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("button",{onClick:()=>{console.log("📅 Dashboard: Navigating to appointments"),t("appointments")},className:"w-full btn-primary text-sm",children:"📅 Agendar Cita Rápida"}),c.jsx("button",{onClick:()=>{console.log("🚗 Dashboard: Using direct vehicle form navigation"),e()},className:"w-full btn-secondary text-sm",children:"Registrar Nuevo Vehículo"}),c.jsx("button",{onClick:()=>{console.log("💼 Dashboard: Navigating to opportunities"),t("opportunities")},className:"w-full btn-secondary text-sm",children:"Crear Oportunidad"}),c.jsx("button",{onClick:()=>{console.log("⏰ Dashboard: Navigating to reminders"),t("reminders")},className:"w-full btn-secondary text-sm",children:"Ver Recordatorios"})]})]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Próximos Recordatorios"}),c.jsx("div",{className:"text-sm text-gray-600",children:c.jsx("p",{children:"No hay recordatorios programados para hoy"})})]})]})]})})})},rg={getTodayAppointments:async()=>{console.log("📅 Obteniendo citas del día...");try{const t=await ye.get("/appointments/today");return console.log(`✅ ${t.data.appointments.length} citas encontradas para hoy`),t.data}catch(t){throw console.error("❌ Error obteniendo citas del día:",t),t}},getAppointmentsByDateRange:async(t,e)=>{console.log(`📅 Obteniendo citas del ${t} al ${e}...`);try{const r=await ye.get("/appointments",{params:{start_date:t,end_date:e}});return console.log(`✅ ${r.data.appointments.length} citas encontradas en el rango`),r.data}catch(r){throw console.error("❌ Error obteniendo citas por rango:",r),r}},convertToService:async(t,e)=>{console.log(`🎯 Convirtiendo cita ${t} a servicio...`);try{const r=await ye.post(`/appointments/${t}/convert-to-service`,e);return console.log(`✅ Cita convertida exitosamente. Servicio ID: ${r.data.service?.service_id}`),r.data}catch(r){throw console.error("❌ Error convirtiendo cita a servicio:",r),r}}},qn={getAll:async(t=50)=>(await ye.get("/customers/search",{params:{nombre:"",limit:t}})).data,search:async t=>(await ye.get("/customers/search",{params:t})).data,create:async t=>(await ye.post("/customers",t)).data,getById:async t=>(await ye.get(`/customers/${t}`)).data,update:async(t,e)=>(await ye.put(`/customers/${t}`,e)).data,delete:async t=>(await ye.delete(`/customers/${t}`)).data,getVehicles:async t=>(await ye.get(`/customers/${t}/vehicles`)).data,searchByName:async t=>(await ye.get("/customers/search",{params:{nombre:t,limit:10}})).data,searchByPhone:async t=>(await ye.get("/customers/search",{params:{telefono:t,limit:5}})).data},yr={async getMechanics(t={}){console.log("🔍 Obteniendo mecánicos con filtros:",t);const e=new URLSearchParams;Object.entries(t).forEach(([n,a])=>{a!=null&&a!==""&&e.append(n,a.toString())});const r=await ye.get(`/mechanics?${e.toString()}`);return console.log("✅ Mecánicos obtenidos:",{total:r.data.mechanics?.length||0,pagination:r.data.pagination}),r.data},async getMechanicById(t){console.log("🔍 Obteniendo mecánico por ID:",t);const e=await ye.get(`/mechanics/${t}`);return console.log("✅ Mecánico obtenido:",{mechanic_id:e.data.mechanic.mechanic_id,nombre:`${e.data.mechanic.nombre} ${e.data.mechanic.apellidos}`}),e.data},async createMechanic(t){console.log("➕ Creando nuevo mecánico:",{nombre:`${t.nombre} ${t.apellidos}`,numero_empleado:t.numero_empleado,branch_id:t.branch_id});const e=await ye.post("/mechanics",t);return console.log("✅ Mecánico creado exitosamente:",{mechanic_id:e.data.mechanic.mechanic_id,mensaje:e.data.message}),e.data},async updateMechanic(t,e){console.log("✏️ Actualizando mecánico:",{mechanic_id:t,campos_a_actualizar:Object.keys(e)});const r=await ye.put(`/mechanics/${t}`,e);return console.log("✅ Mecánico actualizado exitosamente:",{mechanic_id:t,mensaje:r.data.message}),r.data},async deleteMechanic(t){console.log("🗑️ Eliminando mecánico:",{mechanic_id:t});const e=await ye.delete(`/mechanics/${t}`);return console.log("✅ Operación completada:",{mechanic_id:t,accion:e.data.action,mensaje:e.data.message}),e.data},async getBranches(){console.log("🏢 Obteniendo lista de sucursales...");const t=await ye.get("/mechanics/branches");return console.log("✅ Sucursales obtenidas:",{total:t.data.branches?.length||0}),t.data},async getMechanicsStats(){console.log("📊 Obteniendo estadísticas de mecánicos...");const t=await ye.get("/mechanics/stats");return console.log("✅ Estadísticas obtenidas:",t.data.stats),t.data},formatName:t=>{const e=`${t.nombre} ${t.apellidos}`;return t.alias?`${e} "${t.alias}"`:e},formatNameWithAlias:t=>t.alias?`"${t.alias}" - ${t.nombre} ${t.apellidos}`:`${t.nombre} ${t.apellidos}`,formatExperienceLevel:t=>({junior:"Junior",intermedio:"Intermedio",senior:"Senior",master:"Master"})[t]||t,formatSalary:t=>t?new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(t):"No especificado",formatDate:t=>new Date(t).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"}),getCommonSpecialties:()=>["Frenos","Suspensión","Dirección"]},ng=({appointment:t,isOpen:e,onSuccess:r,onCancel:n})=>{const[a,s]=z.useState("customer"),[l,d]=z.useState(!1),[h,m]=z.useState(!1),[p,v]=z.useState(!1),[y,b]=z.useState(null),[_,w]=z.useState(""),[E,j]=z.useState([]),[A,C]=z.useState(null),[D,R]=z.useState([]),[L,$]=z.useState(null),[W,J]=z.useState([]),{register:ae,handleSubmit:be,formState:{errors:ce},reset:me,setValue:_e,watch:he}=Zr();z.useEffect(()=>{if(e)if(me(),d(!1),m(!1),b(null),C(null),$(null),w(""),j([]),R([]),P(),_e("descripcion",`Servicio programado: ${t.cita_descripcion_breve}`),console.log("🔍 Verificando datos de cita:",{customer_id:t.customer_id,vehicle_id:t.vehicle_id,customer_nombre:t.customer_nombre,vehicle_marca:t.vehicle_marca}),t.customer_id&&t.vehicle_id){console.log("✅ Cita tiene cliente y vehículo - saltando a paso de servicio");const V={customer_id:t.customer_id,nombre:t.customer_nombre||t.cita_nombre_contacto,telefono:t.customer_telefono||t.cita_telefono_contacto},ue={vehicle_id:t.vehicle_id,marca:t.vehicle_marca||"",modelo:t.vehicle_modelo||"",año:t.vehicle_año||new Date().getFullYear(),placa_actual:t.vehicle_placa||""};C(V),$(ue),_e("customer_id",V.customer_id),_e("vehicle_id",ue.vehicle_id),s("service")}else console.log("⚠️ Cita sin datos completos - empezando desde búsqueda"),s("customer")},[e,me,_e,t]);const P=async()=>{try{const V=await yr.getMechanics({activo:!0,limit:100});J(V.mechanics||[])}catch(V){console.error("Error cargando mecánicos:",V)}};z.useEffect(()=>{if(_.length>=2&&!l){const V=setTimeout(async()=>{try{const ue=await qn.searchByName(_);j(ue.customers||[])}catch(ue){console.error("Error buscando clientes:",ue),j([])}},500);return()=>clearTimeout(V)}else j([])},[_,l]);const oe=async V=>{console.log("👤 Cliente seleccionado:",V.nombre),C(V),j([]),_e("customer_id",V.customer_id);try{const ue=await Tr.getCustomerVehicles(V.customer_id);R(ue.vehicles||[]),ue.vehicles&&ue.vehicles.length>0?s("vehicle"):(m(!0),s("service"))}catch(ue){console.error("Error cargando vehículos del cliente:",ue),m(!0),s("service")}},Y=V=>{console.log("🚗 Vehículo seleccionado:",V.placa_actual),$(V),_e("vehicle_id",V.vehicle_id),s("service")},ve=()=>{d(!l),C(null),R([]),$(null),j([]),w(""),l?s("customer"):(_e("new_customer.telefono",t.cita_telefono_contacto),_e("new_customer.nombre",t.cita_nombre_contacto),m(!0),s("service"))},T=async V=>{try{v(!0),b(null),console.log("🎯 Enviando datos de conversión:",V);const ue=await rg.convertToService(t.opportunity_id,V);console.log("✅ Conversión exitosa:",ue),r()}catch(ue){console.error("❌ Error en conversión:",ue);const fe=ue.response?.data?.error||"Error al convertir la cita";b(fe)}finally{v(!1)}};return e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"🎯 Convertir Cita a Servicio"}),c.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"×"})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[c.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"📅 Información de la Cita"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Hora:"})," ",t.cita_hora]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Contacto:"})," ",t.cita_nombre_contacto]})]}),c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",t.cita_telefono_contacto]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Vehículo:"})," ",t.cita_descripcion_breve]})]})]})]}),y&&c.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:c.jsxs("p",{className:"text-red-800",children:["❌ ",y]})}),c.jsxs("form",{onSubmit:be(T),className:"space-y-6",children:[a==="customer"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",checked:!l,onChange:()=>!l||ve(),className:"mr-2"}),"Cliente Existente"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",checked:l,onChange:()=>l||ve(),className:"mr-2"}),"Cliente Nuevo"]})]}),l?c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"👤 Datos del Cliente Nuevo"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre Completo *"}),c.jsx("input",{...ae("new_customer.nombre",{required:"Nombre es requerido"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),ce.new_customer?.nombre&&c.jsx("p",{className:"text-red-600 text-sm mt-1",children:ce.new_customer.nombre.message})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono *"}),c.jsx("input",{...ae("new_customer.telefono",{required:"Teléfono es requerido"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),c.jsx("input",{...ae("new_customer.email"),type:"email",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección"}),c.jsx("input",{...ae("new_customer.direccion"),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),c.jsx("button",{type:"button",onClick:()=>s("service"),className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"Continuar ➡️"})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🔍 Buscar Cliente"}),c.jsx("input",{type:"text",value:_,onChange:V=>w(V.target.value),placeholder:"Nombre o teléfono del cliente...",className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),E.length>0&&c.jsx("div",{className:"mt-2 border border-gray-200 rounded-lg max-h-48 overflow-y-auto",children:E.map(V=>c.jsxs("button",{type:"button",onClick:()=>oe(V),className:"w-full text-left p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[c.jsx("div",{className:"font-medium",children:V.nombre}),c.jsx("div",{className:"text-sm text-gray-600",children:V.telefono})]},V.customer_id))})]})]}),a==="vehicle"&&A&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"font-medium text-gray-900",children:["🚗 Vehículos de ",A.nombre]}),c.jsx("div",{className:"space-y-2",children:D.map(V=>c.jsxs("button",{type:"button",onClick:()=>Y(V),className:"w-full text-left p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50",children:[c.jsxs("div",{className:"font-medium",children:[V.marca," ",V.modelo," ",V.año]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[V.color," - Placas: ",V.placa_actual]})]},V.vehicle_id))}),c.jsx("div",{className:"border-t pt-4",children:c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:h,onChange:V=>m(V.target.checked),className:"mr-2"}),"Es un vehículo nuevo de este cliente"]})}),h&&c.jsx("button",{type:"button",onClick:()=>s("service"),className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"Continuar con Vehículo Nuevo ➡️"})]}),a==="service"&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"🔧 Datos del Servicio"}),A&&L&&c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"✅ Cliente y Vehículo Confirmados"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Cliente:"})," ",A.nombre]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",A.telefono]})]}),c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Vehículo:"})," ",L.marca," ",L.modelo," ",L.año]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Placas:"})," ",L.placa_actual]})]})]})]}),h&&c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 space-y-4",children:[c.jsx("h4",{className:"font-medium text-yellow-900",children:"🚗 Datos del Vehículo Nuevo"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marca *"}),c.jsx("input",{...ae("new_vehicle.marca",{required:"Marca es requerida"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modelo *"}),c.jsx("input",{...ae("new_vehicle.modelo",{required:"Modelo es requerido"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Año *"}),c.jsx("input",{...ae("new_vehicle.año",{required:"Año es requerido",min:{value:1900,message:"Año inválido"},max:{value:new Date().getFullYear()+1,message:"Año inválido"}}),type:"number",className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color *"}),c.jsx("input",{...ae("new_vehicle.color",{required:"Color es requerido"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Placas *"}),c.jsx("input",{...ae("new_vehicle.placa_actual",{required:"Placas son requeridas"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Servicio *"}),c.jsxs("select",{...ae("tipo_servicio",{required:"Tipo de servicio es requerido"}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[c.jsx("option",{value:"",children:"Seleccionar..."}),c.jsx("option",{value:"Diagnóstico",children:"Diagnóstico"}),c.jsx("option",{value:"Reparación",children:"Reparación"}),c.jsx("option",{value:"Mantenimiento",children:"Mantenimiento"}),c.jsx("option",{value:"Revisión",children:"Revisión"})]}),c.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"💡 El precio se establecerá durante la cotización"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción del Servicio"}),c.jsx("textarea",{...ae("descripcion"),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mecánico Asignado"}),c.jsxs("select",{...ae("mechanic_id"),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[c.jsx("option",{value:"",children:"Sin asignar"}),W.map(V=>c.jsxs("option",{value:V.mechanic_id,children:[V.alias?`"${V.alias}" - `:"",V.nombre," ",V.apellidos,"(",V.nivel_experiencia," - ",V.branch_nombre,")"]},V.mechanic_id))]})]}),c.jsxs("div",{className:"flex space-x-4 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",disabled:p,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:p,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2 rounded-lg hover:from-blue-700 hover:to-purple-700 disabled:opacity-50",children:p?"⏳ Convirtiendo...":"🎯 Crear Servicio"})]})]})]})]})}):null},cN=({appointment:t,isOpen:e,onSuccess:r,onCancel:n})=>{const[a,s]=z.useState(!1),[l,d]=z.useState({cita_fecha:t.cita_fecha,cita_hora:t.cita_hora}),h=async v=>{v.preventDefault(),s(!0);try{(await ye.put(`/opportunities/${t.opportunity_id}/reschedule`,{cita_fecha:l.cita_fecha,cita_hora:l.cita_hora})).status===200&&(alert("✅ Cita reagendada exitosamente"),r())}catch(y){console.error("Error reagendando cita:",y);const b=y.response?.data?.message||"Error al reagendar la cita";alert(`❌ ${b}`)}finally{s(!1)}},m=v=>new Date(v).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"}),p=v=>v.substring(0,5);return e?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"🔄 Reagendar Cita"}),c.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-xl font-bold",children:"×"})]}),c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[c.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"📅 Cita actual:"}),c.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Fecha:"})," ",m(t.cita_fecha)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Hora:"})," ",p(t.cita_hora)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Cliente:"})," ",t.cita_nombre_contacto]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Vehículo:"})," ",t.cita_descripcion_breve]})]})]}),c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"📅 Nueva Fecha *"}),c.jsx("input",{type:"date",value:l.cita_fecha,onChange:v=>d({...l,cita_fecha:v.target.value}),className:"input-field",required:!0,min:new Date().toISOString().split("T")[0]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"🕐 Nueva Hora *"}),c.jsx("input",{type:"time",value:l.cita_hora,onChange:v=>d({...l,cita_hora:v.target.value}),className:"input-field",required:!0})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"btn-secondary flex-1",disabled:a,children:"Cancelar"}),c.jsx("button",{type:"submit",className:"btn-primary flex-1",disabled:a,children:a?"⏳ Reagendando...":"🔄 Reagendar"})]})]})]})}):null},uN=({appointment:t,isOpen:e,onSuccess:r,onCancel:n})=>{const[a,s]=z.useState(!1),[l,d]=z.useState(""),h=async v=>{v.preventDefault(),s(!0);try{(await ye.put(`/opportunities/${t.opportunity_id}/cancel`,{motivo_cancelacion:l||"Cancelada por usuario"})).status===200&&(alert("✅ Cita cancelada exitosamente"),r())}catch(y){console.error("Error cancelando cita:",y);const b=y.response?.data?.message||"Error al cancelar la cita";alert(`❌ ${b}`)}finally{s(!1)}},m=v=>new Date(v).toLocaleDateString("es-MX",{year:"numeric",month:"long",day:"numeric"}),p=v=>v.substring(0,5);return e?t.converted_to_service_id?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-red-900",children:"❌ No se puede cancelar"}),c.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-xl font-bold",children:"×"})]}),c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"text-6xl mb-4",children:"🚫"}),c.jsx("p",{className:"text-gray-700 mb-4",children:"Esta cita ya fue convertida a servicio y no puede ser cancelada."}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Servicio #",t.converted_to_service_id]})]}),c.jsx("button",{onClick:n,className:"btn-primary w-full",children:"Entendido"})]})}):c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-red-900",children:"❌ Cancelar Cita"}),c.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-xl font-bold",children:"×"})]}),c.jsxs("div",{className:"bg-red-50 p-4 rounded-lg mb-4",children:[c.jsx("h3",{className:"font-medium text-red-900 mb-2",children:"📅 Cita a cancelar:"}),c.jsxs("div",{className:"text-sm text-red-800 space-y-1",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Fecha:"})," ",m(t.cita_fecha)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Hora:"})," ",p(t.cita_hora)]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Cliente:"})," ",t.cita_nombre_contacto]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Vehículo:"})," ",t.cita_descripcion_breve]})]})]}),c.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded-lg mb-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"text-yellow-600 text-lg mr-2",children:"⚠️"}),c.jsxs("div",{className:"text-sm text-yellow-800",children:[c.jsx("p",{className:"font-medium",children:"Esta acción no se puede deshacer."}),c.jsx("p",{children:"El horario quedará disponible para nuevas citas."})]})]})}),c.jsxs("form",{onSubmit:h,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"📝 Motivo de cancelación (opcional)"}),c.jsx("textarea",{value:l,onChange:v=>d(v.target.value),className:"input-field",rows:3,placeholder:"Ej: Cliente canceló, conflicto de horarios, emergencia..."})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:n,className:"btn-secondary flex-1",disabled:a,children:"No Cancelar"}),c.jsx("button",{type:"submit",className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 disabled:opacity-50 flex-1",disabled:a,children:a?"⏳ Cancelando...":"❌ Sí, Cancelar"})]})]})]})}):null},dN=()=>{const{user:t}=vn(),[e,r]=z.useState([]),[n,a]=z.useState([]),[s,l]=z.useState(!0),[d,h]=z.useState(!1),[m,p]=z.useState("today"),[v,y]=z.useState(null),[b,_]=z.useState(!1),[w,E]=z.useState(!1),[j,A]=z.useState(!1),[C,D]=z.useState({cita_fecha:"",cita_hora:"",cita_descripcion_breve:"",cita_telefono_contacto:"",cita_nombre_contacto:"",titulo:"",descripcion:""}),R=async()=>{try{console.log("📅 Appointments: Cargando todas las citas...");const T=await mr.search({tiene_cita:"true"});console.log("📊 Appointments: Citas recibidas:",T.opportunities?.length||0),console.log("📋 Appointments: Datos completos:",JSON.stringify(T.opportunities,null,2)),r(T.opportunities||[])}catch(T){console.error("Error al cargar citas:",T)}finally{l(!1)}},L=()=>{if(e.length===0)return;const T=new Date,V=T.toISOString().split("T")[0];console.log("🔍 FilterAppointments:",{dateFilter:m,todayStr:V,totalAppointments:e.length,appointmentDates:e.map(fe=>({id:fe.opportunity_id,fecha:fe.cita_fecha,tiene_cita:fe.tiene_cita}))});let ue=e;switch(m){case"today":ue=e.filter(tr=>{const ne=new Date(tr.cita_fecha),je=ne.toLocaleDateString("en-CA");return console.log("🔍 Comparando fechas:",{citaFechaRaw:tr.cita_fecha,appointmentDateLocal:je,todayStr:V,displayDate:ne.toLocaleDateString("es-MX"),coincide:je===V}),je===V}),console.log("📅 Today filter result:",ue.length,"citas para",V);break;case"week":const fe=new Date(T);fe.setDate(T.getDate()-T.getDay());const U=new Date(fe);U.setDate(fe.getDate()+6);const k=fe.toLocaleDateString("en-CA"),de=U.toLocaleDateString("en-CA");ue=e.filter(tr=>{const je=new Date(tr.cita_fecha).toLocaleDateString("en-CA");return je>=k&&je<=de});break;case"month":const Ge=new Date(T.getFullYear(),T.getMonth(),1),Ze=new Date(T.getFullYear(),T.getMonth()+1,0),Rt=Ge.toLocaleDateString("en-CA"),Pr=Ze.toLocaleDateString("en-CA");ue=e.filter(tr=>{const je=new Date(tr.cita_fecha).toLocaleDateString("en-CA");return je>=Rt&&je<=Pr});break;case"all":default:ue=e.filter(tr=>new Date(tr.cita_fecha).toLocaleDateString("en-CA")>=V);break}ue.sort((fe,U)=>{const k=new Date(fe.cita_fecha+"T"+fe.cita_hora),de=new Date(U.cita_fecha+"T"+U.cita_hora);return k.getTime()-de.getTime()}),a(ue)};z.useEffect(()=>{L()},[e,m]);const $=T=>{console.log("🎯 Seleccionando cita para conversión:",T.opportunity_id),y(T),_(!0)},W=()=>{console.log("🎉 Conversión exitosa, recargando lista..."),_(!1),y(null),R()},J=()=>{console.log("❌ Conversión cancelada"),_(!1),y(null)},ae=T=>{console.log("🔄 Seleccionando cita para reagendar:",T.opportunity_id),y(T),E(!0)},be=()=>{console.log("🔄 Reagendamiento exitoso, recargando lista..."),E(!1),y(null),R()},ce=()=>{console.log("❌ Reagendamiento cancelado"),E(!1),y(null)},me=T=>{console.log("❌ Seleccionando cita para cancelar:",T.opportunity_id),y(T),A(!0)},_e=()=>{console.log("❌ Cancelación exitosa, recargando lista..."),A(!1),y(null),R()},he=()=>{console.log("❌ Cancelación cancelada"),A(!1),y(null)},P=async T=>{T.preventDefault();try{const V={...C,titulo:C.titulo||`Cita - ${C.cita_descripcion_breve}`,descripcion:C.descripcion||`Cita agendada para ${C.cita_nombre_contacto} - ${C.cita_descripcion_breve}`,tipo_oportunidad:"cita_agendada",estado:"agendado",prioridad:"media",origen:"manual",tiene_cita:!0};(await ye.post("/opportunities/appointments",V)).status===201&&(h(!1),D({cita_fecha:"",cita_hora:"",cita_descripcion_breve:"",cita_telefono_contacto:"",cita_nombre_contacto:"",titulo:"",descripcion:""}),R())}catch(V){console.error("Error al crear cita:",V),alert("Error al crear la cita. Por favor, intenta de nuevo.")}},oe=T=>new Date(T).toLocaleDateString("es-MX"),Y=T=>T.substring(0,5),ve=T=>{switch(T){case"agendado":return"bg-blue-100 text-blue-800";case"en_proceso":return"bg-yellow-100 text-yellow-800";case"completado":return"bg-green-100 text-green-800";case"perdido":return"bg-red-100 text-red-800";case"cancelado":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return z.useEffect(()=>{R()},[]),s?c.jsx("div",{className:"flex justify-center items-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"📅 Citas"}),c.jsxs("p",{className:"text-gray-600",children:["Gestión completa de citas agendadas - ",n.length," citas",m==="today"&&" (hoy)",m==="week"&&" (esta semana)",m==="month"&&" (este mes)",m==="all"&&" (futuras)"]})]}),c.jsx("div",{className:"flex items-center space-x-4",children:c.jsx("button",{onClick:()=>h(!0),className:"btn-primary",children:"📅 Nueva Cita"})})]}),c.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Período:"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>p("today"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="today"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"📅 Hoy"}),c.jsx("button",{onClick:()=>p("week"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="week"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"📆 Semana"}),c.jsx("button",{onClick:()=>p("month"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="month"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"🗓️ Mes"}),c.jsx("button",{onClick:()=>p("all"),className:`px-3 py-1 text-sm rounded-full transition-colors ${m==="all"?"bg-blue-100 text-blue-700 font-medium":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"📋 Todas"})]})]})}),d&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full mx-4",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Agendar Cita Rápida"}),c.jsxs("form",{onSubmit:P,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha *"}),c.jsx("input",{type:"date",value:C.cita_fecha,onChange:T=>D({...C,cita_fecha:T.target.value}),className:"input-field",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora *"}),c.jsx("input",{type:"time",value:C.cita_hora,onChange:T=>D({...C,cita_hora:T.target.value}),className:"input-field",required:!0})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción del vehículo *"}),c.jsx("input",{type:"text",placeholder:"Ej: Honda HRV 2022",value:C.cita_descripcion_breve,onChange:T=>D({...C,cita_descripcion_breve:T.target.value}),className:"input-field",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del contacto *"}),c.jsx("input",{type:"text",placeholder:"Nombre completo",value:C.cita_nombre_contacto,onChange:T=>D({...C,cita_nombre_contacto:T.target.value}),className:"input-field",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono *"}),c.jsx("input",{type:"tel",placeholder:"55-1234-5678",value:C.cita_telefono_contacto,onChange:T=>D({...C,cita_telefono_contacto:T.target.value}),className:"input-field",required:!0})]}),c.jsxs("div",{className:"flex space-x-3 pt-4",children:[c.jsx("button",{type:"button",onClick:()=>h(!1),className:"btn-secondary flex-1",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Agendar Cita"})]})]})]})}),c.jsx("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:n.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📅"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.length===0?"No hay citas agendadas":n.length===0?"No hay citas en el período seleccionado":"No hay citas futuras"}),c.jsx("p",{className:"text-gray-500 mb-4",children:e.length===0?"Comienza agendando tu primera cita":n.length===0?"Intenta cambiar el filtro de período":"Las citas aparecerán aquí"}),e.length===0&&c.jsx("button",{onClick:()=>h(!0),className:"btn-primary",children:"Agendar Primera Cita"})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cita"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehículo"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(T=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:oe(T.cita_fecha)}),c.jsx("div",{className:"text-sm text-gray-500",children:Y(T.cita_hora)})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.cita_nombre_contacto}),c.jsx("div",{className:"text-sm text-gray-500",children:T.cita_telefono_contacto})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-900",children:T.cita_descripcion_breve})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex flex-col space-y-1",children:[c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ve(T.estado)}`,children:T.estado}),T.converted_to_service_id&&c.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"✅ Convertida"})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c.jsx("div",{className:"flex flex-col space-y-2",children:T.estado==="cancelado"?c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-gray-600 text-lg",children:"❌"}),c.jsx("p",{className:"text-xs text-gray-700",children:"Cita Cancelada"})]}):T.converted_to_service_id?c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-green-600 text-lg",children:"✅"}),c.jsx("p",{className:"text-xs text-green-700",children:"Ya convertida"}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Servicio #",T.converted_to_service_id]})]}):c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:()=>$(T),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-2 rounded text-xs hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105",children:"🎯 Convertir a Servicio"}),c.jsxs("div",{className:"flex space-x-1",children:[c.jsx("button",{onClick:()=>ae(T),className:"bg-orange-600 text-white px-2 py-1 rounded text-xs hover:bg-orange-700 transition-all flex-1",children:"🔄 Reagendar"}),c.jsx("button",{onClick:()=>me(T),className:"bg-red-600 text-white px-2 py-1 rounded text-xs hover:bg-red-700 transition-all flex-1",children:"❌ Cancelar"})]})]})})})]},T.opportunity_id))})]})})}),v&&c.jsx(ng,{appointment:v,isOpen:b,onSuccess:W,onCancel:J}),v&&c.jsx(cN,{appointment:v,isOpen:w,onSuccess:be,onCancel:ce}),v&&c.jsx(uN,{appointment:v,isOpen:j,onSuccess:_e,onCancel:he})]})},fN=()=>{const[t,e]=z.useState([]),[r,n]=z.useState(!0),[a,s]=z.useState(null),[l,d]=z.useState(null),[h,m]=z.useState(!1),[p,v]=z.useState("");z.useEffect(()=>{y()},[]);const y=async()=>{try{n(!0),s(null),console.log("📅 Cargando citas del día...");const A=await rg.getTodayAppointments();e(A.appointments),v(A.date),console.log(`✅ ${A.appointments.length} citas cargadas`)}catch(A){console.error("❌ Error cargando citas:",A),s("Error al cargar las citas del día")}finally{n(!1)}},b=A=>{console.log("🎯 Seleccionando cita para conversión:",A.opportunity_id),d(A),m(!0)},_=()=>{console.log("🎉 Conversión exitosa, recargando lista..."),m(!1),d(null),y()},w=()=>{console.log("❌ Conversión cancelada"),m(!1),d(null)},E=A=>{if(!A)return"";const[C,D]=A.split(":"),R=parseInt(C),L=R>12?R-12:R===0?12:R,$=R>=12?"PM":"AM";return`${L}:${D} ${$}`},j=A=>A?new Date(A+"T00:00:00").toLocaleDateString("es-CR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"";return r?c.jsx("div",{className:"flex justify-center items-center min-h-64",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Cargando citas del día..."})]})}):a?c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-red-400 mr-2",children:"❌"}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-red-800 font-medium",children:"Error"}),c.jsx("p",{className:"text-red-600",children:a})]})]}),c.jsx("button",{onClick:y,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors",children:"Reintentar"})]}):c.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"📅 Citas del Día"}),c.jsxs("p",{className:"text-gray-600",children:[p?j(p):"Hoy"," - ",t.length," citas programadas"]})]}),t.length===0?c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[c.jsx("div",{className:"text-6xl mb-4",children:"📅"}),c.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"No hay citas programadas para hoy"}),c.jsx("p",{className:"text-gray-500",children:"Las citas programadas para hoy aparecerán aquí."})]}):c.jsx("div",{className:"space-y-4",children:t.map(A=>c.jsx("div",{className:`border rounded-lg p-6 transition-all hover:shadow-md ${A.converted_to_service_id?"bg-green-50 border-green-200":"bg-white border-gray-200 hover:border-blue-300"}`,children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center mb-3",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{className:"text-2xl",children:"🕐"}),c.jsx("span",{className:"text-xl font-bold text-blue-600",children:E(A.cita_hora)})]}),A.converted_to_service_id&&c.jsx("span",{className:"ml-4 bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"✅ Convertida a Servicio"})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center mb-2",children:[c.jsx("span",{className:"text-lg mr-2",children:"👤"}),c.jsx("span",{className:"font-medium text-gray-900",children:A.cita_nombre_contacto})]}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-lg mr-2",children:"📞"}),c.jsx("span",{className:"text-gray-600",children:A.cita_telefono_contacto})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-lg mr-2",children:"🚗"}),c.jsx("span",{className:"text-gray-700",children:A.cita_descripcion_breve})]}),A.origen_cita&&c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("span",{className:"text-sm mr-2",children:"📋"}),c.jsxs("span",{className:"text-sm text-gray-500",children:["Origen: ",A.origen_cita]})]})]})]})]}),c.jsx("div",{className:"ml-6",children:A.converted_to_service_id?c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-green-600 text-2xl mb-2",children:"✅"}),c.jsx("p",{className:"text-sm text-green-700",children:"Ya convertida"}),A.existing_service_id&&c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Servicio #",A.existing_service_id]})]}):c.jsx("button",{onClick:()=>b(A),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all transform hover:scale-105 font-medium shadow-lg",children:"🎯 Convertir a Servicio"})})]})},A.opportunity_id))}),l&&c.jsx(ng,{appointment:l,isOpen:h,onSuccess:_,onCancel:w})]})},hN=es({searchType:Yi(["placa","vin","cliente"]),searchValue:or().min(1,"Valor de búsqueda requerido")}),mN=({onVehicleSelect:t,onCreateNew:e})=>{const[r,n]=z.useState([]),[a,s]=z.useState(!1),[l,d]=z.useState(null),{register:h,handleSubmit:m,watch:p,setValue:v,formState:{errors:y}}=Zr({resolver:Ji(hN),defaultValues:{searchType:"placa"}});z.useEffect(()=>{const A=localStorage.getItem("vehicleSearchResults"),C=localStorage.getItem("vehicleSearchQuery");if(A&&C)try{const D=JSON.parse(A);n(D),v("searchType","placa"),v("searchValue",C),localStorage.removeItem("vehicleSearchResults"),localStorage.removeItem("vehicleSearchQuery")}catch(D){console.error("Error parsing saved search results:",D)}},[v]);const b=p("searchType"),_=()=>{switch(b){case"placa":return"ABC-123-A";case"vin":return"1N4BL11D85C123456";case"cliente":return"Juan Pérez";default:return""}},w=async A=>{s(!0),d(null),n([]);try{let C;switch(A.searchType){case"placa":C=await Tr.searchByPlate(A.searchValue);break;case"vin":A.searchValue.length===17?C={vehicles:[(await Tr.getByVin(A.searchValue)).vehicle],total:1}:C=await Tr.search({vin:A.searchValue});break;case"cliente":C=await Tr.searchByCustomer(A.searchValue);break;default:throw new Error("Tipo de búsqueda no válido")}n(C.vehicles||[]),C.vehicles?.length===0&&d("No se encontraron vehículos que coincidan con la búsqueda")}catch(C){d(C.response?.data?.message||"Error al buscar vehículos")}finally{s(!1)}},E=async()=>{s(!0),d(null),n([]);try{const A=await Tr.search({});n(A.vehicles||[]),A.vehicles?.length===0&&d("No hay vehículos registrados en el sistema")}catch(A){d(A.response?.data?.message||"Error al cargar vehículos")}finally{s(!1)}},j=A=>`https://wa.me/52${A.replace(/^\+52/,"")}`;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Búsqueda de Vehículos"}),c.jsx("form",{onSubmit:m(w),className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de búsqueda"}),c.jsxs("select",{...h("searchType"),className:"input-field",children:[c.jsx("option",{value:"placa",children:"Por Placas"}),c.jsx("option",{value:"vin",children:"Por VIN"}),c.jsx("option",{value:"cliente",children:"Por Cliente"})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor a buscar"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{...h("searchValue"),type:"text",className:"input-field flex-1",placeholder:_()}),c.jsx("button",{type:"submit",disabled:a,className:"btn-primary px-6 disabled:opacity-50",children:a?"Buscando...":"Buscar"}),c.jsx("button",{type:"button",onClick:()=>E(),disabled:a,className:"btn-secondary px-6 disabled:opacity-50",children:a?"Cargando...":"Listar Todos"})]}),y.searchValue&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.searchValue.message})]})]})}),c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:c.jsx("button",{onClick:()=>{console.log("🔘 VehicleSearch button clicked"),console.log("onCreateNew function:",e),e?e():console.log("❌ onCreateNew is undefined")},className:"btn-secondary",children:"+ Registrar Nuevo Vehículo"})})]}),l&&c.jsx("div",{className:"card p-4 bg-red-50 border border-red-200",children:c.jsx("p",{className:"text-red-600 text-sm",children:l})}),r.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Resultados (",r.length,")"]}),r.map(A=>c.jsx("div",{className:"card p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t?.(A),children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:[A.marca," ",A.modelo," ",A.año]}),c.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:A.placa_actual||"Sin placas"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"VIN:"})," ",A.vin]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Kilometraje:"})," ",A.kilometraje_actual?.toLocaleString()," km"]}),c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Propietario:"})," ",A.customer?.nombre||"No asignado"]})]}),A.customer&&c.jsxs("div",{className:"mt-2 flex items-center space-x-4 text-sm",children:[c.jsxs("span",{className:"text-gray-600",children:["📞 ",A.customer.telefono]}),A.customer.whatsapp&&c.jsx("a",{href:j(A.customer.whatsapp),target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700 font-medium",onClick:C=>C.stopPropagation(),children:"💬 WhatsApp"})]})]}),c.jsx("div",{className:"text-right",children:c.jsxs("span",{className:"text-xs text-gray-500",children:["Último registro: ",new Date(A.fecha_actualizacion).toLocaleDateString("es-MX")]})})]})},A.vin))]})]})};function pN(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function xN(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var vN=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(a[l]=s[l])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gN=function(t){vN(e,t);function e(r,n){var a=this.constructor,s=t.call(this,r,n)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),pN(s,a.prototype),xN(s),s}return e}(Error),yN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Br=function(t){yN(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(gN),bN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),un=function(t){bN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Br),_N=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Te=function(t){_N(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Br),wN=function(){function t(e){if(this.binarizer=e,e===null)throw new Te("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,a){var s=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new t(this.binarizer.createBinarizer(s))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),AN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jt=function(t){AN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Br),NN=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),pt=function(){function t(){}return t.arraycopy=function(e,r,n,a,s){for(;s--;)n[a++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),EN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),n0=function(t){EN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Br),SN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dx=function(t){SN(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var a=t.call(this,n)||this;return a.index=r,a.message=n,a}return e.kind="ArrayIndexOutOfBoundsException",e}(n0),CN=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ht=function(){function t(){}return t.fill=function(e,r){for(var n=0,a=e.length;n<a;n++)e[n]=r},t.fillWithin=function(e,r,n,a){t.rangeCheck(e.length,r,n);for(var s=r;s<n;s++)e[s]=a},t.rangeCheck=function(e,r,n){if(r>n)throw new Te("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new dx(r);if(n>e)throw new dx(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var a=Array.from({length:e});return a.map(function(s){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var a=1;try{for(var s=CN(e),l=s.next();!l.done;l=s.next()){var d=l.value;a=31*a+d}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var a=n-r,s=new Int32Array(a);return pt.arraycopy(e,r,s,0,a),s},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var a=0,s=e.length-1;a<=s;){var l=s+a>>1,d=n(r,e[l]);if(d>0)a=l+1;else if(d<0)s=l-1;else return l}return-a-1},t.numberComparator=function(e,r){return e-r},t}(),ze=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),er=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);pt.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=n[a];s&=~((1<<(e&31))-1);for(var l=n.length;s===0;){if(++a===l)return r;s=n[a]}var d=a*32+ze.numberOfTrailingZeros(s);return d>r?r:d},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,a=Math.floor(e/32),s=~n[a];s&=~((1<<(e&31))-1);for(var l=n.length;s===0;){if(++a===l)return r;s=~n[a]}var d=a*32+ze.numberOfTrailingZeros(s);return d>r?r:d},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new Te;if(r!==e){r--;for(var n=Math.floor(e/32),a=Math.floor(r/32),s=this.bits,l=n;l<=a;l++){var d=l>n?0:e&31,h=l<a?31:r&31,m=(2<<h)-(1<<d);s[l]|=m}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new Te;if(r===e)return!0;r--;for(var a=Math.floor(e/32),s=Math.floor(r/32),l=this.bits,d=a;d<=s;d++){var h=d>a?0:e&31,m=d<s?31:r&31,p=(2<<m)-(1<<h)&4294967295;if((l[d]&p)!==(n?p:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new Te("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new Te("Sizes don't match");for(var r=this.bits,n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,a){for(var s=0;s<a;s++){for(var l=0,d=0;d<8;d++)this.get(e)&&(l|=1<<7-d),e++;r[n+s]=l}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits,s=0;s<n;s++){var l=a[s];l=l>>1&1431655765|(l&1431655765)<<1,l=l>>2&858993459|(l&858993459)<<2,l=l>>4&252645135|(l&252645135)<<4,l=l>>8&16711935|(l&16711935)<<8,l=l>>16&65535|(l&65535)<<16,e[r-s]=l}if(this.size!==n*32){for(var d=n*32-this.size,h=e[0]>>>d,s=1;s<n;s++){var m=e[s];h|=m<<32-d,e[s-1]=h,h=m>>>d}e[n-1]=h}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&Ht.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+Ht.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)(r&7)===0&&(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),wf;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(wf||(wf={}));const bt=wf;var jN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xe=function(t){jN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Br),ON=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},it;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(it||(it={}));var Vt=function(){function t(e,r,n){for(var a,s,l=[],d=3;d<arguments.length;d++)l[d-3]=arguments[d];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=l,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var h=this.values,m=0,p=h.length;m!==p;m++){var v=h[m];t.VALUES_TO_ECI.set(v,this)}try{for(var y=ON(l),b=y.next();!b.done;b=y.next()){var _=b.value;t.NAME_TO_ECI.set(_,this)}}catch(w){a={error:w}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new xe("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new xe("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new xe("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(it.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(it.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(it.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(it.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(it.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(it.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(it.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(it.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(it.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(it.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(it.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(it.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(it.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(it.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(it.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(it.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(it.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(it.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(it.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(it.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(it.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(it.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(it.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(it.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(it.Big5,28,"Big5"),t.GB18030=new t(it.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(it.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),TN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wl=function(t){TN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Br),nn=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Vt?e:Vt.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var a="",s=0,l=e.length;s<l;s++){var d=e[s].toString(16);d.length<2&&(d="0"+d),a+="%"+d}return decodeURIComponent(a)}if(n.equals(Vt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Wl("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Vt.UTF8)||e.equals(Vt.ISO8859_1)||e.equals(Vt.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),a=[],s=0;s<n.length;s++)a.push(n[s].charCodeAt(0));return new Uint8Array(a)},t}(),$e=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return nn.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(bt.CHARACTER_SET)!==void 0)return r.get(bt.CHARACTER_SET).toString();for(var n=e.length,a=!0,s=!0,l=!0,d=0,h=0,m=0,p=0,v=0,y=0,b=0,_=0,w=0,E=0,j=0,A=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,C=0;C<n&&(a||s||l);C++){var D=e[C]&255;l&&(d>0?(D&128)===0?l=!1:d--:(D&128)!==0&&((D&64)===0?l=!1:(d++,(D&32)===0?h++:(d++,(D&16)===0?m++:(d++,(D&8)===0?p++:l=!1))))),a&&(D>127&&D<160?a=!1:D>159&&(D<192||D===215||D===247)&&j++),s&&(v>0?D<64||D===127||D>252?s=!1:v--:D===128||D===160||D>239?s=!1:D>160&&D<224?(y++,_=0,b++,b>w&&(w=b)):D>127?(v++,b=0,_++,_>E&&(E=_)):(b=0,_=0))}return l&&d>0&&(l=!1),s&&v>0&&(s=!1),l&&(A||h+m+p>0)?t.UTF8:s&&(t.ASSUME_SHIFT_JIS||w>=3||E>=3)?t.SHIFT_JIS:a&&s?w===2&&y===2||j*10>=n?t.SHIFT_JIS:t.ISO88591:a?t.ISO88591:s?t.SHIFT_JIS:l?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=-1;function s(d,h,m,p,v,y){if(d==="%%")return"%";if(r[++a]!==void 0){d=p?parseInt(p.substr(1)):void 0;var b=v?parseInt(v.substr(1)):void 0,_;switch(y){case"s":_=r[a];break;case"c":_=r[a][0];break;case"f":_=parseFloat(r[a]).toFixed(d);break;case"p":_=parseFloat(r[a]).toPrecision(d);break;case"e":_=parseFloat(r[a]).toExponential(d);break;case"x":_=parseInt(r[a]).toString(b||16);break;case"d":_=parseFloat(parseInt(r[a],b||10).toPrecision(d)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(b);for(var w=parseInt(m),E=m&&m[0]+""=="0"?"0":" ";_.length<w;)_=h!==void 0?_+E:E+_;return _}}var l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,s)},t.getBytes=function(e,r){return nn.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Vt.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Vt.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Vt.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),Fe=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=$e.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var a=r;r<r+n;a++)this.append(e[a]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),On=function(){function t(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new Te("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,a=new t(n,r),s=0;s<r;s++)for(var l=e[s],d=0;d<n;d++)l[d]&&a.set(d,s);return a},t.parseFromString=function(e,r,n){if(e===null)throw new Te("stringRepresentation cannot be null");for(var a=new Array(e.length),s=0,l=0,d=-1,h=0,m=0;m<e.length;)if(e.charAt(m)===`
`||e.charAt(m)==="\r"){if(s>l){if(d===-1)d=s-l;else if(s-l!==d)throw new Te("row lengths do not match");l=s,h++}m++}else if(e.substring(m,m+r.length)===r)m+=r.length,a[s]=!0,s++;else if(e.substring(m,m+n.length)===n)m+=n.length,a[s]=!1,s++;else throw new Te("illegal character encountered: "+e.substring(m));if(s>l){if(d===-1)d=s-l;else if(s-l!==d)throw new Te("row lengths do not match");h++}for(var p=new t(d,h),v=0;v<s;v++)a[v]&&p.set(Math.floor(v%d),Math.floor(v/d));return p},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Te("input matrix dimensions do not match");for(var r=new er(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits,s=0,l=this.height;s<l;s++)for(var d=s*n,h=e.getRow(s,r).getBitArray(),m=0;m<n;m++)a[d+m]^=h[m]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,a){if(r<0||e<0)throw new Te("Left and top must be nonnegative");if(a<1||n<1)throw new Te("Height and width must be at least 1");var s=e+n,l=r+a;if(l>this.height||s>this.width)throw new Te("The region must fit inside the matrix");for(var d=this.rowSize,h=this.bits,m=r;m<l;m++)for(var p=m*d,v=e;v<s;v++)h[p+Math.floor(v/32)]|=1<<(v&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new er(this.width):r.clear();for(var n=this.rowSize,a=this.bits,s=e*n,l=0;l<n;l++)r.setBulk(l*32,a[s+l]);return r},t.prototype.setRow=function(e,r){pt.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new er(e),a=new er(e),s=0,l=Math.floor((r+1)/2);s<l;s++)n=this.getRow(s,n),a=this.getRow(r-1-s,a),n.reverse(),a.reverse(),this.setRow(s,a),this.setRow(r-1-s,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,a=this.bits,s=e,l=r,d=-1,h=-1,m=0;m<r;m++)for(var p=0;p<n;p++){var v=a[m*n+p];if(v!==0){if(m<l&&(l=m),m>h&&(h=m),p*32<s){for(var y=0;(v<<31-y&4294967295)===0;)y++;p*32+y<s&&(s=p*32+y)}if(p*32+31>d){for(var y=31;!(v>>>y);)y--;p*32+y>d&&(d=p*32+y)}}}return d<s||h<l?null:Int32Array.from([s,l,d-s+1,h-l+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var a=n/e,s=n%e*32,l=r[n],d=0;(l<<31-d&4294967295)===0;)d++;return s+=d,Int32Array.from([s,a])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var a=Math.floor(n/e),s=Math.floor(n%e)*32,l=r[n],d=31;!(l>>>d);)d--;return s+=d,Int32Array.from([s,a])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&Ht.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ht.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var a=new Fe,s=0,l=this.height;s<l;s++){for(var d=0,h=this.width;d<h;d++)a.append(this.get(d,s)?e:r);a.append(n)}return a.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),DN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ee=function(t){DN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Br),RN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IN=function(t){RN(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var a=this.getLuminanceSource(),s=a.getWidth();n==null||n.getSize()<s?n=new er(s):n.clear(),this.initArrays(s);for(var l=a.getRow(r,this.luminances),d=this.buckets,h=0;h<s;h++)d[(l[h]&255)>>e.LUMINANCE_SHIFT]++;var m=e.estimateBlackPoint(d);if(s<3)for(var h=0;h<s;h++)(l[h]&255)<m&&n.set(h);else for(var p=l[0]&255,v=l[1]&255,h=1;h<s-1;h++){var y=l[h+1]&255;(v*4-p-y)/2<m&&n.set(h),p=v,v=y}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight(),s=new On(n,a);this.initArrays(n);for(var l=this.buckets,d=1;d<5;d++)for(var h=Math.floor(a*d/5),m=r.getRow(h,this.luminances),p=Math.floor(n*4/5),v=Math.floor(n/5);v<p;v++){var y=m[v]&255;l[y>>e.LUMINANCE_SHIFT]++}for(var b=e.estimateBlackPoint(l),_=r.getMatrix(),d=0;d<a;d++)for(var w=d*n,v=0;v<n;v++){var y=_[w+v]&255;y<b&&s.set(v,d)}return s},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,a=0;a<e.LUMINANCE_BUCKETS;a++)n[a]=0},e.estimateBlackPoint=function(r){for(var n=r.length,a=0,s=0,l=0,d=0;d<n;d++)r[d]>l&&(s=d,l=r[d]),r[d]>a&&(a=r[d]);for(var h=0,m=0,d=0;d<n;d++){var p=d-s,v=r[d]*p*p;v>m&&(h=d,m=v)}if(s>h){var y=s;s=h,h=y}if(h-s<=n/16)throw new ee;for(var b=h-1,_=-1,d=h-1;d>s;d--){var w=d-s,v=w*w*(h-d)*(a-r[d]);v>_&&(b=d,_=v)}return b<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(NN),MN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BN=function(t){MN(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),a=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&a>=e.MINIMUM_DIMENSION){var s=r.getMatrix(),l=n>>e.BLOCK_SIZE_POWER;(n&e.BLOCK_SIZE_MASK)!==0&&l++;var d=a>>e.BLOCK_SIZE_POWER;(a&e.BLOCK_SIZE_MASK)!==0&&d++;var h=e.calculateBlackPoints(s,l,d,n,a),m=new On(n,a);e.calculateThresholdForBlock(s,l,d,n,a,h,m),this.matrix=m}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,a,s,l,d,h){for(var m=l-e.BLOCK_SIZE,p=s-e.BLOCK_SIZE,v=0;v<a;v++){var y=v<<e.BLOCK_SIZE_POWER;y>m&&(y=m);for(var b=e.cap(v,2,a-3),_=0;_<n;_++){var w=_<<e.BLOCK_SIZE_POWER;w>p&&(w=p);for(var E=e.cap(_,2,n-3),j=0,A=-2;A<=2;A++){var C=d[b+A];j+=C[E-2]+C[E-1]+C[E]+C[E+1]+C[E+2]}var D=j/25;e.thresholdBlock(r,w,y,D,s,h)}}},e.cap=function(r,n,a){return r<n?n:r>a?a:r},e.thresholdBlock=function(r,n,a,s,l,d){for(var h=0,m=a*l+n;h<e.BLOCK_SIZE;h++,m+=l)for(var p=0;p<e.BLOCK_SIZE;p++)(r[m+p]&255)<=s&&d.set(n+p,a+h)},e.calculateBlackPoints=function(r,n,a,s,l){for(var d=l-e.BLOCK_SIZE,h=s-e.BLOCK_SIZE,m=new Array(a),p=0;p<a;p++){m[p]=new Int32Array(n);var v=p<<e.BLOCK_SIZE_POWER;v>d&&(v=d);for(var y=0;y<n;y++){var b=y<<e.BLOCK_SIZE_POWER;b>h&&(b=h);for(var _=0,w=255,E=0,j=0,A=v*s+b;j<e.BLOCK_SIZE;j++,A+=s){for(var C=0;C<e.BLOCK_SIZE;C++){var D=r[A+C]&255;_+=D,D<w&&(w=D),D>E&&(E=D)}if(E-w>e.MIN_DYNAMIC_RANGE)for(j++,A+=s;j<e.BLOCK_SIZE;j++,A+=s)for(var C=0;C<e.BLOCK_SIZE;C++)_+=r[A+C]&255}var R=_>>e.BLOCK_SIZE_POWER*2;if(E-w<=e.MIN_DYNAMIC_RANGE&&(R=w/2,p>0&&y>0)){var L=(m[p-1][y]+2*m[p][y-1]+m[p-1][y-1])/4;w<L&&(R=L)}m[p][y]=R}}return m},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(IN),Ac=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,a){throw new Wl("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new Wl("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new Wl("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new Fe,n=0;n<this.height;n++){for(var a=this.getRow(n,e),s=0;s<this.width;s++){var l=a[s]&255,d=void 0;l<64?d="#":l<128?d="+":l<192?d=".":d=" ",r.append(d)}r.append(`
`)}return r.toString()},t}(),PN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a0=function(t){PN(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var a=this.delegate.getRow(r,n),s=this.getWidth(),l=0;l<s;l++)a[l]=255-(a[l]&255);return a},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(n),s=0;s<n;s++)a[s]=255-(r[s]&255);return a},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,a,s){return new e(this.delegate.crop(r,n,a,s))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Ac),kN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LN=function(t){kN(e,t);function e(r,n){n===void 0&&(n=!1);var a=t.call(this,r.width,r.height)||this;return a.canvas=r,a.tempCanvasElement=null,a.buffer=e.makeBufferFromCanvasImageData(r,n),a}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var a=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(a.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,a,s){s===void 0&&(s=!1);var l=new Uint8ClampedArray(n*a);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!s)for(var d=0,h=0,m=r.length;d<m;d+=4,h++){var p=void 0,v=r[d+3];if(v===0)p=255;else{var y=r[d],b=r[d+1],_=r[d+2];p=306*y+601*b+117*_+512>>10}l[h]=p}else for(var d=0,h=0,w=r.length;d<w;d+=4,h++){var p=void 0,v=r[d+3];if(v===0)p=255;else{var y=r[d],b=r[d+1],_=r[d+2];p=306*y+601*b+117*_+512>>10}l[h]=255-p}return l},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Te("Requested row is outside the image: "+r);var a=this.getWidth(),s=r*a;return n===null?n=this.buffer.slice(s,s+a):(n.length<a&&(n=new Uint8ClampedArray(a)),n.set(this.buffer.slice(s,s+a))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return t.prototype.crop.call(this,r,n,a,s),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),a=n.getContext("2d"),s=r*e.DEGREE_TO_RADIANS,l=this.canvas.width,d=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(s))*l+Math.abs(Math.sin(s))*d),m=Math.ceil(Math.abs(Math.sin(s))*l+Math.abs(Math.cos(s))*d);return n.width=h,n.height=m,a.translate(h/2,m/2),a.rotate(s),a.drawImage(this.canvas,l/-2,d/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new a0(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Ac),FN=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),vr=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(l){l(s)})}return new(r||(r=Promise))(function(s,l){function d(p){try{m(n.next(p))}catch(v){l(v)}}function h(p){try{m(n.throw(p))}catch(v){l(v)}}function m(p){p.done?s(p.value):a(p.value).then(d,h)}m((n=n.apply(t,e||[])).next())})},gr=function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(m){return function(p){return h([m,p])}}function h(m){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=m[0]&2?a.return:m[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,m[1])).done)return s;switch(a=0,s&&(m=[m[0]&2,s.value]),m[0]){case 0:case 1:s=m;break;case 4:return r.label++,{value:m[1],done:!1};case 5:r.label++,a=m[1],m=[0];continue;case 7:m=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(m[0]===6||m[0]===2)){r=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){r.label=m[1];break}if(m[0]===6&&r.label<s[1]){r.label=s[1],s=m;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(m);break}s[2]&&r.ops.pop(),r.trys.pop();continue}m=e.call(t,r)}catch(p){m=[6,p],a=0}finally{n=s=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},UN=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ai=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return vr(this,void 0,void 0,function(){var e,r,n,a,s,l,d,h,m,p,v,y;return gr(this,function(b){switch(b.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=b.sent(),r=[];try{for(n=UN(e),a=n.next();!a.done;a=n.next())s=a.value,l=s.kind==="video"?"videoinput":s.kind,l==="videoinput"&&(d=s.deviceId||s.id,h=s.label||"Video device "+(r.length+1),m=s.groupId,p={deviceId:d,label:h,kind:l,groupId:m},r.push(p))}catch(_){v={error:_}}finally{try{a&&!a.done&&(y=n.return)&&y.call(n)}finally{if(v)throw v.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return vr(this,void 0,void 0,function(){var e;return gr(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new FN(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return vr(this,void 0,void 0,function(){var r;return gr(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(a){return a.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return vr(this,void 0,void 0,function(){return gr(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return vr(this,void 0,void 0,function(){var n,a;return gr(this,function(s){switch(s.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},a={video:n},[4,this.decodeOnceFromConstraints(a,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return vr(this,void 0,void 0,function(){var n;return gr(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=a.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,a.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return vr(this,void 0,void 0,function(){var n,a;return gr(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=s.sent(),[4,this.decodeOnce(n)];case 2:return a=s.sent(),[2,a]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return vr(this,void 0,void 0,function(){return gr(this,function(a){switch(a.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,a.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return vr(this,void 0,void 0,function(){var a,s;return gr(this,function(l){switch(l.label){case 0:return e?a={deviceId:{exact:e}}:a={facingMode:"environment"},s={video:a},[4,this.decodeFromConstraints(s,r,n)];case 1:return[2,l.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return vr(this,void 0,void 0,function(){var a;return gr(this,function(s){switch(s.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return a=s.sent(),[4,this.decodeFromStream(a,r,n)];case 2:return[2,s.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return vr(this,void 0,void 0,function(){var a;return gr(this,function(s){switch(s.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return a=s.sent(),[4,this.decodeContinuously(a,n)];case 2:return[2,s.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return vr(this,void 0,void 0,function(){var n;return gr(this,function(a){switch(a.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return a.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,a){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return vr(this,void 0,void 0,function(){return gr(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new un("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new un("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new un("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new un("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new un("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new un("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new un("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new un("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new un("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new un("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,a){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,a)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return vr(this,void 0,void 0,function(){return gr(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return vr(this,void 0,void 0,function(){return gr(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var a=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var s=function(l,d){if(a._stopAsyncDecode){d(new ee("Video stream has ended before any code could be detected.")),a._stopAsyncDecode=void 0;return}try{var h=a.decode(e);l(h)}catch(y){var m=r&&y instanceof ee,p=y instanceof Jt||y instanceof xe,v=p&&n;if(m||v)return setTimeout(s,a._timeBetweenDecodingAttempts,l,d);d(y)}};return new Promise(function(l,d){return s(l,d)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var a=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var s=n.decode(e);r(s,null),setTimeout(a,n.timeBetweenScansMillis)}catch(h){r(null,h);var l=h instanceof Jt||h instanceof xe,d=h instanceof ee;(l||d)&&setTimeout(a,n._timeBetweenDecodingAttempts)}};a()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var n=this.getCaptureCanvas(e),a=new LN(n,r),s=new BN(a);return new wN(s)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),pr=function(){function t(e,r,n,a,s,l){n===void 0&&(n=r==null?0:8*r.length),l===void 0&&(l=pt.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=s,this.timestamp=l,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=s,this.resultMetadata=null,l==null?this.timestamp=pt.currentTimeMillis():this.timestamp=l}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);pt.arraycopy(r,0,n,0,r.length),pt.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),Af;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Af||(Af={}));const Oe=Af;var Nf;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Nf||(Nf={}));const lr=Nf;var Nc=function(){function t(e,r,n,a,s,l){s===void 0&&(s=-1),l===void 0&&(l=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=s,this.structuredAppendParity=l,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),lo=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Te;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),Na=function(){function t(e,r){if(r.length===0)throw new Te;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),pt.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var a=0,s=r.length;a!==s;a++){var l=r[a];n=lo.addOrSubtract(n,l)}return n}n=r[0];for(var d=r.length,h=this.field,a=1;a<d;a++)n=lo.addOrSubtract(h.multiply(e,n),r[a]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Te("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),l=n.length-r.length;pt.arraycopy(n,0,s,0,l);for(var d=l;d<n.length;d++)s[d]=lo.addOrSubtract(r[d-l],n[d]);return new t(this.field,s)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Te("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,l=new Int32Array(n+s-1),d=this.field,h=0;h<n;h++)for(var m=r[h],p=0;p<s;p++)l[h+p]=lo.addOrSubtract(l[h+p],d.multiply(m,a[p]));return new t(d,l)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,a=new Int32Array(r),s=this.coefficients,l=0;l<r;l++)a[l]=n.multiply(s[l],e);return new t(n,a)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Te;if(r===0)return this.field.getZero();for(var n=this.coefficients,a=n.length,s=new Int32Array(a+e),l=this.field,d=0;d<a;d++)s[d]=l.multiply(n[d],r);return new t(l,s)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Te("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Te("Divide by 0");for(var r=this.field,n=r.getZero(),a=this,s=e.getCoefficient(e.getDegree()),l=r.inverse(s);a.getDegree()>=e.getDegree()&&!a.isZero();){var d=a.getDegree()-e.getDegree(),h=r.multiply(a.getCoefficient(a.getDegree()),l),m=e.multiplyByMonomial(d,h),p=r.buildMonomial(d,h);n=n.addOrSubtract(p),a=a.addOrSubtract(m)}return[n,a]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),zN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ag=function(t){zN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Br),VN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dr=function(t){VN(e,t);function e(r,n,a){var s=t.call(this)||this;s.primitive=r,s.size=n,s.generatorBase=a;for(var l=new Int32Array(n),d=1,h=0;h<n;h++)l[h]=d,d*=2,d>=n&&(d^=r,d&=n-1);s.expTable=l;for(var m=new Int32Array(n),h=0;h<n-1;h++)m[l[h]]=h;return s.logTable=m,s.zero=new Na(s,Int32Array.from([0])),s.one=new Na(s,Int32Array.from([1])),s}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Te;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new Na(this,a)},e.prototype.inverse=function(r){if(r===0)throw new ag;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ze.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(lo),HN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vl=function(t){HN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Br),GN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eo=function(t){GN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Br),Ec=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,a=new Na(n,e),s=new Int32Array(r),l=!0,d=0;d<r;d++){var h=a.evaluateAt(n.exp(d+n.getGeneratorBase()));s[s.length-1-d]=h,h!==0&&(l=!1)}if(!l)for(var m=new Na(n,s),p=this.runEuclideanAlgorithm(n.buildMonomial(r,1),m,r),v=p[0],y=p[1],b=this.findErrorLocations(v),_=this.findErrorMagnitudes(y,b),d=0;d<b.length;d++){var w=e.length-1-n.log(b[d]);if(w<0)throw new Vl("Bad error location");e[w]=Dr.addOrSubtract(e[w],_[d])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=this.field,l=e,d=r,h=s.getZero(),m=s.getOne();d.getDegree()>=(n/2|0);){var p=l,v=h;if(l=d,h=m,l.isZero())throw new Vl("r_{i-1} was zero");d=p;for(var y=s.getZero(),b=l.getCoefficient(l.getDegree()),_=s.inverse(b);d.getDegree()>=l.getDegree()&&!d.isZero();){var w=d.getDegree()-l.getDegree(),E=s.multiply(d.getCoefficient(d.getDegree()),_);y=y.addOrSubtract(s.buildMonomial(w,E)),d=d.addOrSubtract(l.multiplyByMonomial(w,E))}if(m=y.multiply(h).addOrSubtract(v),d.getDegree()>=l.getDegree())throw new Eo("Division algorithm failed to reduce polynomial?")}var j=m.getCoefficient(0);if(j===0)throw new Vl("sigmaTilde(0) was zero");var A=s.inverse(j),C=m.multiplyScalar(A),D=d.multiplyScalar(A);return[C,D]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),a=0,s=this.field,l=1;l<s.getSize()&&a<r;l++)e.evaluateAt(l)===0&&(n[a]=s.inverse(l),a++);if(a!==r)throw new Vl("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,a=new Int32Array(n),s=this.field,l=0;l<n;l++){for(var d=s.inverse(r[l]),h=1,m=0;m<n;m++)if(l!==m){var p=s.multiply(r[m],d),v=(p&1)===0?p|1:p&-2;h=s.multiply(h,v)}a[l]=s.multiply(e.evaluateAt(d),s.inverse(h)),s.getGeneratorBase()!==0&&(a[l]=s.multiply(a[l],d))}return a},t}(),ir;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(ir||(ir={}));var fx=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),s=t.convertBoolArrayToByteArray(a),l=t.getEncodedData(a),d=new Nc(s,l,null,null);return d.setNumBits(a.length),d},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=ir.UPPER,a=ir.UPPER,s="",l=0;l<r;)if(a===ir.BINARY){if(r-l<5)break;var d=t.readCode(e,l,5);if(l+=5,d===0){if(r-l<11)break;d=t.readCode(e,l,11)+31,l+=11}for(var h=0;h<d;h++){if(r-l<8){l=r;break}var m=t.readCode(e,l,8);s+=$e.castAsNonUtf8Char(m),l+=8}a=n}else{var p=a===ir.DIGIT?4:5;if(r-l<p)break;var m=t.readCode(e,l,p);l+=p;var v=t.getCharacter(a,m);v.startsWith("CTRL_")?(n=a,a=t.getTable(v.charAt(5)),v.charAt(6)==="L"&&(n=a)):(s+=v,a=n)}return s},t.getTable=function(e){switch(e){case"L":return ir.LOWER;case"P":return ir.PUNCT;case"M":return ir.MIXED;case"D":return ir.DIGIT;case"B":return ir.BINARY;case"U":default:return ir.UPPER}},t.getCharacter=function(e,r){switch(e){case ir.UPPER:return t.UPPER_TABLE[r];case ir.LOWER:return t.LOWER_TABLE[r];case ir.MIXED:return t.MIXED_TABLE[r];case ir.PUNCT:return t.PUNCT_TABLE[r];case ir.DIGIT:return t.DIGIT_TABLE[r];default:throw new Eo("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=Dr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=Dr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=Dr.AZTEC_DATA_10):(n=12,r=Dr.AZTEC_DATA_12);var a=this.ddata.getNbDatablocks(),s=e.length/n;if(s<a)throw new xe;for(var l=e.length%n,d=new Int32Array(s),h=0;h<s;h++,l+=n)d[h]=t.readCode(e,l,n);try{var m=new Ec(r);m.decode(d,s-a)}catch(E){throw new xe(E)}for(var p=(1<<n)-1,v=0,h=0;h<a;h++){var y=d[h];if(y===0||y===p)throw new xe;(y===1||y===p-1)&&v++}for(var b=new Array(a*n-v),_=0,h=0;h<a;h++){var y=d[h];if(y===1||y===p-1)b.fill(y>1,_,_+n-1),_+=n-1;else for(var w=n-1;w>=0;--w)b[_++]=(y&1<<w)!==0}return b},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,s=new Int32Array(a),l=new Array(this.totalBitsInLayer(n,r));if(r)for(var d=0;d<s.length;d++)s[d]=d;else for(var h=a+1+2*ze.truncDivision(ze.truncDivision(a,2)-1,15),m=a/2,p=ze.truncDivision(h,2),d=0;d<m;d++){var v=d+ze.truncDivision(d,15);s[m-d-1]=p-v-1,s[m+d]=p+v+1}for(var d=0,y=0;d<n;d++){for(var b=(n-d)*4+(r?9:12),_=d*2,w=a-1-_,E=0;E<b;E++)for(var j=E*2,A=0;A<2;A++)l[y+j+A]=e.get(s[_+A],s[_+E]),l[y+2*b+j+A]=e.get(s[_+E],s[w-A]),l[y+4*b+j+A]=e.get(s[w-A],s[w-E]),l[y+6*b+j+A]=e.get(s[w-E],s[_+A]);y+=b*8}return l},t.readCode=function(e,r,n){for(var a=0,s=r;s<r+n;s++)a<<=1,e[s]&&(a|=1);return a},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),We=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,a){var s=e-n,l=r-a;return Math.sqrt(s*s+l*l)},t.sum=function(e){for(var r=0,n=0,a=e.length;n!==a;n++){var s=e[n];r+=s}return r},t}(),Ef=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),Ee=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*Ef.floatToIntBits(this.x)+Ef.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]),s,l,d;if(n>=r&&n>=a?(l=e[0],s=e[1],d=e[2]):a>=n&&a>=r?(l=e[1],s=e[0],d=e[2]):(l=e[2],s=e[0],d=e[1]),this.crossProductZ(s,l,d)<0){var h=s;s=d,d=h}e[0]=s,e[1]=l,e[2]=d},t.distance=function(e,r){return We.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var a=r.x,s=r.y;return(n.x-a)*(e.y-s)-(n.y-s)*(e.x-a)},t}(),i0=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),ZN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XN=function(t){ZN(e,t);function e(r,n,a,s,l){var d=t.call(this,r,n)||this;return d.compact=a,d.nbDatablocks=s,d.nbLayers=l,d}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(i0),Sf=function(){function t(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);var s=r/2|0;if(this.leftInit=n-s,this.rightInit=n+s,this.upInit=a-s,this.downInit=a+s,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,s=!1,l=!0,d=!1,h=!1,m=!1,p=!1,v=!1,y=this.width,b=this.height;l;){l=!1;for(var _=!0;(_||!h)&&r<y;)_=this.containsBlackPoint(n,a,r,!1),_?(r++,l=!0,h=!0):h||r++;if(r>=y){s=!0;break}for(var w=!0;(w||!m)&&a<b;)w=this.containsBlackPoint(e,r,a,!0),w?(a++,l=!0,m=!0):m||a++;if(a>=b){s=!0;break}for(var E=!0;(E||!p)&&e>=0;)E=this.containsBlackPoint(n,a,e,!1),E?(e--,l=!0,p=!0):p||e--;if(e<0){s=!0;break}for(var j=!0;(j||!v)&&n>=0;)j=this.containsBlackPoint(e,r,n,!0),j?(n--,l=!0,v=!0):v||n--;if(n<0){s=!0;break}l&&(d=!0)}if(!s&&d){for(var A=r-e,C=null,D=1;C===null&&D<A;D++)C=this.getBlackPointOnSegment(e,a-D,e+D,a);if(C==null)throw new ee;for(var R=null,D=1;R===null&&D<A;D++)R=this.getBlackPointOnSegment(e,n+D,e+D,n);if(R==null)throw new ee;for(var L=null,D=1;L===null&&D<A;D++)L=this.getBlackPointOnSegment(r,n+D,r-D,n);if(L==null)throw new ee;for(var $=null,D=1;$===null&&D<A;D++)$=this.getBlackPointOnSegment(r,a-D,r-D,a);if($==null)throw new ee;return this.centerEdges($,C,L,R)}else throw new ee},t.prototype.getBlackPointOnSegment=function(e,r,n,a){for(var s=We.round(We.distance(e,r,n,a)),l=(n-e)/s,d=(a-r)/s,h=this.image,m=0;m<s;m++){var p=We.round(e+m*l),v=We.round(r+m*d);if(h.get(p,v))return new Ee(p,v)}return null},t.prototype.centerEdges=function(e,r,n,a){var s=e.getX(),l=e.getY(),d=r.getX(),h=r.getY(),m=n.getX(),p=n.getY(),v=a.getX(),y=a.getY(),b=t.CORR;return s<this.width/2?[new Ee(v-b,y+b),new Ee(d+b,h+b),new Ee(m-b,p-b),new Ee(s+b,l-b)]:[new Ee(v+b,y+b),new Ee(d+b,h-b),new Ee(m-b,p+b),new Ee(s-b,l-b)]},t.prototype.containsBlackPoint=function(e,r,n,a){var s=this.image;if(a){for(var l=e;l<=r;l++)if(s.get(l,n))return!0}else for(var d=e;d<=r;d++)if(s.get(n,d))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),hx=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),a=e.getHeight(),s=!0,l=0;l<r.length&&s;l+=2){var d=Math.floor(r[l]),h=Math.floor(r[l+1]);if(d<-1||d>n||h<-1||h>a)throw new ee;s=!1,d===-1?(r[l]=0,s=!0):d===n&&(r[l]=n-1,s=!0),h===-1?(r[l+1]=0,s=!0):h===a&&(r[l+1]=a-1,s=!0)}s=!0;for(var l=r.length-2;l>=0&&s;l-=2){var d=Math.floor(r[l]),h=Math.floor(r[l+1]);if(d<-1||d>n||h<-1||h>a)throw new ee;s=!1,d===-1?(r[l]=0,s=!0):d===n&&(r[l]=n-1,s=!0),h===-1?(r[l+1]=0,s=!0):h===a&&(r[l+1]=a-1,s=!0)}},t}(),ig=function(){function t(e,r,n,a,s,l,d,h,m){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=s,this.a32=l,this.a13=d,this.a23=h,this.a33=m}return t.quadrilateralToQuadrilateral=function(e,r,n,a,s,l,d,h,m,p,v,y,b,_,w,E){var j=t.quadrilateralToSquare(e,r,n,a,s,l,d,h),A=t.squareToQuadrilateral(m,p,v,y,b,_,w,E);return A.times(j)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,a=this.a12,s=this.a13,l=this.a21,d=this.a22,h=this.a23,m=this.a31,p=this.a32,v=this.a33,y=0;y<r;y+=2){var b=e[y],_=e[y+1],w=s*b+h*_+v;e[y]=(n*b+l*_+m)/w,e[y+1]=(a*b+d*_+p)/w}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,a=this.a12,s=this.a13,l=this.a21,d=this.a22,h=this.a23,m=this.a31,p=this.a32,v=this.a33,y=e.length,b=0;b<y;b++){var _=e[b],w=r[b],E=s*_+h*w+v;e[b]=(n*_+l*w+m)/E,r[b]=(a*_+d*w+p)/E}},t.squareToQuadrilateral=function(e,r,n,a,s,l,d,h){var m=e-n+s-d,p=r-a+l-h;if(m===0&&p===0)return new t(n-e,s-n,e,a-r,l-a,r,0,0,1);var v=n-s,y=d-s,b=a-l,_=h-l,w=v*_-y*b,E=(m*_-y*p)/w,j=(v*p-m*b)/w;return new t(n-e+E*n,d-e+j*d,e,a-r+E*a,h-r+j*h,r,E,j,1)},t.quadrilateralToSquare=function(e,r,n,a,s,l,d,h){return t.squareToQuadrilateral(e,r,n,a,s,l,d,h).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),qN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$N=function(t){qN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,a,s,l,d,h,m,p,v,y,b,_,w,E,j,A,C,D){var R=ig.quadrilateralToQuadrilateral(s,l,d,h,m,p,v,y,b,_,w,E,j,A,C,D);return this.sampleGridWithTransform(r,n,a,R)},e.prototype.sampleGridWithTransform=function(r,n,a,s){if(n<=0||a<=0)throw new ee;for(var l=new On(n,a),d=new Float32Array(2*n),h=0;h<a;h++){for(var m=d.length,p=h+.5,v=0;v<m;v+=2)d[v]=v/2+.5,d[v+1]=p;s.transformPoints(d),hx.checkAndNudgePoints(r,d);try{for(var v=0;v<m;v+=2)r.get(Math.floor(d[v]),Math.floor(d[v+1]))&&l.set(v/2,h)}catch{throw new ee}}return l},e}(hx),s0=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new $N,t}(),jr=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new Ee(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),YN=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var a=n[0];n[0]=n[2],n[2]=a}this.extractParameters(n);var s=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),l=this.getMatrixCornerPoints(n);return new XN(s,l,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ee;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var a=0,s=0;s<4;s++){var l=n[(this.shift+s)%4];this.compact?(a<<=7,a+=l>>1&127):(a<<=10,a+=(l>>2&992)+(l>>1&31))}var d=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(s,l,d){var h=(s>>r-2<<1)+(s&1);n=(n<<3)+h}),n=((n&1)<<11)+(n>>1);for(var a=0;a<4;a++)if(ze.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new ee},t.prototype.getCorrectedParameterData=function(e,r){var n,a;r?(n=7,a=2):(n=10,a=4);for(var s=n-a,l=new Int32Array(n),d=n-1;d>=0;--d)l[d]=e&15,e>>=4;try{var h=new Ec(Dr.AZTEC_PARAM);h.decode(l,s)}catch{throw new ee}for(var m=0,d=0;d<a;d++)m=(m<<4)+l[d];return m},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,a=e,s=e,l=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var d=this.getFirstDifferent(r,l,1,-1),h=this.getFirstDifferent(n,l,1,1),m=this.getFirstDifferent(a,l,-1,1),p=this.getFirstDifferent(s,l,-1,-1);if(this.nbCenterLayers>2){var v=this.distancePoint(p,d)*this.nbCenterLayers/(this.distancePoint(s,r)*(this.nbCenterLayers+2));if(v<.75||v>1.25||!this.isWhiteOrBlackRectangle(d,h,m,p))break}r=d,n=h,a=m,s=p,l=!l}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;var y=new Ee(r.getX()+.5,r.getY()-.5),b=new Ee(n.getX()+.5,n.getY()+.5),_=new Ee(a.getX()-.5,a.getY()+.5),w=new Ee(s.getX()-.5,s.getY()-.5);return this.expandSquare([y,b,_,w],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,a;try{var s=new Sf(this.image).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{var l=this.image.getWidth()/2,d=this.image.getHeight()/2;e=this.getFirstDifferent(new jr(l+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new jr(l+7,d+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new jr(l-7,d+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new jr(l-7,d-7),!1,-1,-1).toResultPoint()}var h=We.round((e.getX()+a.getX()+r.getX()+n.getX())/4),m=We.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{var s=new Sf(this.image,15,h,m).detect();e=s[0],r=s[1],n=s[2],a=s[3]}catch{e=this.getFirstDifferent(new jr(h+7,m-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new jr(h+7,m+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new jr(h-7,m+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new jr(h-7,m-7),!1,-1,-1).toResultPoint()}return h=We.round((e.getX()+a.getX()+r.getX()+n.getX())/4),m=We.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new jr(h,m)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,a,s){var l=s0.getInstance(),d=this.getDimension(),h=d/2-this.nbCenterLayers,m=d/2+this.nbCenterLayers;return l.sampleGrid(e,d,d,h,h,m,h,m,m,h,m,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),s.getX(),s.getY())},t.prototype.sampleLine=function(e,r,n){for(var a=0,s=this.distanceResultPoint(e,r),l=s/n,d=e.getX(),h=e.getY(),m=l*(r.getX()-e.getX())/s,p=l*(r.getY()-e.getY())/s,v=0;v<n;v++)this.image.get(We.round(d+v*m),We.round(h+v*p))&&(a|=1<<n-v-1);return a},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,a){var s=3;e=new jr(e.getX()-s,e.getY()+s),r=new jr(r.getX()-s,r.getY()-s),n=new jr(n.getX()+s,n.getY()-s),a=new jr(a.getX()+s,a.getY()+s);var l=this.getColor(a,e);if(l===0)return!1;var d=this.getColor(e,r);return d!==l||(d=this.getColor(r,n),d!==l)?!1:(d=this.getColor(n,a),d===l)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,s=(r.getY()-e.getY())/n,l=0,d=e.getX(),h=e.getY(),m=this.image.get(e.getX(),e.getY()),p=Math.ceil(n),v=0;v<p;v++)d+=a,h+=s,this.image.get(We.round(d),We.round(h))!==m&&l++;var y=l/n;return y>.1&&y<.9?0:y<=.1===m?1:-1},t.prototype.getFirstDifferent=function(e,r,n,a){for(var s=e.getX()+n,l=e.getY()+a;this.isValid(s,l)&&this.image.get(s,l)===r;)s+=n,l+=a;for(s-=n,l-=a;this.isValid(s,l)&&this.image.get(s,l)===r;)s+=n;for(s-=n;this.isValid(s,l)&&this.image.get(s,l)===r;)l+=a;return l-=a,new jr(s,l)},t.prototype.expandSquare=function(e,r,n){var a=n/(2*r),s=e[0].getX()-e[2].getX(),l=e[0].getY()-e[2].getY(),d=(e[0].getX()+e[2].getX())/2,h=(e[0].getY()+e[2].getY())/2,m=new Ee(d+a*s,h+a*l),p=new Ee(d-a*s,h-a*l);s=e[1].getX()-e[3].getX(),l=e[1].getY()-e[3].getY(),d=(e[1].getX()+e[3].getX())/2,h=(e[1].getY()+e[3].getY())/2;var v=new Ee(d+a*s,h+a*l),y=new Ee(d-a*s,h-a*l),b=[m,v,p,y];return b},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=We.round(e.getX()),n=We.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return We.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return We.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ze.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Cf=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,a=new YN(e.getBlackMatrix()),s=null,l=null;try{var d=a.detectMirror(!1);s=d.getPoints(),this.reportFoundResultPoints(r,s),l=new fx().decode(d)}catch(v){n=v}if(l==null)try{var d=a.detectMirror(!0);s=d.getPoints(),this.reportFoundResultPoints(r,s),l=new fx().decode(d)}catch(v){throw n??v}var h=new pr(l.getText(),l.getRawBytes(),l.getNumBits(),s,Oe.AZTEC,pt.currentTimeMillis()),m=l.getByteSegments();m!=null&&h.putMetadata(lr.BYTE_SEGMENTS,m);var p=l.getECLevel();return p!=null&&h.putMetadata(lr.ERROR_CORRECTION_LEVEL,p),h},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(bt.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(a,s,l){n.foundPossibleResultPoint(a)})}},t.prototype.reset=function(){},t}(),KN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){KN(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Cf,r)||this}return e})(ai);var Gt=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(bt.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var a=e.rotateCounterClockwise(),s=this.doDecode(a,r),l=s.getResultMetadata(),d=270;l!==null&&l.get(lr.ORIENTATION)===!0&&(d=d+l.get(lr.ORIENTATION)%360),s.putMetadata(lr.ORIENTATION,d);var h=s.getResultPoints();if(h!==null)for(var m=a.getHeight(),p=0;p<h.length;p++)h[p]=new Ee(m-h[p].getY()-1,h[p].getX());return s}else throw new ee}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),a=e.getHeight(),s=new er(n),l=r&&r.get(bt.TRY_HARDER)===!0,d=Math.max(1,a>>(l?8:5)),h;l?h=a:h=15;for(var m=Math.trunc(a/2),p=0;p<h;p++){var v=Math.trunc((p+1)/2),y=(p&1)===0,b=m+d*(y?v:-v);if(b<0||b>=a)break;try{s=e.getBlackRow(b,s)}catch{continue}for(var _=function(A){if(A===1&&(s.reverse(),r&&r.get(bt.NEED_RESULT_POINT_CALLBACK)===!0)){var C=new Map;r.forEach(function(L,$){return C.set($,L)}),C.delete(bt.NEED_RESULT_POINT_CALLBACK),r=C}try{var D=w.decodeRow(b,s,r);if(A===1){D.putMetadata(lr.ORIENTATION,180);var R=D.getResultPoints();R!==null&&(R[0]=new Ee(n-R[0].getX()-1,R[0].getY()),R[1]=new Ee(n-R[1].getX()-1,R[1].getY()))}return{value:D}}catch{}},w=this,E=0;E<2;E++){var j=_(E);if(typeof j=="object")return j.value}}throw new ee},t.recordPattern=function(e,r,n){for(var a=n.length,s=0;s<a;s++)n[s]=0;var l=e.getSize();if(r>=l)throw new ee;for(var d=!e.get(r),h=0,m=r;m<l;){if(e.get(m)!==d)n[h]++;else{if(++h===a)break;n[h]=1,d=!d}m++}if(!(h===a||h===a-1&&m===l))throw new ee},t.recordPatternInReverse=function(e,r,n){for(var a=n.length,s=e.get(r);r>0&&a>=0;)e.get(--r)!==s&&(a--,s=!s);if(a>=0)throw new ee;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,l=0,d=0;d<a;d++)s+=e[d],l+=r[d];if(s<l)return Number.POSITIVE_INFINITY;var h=s/l;n*=h;for(var m=0,p=0;p<a;p++){var v=e[p],y=r[p]*h,b=v>y?v-y:y-v;if(b>n)return Number.POSITIVE_INFINITY;m+=b}return m/s},t}(),WN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mx=function(t){WN(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),a=r.getNextSet(0),s=0,l=Int32Array.from([0,0,0,0,0,0]),d=a,h=!1,m=6,p=a;p<n;p++)if(r.get(p)!==h)l[s]++;else{if(s===m-1){for(var v=e.MAX_AVG_VARIANCE,y=-1,b=e.CODE_START_A;b<=e.CODE_START_C;b++){var _=Gt.patternMatchVariance(l,e.CODE_PATTERNS[b],e.MAX_INDIVIDUAL_VARIANCE);_<v&&(v=_,y=b)}if(y>=0&&r.isRange(Math.max(0,d-(p-d)/2),d,!1))return Int32Array.from([d,p,y]);d+=l[0]+l[1],l=l.slice(2,l.length),l[s-1]=0,l[s]=0,s--}else s++;l[s]=1,h=!h}throw new ee},e.decodeCode=function(r,n,a){Gt.recordPattern(r,a,n);for(var s=e.MAX_AVG_VARIANCE,l=-1,d=0;d<e.CODE_PATTERNS.length;d++){var h=e.CODE_PATTERNS[d],m=this.patternMatchVariance(n,h,e.MAX_INDIVIDUAL_VARIANCE);m<s&&(s=m,l=d)}if(l>=0)return l;throw new ee},e.prototype.decodeRow=function(r,n,a){var s=a&&a.get(bt.ASSUME_GS1)===!0,l=e.findStartPattern(n),d=l[2],h=0,m=new Uint8Array(20);m[h++]=d;var p;switch(d){case e.CODE_START_A:p=e.CODE_CODE_A;break;case e.CODE_START_B:p=e.CODE_CODE_B;break;case e.CODE_START_C:p=e.CODE_CODE_C;break;default:throw new xe}for(var v=!1,y=!1,b="",_=l[0],w=l[1],E=Int32Array.from([0,0,0,0,0,0]),j=0,A=0,C=d,D=0,R=!0,L=!1,$=!1;!v;){var W=y;switch(y=!1,j=A,A=e.decodeCode(n,E,w),m[h++]=A,A!==e.CODE_STOP&&(R=!0),A!==e.CODE_STOP&&(D++,C+=D*A),_=w,w+=E.reduce(function(oe,Y){return oe+Y},0),A){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new xe}switch(p){case e.CODE_CODE_A:if(A<64)$===L?b+=String.fromCharCode(32+A):b+=String.fromCharCode(32+A+128),$=!1;else if(A<96)$===L?b+=String.fromCharCode(A-64):b+=String.fromCharCode(A+64),$=!1;else switch(A!==e.CODE_STOP&&(R=!1),A){case e.CODE_FNC_1:s&&(b.length===0?b+="]C1":b+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!L&&$?(L=!0,$=!1):L&&$?(L=!1,$=!1):$=!0;break;case e.CODE_SHIFT:y=!0,p=e.CODE_CODE_B;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:v=!0;break}break;case e.CODE_CODE_B:if(A<96)$===L?b+=String.fromCharCode(32+A):b+=String.fromCharCode(32+A+128),$=!1;else switch(A!==e.CODE_STOP&&(R=!1),A){case e.CODE_FNC_1:s&&(b.length===0?b+="]C1":b+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!L&&$?(L=!0,$=!1):L&&$?(L=!1,$=!1):$=!0;break;case e.CODE_SHIFT:y=!0,p=e.CODE_CODE_A;break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_C:p=e.CODE_CODE_C;break;case e.CODE_STOP:v=!0;break}break;case e.CODE_CODE_C:if(A<100)A<10&&(b+="0"),b+=A;else switch(A!==e.CODE_STOP&&(R=!1),A){case e.CODE_FNC_1:s&&(b.length===0?b+="]C1":b+="");break;case e.CODE_CODE_A:p=e.CODE_CODE_A;break;case e.CODE_CODE_B:p=e.CODE_CODE_B;break;case e.CODE_STOP:v=!0;break}break}W&&(p=p===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var J=w-_;if(w=n.getNextUnset(w),!n.isRange(w,Math.min(n.getSize(),w+(w-_)/2),!1))throw new ee;if(C-=D*j,C%103!==j)throw new Jt;var ae=b.length;if(ae===0)throw new ee;ae>0&&R&&(p===e.CODE_CODE_C?b=b.substring(0,ae-2):b=b.substring(0,ae-1));for(var be=(l[1]+l[0])/2,ce=_+J/2,me=m.length,_e=new Uint8Array(me),he=0;he<me;he++)_e[he]=m[he];var P=[new Ee(be,r),new Ee(ce,r)];return new pr(b,_e,0,P,Oe.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Gt),QN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},px=function(t){QN(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var a=t.call(this)||this;return a.usingCheckDigit=r,a.extendedMode=n,a.decodeRowResult="",a.counters=new Int32Array(9),a}return e.prototype.decodeRow=function(r,n,a){var s,l,d,h,m=this.counters;m.fill(0),this.decodeRowResult="";var p=e.findAsteriskPattern(n,m),v=n.getNextSet(p[1]),y=n.getSize(),b,_;do{e.recordPattern(n,v,m);var w=e.toNarrowWidePattern(m);if(w<0)throw new ee;b=e.patternToChar(w),this.decodeRowResult+=b,_=v;try{for(var E=(s=void 0,Qd(m)),j=E.next();!j.done;j=E.next()){var A=j.value;v+=A}}catch(me){s={error:me}}finally{try{j&&!j.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}v=n.getNextSet(v)}while(b!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var D=Qd(m),R=D.next();!R.done;R=D.next()){var A=R.value;C+=A}}catch(me){d={error:me}}finally{try{R&&!R.done&&(h=D.return)&&h.call(D)}finally{if(d)throw d.error}}var L=v-_-C;if(v!==y&&L*2<C)throw new ee;if(this.usingCheckDigit){for(var $=this.decodeRowResult.length-1,W=0,J=0;J<$;J++)W+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(J));if(this.decodeRowResult.charAt($)!==e.ALPHABET_STRING.charAt(W%43))throw new Jt;this.decodeRowResult=this.decodeRowResult.substring(0,$)}if(this.decodeRowResult.length===0)throw new ee;var ae;this.extendedMode?ae=e.decodeExtended(this.decodeRowResult):ae=this.decodeRowResult;var be=(p[1]+p[0])/2,ce=_+C/2;return new pr(ae,null,0,[new Ee(be,r),new Ee(ce,r)],Oe.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var a=r.getSize(),s=r.getNextSet(0),l=0,d=s,h=!1,m=n.length,p=s;p<a;p++)if(r.get(p)!==h)n[l]++;else{if(l===m-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,d-Math.floor((p-d)/2)),d,!1))return[d,p];d+=n[0]+n[1],n.copyWithin(0,2,2+l-1),n[l-1]=0,n[l]=0,l--}else l++;n[l]=1,h=!h}throw new ee},e.toNarrowWidePattern=function(r){var n,a,s=r.length,l=0,d;do{var h=2147483647;try{for(var m=(n=void 0,Qd(r)),p=m.next();!p.done;p=m.next()){var v=p.value;v<h&&v>l&&(h=v)}}catch(w){n={error:w}}finally{try{p&&!p.done&&(a=m.return)&&a.call(m)}finally{if(n)throw n.error}}l=h,d=0;for(var y=0,b=0,_=0;_<s;_++){var v=r[_];v>l&&(b|=1<<s-1-_,d++,y+=v)}if(d===3){for(var _=0;_<s&&d>0;_++){var v=r[_];if(v>l&&(d--,v*2>=y))return-1}return b}}while(d>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new ee},e.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var l=r.charAt(s);if(l==="+"||l==="$"||l==="%"||l==="/"){var d=r.charAt(s+1),h="\0";switch(l){case"+":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)+32);else throw new xe;break;case"$":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)-64);else throw new xe;break;case"%":if(d>="A"&&d<="E")h=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")h=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")h=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")h="\0";else if(d==="V")h="@";else if(d==="W")h="`";else if(d==="X"||d==="Y"||d==="Z")h="";else throw new xe;break;case"/":if(d>="A"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")h=":";else throw new xe;break}a+=h,s++}else a+=l}return a},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Gt),JN=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xx=function(t){JN(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,a){var s,l,d,h,m=this.findAsteriskPattern(n),p=n.getNextSet(m[1]),v=n.getSize(),y=this.counters;y.fill(0),this.decodeRowResult="";var b,_;do{e.recordPattern(n,p,y);var w=this.toPattern(y);if(w<0)throw new ee;b=this.patternToChar(w),this.decodeRowResult+=b,_=p;try{for(var E=(s=void 0,Jd(y)),j=E.next();!j.done;j=E.next()){var A=j.value;p+=A}}catch(J){s={error:J}}finally{try{j&&!j.done&&(l=E.return)&&l.call(E)}finally{if(s)throw s.error}}p=n.getNextSet(p)}while(b!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var C=0;try{for(var D=Jd(y),R=D.next();!R.done;R=D.next()){var A=R.value;C+=A}}catch(J){d={error:J}}finally{try{R&&!R.done&&(h=D.return)&&h.call(D)}finally{if(d)throw d.error}}if(p===v||!n.get(p))throw new ee;if(this.decodeRowResult.length<2)throw new ee;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var L=this.decodeExtended(this.decodeRowResult),$=(m[1]+m[0])/2,W=_+C/2;return new pr(L,null,0,[new Ee($,r),new Ee(W,r)],Oe.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),a=r.getNextSet(0);this.counters.fill(0);for(var s=this.counters,l=a,d=!1,h=s.length,m=0,p=a;p<n;p++)if(r.get(p)!==d)s[m]++;else{if(m===h-1){if(this.toPattern(s)===e.ASTERISK_ENCODING)return new Int32Array([l,p]);l+=s[0]+s[1],s.copyWithin(0,2,2+m-1),s[m-1]=0,s[m]=0,m--}else m++;s[m]=1,d=!d}throw new ee},e.prototype.toPattern=function(r){var n,a,s=0;try{for(var l=Jd(r),d=l.next();!d.done;d=l.next()){var h=d.value;s+=h}}catch(_){n={error:_}}finally{try{d&&!d.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}for(var m=0,p=r.length,v=0;v<p;v++){var y=Math.round(r[v]*9/s);if(y<1||y>4)return-1;if((v&1)===0)for(var b=0;b<y;b++)m=m<<1|1;else m<<=y}return m},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new ee},e.prototype.decodeExtended=function(r){for(var n=r.length,a="",s=0;s<n;s++){var l=r.charAt(s);if(l>="a"&&l<="d"){if(s>=n-1)throw new xe;var d=r.charAt(s+1),h="\0";switch(l){case"d":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)+32);else throw new xe;break;case"a":if(d>="A"&&d<="Z")h=String.fromCharCode(d.charCodeAt(0)-64);else throw new xe;break;case"b":if(d>="A"&&d<="E")h=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")h=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")h=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")h="\0";else if(d==="V")h="@";else if(d==="W")h="`";else if(d>="X"&&d<="Z")h="";else throw new xe;break;case"c":if(d>="A"&&d<="O")h=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")h=":";else throw new xe;break}a+=h,s++}else a+=l}return a},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,a){for(var s=1,l=0,d=n-1;d>=0;d--)l+=s*e.ALPHABET_STRING.indexOf(r.charAt(d)),++s>a&&(s=1);if(r.charAt(n)!==e.ALPHABET_STRING[l%47])throw new Jt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Gt),eE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vx=function(t){eE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,a){var s,l,d=this.decodeStart(n),h=this.decodeEnd(n),m=new Fe;e.decodeMiddle(n,d[1],h[0],m);var p=m.toString(),v=null;a!=null&&(v=a.get(bt.ALLOWED_LENGTHS)),v==null&&(v=e.DEFAULT_ALLOWED_LENGTHS);var y=p.length,b=!1,_=0;try{for(var w=tE(v),E=w.next();!E.done;E=w.next()){var j=E.value;if(y===j){b=!0;break}j>_&&(_=j)}}catch(D){s={error:D}}finally{try{E&&!E.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}if(!b&&y>_&&(b=!0),!b)throw new xe;var A=[new Ee(d[1],r),new Ee(h[0],r)],C=new pr(p,null,0,A,Oe.ITF,new Date().getTime());return C},e.decodeMiddle=function(r,n,a,s){var l=new Int32Array(10),d=new Int32Array(5),h=new Int32Array(5);for(l.fill(0),d.fill(0),h.fill(0);n<a;){Gt.recordPattern(r,n,l);for(var m=0;m<5;m++){var p=2*m;d[m]=l[p],h[m]=l[p+1]}var v=e.decodeDigit(d);s.append(v.toString()),v=this.decodeDigit(h),s.append(v.toString()),l.forEach(function(y){n+=y})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),a=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a},e.prototype.validateQuietZone=function(r,n){var a=this.narrowLineWidth*10;a=a<n?a:n;for(var s=n-1;a>0&&s>=0&&!r.get(s);s--)a--;if(a!==0)throw new ee},e.skipWhiteSpace=function(r){var n=r.getSize(),a=r.getNextSet(0);if(a===n)throw new ee;return a},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),a=void 0;try{a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(l){l instanceof ee&&(a=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);var s=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-s,a}finally{r.reverse()}},e.findGuardPattern=function(r,n,a){var s=a.length,l=new Int32Array(s),d=r.getSize(),h=!1,m=0,p=n;l.fill(0);for(var v=n;v<d;v++)if(r.get(v)!==h)l[m]++;else{if(m===s-1){if(Gt.patternMatchVariance(l,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[p,v];p+=l[0]+l[1],pt.arraycopy(l,2,l,0,m-1),l[m-1]=0,l[m]=0,m--}else m++;l[m]=1,h=!h}throw new ee},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,a=-1,s=e.PATTERNS.length,l=0;l<s;l++){var d=e.PATTERNS[l],h=Gt.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);h<n?(n=h,a=l):h===n&&(a=-1)}if(a>=0)return a%10;throw new ee},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Gt),rE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ki=function(t){rE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,a,s=0,l=Int32Array.from([0,0,0]);!n;){l=Int32Array.from([0,0,0]),a=e.findGuardPattern(r,s,!1,this.START_END_PATTERN,l);var d=a[0];s=a[1];var h=d-(s-d);h>=0&&(n=r.isRange(h,d,!1))}return a},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var l=r.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new xe;a+=l}a*=3;for(var s=n-2;s>=0;s-=2){var l=r.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new xe;a+=l}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,a,s){return this.findGuardPattern(r,n,a,s,new Int32Array(s.length))},e.findGuardPattern=function(r,n,a,s,l){var d=r.getSize();n=a?r.getNextUnset(n):r.getNextSet(n);for(var h=0,m=n,p=s.length,v=a,y=n;y<d;y++)if(r.get(y)!==v)l[h]++;else{if(h===p-1){if(Gt.patternMatchVariance(l,s,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([m,y]);m+=l[0]+l[1];for(var b=l.slice(2,l.length),_=0;_<h-1;_++)l[_]=b[_];l[h-1]=0,l[h]=0,h--}else h++;l[h]=1,v=!v}throw new ee},e.decodeDigit=function(r,n,a,s){this.recordPattern(r,a,n);for(var l=this.MAX_AVG_VARIANCE,d=-1,h=s.length,m=0;m<h;m++){var p=s[m],v=Gt.patternMatchVariance(n,p,e.MAX_INDIVIDUAL_VARIANCE);v<l&&(l=v,d=m)}if(d>=0)return d;throw new ee},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Gt),nE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aE=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),l=a.toString(),d=t.parseExtensionString(l),h=[new Ee((n[0]+n[1])/2,e),new Ee(s,e)],m=new pr(l,null,0,h,Oe.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&m.putAllMetadata(d),m},t.prototype.decodeMiddle=function(e,r,n){var a,s,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var d=e.getSize(),h=r[1],m=0,p=0;p<5&&h<d;p++){var v=Ki.decodeDigit(e,l,h,Ki.L_AND_G_PATTERNS);n+=String.fromCharCode(48+v%10);try{for(var y=(a=void 0,nE(l)),b=y.next();!b.done;b=y.next()){var _=b.value;h+=_}}catch(E){a={error:E}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}v>=10&&(m|=1<<4-p),p!==4&&(h=e.getNextSet(h),h=e.getNextUnset(h))}if(n.length!==5)throw new ee;var w=this.determineCheckDigit(m);if(t.extensionChecksum(n.toString())!==w)throw new ee;return h},t.extensionChecksum=function(e){for(var r=e.length,n=0,a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(var a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new ee},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[lr.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="£";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),a=(n/100).toString(),s=n%100,l=s<10?"0"+s:s.toString();return r+a+"."+l},t}(),iE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sE=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var a=this.decodeRowStringBuffer,s=this.decodeMiddle(r,n,a),l=a.toString(),d=t.parseExtensionString(l),h=[new Ee((n[0]+n[1])/2,e),new Ee(s,e)],m=new pr(l,null,0,h,Oe.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&m.putAllMetadata(d),m},t.prototype.decodeMiddle=function(e,r,n){var a,s,l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var d=e.getSize(),h=r[1],m=0,p=0;p<2&&h<d;p++){var v=Ki.decodeDigit(e,l,h,Ki.L_AND_G_PATTERNS);n+=String.fromCharCode(48+v%10);try{for(var y=(a=void 0,iE(l)),b=y.next();!b.done;b=y.next()){var _=b.value;h+=_}}catch(w){a={error:w}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}v>=10&&(m|=1<<1-p),p!==1&&(h=e.getNextSet(h),h=e.getNextUnset(h))}if(n.length!==2)throw new ee;if(parseInt(n.toString())%4!==m)throw new ee;return h},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[lr.ISSUE_NUMBER,parseInt(e)]])},t}(),oE=function(){function t(){}return t.decodeRow=function(e,r,n){var a=Ki.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var s=new aE;return s.decodeRow(e,r,a)}catch{var l=new sE;return l.decodeRow(e,r,a)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),lE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zt=function(t){lE(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(d){return Int32Array.from(d)});for(var n=10;n<20;n++){for(var a=e.L_PATTERNS[n-10],s=new Int32Array(a.length),l=0;l<a.length;l++)s[l]=a[a.length-l-1];e.L_AND_G_PATTERNS[n]=s}return r}return e.prototype.decodeRow=function(r,n,a){var s=e.findStartGuardPattern(n),l=a==null?null:a.get(bt.NEED_RESULT_POINT_CALLBACK);if(l!=null){var d=new Ee((s[0]+s[1])/2,r);l.foundPossibleResultPoint(d)}var h=this.decodeMiddle(n,s,this.decodeRowStringBuffer),m=h.rowOffset,p=h.resultString;if(l!=null){var v=new Ee(m,r);l.foundPossibleResultPoint(v)}var y=e.decodeEnd(n,m);if(l!=null){var b=new Ee((y[0]+y[1])/2,r);l.foundPossibleResultPoint(b)}var _=y[1],w=_+(_-y[0]);if(w>=n.getSize()||!n.isRange(_,w,!1))throw new ee;var E=p.toString();if(E.length<8)throw new xe;if(!e.checkChecksum(E))throw new Jt;var j=(s[1]+s[0])/2,A=(y[1]+y[0])/2,C=this.getBarcodeFormat(),D=[new Ee(j,r),new Ee(A,r)],R=new pr(E,null,0,D,C,new Date().getTime()),L=0;try{var $=oE.decodeRow(r,n,y[1]);R.putMetadata(lr.UPC_EAN_EXTENSION,$.getText()),R.putAllMetadata($.getResultMetadata()),R.addResultPoints($.getResultPoints()),L=$.getText().length}catch{}var W=a==null?null:a.get(bt.ALLOWED_EAN_EXTENSIONS);if(W!=null){var J=!1;for(var ae in W)if(L.toString()===ae){J=!0;break}if(!J)throw new ee}return C===Oe.EAN_13||Oe.UPC_A,R},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var a=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===a},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,a=0,s=n-1;s>=0;s-=2){var l=r.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new xe;a+=l}a*=3;for(var s=n-2;s>=0;s-=2){var l=r.charAt(s).charCodeAt(0)-48;if(l<0||l>9)throw new xe;a+=l}return(1e3-a)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Ki),cE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jf=function(t){cE(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,l,d,h,m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;for(var p=r.getSize(),v=n[1],y=0,b=0;b<6&&v<p;b++){var _=zt.decodeDigit(r,m,v,zt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+_%10);try{for(var w=(s=void 0,gx(m)),E=w.next();!E.done;E=w.next()){var j=E.value;v+=j}}catch(R){s={error:R}}finally{try{E&&!E.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}_>=10&&(y|=1<<5-b)}a=e.determineFirstDigit(a,y);var A=zt.findGuardPattern(r,v,!0,zt.MIDDLE_PATTERN,new Int32Array(zt.MIDDLE_PATTERN.length).fill(0));v=A[1];for(var b=0;b<6&&v<p;b++){var _=zt.decodeDigit(r,m,v,zt.L_PATTERNS);a+=String.fromCharCode(48+_);try{for(var C=(d=void 0,gx(m)),D=C.next();!D.done;D=C.next()){var j=D.value;v+=j}}catch($){d={error:$}}finally{try{D&&!D.done&&(h=C.return)&&h.call(C)}finally{if(d)throw d.error}}}return{rowOffset:v,resultString:a}},e.prototype.getBarcodeFormat=function(){return Oe.EAN_13},e.determineFirstDigit=function(r,n){for(var a=0;a<10;a++)if(n===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new ee},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(zt),uE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bx=function(t){uE(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,a){var s,l,d,h,m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;for(var p=r.getSize(),v=n[1],y=0;y<4&&v<p;y++){var b=zt.decodeDigit(r,m,v,zt.L_PATTERNS);a+=String.fromCharCode(48+b);try{for(var _=(s=void 0,yx(m)),w=_.next();!w.done;w=_.next()){var E=w.value;v+=E}}catch(D){s={error:D}}finally{try{w&&!w.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}var j=zt.findGuardPattern(r,v,!0,zt.MIDDLE_PATTERN,new Int32Array(zt.MIDDLE_PATTERN.length).fill(0));v=j[1];for(var y=0;y<4&&v<p;y++){var b=zt.decodeDigit(r,m,v,zt.L_PATTERNS);a+=String.fromCharCode(48+b);try{for(var A=(d=void 0,yx(m)),C=A.next();!C.done;C=A.next()){var E=C.value;v+=E}}catch(L){d={error:L}}finally{try{C&&!C.done&&(h=A.return)&&h.call(A)}finally{if(d)throw d.error}}}return{rowOffset:v,resultString:a}},e.prototype.getBarcodeFormat=function(){return Oe.EAN_8},e}(zt),dE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_x=function(t){dE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new jf,r}return e.prototype.getBarcodeFormat=function(){return Oe.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,a))},e.prototype.decodeMiddle=function(r,n,a){return this.ean13Reader.decodeMiddle(r,n,a)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var a=new pr(n.substring(1),null,null,r.getResultPoints(),Oe.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new ee},e.prototype.reset=function(){this.ean13Reader.reset()},e}(zt),fE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wx=function(t){fE(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,a){var s,l,d=this.decodeMiddleCounters.map(function(E){return E});d[0]=0,d[1]=0,d[2]=0,d[3]=0;for(var h=r.getSize(),m=n[1],p=0,v=0;v<6&&m<h;v++){var y=e.decodeDigit(r,d,m,e.L_AND_G_PATTERNS);a+=String.fromCharCode(48+y%10);try{for(var b=(s=void 0,hE(d)),_=b.next();!_.done;_=b.next()){var w=_.value;m+=w}}catch(E){s={error:E}}finally{try{_&&!_.done&&(l=b.return)&&l.call(b)}finally{if(s)throw s.error}}y>=10&&(p|=1<<5-v)}return e.determineNumSysAndCheckDigit(new Fe(a),p),m},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return zt.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var a=0;a<=1;a++)for(var s=0;s<10;s++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][s]){r.insert(0,"0"+a),r.append("0"+s);return}throw ee.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return Oe.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(l){return l.charCodeAt(0)}),a=new Fe;a.append(r.charAt(0));var s=n[5];switch(s){case 0:case 1:case 2:a.appendChars(n,0,2),a.append(s),a.append("0000"),a.appendChars(n,2,3);break;case 3:a.appendChars(n,0,3),a.append("00000"),a.appendChars(n,3,2);break;case 4:a.appendChars(n,0,4),a.append("00000"),a.append(n[4]);break;default:a.appendChars(n,0,5),a.append("0000"),a.append(s);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(zt),mE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ax=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ef=function(t){mE(e,t);function e(r){var n=t.call(this)||this,a=r==null?null:r.get(bt.POSSIBLE_FORMATS),s=[];return a!=null&&(a.indexOf(Oe.EAN_13)>-1&&s.push(new jf),a.indexOf(Oe.UPC_A)>-1&&s.push(new _x),a.indexOf(Oe.EAN_8)>-1&&s.push(new bx),a.indexOf(Oe.UPC_E)>-1&&s.push(new wx)),s.length===0&&(s.push(new jf),s.push(new _x),s.push(new bx),s.push(new wx)),n.readers=s,n}return e.prototype.decodeRow=function(r,n,a){var s,l;try{for(var d=Ax(this.readers),h=d.next();!h.done;h=d.next()){var m=h.value;try{var p=m.decodeRow(r,n,a),v=p.getBarcodeFormat()===Oe.EAN_13&&p.getText().charAt(0)==="0",y=a==null?null:a.get(bt.POSSIBLE_FORMATS),b=y==null||y.includes(Oe.UPC_A);if(v&&b){var _=p.getRawBytes(),w=new pr(p.getText().substring(1),_,_?_.length:null,p.getResultPoints(),Oe.UPC_A);return w.putAllMetadata(p.getResultMetadata()),w}return p}catch{}}}catch(E){s={error:E}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}throw new ee},e.prototype.reset=function(){var r,n;try{for(var a=Ax(this.readers),s=a.next();!s.done;s=a.next()){var l=s.value;l.reset()}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e}(Gt),pE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xE=function(t){pE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,a){var s=this.getValidRowData(n);if(!s)throw new ee;var l=this.codaBarDecodeRow(s.row);if(!l)throw new ee;return new pr(l,null,0,[new Ee(s.left,r),new Ee(s.right,r)],Oe.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),a=n.indexOf(!0);if(a===-1)return null;var s=n.lastIndexOf(!0);if(s<=a)return null;n=n.slice(a,s+1);for(var l=[],d=n[0],h=1,m=1;m<n.length;m++)n[m]===d?h++:(d=n[m],l.push(h),h=1);return l.push(h),l.length<23&&(l.length+1)%8!==0?null:{row:l,left:a,right:s}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],a=Math.ceil(r.reduce(function(h,m){return(h+m)/2},0));r.length>0;){var s=r.splice(0,8).splice(0,7),l=s.map(function(h){return h<a?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[l]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[l])}var d=n.join("");return this.validCodaBarString(d)?d:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(Gt),vE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qa=function(t){vE(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var a=0;a<n.length;a++)if(Gt.patternMatchVariance(r,n[a],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return a;throw new ee},e.count=function(r){return We.sum(new Int32Array(r))},e.increment=function(r,n){for(var a=0,s=n[0],l=1;l<r.length;l++)n[l]>s&&(s=n[l],a=l);r[a]++},e.decrement=function(r,n){for(var a=0,s=n[0],l=1;l<r.length;l++)n[l]<s&&(s=n[l],a=l);r[a]--},e.isFinderPattern=function(r){var n,a,s=r[0]+r[1],l=s+r[2]+r[3],d=s/l;if(d>=e.MIN_FINDER_PATTERN_RATIO&&d<=e.MAX_FINDER_PATTERN_RATIO){var h=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;try{for(var p=gE(r),v=p.next();!v.done;v=p.next()){var y=v.value;y>m&&(m=y),y<h&&(h=y)}}catch(b){n={error:b}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}return m<10*h}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Gt),oc=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),sg=function(){function t(e,r,n,a,s){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ee(n,s)),this.resultPoints.push(new Ee(a,s))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),yE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qi=function(){function t(){}return t.getRSSvalue=function(e,r,n){var a,s,l=0;try{for(var d=yE(e),h=d.next();!h.done;h=d.next()){var m=h.value;l+=m}}catch(A){a={error:A}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}for(var p=0,v=0,y=e.length,b=0;b<y-1;b++){var _=void 0;for(_=1,v|=1<<b;_<e[b];_++,v&=~(1<<b)){var w=t.combins(l-_-1,y-b-2);if(n&&v===0&&l-_-(y-b-1)>=y-b-1&&(w-=t.combins(l-_-(y-b),y-b-2)),y-b-1>1){for(var E=0,j=l-_-(y-b-2);j>r;j--)E+=t.combins(l-_-j-1,y-b-3);w-=E*(y-1-b)}else l-_>r&&w--;p+=w}l-=_}return p},t.combins=function(e,r){var n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);for(var s=1,l=1,d=e;d>n;d--)s*=d,l<=a&&(s/=l,l++);for(;l<=a;)s/=l,l++;return s},t}(),bE=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,a=new er(n),s=0,l=e[0],d=l.getRightChar().getValue(),h=11;h>=0;--h)(d&1<<h)!==0&&a.set(s),s++;for(var h=1;h<e.length;++h){for(var m=e[h],p=m.getLeftChar().getValue(),v=11;v>=0;--v)(p&1<<v)!==0&&a.set(s),s++;if(m.getRightChar()!==null)for(var y=m.getRightChar().getValue(),v=11;v>=0;--v)(y&1<<v)!==0&&a.set(s),s++}return a},t}(),Za=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),o0=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),_E=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ln=function(t){_E(e,t);function e(r,n){var a=t.call(this,r)||this;return a.value=n,a}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(o0),wE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xa=function(t){wE(e,t);function e(r,n,a){var s=t.call(this,r)||this;return a?(s.remaining=!0,s.remainingValue=s.remainingValue):(s.remaining=!1,s.remainingValue=0),s.newString=n,s}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(o0),AE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xi=function(t){AE(e,t);function e(r,n,a){var s=t.call(this,r)||this;if(n<0||n>10||a<0||a>10)throw new xe;return s.firstDigit=n,s.secondDigit=a,s}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(o0),Hl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NE=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,a,s,l,d,h,m;if(!e)return null;if(e.length<2)throw new ee;var p=e.substring(0,2);try{for(var v=Hl(t.TWO_DIGIT_DATA_LENGTH),y=v.next();!y.done;y=v.next()){var b=y.value;if(b[0]===p)return b[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,b[2],e):t.processFixedAI(2,b[1],e)}}catch(L){r={error:L}}finally{try{y&&!y.done&&(n=v.return)&&n.call(v)}finally{if(r)throw r.error}}if(e.length<3)throw new ee;var _=e.substring(0,3);try{for(var w=Hl(t.THREE_DIGIT_DATA_LENGTH),E=w.next();!E.done;E=w.next()){var b=E.value;if(b[0]===_)return b[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,b[2],e):t.processFixedAI(3,b[1],e)}}catch(L){a={error:L}}finally{try{E&&!E.done&&(s=w.return)&&s.call(w)}finally{if(a)throw a.error}}try{for(var j=Hl(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),A=j.next();!A.done;A=j.next()){var b=A.value;if(b[0]===_)return b[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,b[2],e):t.processFixedAI(4,b[1],e)}}catch(L){l={error:L}}finally{try{A&&!A.done&&(d=j.return)&&d.call(j)}finally{if(l)throw l.error}}if(e.length<4)throw new ee;var C=e.substring(0,4);try{for(var D=Hl(t.FOUR_DIGIT_DATA_LENGTH),R=D.next();!R.done;R=D.next()){var b=R.value;if(b[0]===C)return b[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,b[2],e):t.processFixedAI(4,b[1],e)}}catch(L){h={error:L}}finally{try{R&&!R.done&&(m=D.return)&&m.call(D)}finally{if(h)throw h.error}}throw new ee},t.processFixedAI=function(e,r,n){if(n.length<e)throw new ee;var a=n.substring(0,e);if(n.length<e+r)throw new ee;var s=n.substring(e,e+r),l=n.substring(e+r),d="("+a+")"+s,h=t.parseFieldsInGeneralPurpose(l);return h==null?d:d+h},t.processVariableAI=function(e,r,n){var a=n.substring(0,e),s;n.length<e+r?s=n.length:s=e+r;var l=n.substring(e,s),d=n.substring(s),h="("+a+")"+l,m=t.parseFieldsInGeneralPurpose(d);return m==null?h:h+m},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),Ql=function(){function t(e){this.buffer=new Fe,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,a=null;do{var s=this.decodeGeneralPurposeField(n,a),l=NE.parseFieldsInGeneralPurpose(s.getNewString());if(l!=null&&e.append(l),s.isRemaining()?a=""+s.getRemainingValue():a=null,n===s.getNewPosition())break;n=s.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Xi(this.information.getSize(),Xi.FNC1,Xi.FNC1):new Xi(this.information.getSize(),r-1,Xi.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),a=(n-8)/11,s=(n-8)%11;return new Xi(e+7,a,s)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var a=0,s=0;s<n;++s)e.get(r+s)&&(a|=1<<n-s-1);return a},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new Xa(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new Xa(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var a=n!==this.current.getPosition();if(!a&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new Xa(this.current.getPosition(),this.buffer.toString()):r=new Xa(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Za(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new Xa(this.current.getPosition(),this.buffer.toString());return new Za(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Za(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Xa(this.current.getPosition(),this.buffer.toString());return new Za(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Za(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new Xa(this.current.getPosition(),this.buffer.toString());return new Za(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Za(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new ln(e+5,ln.FNC1);if(r>=5&&r<15)return new ln(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new ln(e+7,""+(n+1));if(n>=90&&n<116)return new ln(e+7,""+(n+7));var a=this.extractNumericValueFromBitArray(e,8),s;switch(a){case 232:s="!";break;case 233:s='"';break;case 234:s="%";break;case 235:s="&";break;case 236:s="'";break;case 237:s="(";break;case 238:s=")";break;case 239:s="*";break;case 240:s="+";break;case 241:s=",";break;case 242:s="-";break;case 243:s=".";break;case 244:s="/";break;case 245:s=":";break;case 246:s=";";break;case 247:s="<";break;case 248:s="=";break;case 249:s=">";break;case 250:s="?";break;case 251:s="_";break;case 252:s=" ";break;default:throw new xe}return new ln(e+8,s)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new ln(e+5,ln.FNC1);if(r>=5&&r<15)return new ln(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new ln(e+6,""+(n+33));var a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Eo("Decoding invalid alphanumeric value: "+n)}return new ln(e+6,a)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),og=function(){function t(e){this.information=e,this.generalDecoder=new Ql(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),EE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mn=function(t){EE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,a)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,a){for(var s=0;s<4;++s){var l=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*s,10);l/100===0&&r.append("0"),l/10===0&&r.append("0"),r.append(l)}e.appendCheckDigit(r,a)},e.appendCheckDigit=function(r,n){for(var a=0,s=0;s<13;s++){var l=r.charAt(s+n).charCodeAt(0)-48;a+=(s&1)===0?3*l:l}a=10-a%10,a===10&&(a=0),r.append(a)},e.GTIN_SIZE=40,e}(og),SE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CE=function(t){SE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Fe;r.append("(01)");var n=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(mn),jE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OE=function(t){jE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new Fe;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(og),TE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jl=function(t){TE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,a){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(n,a);this.addWeightCode(r,s);for(var l=this.checkWeight(s),d=1e5,h=0;h<5;++h)l/d===0&&r.append("0"),d/=10;r.append(l)},e}(mn),DE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lg=function(t){DE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Jl.GTIN_SIZE+e.WEIGHT_SIZE)throw new ee;var r=new Fe;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+Jl.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Jl),RE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IE=function(t){RE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(lg),ME=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BE=function(t){ME(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(lg),PE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kE=function(t){PE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+mn.GTIN_SIZE)throw new ee;var r=new Fe;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+mn.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+mn.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(mn),LE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FE=function(t){LE(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+mn.GTIN_SIZE)throw new ee;var r=new Fe;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+mn.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var a=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+mn.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);a/100===0&&r.append("0"),a/10===0&&r.append("0"),r.append(a);var s=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+mn.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(s.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(mn),UE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ba=function(t){UE(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.dateCode=a,s.firstAIdigits=n,s}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new ee;var r=new Fe;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(a!==38400){r.append("("),r.append(this.dateCode),r.append(")");var s=a%32;a/=32;var l=a%12+1;a/=12;var d=a;d/10===0&&r.append("0"),r.append(d),l/10===0&&r.append("0"),r.append(l),s/10===0&&r.append("0"),r.append(s)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Jl);function zE(t){try{if(t.get(1))return new CE(t);if(!t.get(2))return new OE(t);var e=Ql.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new IE(t);case 5:return new BE(t)}var r=Ql.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new kE(t);case 13:return new FE(t)}var n=Ql.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new ba(t,"310","11");case 57:return new ba(t,"320","11");case 58:return new ba(t,"310","13");case 59:return new ba(t,"320","13");case 60:return new ba(t,"310","15");case 61:return new ba(t,"320","15");case 62:return new ba(t,"310","17");case 63:return new ba(t,"320","17")}}catch(a){throw console.log(a),new Eo("unknown decoder: "+t)}}var Nx=function(){function t(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),VE=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(a,s){r.forEach(function(l){a.getLeftChar().getValue()===l.getLeftChar().getValue()&&a.getRightChar().getValue()===l.getRightChar().getValue()&&a.getFinderPatter().getValue()===l.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),HE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_a=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},GE=function(t){HE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,a){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var a=!1;!a;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(d){if(d instanceof ee){if(!this.pairs.length)throw new ee;a=!0}}if(this.checkChecksum())return this.pairs;var s;if(this.rows.length?s=!0:s=!1,this.storeRow(r,!1),s){var l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new ee},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(a){console.log(a)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var a,s,l=n;l<this.rows.length;l++){var d=this.rows[l];this.pairs.length=0;try{for(var h=(a=void 0,_a(r)),m=h.next();!m.done;m=h.next()){var p=m.value;this.pairs.push(p.getPairs())}}catch(y){a={error:y}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}if(this.pairs.push(d.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var v=new Array(r);v.push(d);try{return this.checkRows(v,l+1)}catch(y){console.log(y)}}}throw new ee},e.isValidSequence=function(r){var n,a;try{for(var s=_a(e.FINDER_PATTERN_SEQUENCES),l=s.next();!l.done;l=s.next()){var d=l.value;if(!(r.length>d.length)){for(var h=!0,m=0;m<r.length;m++)if(r[m].getFinderPattern().getValue()!==d[m]){h=!1;break}if(h)return!0}}}catch(p){n={error:p}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var a=0,s=!1,l=!1;a<this.rows.length;){var d=this.rows[a];if(d.getRowNumber()>r){l=d.isEquivalent(this.pairs);break}s=d.isEquivalent(this.pairs),a++}l||s||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new VE(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var a,s,l,d,h,m;try{for(var p=_a(n),v=p.next();!v.done;v=p.next()){var y=v.value;if(y.getPairs().length!==r.length){var b=!0;try{for(var _=(l=void 0,_a(y.getPairs())),w=_.next();!w.done;w=_.next()){var E=w.value,j=!1;try{for(var A=(h=void 0,_a(r)),C=A.next();!C.done;C=A.next()){var D=C.value;if(Nx.equals(E,D)){j=!0;break}}}catch(R){h={error:R}}finally{try{C&&!C.done&&(m=A.return)&&m.call(A)}finally{if(h)throw h.error}}j||(b=!1)}}catch(R){l={error:R}}finally{try{w&&!w.done&&(d=_.return)&&d.call(_)}finally{if(l)throw l.error}}}}}catch(R){a={error:R}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}},e.isPartialRow=function(r,n){var a,s,l,d,h,m;try{for(var p=_a(n),v=p.next();!v.done;v=p.next()){var y=v.value,b=!0;try{for(var _=(l=void 0,_a(r)),w=_.next();!w.done;w=_.next()){var E=w.value,j=!1;try{for(var A=(h=void 0,_a(y.getPairs())),C=A.next();!C.done;C=A.next()){var D=C.value;if(E.equals(D)){j=!0;break}}}catch(R){h={error:R}}finally{try{C&&!C.done&&(m=A.return)&&m.call(A)}finally{if(h)throw h.error}}if(!j){b=!1;break}}}catch(R){l={error:R}}finally{try{w&&!w.done&&(d=_.return)&&d.call(_)}finally{if(l)throw l.error}}if(b)return!0}}catch(R){a={error:R}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=bE.buildBitArray(r),a=zE(n),s=a.parseInformation(),l=r[0].getFinderPattern().getResultPoints(),d=r[r.length-1].getFinderPattern().getResultPoints(),h=[l[0],l[1],d[0],d[1]];return new pr(s,null,null,h,Oe.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),a=r.getRightChar();if(a===null)return!1;for(var s=a.getChecksumPortion(),l=2,d=1;d<this.pairs.size();++d){var h=this.pairs.get(d);s+=h.getLeftChar().getChecksumPortion(),l++;var m=h.getRightChar();m!=null&&(s+=m.getChecksumPortion(),l++)}s%=211;var p=211*(l-4)+s;return p===n.getValue()},e.getNextSecondBar=function(r,n){var a;return r.get(n)?(a=r.getNextUnset(n),a=r.getNextSet(a)):(a=r.getNextSet(n),a=r.getNextUnset(a)),a},e.prototype.retrieveNextPair=function(r,n,a){var s=n.length%2===0;this.startFromEven&&(s=!s);var l,d=!0,h=-1;do this.findNextPair(r,n,h),l=this.parseFoundFinderPattern(r,a,s),l===null?h=e.getNextSecondBar(r,this.startEnd[0]):d=!1;while(d);var m=this.decodeDataCharacter(r,l,s,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new ee;var p;try{p=this.decodeDataCharacter(r,l,s,!1)}catch(v){p=null,console.log(v)}return new Nx(m,p,l,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,a){var s=this.getDecodeFinderCounters();s[0]=0,s[1]=0,s[2]=0,s[3]=0;var l=r.getSize(),d;if(a>=0)d=a;else if(this.isEmptyPair(n))d=0;else{var h=n[n.length-1];d=h.getFinderPattern().getStartEnd()[1]}var m=n.length%2!==0;this.startFromEven&&(m=!m);for(var p=!1;d<l&&(p=!r.get(d),!!p);)d++;for(var v=0,y=d,b=d;b<l;b++)if(r.get(b)!==p)s[v]++;else{if(v===3){if(m&&e.reverseCounters(s),e.isFinderPattern(s)){this.startEnd[0]=y,this.startEnd[1]=b;return}m&&e.reverseCounters(s),y+=s[0]+s[1],s[0]=s[2],s[1]=s[3],s[2]=0,s[3]=0,v--}else v++;s[v]=1,p=!p}throw new ee},e.reverseCounters=function(r){for(var n=r.length,a=0;a<n/2;++a){var s=r[a];r[a]=r[n-a-1],r[n-a-1]=s}},e.prototype.parseFoundFinderPattern=function(r,n,a){var s,l,d;if(a){for(var h=this.startEnd[0]-1;h>=0&&!r.get(h);)h--;h++,s=this.startEnd[0]-h,l=h,d=this.startEnd[1]}else l=this.startEnd[0],d=r.getNextUnset(this.startEnd[1]+1),s=d-this.startEnd[1];var m=this.getDecodeFinderCounters();pt.arraycopy(m,0,m,1,m.length-1),m[0]=s;var p;try{p=this.parseFinderValue(m,e.FINDER_PATTERNS)}catch{return null}return new sg(p,[l,d],l,d,n)},e.prototype.decodeDataCharacter=function(r,n,a,s){for(var l=this.getDataCharacterCounters(),d=0;d<l.length;d++)l[d]=0;if(s)e.recordPatternInReverse(r,n.getStartEnd()[0],l);else{e.recordPattern(r,n.getStartEnd()[1],l);for(var h=0,m=l.length-1;h<m;h++,m--){var p=l[h];l[h]=l[m],l[m]=p}}var v=17,y=We.sum(new Int32Array(l))/v,b=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(y-b)/b>.3)throw new ee;for(var _=this.getOddCounts(),w=this.getEvenCounts(),E=this.getOddRoundingErrors(),j=this.getEvenRoundingErrors(),h=0;h<l.length;h++){var A=1*l[h]/y,C=A+.5;if(C<1){if(A<.3)throw new ee;C=1}else if(C>8){if(A>8.7)throw new ee;C=8}var D=h/2;(h&1)===0?(_[D]=C,E[D]=A-C):(w[D]=C,j[D]=A-C)}this.adjustOddEvenCounts(v);for(var R=4*n.getValue()+(a?0:2)+(s?0:1)-1,L=0,$=0,h=_.length-1;h>=0;h--){if(e.isNotA1left(n,a,s)){var W=e.WEIGHTS[R][2*h];$+=_[h]*W}L+=_[h]}for(var J=0,h=w.length-1;h>=0;h--)if(e.isNotA1left(n,a,s)){var W=e.WEIGHTS[R][2*h+1];J+=w[h]*W}var ae=$+J;if((L&1)!==0||L>13||L<4)throw new ee;var be=(13-L)/2,ce=e.SYMBOL_WIDEST[be],me=9-ce,_e=qi.getRSSvalue(_,ce,!0),he=qi.getRSSvalue(w,me,!1),P=e.EVEN_TOTAL_SUBSET[be],oe=e.GSUM[be],Y=_e*P+he+oe;return new oc(Y,ae)},e.isNotA1left=function(r,n,a){return!(r.getValue()===0&&n&&a)},e.prototype.adjustOddEvenCounts=function(r){var n=We.sum(new Int32Array(this.getOddCounts())),a=We.sum(new Int32Array(this.getEvenCounts())),s=!1,l=!1;n>13?l=!0:n<4&&(s=!0);var d=!1,h=!1;a>13?h=!0:a<4&&(d=!0);var m=n+a-r,p=(n&1)===1,v=(a&1)===0;if(m===1)if(p){if(v)throw new ee;l=!0}else{if(!v)throw new ee;h=!0}else if(m===-1)if(p){if(v)throw new ee;s=!0}else{if(!v)throw new ee;d=!0}else if(m===0){if(p){if(!v)throw new ee;n<a?(s=!0,h=!0):(l=!0,d=!0)}else if(v)throw new ee}else throw new ee;if(s){if(l)throw new ee;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(h)throw new ee;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(qa),ZE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XE=function(t){ZE(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.count=0,s.finderPattern=a,s}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(oc),qE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ex=function(t){qE(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,a){var s,l,d,h,m=this.decodePair(n,!1,r,a);e.addOrTally(this.possibleLeftPairs,m),n.reverse();var p=this.decodePair(n,!0,r,a);e.addOrTally(this.possibleRightPairs,p),n.reverse();try{for(var v=tf(this.possibleLeftPairs),y=v.next();!y.done;y=v.next()){var b=y.value;if(b.getCount()>1)try{for(var _=(d=void 0,tf(this.possibleRightPairs)),w=_.next();!w.done;w=_.next()){var E=w.value;if(E.getCount()>1&&e.checkChecksum(b,E))return e.constructResult(b,E)}}catch(j){d={error:j}}finally{try{w&&!w.done&&(h=_.return)&&h.call(_)}finally{if(d)throw d.error}}}}catch(j){s={error:j}}finally{try{y&&!y.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}throw new ee},e.addOrTally=function(r,n){var a,s;if(n!=null){var l=!1;try{for(var d=tf(r),h=d.next();!h.done;h=d.next()){var m=h.value;if(m.getValue()===n.getValue()){m.incrementCount(),l=!0;break}}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}l||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var a=4537077*r.getValue()+n.getValue(),s=new String(a).toString(),l=new Fe,d=13-s.length;d>0;d--)l.append("0");l.append(s);for(var h=0,d=0;d<13;d++){var m=l.charAt(d).charCodeAt(0)-48;h+=(d&1)===0?3*m:m}h=10-h%10,h===10&&(h=0),l.append(h.toString());var p=r.getFinderPattern().getResultPoints(),v=n.getFinderPattern().getResultPoints();return new pr(l.toString(),null,0,[p[0],p[1],v[0],v[1]],Oe.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var a=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,s=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return s>72&&s--,s>8&&s--,a===s},e.prototype.decodePair=function(r,n,a,s){try{var l=this.findFinderPattern(r,n),d=this.parseFoundFinderPattern(r,a,n,l),h=s==null?null:s.get(bt.NEED_RESULT_POINT_CALLBACK);if(h!=null){var m=(l[0]+l[1])/2;n&&(m=r.getSize()-1-m),h.foundPossibleResultPoint(new Ee(m,a))}var p=this.decodeDataCharacter(r,d,!0),v=this.decodeDataCharacter(r,d,!1);return new XE(1597*p.getValue()+v.getValue(),p.getChecksumPortion()+4*v.getChecksumPortion(),d)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,a){for(var s=this.getDataCharacterCounters(),l=0;l<s.length;l++)s[l]=0;if(a)Gt.recordPatternInReverse(r,n.getStartEnd()[0],s);else{Gt.recordPattern(r,n.getStartEnd()[1]+1,s);for(var d=0,h=s.length-1;d<h;d++,h--){var m=s[d];s[d]=s[h],s[h]=m}}for(var p=a?16:15,v=We.sum(new Int32Array(s))/p,y=this.getOddCounts(),b=this.getEvenCounts(),_=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors(),d=0;d<s.length;d++){var E=s[d]/v,j=Math.floor(E+.5);j<1?j=1:j>8&&(j=8);var A=Math.floor(d/2);(d&1)===0?(y[A]=j,_[A]=E-j):(b[A]=j,w[A]=E-j)}this.adjustOddEvenCounts(a,p);for(var C=0,D=0,d=y.length-1;d>=0;d--)D*=9,D+=y[d],C+=y[d];for(var R=0,L=0,d=b.length-1;d>=0;d--)R*=9,R+=b[d],L+=b[d];var $=D+3*R;if(a){if((C&1)!==0||C>12||C<4)throw new ee;var W=(12-C)/2,J=e.OUTSIDE_ODD_WIDEST[W],ae=9-J,be=qi.getRSSvalue(y,J,!1),ce=qi.getRSSvalue(b,ae,!0),me=e.OUTSIDE_EVEN_TOTAL_SUBSET[W],_e=e.OUTSIDE_GSUM[W];return new oc(be*me+ce+_e,$)}else{if((L&1)!==0||L>10||L<4)throw new ee;var W=(10-L)/2,J=e.INSIDE_ODD_WIDEST[W],ae=9-J,be=qi.getRSSvalue(y,J,!0),ce=qi.getRSSvalue(b,ae,!1),he=e.INSIDE_ODD_TOTAL_SUBSET[W],_e=e.INSIDE_GSUM[W];return new oc(ce*he+be+_e,$)}},e.prototype.findFinderPattern=function(r,n){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var s=r.getSize(),l=!1,d=0;d<s&&(l=!r.get(d),n!==l);)d++;for(var h=0,m=d,p=d;p<s;p++)if(r.get(p)!==l)a[h]++;else{if(h===3){if(qa.isFinderPattern(a))return[m,p];m+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,h--}else h++;a[h]=1,l=!l}throw new ee},e.prototype.parseFoundFinderPattern=function(r,n,a,s){for(var l=r.get(s[0]),d=s[0]-1;d>=0&&l!==r.get(d);)d--;d++;var h=s[0]-d,m=this.getDecodeFinderCounters(),p=new Int32Array(m.length);pt.arraycopy(m,0,p,1,m.length-1),p[0]=h;var v=this.parseFinderValue(p,e.FINDER_PATTERNS),y=d,b=s[1];return a&&(y=r.getSize()-1-y,b=r.getSize()-1-b),new sg(v,[d,s[1]],y,b,n)},e.prototype.adjustOddEvenCounts=function(r,n){var a=We.sum(new Int32Array(this.getOddCounts())),s=We.sum(new Int32Array(this.getEvenCounts())),l=!1,d=!1,h=!1,m=!1;r?(a>12?d=!0:a<4&&(l=!0),s>12?m=!0:s<4&&(h=!0)):(a>11?d=!0:a<5&&(l=!0),s>10?m=!0:s<4&&(h=!0));var p=a+s-n,v=(a&1)===(r?1:0),y=(s&1)===1;if(p===1)if(v){if(y)throw new ee;d=!0}else{if(!y)throw new ee;m=!0}else if(p===-1)if(v){if(y)throw new ee;l=!0}else{if(!y)throw new ee;h=!0}else if(p===0){if(v){if(!y)throw new ee;a<s?(l=!0,m=!0):(d=!0,h=!0)}else if(y)throw new ee}else throw new ee;if(l){if(d)throw new ee;qa.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&qa.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(m)throw new ee;qa.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&qa.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(qa),$E=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),co=function(t){$E(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var a=r?r.get(bt.POSSIBLE_FORMATS):null,s=r&&r.get(bt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,l=r&&r.get(bt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return a&&((a.includes(Oe.EAN_13)||a.includes(Oe.UPC_A)||a.includes(Oe.EAN_8)||a.includes(Oe.UPC_E))&&n.readers.push(new ef(r)),a.includes(Oe.CODE_39)&&n.readers.push(new px(s,l)),a.includes(Oe.CODE_93)&&n.readers.push(new xx),a.includes(Oe.CODE_128)&&n.readers.push(new mx),a.includes(Oe.ITF)&&n.readers.push(new vx),a.includes(Oe.CODABAR)&&n.readers.push(new xE),a.includes(Oe.RSS_14)&&n.readers.push(new Ex),a.includes(Oe.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new GE))),n.readers.length===0&&(n.readers.push(new ef(r)),n.readers.push(new px),n.readers.push(new xx),n.readers.push(new ef(r)),n.readers.push(new mx),n.readers.push(new vx),n.readers.push(new Ex)),n}return e.prototype.decodeRow=function(r,n,a){for(var s=0;s<this.readers.length;s++)try{return this.readers[s].decodeRow(r,n,a)}catch{}throw new ee},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(Gt),YE=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){YE(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new co(n),r,n)||this}return e})(ai);var Sx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tt=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Je=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),KE=function(){function t(e,r,n,a,s,l){var d,h;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=s,this.ecBlocks=l;var m=0,p=l.getECCodewords(),v=l.getECBlocks();try{for(var y=Sx(v),b=y.next();!b.done;b=y.next()){var _=b.value;m+=_.getCount()*(_.getDataCodewords()+p)}}catch(w){d={error:w}}finally{try{b&&!b.done&&(h=y.return)&&h.call(y)}finally{if(d)throw d.error}}this.totalCodewords=m}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,a;if((e&1)!==0||(r&1)!==0)throw new xe;try{for(var s=Sx(t.VERSIONS),l=s.next();!l.done;l=s.next()){var d=l.value;if(d.symbolSizeRows===e&&d.symbolSizeColumns===r)return d}}catch(h){n={error:h}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}throw new xe},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new tt(5,new Je(1,3))),new t(2,12,12,10,10,new tt(7,new Je(1,5))),new t(3,14,14,12,12,new tt(10,new Je(1,8))),new t(4,16,16,14,14,new tt(12,new Je(1,12))),new t(5,18,18,16,16,new tt(14,new Je(1,18))),new t(6,20,20,18,18,new tt(18,new Je(1,22))),new t(7,22,22,20,20,new tt(20,new Je(1,30))),new t(8,24,24,22,22,new tt(24,new Je(1,36))),new t(9,26,26,24,24,new tt(28,new Je(1,44))),new t(10,32,32,14,14,new tt(36,new Je(1,62))),new t(11,36,36,16,16,new tt(42,new Je(1,86))),new t(12,40,40,18,18,new tt(48,new Je(1,114))),new t(13,44,44,20,20,new tt(56,new Je(1,144))),new t(14,48,48,22,22,new tt(68,new Je(1,174))),new t(15,52,52,24,24,new tt(42,new Je(2,102))),new t(16,64,64,14,14,new tt(56,new Je(2,140))),new t(17,72,72,16,16,new tt(36,new Je(4,92))),new t(18,80,80,18,18,new tt(48,new Je(4,114))),new t(19,88,88,20,20,new tt(56,new Je(4,144))),new t(20,96,96,22,22,new tt(68,new Je(4,174))),new t(21,104,104,24,24,new tt(56,new Je(6,136))),new t(22,120,120,18,18,new tt(68,new Je(6,175))),new t(23,132,132,20,20,new tt(62,new Je(8,163))),new t(24,144,144,22,22,new tt(62,new Je(8,156),new Je(2,155))),new t(25,8,18,6,16,new tt(7,new Je(1,5))),new t(26,8,32,6,14,new tt(11,new Je(1,10))),new t(27,12,26,10,24,new tt(14,new Je(1,16))),new t(28,12,36,10,16,new tt(18,new Je(1,22))),new t(29,16,36,14,16,new tt(24,new Je(1,32))),new t(30,16,48,14,22,new tt(28,new Je(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),WE=function(){function t(e){var r=e.getHeight();if(r<8||r>144||(r&1)!==0)throw new xe;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new On(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return KE.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,a=0,s=this.mappingBitMatrix.getHeight(),l=this.mappingBitMatrix.getWidth(),d=!1,h=!1,m=!1,p=!1;do if(n===s&&a===0&&!d)e[r++]=this.readCorner1(s,l)&255,n-=2,a+=2,d=!0;else if(n===s-2&&a===0&&(l&3)!==0&&!h)e[r++]=this.readCorner2(s,l)&255,n-=2,a+=2,h=!0;else if(n===s+4&&a===2&&(l&7)===0&&!m)e[r++]=this.readCorner3(s,l)&255,n-=2,a+=2,m=!0;else if(n===s-2&&a===0&&(l&7)===4&&!p)e[r++]=this.readCorner4(s,l)&255,n-=2,a+=2,p=!0;else{do n<s&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,l)&255),n-=2,a+=2;while(n>=0&&a<l);n+=1,a+=3;do n>=0&&a<l&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,s,l)&255),n+=2,a-=2;while(n<s&&a>=0);n+=3,a+=1}while(n<s||a<l);if(r!==this.version.getTotalCodewords())throw new xe;return e},t.prototype.readModule=function(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,a){var s=0;return this.readModule(e-2,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-2,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e-1,r,n,a)&&(s|=1),s<<=1,this.readModule(e,r-2,n,a)&&(s|=1),s<<=1,this.readModule(e,r-1,n,a)&&(s|=1),s<<=1,this.readModule(e,r,n,a)&&(s|=1),s},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new Te("Dimension of bitMatrix must match the version size");for(var a=this.version.getDataRegionSizeRows(),s=this.version.getDataRegionSizeColumns(),l=r/a|0,d=n/s|0,h=l*a,m=d*s,p=new On(m,h),v=0;v<l;++v)for(var y=v*a,b=0;b<d;++b)for(var _=b*s,w=0;w<a;++w)for(var E=v*(a+2)+1+w,j=y+w,A=0;A<s;++A){var C=b*(s+2)+1+A;if(e.get(C,E)){var D=_+A;p.set(D,j)}}return p},t}(),Cx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QE=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,a,s,l,d=r.getECBlocks(),h=0,m=d.getECBlocks();try{for(var p=Cx(m),v=p.next();!v.done;v=p.next()){var y=v.value;h+=y.getCount()}}catch(_e){n={error:_e}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}var b=new Array(h),_=0;try{for(var w=Cx(m),E=w.next();!E.done;E=w.next())for(var y=E.value,j=0;j<y.getCount();j++){var A=y.getDataCodewords(),C=d.getECCodewords()+A;b[_++]=new t(A,new Uint8Array(C))}}catch(_e){s={error:_e}}finally{try{E&&!E.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}for(var D=b[0].codewords.length,R=D-d.getECCodewords(),L=R-1,$=0,j=0;j<L;j++)for(var W=0;W<_;W++)b[W].codewords[j]=e[$++];for(var J=r.getVersionNumber()===24,ae=J?8:_,W=0;W<ae;W++)b[W].codewords[R-1]=e[$++];for(var be=b[0].codewords.length,j=R;j<be;j++)for(var W=0;W<_;W++){var ce=J?(W+8)%_:W,me=J&&ce>7?j-1:j;b[ce].codewords[me]=e[$++]}if($!==e.length)throw new Te;return b},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),cg=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Te(""+e);var r=0,n=this.bitOffset,a=this.byteOffset,s=this.bytes;if(n>0){var l=8-n,d=e<l?e:l,h=l-d,m=255>>8-d<<h;r=(s[a]&m)>>h,e-=d,n+=d,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|s[a]&255,a++,e-=8;if(e>0){var h=8-e,m=255>>h<<h;r=r<<e|(s[a]&m)>>h,n+=e}}return this.bitOffset=n,this.byteOffset=a,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Ft;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ft||(Ft={}));var JE=function(){function t(){}return t.decode=function(e){var r=new cg(e),n=new Fe,a=new Fe,s=new Array,l=Ft.ASCII_ENCODE;do if(l===Ft.ASCII_ENCODE)l=this.decodeAsciiSegment(r,n,a);else{switch(l){case Ft.C40_ENCODE:this.decodeC40Segment(r,n);break;case Ft.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Ft.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Ft.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Ft.BASE256_ENCODE:this.decodeBase256Segment(r,n,s);break;default:throw new xe}l=Ft.ASCII_ENCODE}while(l!==Ft.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new Nc(e,n.toString(),s.length===0?null:s,null)},t.decodeAsciiSegment=function(e,r,n){var a=!1;do{var s=e.readBits(8);if(s===0)throw new xe;if(s<=128)return a&&(s+=128),r.append(String.fromCharCode(s-1)),Ft.ASCII_ENCODE;if(s===129)return Ft.PAD_ENCODE;if(s<=229){var l=s-130;l<10&&r.append("0"),r.append(""+l)}else switch(s){case 230:return Ft.C40_ENCODE;case 231:return Ft.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Ft.ANSIX12_ENCODE;case 239:return Ft.TEXT_ENCODE;case 240:return Ft.EDIFACT_ENCODE;case 241:break;default:if(s!==254||e.available()!==0)throw new xe;break}}while(e.available()>0);return Ft.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),a);for(var d=0;d<3;d++){var h=a[d];switch(s){case 0:if(h<3)s=h+1;else if(h<this.C40_BASIC_SET_CHARS.length){var m=this.C40_BASIC_SET_CHARS[h];n?(r.append(String.fromCharCode(m.charCodeAt(0)+128)),n=!1):r.append(m)}else throw new xe;break;case 1:n?(r.append(String.fromCharCode(h+128)),n=!1):r.append(String.fromCharCode(h)),s=0;break;case 2:if(h<this.C40_SHIFT2_SET_CHARS.length){var m=this.C40_SHIFT2_SET_CHARS[h];n?(r.append(String.fromCharCode(m.charCodeAt(0)+128)),n=!1):r.append(m)}else switch(h){case 27:r.append("");break;case 30:n=!0;break;default:throw new xe}s=0;break;case 3:n?(r.append(String.fromCharCode(h+224)),n=!1):r.append(String.fromCharCode(h+96)),s=0;break;default:throw new xe}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,a=[],s=0;do{if(e.available()===8)return;var l=e.readBits(8);if(l===254)return;this.parseTwoBytes(l,e.readBits(8),a);for(var d=0;d<3;d++){var h=a[d];switch(s){case 0:if(h<3)s=h+1;else if(h<this.TEXT_BASIC_SET_CHARS.length){var m=this.TEXT_BASIC_SET_CHARS[h];n?(r.append(String.fromCharCode(m.charCodeAt(0)+128)),n=!1):r.append(m)}else throw new xe;break;case 1:n?(r.append(String.fromCharCode(h+128)),n=!1):r.append(String.fromCharCode(h)),s=0;break;case 2:if(h<this.TEXT_SHIFT2_SET_CHARS.length){var m=this.TEXT_SHIFT2_SET_CHARS[h];n?(r.append(String.fromCharCode(m.charCodeAt(0)+128)),n=!1):r.append(m)}else switch(h){case 27:r.append("");break;case 30:n=!0;break;default:throw new xe}s=0;break;case 3:if(h<this.TEXT_SHIFT3_SET_CHARS.length){var m=this.TEXT_SHIFT3_SET_CHARS[h];n?(r.append(String.fromCharCode(m.charCodeAt(0)+128)),n=!1):r.append(m),s=0}else throw new xe;break;default:throw new xe}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(var s=0;s<3;s++){var l=n[s];switch(l){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(l<14)r.append(String.fromCharCode(l+44));else if(l<40)r.append(String.fromCharCode(l+51));else throw new xe;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var a=(e<<8)+r-1,s=Math.floor(a/1600);n[0]=s,a-=s*1600,s=Math.floor(a/40),n[1]=s,n[2]=a-s*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var a=e.readBits(6);if(a===31){var s=8-e.getBitOffset();s!==8&&e.readBits(s);return}(a&32)===0&&(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var a=1+e.getByteOffset(),s=this.unrandomize255State(e.readBits(8),a++),l;if(s===0?l=e.available()/8|0:s<250?l=s:l=250*(s-249)+this.unrandomize255State(e.readBits(8),a++),l<0)throw new xe;for(var d=new Uint8Array(l),h=0;h<l;h++){if(e.available()<8)throw new xe;d[h]=this.unrandomize255State(e.readBits(8),a++)}n.push(d);try{r.append(nn.decode(d,$e.ISO88591))}catch(m){throw new Eo("Platform does not support required encoding: "+m.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,a=e-n;return a>=0?a:a+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),eS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tS=function(){function t(){this.rsDecoder=new Ec(Dr.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,a=new WE(e),s=a.getVersion(),l=a.readCodewords(),d=QE.getDataBlocks(l,s),h=0;try{for(var m=eS(d),p=m.next();!p.done;p=m.next()){var v=p.value;h+=v.getNumDataCodewords()}}catch(C){r={error:C}}finally{try{p&&!p.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}for(var y=new Uint8Array(h),b=d.length,_=0;_<b;_++){var w=d[_],E=w.getCodewords(),j=w.getNumDataCodewords();this.correctErrors(E,j);for(var A=0;A<j;A++)y[A*b+_]=E[A]}return JE.decode(y)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Jt}for(var a=0;a<r;a++)e[a]=n[a]},t}(),rS=function(){function t(e){this.image=e,this.rectangleDetector=new Sf(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new ee;r=this.shiftToModuleCenter(r);var n=r[0],a=r[1],s=r[2],l=r[3],d=this.transitionsBetween(n,l)+1,h=this.transitionsBetween(s,l)+1;(d&1)===1&&(d+=1),(h&1)===1&&(h+=1),4*d<7*h&&4*h<7*d&&(d=h=Math.max(d,h));var m=t.sampleGrid(this.image,n,a,s,l,d,h);return new i0(m,[n,a,s,l])},t.shiftPoint=function(e,r,n){var a=(r.getX()-e.getX())/(n+1),s=(r.getY()-e.getY())/(n+1);return new Ee(e.getX()+a,e.getY()+s)},t.moveAway=function(e,r,n){var a=e.getX(),s=e.getY();return a<r?a-=1:a+=1,s<n?s-=1:s+=1,new Ee(a,s)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],a=e[3],s=e[2],l=this.transitionsBetween(r,n),d=this.transitionsBetween(n,a),h=this.transitionsBetween(a,s),m=this.transitionsBetween(s,r),p=l,v=[s,r,n,a];return p>d&&(p=d,v[0]=r,v[1]=n,v[2]=a,v[3]=s),p>h&&(p=h,v[0]=n,v[1]=a,v[2]=s,v[3]=r),p>m&&(v[0]=a,v[1]=s,v[2]=r,v[3]=n),v},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],l=this.transitionsBetween(r,s),d=t.shiftPoint(n,a,(l+1)*4),h=t.shiftPoint(a,n,(l+1)*4),m=this.transitionsBetween(d,r),p=this.transitionsBetween(h,s);return m<p?(e[0]=r,e[1]=n,e[2]=a,e[3]=s):(e[0]=n,e[1]=a,e[2]=s,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],l=this.transitionsBetween(r,s),d=this.transitionsBetween(n,s),h=t.shiftPoint(r,n,(d+1)*4),m=t.shiftPoint(a,n,(l+1)*4);l=this.transitionsBetween(h,s),d=this.transitionsBetween(m,s);var p=new Ee(s.getX()+(a.getX()-n.getX())/(l+1),s.getY()+(a.getY()-n.getY())/(l+1)),v=new Ee(s.getX()+(r.getX()-n.getX())/(d+1),s.getY()+(r.getY()-n.getY())/(d+1));if(!this.isValid(p))return this.isValid(v)?v:null;if(!this.isValid(v))return p;var y=this.transitionsBetween(h,p)+this.transitionsBetween(m,p),b=this.transitionsBetween(h,v)+this.transitionsBetween(m,v);return y>b?p:v},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],a=e[2],s=e[3],l=this.transitionsBetween(r,s)+1,d=this.transitionsBetween(a,s)+1,h=t.shiftPoint(r,n,d*4),m=t.shiftPoint(a,n,l*4);l=this.transitionsBetween(h,s)+1,d=this.transitionsBetween(m,s)+1,(l&1)===1&&(l+=1),(d&1)===1&&(d+=1);var p=(r.getX()+n.getX()+a.getX()+s.getX())/4,v=(r.getY()+n.getY()+a.getY()+s.getY())/4;r=t.moveAway(r,p,v),n=t.moveAway(n,p,v),a=t.moveAway(a,p,v),s=t.moveAway(s,p,v);var y,b;return h=t.shiftPoint(r,n,d*4),h=t.shiftPoint(h,s,l*4),y=t.shiftPoint(n,r,d*4),y=t.shiftPoint(y,a,l*4),m=t.shiftPoint(a,s,d*4),m=t.shiftPoint(m,n,l*4),b=t.shiftPoint(s,a,d*4),b=t.shiftPoint(b,r,l*4),[h,y,m,b]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,a,s,l,d){var h=s0.getInstance();return h.sampleGrid(e,l,d,.5,.5,l-.5,.5,l-.5,d-.5,.5,d-.5,r.getX(),r.getY(),s.getX(),s.getY(),a.getX(),a.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),s=Math.trunc(r.getX()),l=Math.trunc(r.getY()),d=Math.abs(l-a)>Math.abs(s-n);if(d){var h=n;n=a,a=h,h=s,s=l,l=h}for(var m=Math.abs(s-n),p=Math.abs(l-a),v=-m/2,y=a<l?1:-1,b=n<s?1:-1,_=0,w=this.image.get(d?a:n,d?n:a),E=n,j=a;E!==s;E+=b){var A=this.image.get(d?j:E,d?E:j);if(A!==w&&(_++,w=A),v+=p,v>0){if(j===l)break;j+=y,v-=m}}return _},t}(),Of=function(){function t(){this.decoder=new tS}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,a;if(r!=null&&r.has(bt.PURE_BARCODE)){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(s),a=t.NO_POINTS}else{var l=new rS(e.getBlackMatrix()).detect();n=this.decoder.decode(l.getBits()),a=l.getPoints()}var d=n.getRawBytes(),h=new pr(n.getText(),d,8*d.length,a,Oe.DATA_MATRIX,pt.currentTimeMillis()),m=n.getByteSegments();m!=null&&h.putMetadata(lr.BYTE_SEGMENTS,m);var p=n.getECLevel();return p!=null&&h.putMetadata(lr.ERROR_CORRECTION_LEVEL,p),h},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new ee;var a=this.moduleSize(r,e),s=r[1],l=n[1],d=r[0],h=n[0],m=(h-d+1)/a,p=(l-s+1)/a;if(m<=0||p<=0)throw new ee;var v=a/2;s+=v,d+=v;for(var y=new On(m,p),b=0;b<p;b++)for(var _=s+b*a,w=0;w<m;w++)e.get(d+w*a,_)&&y.set(w,b);return y},t.moduleSize=function(e,r){for(var n=r.getWidth(),a=e[0],s=e[1];a<n&&r.get(a,s);)a++;if(a===n)throw new ee;var l=a-e[0];if(l===0)throw new ee;return l},t.NO_POINTS=[],t}(),nS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){nS(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Of,r)||this}return e})(ai);var $i;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})($i||($i={}));var aS=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new un(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new Te;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t($i.L,"L",1),t.M=new t($i.M,"M",0),t.Q=new t($i.Q,"Q",3),t.H=new t($i.H,"H",2),t}(),iS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ug=function(){function t(e){this.errorCorrectionLevel=aS.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return ze.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,a,s=Number.MAX_SAFE_INTEGER,l=0;try{for(var d=iS(t.FORMAT_INFO_DECODE_LOOKUP),h=d.next();!h.done;h=d.next()){var m=h.value,p=m[0];if(p===e||p===r)return new t(m[1]);var v=t.numBitsDiffering(e,p);v<s&&(l=m[1],s=v),e!==r&&(v=t.numBitsDiffering(r,p),v<s&&(l=m[1],s=v))}}catch(y){n={error:y}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(n)throw n.error}}return s<=3?new t(l):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),sS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,a=this.ecBlocks;try{for(var s=sS(a),l=s.next();!l.done;l=s.next()){var d=l.value;n+=d.getCount()}}catch(h){e={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),O=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),oS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ja=function(){function t(e,r){for(var n,a,s=[],l=2;l<arguments.length;l++)s[l-2]=arguments[l];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=s;var d=0,h=s[0].getECCodewordsPerBlock(),m=s[0].getECBlocks();try{for(var p=oS(m),v=p.next();!v.done;v=p.next()){var y=v.value;d+=y.getCount()*(y.getDataCodewords()+h)}}catch(b){n={error:b}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}this.totalCodewords=d}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new xe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new xe}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new Te;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,a=0;a<t.VERSION_DECODE_INFO.length;a++){var s=t.VERSION_DECODE_INFO[a];if(s===e)return t.getVersionForNumber(a+7);var l=ug.numBitsDiffering(e,s);l<r&&(n=a+7,r=l)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new On(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,a=0;a<n;a++)for(var s=this.alignmentPatternCenters[a]-2,l=0;l<n;l++)a===0&&(l===0||l===n-1)||a===n-1&&l===0||r.setRegion(this.alignmentPatternCenters[l]-2,s,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new Z(7,new O(1,19)),new Z(10,new O(1,16)),new Z(13,new O(1,13)),new Z(17,new O(1,9))),new t(2,Int32Array.from([6,18]),new Z(10,new O(1,34)),new Z(16,new O(1,28)),new Z(22,new O(1,22)),new Z(28,new O(1,16))),new t(3,Int32Array.from([6,22]),new Z(15,new O(1,55)),new Z(26,new O(1,44)),new Z(18,new O(2,17)),new Z(22,new O(2,13))),new t(4,Int32Array.from([6,26]),new Z(20,new O(1,80)),new Z(18,new O(2,32)),new Z(26,new O(2,24)),new Z(16,new O(4,9))),new t(5,Int32Array.from([6,30]),new Z(26,new O(1,108)),new Z(24,new O(2,43)),new Z(18,new O(2,15),new O(2,16)),new Z(22,new O(2,11),new O(2,12))),new t(6,Int32Array.from([6,34]),new Z(18,new O(2,68)),new Z(16,new O(4,27)),new Z(24,new O(4,19)),new Z(28,new O(4,15))),new t(7,Int32Array.from([6,22,38]),new Z(20,new O(2,78)),new Z(18,new O(4,31)),new Z(18,new O(2,14),new O(4,15)),new Z(26,new O(4,13),new O(1,14))),new t(8,Int32Array.from([6,24,42]),new Z(24,new O(2,97)),new Z(22,new O(2,38),new O(2,39)),new Z(22,new O(4,18),new O(2,19)),new Z(26,new O(4,14),new O(2,15))),new t(9,Int32Array.from([6,26,46]),new Z(30,new O(2,116)),new Z(22,new O(3,36),new O(2,37)),new Z(20,new O(4,16),new O(4,17)),new Z(24,new O(4,12),new O(4,13))),new t(10,Int32Array.from([6,28,50]),new Z(18,new O(2,68),new O(2,69)),new Z(26,new O(4,43),new O(1,44)),new Z(24,new O(6,19),new O(2,20)),new Z(28,new O(6,15),new O(2,16))),new t(11,Int32Array.from([6,30,54]),new Z(20,new O(4,81)),new Z(30,new O(1,50),new O(4,51)),new Z(28,new O(4,22),new O(4,23)),new Z(24,new O(3,12),new O(8,13))),new t(12,Int32Array.from([6,32,58]),new Z(24,new O(2,92),new O(2,93)),new Z(22,new O(6,36),new O(2,37)),new Z(26,new O(4,20),new O(6,21)),new Z(28,new O(7,14),new O(4,15))),new t(13,Int32Array.from([6,34,62]),new Z(26,new O(4,107)),new Z(22,new O(8,37),new O(1,38)),new Z(24,new O(8,20),new O(4,21)),new Z(22,new O(12,11),new O(4,12))),new t(14,Int32Array.from([6,26,46,66]),new Z(30,new O(3,115),new O(1,116)),new Z(24,new O(4,40),new O(5,41)),new Z(20,new O(11,16),new O(5,17)),new Z(24,new O(11,12),new O(5,13))),new t(15,Int32Array.from([6,26,48,70]),new Z(22,new O(5,87),new O(1,88)),new Z(24,new O(5,41),new O(5,42)),new Z(30,new O(5,24),new O(7,25)),new Z(24,new O(11,12),new O(7,13))),new t(16,Int32Array.from([6,26,50,74]),new Z(24,new O(5,98),new O(1,99)),new Z(28,new O(7,45),new O(3,46)),new Z(24,new O(15,19),new O(2,20)),new Z(30,new O(3,15),new O(13,16))),new t(17,Int32Array.from([6,30,54,78]),new Z(28,new O(1,107),new O(5,108)),new Z(28,new O(10,46),new O(1,47)),new Z(28,new O(1,22),new O(15,23)),new Z(28,new O(2,14),new O(17,15))),new t(18,Int32Array.from([6,30,56,82]),new Z(30,new O(5,120),new O(1,121)),new Z(26,new O(9,43),new O(4,44)),new Z(28,new O(17,22),new O(1,23)),new Z(28,new O(2,14),new O(19,15))),new t(19,Int32Array.from([6,30,58,86]),new Z(28,new O(3,113),new O(4,114)),new Z(26,new O(3,44),new O(11,45)),new Z(26,new O(17,21),new O(4,22)),new Z(26,new O(9,13),new O(16,14))),new t(20,Int32Array.from([6,34,62,90]),new Z(28,new O(3,107),new O(5,108)),new Z(26,new O(3,41),new O(13,42)),new Z(30,new O(15,24),new O(5,25)),new Z(28,new O(15,15),new O(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new Z(28,new O(4,116),new O(4,117)),new Z(26,new O(17,42)),new Z(28,new O(17,22),new O(6,23)),new Z(30,new O(19,16),new O(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new Z(28,new O(2,111),new O(7,112)),new Z(28,new O(17,46)),new Z(30,new O(7,24),new O(16,25)),new Z(24,new O(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new Z(30,new O(4,121),new O(5,122)),new Z(28,new O(4,47),new O(14,48)),new Z(30,new O(11,24),new O(14,25)),new Z(30,new O(16,15),new O(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new Z(30,new O(6,117),new O(4,118)),new Z(28,new O(6,45),new O(14,46)),new Z(30,new O(11,24),new O(16,25)),new Z(30,new O(30,16),new O(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new Z(26,new O(8,106),new O(4,107)),new Z(28,new O(8,47),new O(13,48)),new Z(30,new O(7,24),new O(22,25)),new Z(30,new O(22,15),new O(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new Z(28,new O(10,114),new O(2,115)),new Z(28,new O(19,46),new O(4,47)),new Z(28,new O(28,22),new O(6,23)),new Z(30,new O(33,16),new O(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new Z(30,new O(8,122),new O(4,123)),new Z(28,new O(22,45),new O(3,46)),new Z(30,new O(8,23),new O(26,24)),new Z(30,new O(12,15),new O(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new Z(30,new O(3,117),new O(10,118)),new Z(28,new O(3,45),new O(23,46)),new Z(30,new O(4,24),new O(31,25)),new Z(30,new O(11,15),new O(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new Z(30,new O(7,116),new O(7,117)),new Z(28,new O(21,45),new O(7,46)),new Z(30,new O(1,23),new O(37,24)),new Z(30,new O(19,15),new O(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new Z(30,new O(5,115),new O(10,116)),new Z(28,new O(19,47),new O(10,48)),new Z(30,new O(15,24),new O(25,25)),new Z(30,new O(23,15),new O(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new Z(30,new O(13,115),new O(3,116)),new Z(28,new O(2,46),new O(29,47)),new Z(30,new O(42,24),new O(1,25)),new Z(30,new O(23,15),new O(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new Z(30,new O(17,115)),new Z(28,new O(10,46),new O(23,47)),new Z(30,new O(10,24),new O(35,25)),new Z(30,new O(19,15),new O(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new Z(30,new O(17,115),new O(1,116)),new Z(28,new O(14,46),new O(21,47)),new Z(30,new O(29,24),new O(19,25)),new Z(30,new O(11,15),new O(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new Z(30,new O(13,115),new O(6,116)),new Z(28,new O(14,46),new O(23,47)),new Z(30,new O(44,24),new O(7,25)),new Z(30,new O(59,16),new O(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new Z(30,new O(12,121),new O(7,122)),new Z(28,new O(12,47),new O(26,48)),new Z(30,new O(39,24),new O(14,25)),new Z(30,new O(22,15),new O(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new Z(30,new O(6,121),new O(14,122)),new Z(28,new O(6,47),new O(34,48)),new Z(30,new O(46,24),new O(10,25)),new Z(30,new O(2,15),new O(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new Z(30,new O(17,122),new O(4,123)),new Z(28,new O(29,46),new O(14,47)),new Z(30,new O(49,24),new O(10,25)),new Z(30,new O(24,15),new O(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new Z(30,new O(4,122),new O(18,123)),new Z(28,new O(13,46),new O(32,47)),new Z(30,new O(48,24),new O(14,25)),new Z(30,new O(42,15),new O(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new Z(30,new O(20,117),new O(4,118)),new Z(28,new O(40,47),new O(7,48)),new Z(30,new O(43,24),new O(22,25)),new Z(30,new O(10,15),new O(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new Z(30,new O(19,118),new O(6,119)),new Z(28,new O(18,47),new O(31,48)),new Z(30,new O(34,24),new O(34,25)),new Z(30,new O(20,15),new O(61,16)))],t}(),Wt;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Wt||(Wt={}));var jx=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)},t.values=new Map([[Wt.DATA_MASK_000,new t(Wt.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Wt.DATA_MASK_001,new t(Wt.DATA_MASK_001,function(e,r){return(e&1)===0})],[Wt.DATA_MASK_010,new t(Wt.DATA_MASK_010,function(e,r){return r%3===0})],[Wt.DATA_MASK_011,new t(Wt.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Wt.DATA_MASK_100,new t(Wt.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Wt.DATA_MASK_101,new t(Wt.DATA_MASK_101,function(e,r){return e*r%6===0})],[Wt.DATA_MASK_110,new t(Wt.DATA_MASK_110,function(e,r){return e*r%6<3})],[Wt.DATA_MASK_111,new t(Wt.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),lS=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new xe;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var a=this.bitMatrix.getHeight(),s=0,l=a-7,n=a-1;n>=l;n--)s=this.copyBit(8,n,s);for(var r=a-8;r<a;r++)s=this.copyBit(r,8,s);if(this.parsedFormatInfo=ug.decodeFormatInformation(e,s),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new xe},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Ja.getVersionForNumber(r);for(var n=0,a=e-11,s=5;s>=0;s--)for(var l=e-9;l>=a;l--)n=this.copyBit(l,s,n);var d=Ja.decodeVersionInformation(n);if(d!==null&&d.getDimensionForVersion()===e)return this.parsedVersion=d,d;n=0;for(var l=5;l>=0;l--)for(var s=e-9;s>=a;s--)n=this.copyBit(l,s,n);if(d=Ja.decodeVersionInformation(n),d!==null&&d.getDimensionForVersion()===e)return this.parsedVersion=d,d;throw new xe},t.prototype.copyBit=function(e,r,n){var a=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return a?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=jx.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);for(var s=r.buildFunctionPattern(),l=!0,d=new Uint8Array(r.getTotalCodewords()),h=0,m=0,p=0,v=a-1;v>0;v-=2){v===6&&v--;for(var y=0;y<a;y++)for(var b=l?a-1-y:y,_=0;_<2;_++)s.get(v-_,b)||(p++,m<<=1,this.bitMatrix.get(v-_,b)&&(m|=1),p===8&&(d[h++]=m,p=0,m=0));l=!l}if(h!==r.getTotalCodewords())throw new xe;return d},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=jx.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var a=r+1,s=e.getHeight();a<s;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))},t}(),Ox=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cS=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var a,s,l,d;if(e.length!==r.getTotalCodewords())throw new Te;var h=r.getECBlocksForLevel(n),m=0,p=h.getECBlocks();try{for(var v=Ox(p),y=v.next();!y.done;y=v.next()){var b=y.value;m+=b.getCount()}}catch(me){a={error:me}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}var _=new Array(m),w=0;try{for(var E=Ox(p),j=E.next();!j.done;j=E.next())for(var b=j.value,A=0;A<b.getCount();A++){var C=b.getDataCodewords(),D=h.getECCodewordsPerBlock()+C;_[w++]=new t(C,new Uint8Array(D))}}catch(me){l={error:me}}finally{try{j&&!j.done&&(d=E.return)&&d.call(E)}finally{if(l)throw l.error}}for(var R=_[0].codewords.length,L=_.length-1;L>=0;){var $=_[L].codewords.length;if($===R)break;L--}L++;for(var W=R-h.getECCodewordsPerBlock(),J=0,A=0;A<W;A++)for(var ae=0;ae<w;ae++)_[ae].codewords[A]=e[J++];for(var ae=L;ae<w;ae++)_[ae].codewords[W]=e[J++];for(var be=_[0].codewords.length,A=W;A<be;A++)for(var ae=0;ae<w;ae++){var ce=ae<L?A:A+1;_[ae].codewords[ce]=e[J++]}return _},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),tn;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(tn||(tn={}));var vt=function(){function t(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,t.FOR_BITS.set(a,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new Te;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(tn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(tn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(tn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(tn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(tn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(tn.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(tn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(tn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(tn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(tn.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),uS=function(){function t(){}return t.decode=function(e,r,n,a){var s=new cg(e),l=new Fe,d=new Array,h=-1,m=-1;try{var p=null,v=!1,y=void 0;do{if(s.available()<4)y=vt.TERMINATOR;else{var b=s.readBits(4);y=vt.forBits(b)}switch(y){case vt.TERMINATOR:break;case vt.FNC1_FIRST_POSITION:case vt.FNC1_SECOND_POSITION:v=!0;break;case vt.STRUCTURED_APPEND:if(s.available()<16)throw new xe;h=s.readBits(8),m=s.readBits(8);break;case vt.ECI:var _=t.parseECIValue(s);if(p=Vt.getCharacterSetECIByValue(_),p===null)throw new xe;break;case vt.HANZI:var w=s.readBits(4),E=s.readBits(y.getCharacterCountBits(r));w===t.GB2312_SUBSET&&t.decodeHanziSegment(s,l,E);break;default:var j=s.readBits(y.getCharacterCountBits(r));switch(y){case vt.NUMERIC:t.decodeNumericSegment(s,l,j);break;case vt.ALPHANUMERIC:t.decodeAlphanumericSegment(s,l,j,v);break;case vt.BYTE:t.decodeByteSegment(s,l,j,p,d,a);break;case vt.KANJI:t.decodeKanjiSegment(s,l,j);break;default:throw new xe}break}}while(y!==vt.TERMINATOR)}catch{throw new xe}return new Nc(e,l.toString(),d.length===0?null:d,n===null?null:n.toString(),h,m)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new xe;for(var a=new Uint8Array(2*n),s=0;n>0;){var l=e.readBits(13),d=l/96<<8&4294967295|l%96;d<959?d+=41377:d+=42657,a[s]=d>>8&255,a[s+1]=d&255,s+=2,n--}try{r.append(nn.decode(a,$e.GB2312))}catch(h){throw new xe(h)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new xe;for(var a=new Uint8Array(2*n),s=0;n>0;){var l=e.readBits(13),d=l/192<<8&4294967295|l%192;d<7936?d+=33088:d+=49472,a[s]=d>>8,a[s+1]=d,s+=2,n--}try{r.append(nn.decode(a,$e.SHIFT_JIS))}catch(h){throw new xe(h)}},t.decodeByteSegment=function(e,r,n,a,s,l){if(8*n>e.available())throw new xe;for(var d=new Uint8Array(n),h=0;h<n;h++)d[h]=e.readBits(8);var m;a===null?m=$e.guessEncoding(d,l):m=a.getName();try{r.append(nn.decode(d,m))}catch(p){throw new xe(p)}s.push(d)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new xe;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,a){for(var s=r.length();n>1;){if(e.available()<11)throw new xe;var l=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(l/45))),r.append(t.toAlphaNumericChar(l%45)),n-=2}if(n===1){if(e.available()<6)throw new xe;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(a)for(var d=s;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new xe;var a=e.readBits(10);if(a>=1e3)throw new xe;r.append(t.toAlphaNumericChar(Math.floor(a/100))),r.append(t.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(t.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new xe;var s=e.readBits(7);if(s>=100)throw new xe;r.append(t.toAlphaNumericChar(Math.floor(s/10))),r.append(t.toAlphaNumericChar(s%10))}else if(n===1){if(e.available()<4)throw new xe;var l=e.readBits(4);if(l>=10)throw new xe;r.append(t.toAlphaNumericChar(l))}},t.parseECIValue=function(e){var r=e.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var a=e.readBits(16);return(r&31)<<16&4294967295|a}throw new xe},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),dg=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),Tx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dS=function(){function t(){this.rsDecoder=new Ec(Dr.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(On.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new lS(e),a=null;try{return this.decodeBitMatrixParser(n,r)}catch(l){a=l}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var s=this.decodeBitMatrixParser(n,r);return s.setOther(new dg(!0)),s}catch(l){throw a!==null?a:l}},t.prototype.decodeBitMatrixParser=function(e,r){var n,a,s,l,d=e.readVersion(),h=e.readFormatInformation().getErrorCorrectionLevel(),m=e.readCodewords(),p=cS.getDataBlocks(m,d,h),v=0;try{for(var y=Tx(p),b=y.next();!b.done;b=y.next()){var _=b.value;v+=_.getNumDataCodewords()}}catch(L){n={error:L}}finally{try{b&&!b.done&&(a=y.return)&&a.call(y)}finally{if(n)throw n.error}}var w=new Uint8Array(v),E=0;try{for(var j=Tx(p),A=j.next();!A.done;A=j.next()){var _=A.value,C=_.getCodewords(),D=_.getNumDataCodewords();this.correctErrors(C,D);for(var R=0;R<D;R++)w[E++]=C[R]}}catch(L){s={error:L}}finally{try{A&&!A.done&&(l=j.return)&&l.call(j)}finally{if(s)throw s.error}}return uS.decode(w,d,h,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Jt}for(var a=0;a<r;a++)e[a]=n[a]},t}(),fS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hS=function(t){fS(e,t);function e(r,n,a){var s=t.call(this,r,n)||this;return s.estimatedModuleSize=a,s}return e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=(this.getX()+n)/2,l=(this.getY()+r)/2,d=(this.estimatedModuleSize+a)/2;return new e(s,l,d)},e}(Ee),mS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pS=function(){function t(e,r,n,a,s,l,d){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=s,this.moduleSize=l,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,a=e+n,s=this.startY+r/2,l=new Int32Array(3),d=this.image,h=0;h<r;h++){var m=s+((h&1)===0?Math.floor((h+1)/2):-Math.floor((h+1)/2));l[0]=0,l[1]=0,l[2]=0;for(var p=e;p<a&&!d.get(p,m);)p++;for(var v=0;p<a;){if(d.get(p,m))if(v===1)l[1]++;else if(v===2){if(this.foundPatternCross(l)){var y=this.handlePossibleCenter(l,m,p);if(y!==null)return y}l[0]=l[2],l[1]=1,l[2]=0,v=1}else l[++v]++;else v===1&&v++,l[v]++;p++}if(this.foundPatternCross(l)){var y=this.handlePossibleCenter(l,m,a);if(y!==null)return y}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,a){var s=this.image,l=s.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;for(var h=e;h>=0&&s.get(r,h)&&d[1]<=n;)d[1]++,h--;if(h<0||d[1]>n)return NaN;for(;h>=0&&!s.get(r,h)&&d[0]<=n;)d[0]++,h--;if(d[0]>n)return NaN;for(h=e+1;h<l&&s.get(r,h)&&d[1]<=n;)d[1]++,h++;if(h===l||d[1]>n)return NaN;for(;h<l&&!s.get(r,h)&&d[2]<=n;)d[2]++,h++;if(d[2]>n)return NaN;var m=d[0]+d[1]+d[2];return 5*Math.abs(m-a)>=2*a?NaN:this.foundPatternCross(d)?t.centerFromEnd(d,h):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var a,s,l=e[0]+e[1]+e[2],d=t.centerFromEnd(e,n),h=this.crossCheckVertical(r,d,2*e[1],l);if(!isNaN(h)){var m=(e[0]+e[1]+e[2])/3;try{for(var p=mS(this.possibleCenters),v=p.next();!v.done;v=p.next()){var y=v.value;if(y.aboutEquals(m,h,d))return y.combineEstimate(h,d,m)}}catch(_){a={error:_}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}var b=new hS(d,h,m);this.possibleCenters.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return null},t}(),xS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vS=function(t){xS(e,t);function e(r,n,a,s){var l=t.call(this,r,n)||this;return l.estimatedModuleSize=a,l.count=s,s===void 0&&(l.count=1),l}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,a){if(Math.abs(n-this.getY())<=r&&Math.abs(a-this.getX())<=r){var s=Math.abs(r-this.estimatedModuleSize);return s<=1||s<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,a){var s=this.count+1,l=(this.count*this.getX()+n)/s,d=(this.count*this.getY()+r)/s,h=(this.count*this.estimatedModuleSize+a)/s;return new e(l,d,h,s)},e}(Ee),gS=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),ao=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yS=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(bt.TRY_HARDER)!==void 0,n=e!=null&&e.get(bt.PURE_BARCODE)!==void 0,a=this.image,s=a.getHeight(),l=a.getWidth(),d=Math.floor(3*s/(4*t.MAX_MODULES));(d<t.MIN_SKIP||r)&&(d=t.MIN_SKIP);for(var h=!1,m=new Int32Array(5),p=d-1;p<s&&!h;p+=d){m[0]=0,m[1]=0,m[2]=0,m[3]=0,m[4]=0;for(var v=0,y=0;y<l;y++)if(a.get(y,p))(v&1)===1&&v++,m[v]++;else if((v&1)===0)if(v===4)if(t.foundPatternCross(m)){var b=this.handlePossibleCenter(m,p,y,n);if(b===!0)if(d=2,this.hasSkipped===!0)h=this.haveMultiplyConfirmedCenters();else{var _=this.findRowSkip();_>m[2]&&(p+=_-m[2]-d,y=l-1)}else{m[0]=m[2],m[1]=m[3],m[2]=m[4],m[3]=1,m[4]=0,v=3;continue}v=0,m[0]=0,m[1]=0,m[2]=0,m[3]=0,m[4]=0}else m[0]=m[2],m[1]=m[3],m[2]=m[4],m[3]=1,m[4]=0,v=3;else m[++v]++;else m[v]++;if(t.foundPatternCross(m)){var b=this.handlePossibleCenter(m,p,l,n);b===!0&&(d=m[0],this.hasSkipped&&(h=this.haveMultiplyConfirmedCenters()))}}var w=this.selectBestPatterns();return Ee.orderBestPatterns(w),new gS(w)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var a=e[n];if(a===0)return!1;r+=a}if(r<7)return!1;var s=r/7,l=s/2;return Math.abs(s-e[0])<l&&Math.abs(s-e[1])<l&&Math.abs(3*s-e[2])<3*l&&Math.abs(s-e[3])<l&&Math.abs(s-e[4])<l},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,a){for(var s=this.getCrossCheckStateCount(),l=0,d=this.image;e>=l&&r>=l&&d.get(r-l,e-l);)s[2]++,l++;if(e<l||r<l)return!1;for(;e>=l&&r>=l&&!d.get(r-l,e-l)&&s[1]<=n;)s[1]++,l++;if(e<l||r<l||s[1]>n)return!1;for(;e>=l&&r>=l&&d.get(r-l,e-l)&&s[0]<=n;)s[0]++,l++;if(s[0]>n)return!1;var h=d.getHeight(),m=d.getWidth();for(l=1;e+l<h&&r+l<m&&d.get(r+l,e+l);)s[2]++,l++;if(e+l>=h||r+l>=m)return!1;for(;e+l<h&&r+l<m&&!d.get(r+l,e+l)&&s[3]<n;)s[3]++,l++;if(e+l>=h||r+l>=m||s[3]>=n)return!1;for(;e+l<h&&r+l<m&&d.get(r+l,e+l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return!1;var p=s[0]+s[1]+s[2]+s[3]+s[4];return Math.abs(p-a)<2*a&&t.foundPatternCross(s)},t.prototype.crossCheckVertical=function(e,r,n,a){for(var s=this.image,l=s.getHeight(),d=this.getCrossCheckStateCount(),h=e;h>=0&&s.get(r,h);)d[2]++,h--;if(h<0)return NaN;for(;h>=0&&!s.get(r,h)&&d[1]<=n;)d[1]++,h--;if(h<0||d[1]>n)return NaN;for(;h>=0&&s.get(r,h)&&d[0]<=n;)d[0]++,h--;if(d[0]>n)return NaN;for(h=e+1;h<l&&s.get(r,h);)d[2]++,h++;if(h===l)return NaN;for(;h<l&&!s.get(r,h)&&d[3]<n;)d[3]++,h++;if(h===l||d[3]>=n)return NaN;for(;h<l&&s.get(r,h)&&d[4]<n;)d[4]++,h++;if(d[4]>=n)return NaN;var m=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(m-a)>=2*a?NaN:t.foundPatternCross(d)?t.centerFromEnd(d,h):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,a){for(var s=this.image,l=s.getWidth(),d=this.getCrossCheckStateCount(),h=e;h>=0&&s.get(h,r);)d[2]++,h--;if(h<0)return NaN;for(;h>=0&&!s.get(h,r)&&d[1]<=n;)d[1]++,h--;if(h<0||d[1]>n)return NaN;for(;h>=0&&s.get(h,r)&&d[0]<=n;)d[0]++,h--;if(d[0]>n)return NaN;for(h=e+1;h<l&&s.get(h,r);)d[2]++,h++;if(h===l)return NaN;for(;h<l&&!s.get(h,r)&&d[3]<n;)d[3]++,h++;if(h===l||d[3]>=n)return NaN;for(;h<l&&s.get(h,r)&&d[4]<n;)d[4]++,h++;if(d[4]>=n)return NaN;var m=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(m-a)>=a?NaN:t.foundPatternCross(d)?t.centerFromEnd(d,h):NaN},t.prototype.handlePossibleCenter=function(e,r,n,a){var s=e[0]+e[1]+e[2]+e[3]+e[4],l=t.centerFromEnd(e,n),d=this.crossCheckVertical(r,Math.floor(l),e[2],s);if(!isNaN(d)&&(l=this.crossCheckHorizontal(Math.floor(l),Math.floor(d),e[2],s),!isNaN(l)&&(!a||this.crossCheckDiagonal(Math.floor(d),Math.floor(l),e[2],s)))){for(var h=s/7,m=!1,p=this.possibleCenters,v=0,y=p.length;v<y;v++){var b=p[v];if(b.aboutEquals(h,d,l)){p[v]=b.combineEstimate(d,l,h),m=!0;break}}if(!m){var _=new vS(l,d,h);p.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var a=null;try{for(var s=ao(this.possibleCenters),l=s.next();!l.done;l=s.next()){var d=l.value;if(d.getCount()>=t.CENTER_QUORUM)if(a==null)a=d;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-d.getX())-Math.abs(a.getY()-d.getY()))/2)}}catch(h){e={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,a,s=0,l=0,d=this.possibleCenters.length;try{for(var h=ao(this.possibleCenters),m=h.next();!m.done;m=h.next()){var p=m.value;p.getCount()>=t.CENTER_QUORUM&&(s++,l+=p.getEstimatedModuleSize())}}catch(w){e={error:w}}finally{try{m&&!m.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}if(s<3)return!1;var v=l/d,y=0;try{for(var b=ao(this.possibleCenters),_=b.next();!_.done;_=b.next()){var p=_.value;y+=Math.abs(p.getEstimatedModuleSize()-v)}}catch(w){n={error:w}}finally{try{_&&!_.done&&(a=b.return)&&a.call(b)}finally{if(n)throw n.error}}return y<=.05*l},t.prototype.selectBestPatterns=function(){var e,r,n,a,s=this.possibleCenters.length;if(s<3)throw new ee;var l=this.possibleCenters,d;if(s>3){var h=0,m=0;try{for(var p=ao(this.possibleCenters),v=p.next();!v.done;v=p.next()){var y=v.value,b=y.getEstimatedModuleSize();h+=b,m+=b*b}}catch(R){e={error:R}}finally{try{v&&!v.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}d=h/s;var _=Math.sqrt(m/s-d*d);l.sort(function(R,L){var $=Math.abs(L.getEstimatedModuleSize()-d),W=Math.abs(R.getEstimatedModuleSize()-d);return $<W?-1:$>W?1:0});for(var w=Math.max(.2*d,_),E=0;E<l.length&&l.length>3;E++){var j=l[E];Math.abs(j.getEstimatedModuleSize()-d)>w&&(l.splice(E,1),E--)}}if(l.length>3){var h=0;try{for(var A=ao(l),C=A.next();!C.done;C=A.next()){var D=C.value;h+=D.getEstimatedModuleSize()}}catch(L){n={error:L}}finally{try{C&&!C.done&&(a=A.return)&&a.call(A)}finally{if(n)throw n.error}}d=h/l.length,l.sort(function(L,$){if($.getCount()===L.getCount()){var W=Math.abs($.getEstimatedModuleSize()-d),J=Math.abs(L.getEstimatedModuleSize()-d);return W<J?1:W>J?-1:0}else return $.getCount()-L.getCount()}),l.splice(3)}return[l[0],l[1],l[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),bS=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(bt.NEED_RESULT_POINT_CALLBACK);var r=new yS(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),s=this.calculateModuleSize(r,n,a);if(s<1)throw new ee("No pattern found in proccess finder.");var l=t.computeDimension(r,n,a,s),d=Ja.getProvisionalVersionForDimension(l),h=d.getDimensionForVersion()-7,m=null;if(d.getAlignmentPatternCenters().length>0)for(var p=n.getX()-r.getX()+a.getX(),v=n.getY()-r.getY()+a.getY(),y=1-3/h,b=Math.floor(r.getX()+y*(p-r.getX())),_=Math.floor(r.getY()+y*(v-r.getY())),w=4;w<=16;w<<=1)try{m=this.findAlignmentInRegion(s,b,_,w);break}catch(C){if(!(C instanceof ee))throw C}var E=t.createTransform(r,n,a,m,l),j=t.sampleGrid(this.image,E,l),A;return m===null?A=[a,r,n]:A=[a,r,n,m],new i0(j,A)},t.createTransform=function(e,r,n,a,s){var l=s-3.5,d,h,m,p;return a!==null?(d=a.getX(),h=a.getY(),m=l-3,p=m):(d=r.getX()-e.getX()+n.getX(),h=r.getY()-e.getY()+n.getY(),m=l,p=l),ig.quadrilateralToQuadrilateral(3.5,3.5,l,3.5,m,p,3.5,l,e.getX(),e.getY(),r.getX(),r.getY(),d,h,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var a=s0.getInstance();return a.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,a){var s=We.round(Ee.distance(e,r)/a),l=We.round(Ee.distance(e,n)/a),d=Math.floor((s+l)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new ee("Dimensions could be not found.")}return d},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,a){var s=this.sizeOfBlackWhiteBlackRun(e,r,n,a),l=1,d=e-(n-e);d<0?(l=e/(e-d),d=0):d>=this.image.getWidth()&&(l=(this.image.getWidth()-1-e)/(d-e),d=this.image.getWidth()-1);var h=Math.floor(r-(a-r)*l);return l=1,h<0?(l=r/(r-h),h=0):h>=this.image.getHeight()&&(l=(this.image.getHeight()-1-r)/(h-r),h=this.image.getHeight()-1),d=Math.floor(e+(d-e)*l),s+=this.sizeOfBlackWhiteBlackRun(e,r,d,h),s-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,a){var s=Math.abs(a-r)>Math.abs(n-e);if(s){var l=e;e=r,r=l,l=n,n=a,a=l}for(var d=Math.abs(n-e),h=Math.abs(a-r),m=-d/2,p=e<n?1:-1,v=r<a?1:-1,y=0,b=n+p,_=e,w=r;_!==b;_+=p){var E=s?w:_,j=s?_:w;if(y===1===this.image.get(E,j)){if(y===2)return We.distance(_,w,e,r);y++}if(m+=h,m>0){if(w===a)break;w+=v,m-=d}}return y===2?We.distance(n+p,a,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,a){var s=Math.floor(a*e),l=Math.max(0,r-s),d=Math.min(this.image.getWidth()-1,r+s);if(d-l<e*3)throw new ee("Alignment top exceeds estimated module size.");var h=Math.max(0,n-s),m=Math.min(this.image.getHeight()-1,n+s);if(m-h<e*3)throw new ee("Alignment bottom exceeds estimated module size.");var p=new pS(this.image,l,h,d-l,m-h,e,this.resultPointCallback);return p.find()},t}(),Tf=function(){function t(){this.decoder=new dS}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,a;if(r!=null&&r.get(bt.PURE_BARCODE)!==void 0){var s=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(s,r),a=t.NO_POINTS}else{var l=new bS(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(l.getBits(),r),a=l.getPoints()}n.getOther()instanceof dg&&n.getOther().applyMirroredCorrection(a);var d=new pr(n.getText(),n.getRawBytes(),void 0,a,Oe.QR_CODE,void 0),h=n.getByteSegments();h!==null&&d.putMetadata(lr.BYTE_SEGMENTS,h);var m=n.getECLevel();return m!==null&&d.putMetadata(lr.ERROR_CORRECTION_LEVEL,m),n.hasStructuredAppend()&&(d.putMetadata(lr.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),d.putMetadata(lr.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),d},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new ee;var a=this.moduleSize(r,e),s=r[1],l=n[1],d=r[0],h=n[0];if(d>=h||s>=l)throw new ee;if(l-s!==h-d&&(h=d+(l-s),h>=e.getWidth()))throw new ee;var m=Math.round((h-d+1)/a),p=Math.round((l-s+1)/a);if(m<=0||p<=0)throw new ee;if(p!==m)throw new ee;var v=Math.floor(a/2);s+=v,d+=v;var y=d+Math.floor((m-1)*a)-h;if(y>0){if(y>v)throw new ee;d-=y}var b=s+Math.floor((p-1)*a)-l;if(b>0){if(b>v)throw new ee;s-=b}for(var _=new On(m,p),w=0;w<p;w++)for(var E=s+Math.floor(w*a),j=0;j<m;j++)e.get(d+Math.floor(j*a),E)&&_.set(j,w);return _},t.moduleSize=function(e,r){for(var n=r.getHeight(),a=r.getWidth(),s=e[0],l=e[1],d=!0,h=0;s<a&&l<n;){if(d!==r.get(s,l)){if(++h===5)break;d=!d}s++,l++}if(s===a||l===n)throw new ee;return(s-e[0])/7},t.NO_POINTS=new Array,t}(),_S=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ye=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return We.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var a=new Int32Array(e.length),s=0;try{for(var l=_S(e),d=l.next();!d.done;d=l.next()){var h=d.value;a[s++]=h}}catch(m){r={error:m}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return a},t.getCodeword=function(e){var r=Ht.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),wS=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),AS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NS=function(){function t(){}return t.detectMultiple=function(e,r,n){var a=e.getBlackMatrix(),s=t.detect(n,a);return s.length||(a=a.clone(),a.rotate180(),s=t.detect(n,a)),new wS(a,s)},t.detect=function(e,r){for(var n,a,s=new Array,l=0,d=0,h=!1;l<r.getHeight();){var m=t.findVertices(r,l,d);if(m[0]==null&&m[3]==null){if(!h)break;h=!1,d=0;try{for(var p=(n=void 0,AS(s)),v=p.next();!v.done;v=p.next()){var y=v.value;y[1]!=null&&(l=Math.trunc(Math.max(l,y[1].getY()))),y[3]!=null&&(l=Math.max(l,Math.trunc(y[3].getY())))}}catch(b){n={error:b}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}l+=t.ROW_STEP;continue}if(h=!0,s.push(m),!e)break;m[2]!=null?(d=Math.trunc(m[2].getX()),l=Math.trunc(m[2].getY())):(d=Math.trunc(m[4].getX()),l=Math.trunc(m[4].getY()))}return s},t.findVertices=function(e,r,n){var a=e.getHeight(),s=e.getWidth(),l=new Array(8);return t.copyToResult(l,t.findRowsWithPattern(e,a,s,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),l[4]!=null&&(n=Math.trunc(l[4].getX()),r=Math.trunc(l[4].getY())),t.copyToResult(l,t.findRowsWithPattern(e,a,s,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),l},t.copyToResult=function(e,r,n){for(var a=0;a<n.length;a++)e[n[a]]=r[a]},t.findRowsWithPattern=function(e,r,n,a,s,l){for(var d=new Array(4),h=!1,m=new Int32Array(l.length);a<r;a+=t.ROW_STEP){var p=t.findGuardPattern(e,s,a,n,!1,l,m);if(p!=null){for(;a>0;){var v=t.findGuardPattern(e,s,--a,n,!1,l,m);if(v!=null)p=v;else{a++;break}}d[0]=new Ee(p[0],a),d[1]=new Ee(p[1],a),h=!0;break}}var y=a+1;if(h){for(var b=0,v=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);y<r;y++){var p=t.findGuardPattern(e,v[0],y,n,!1,l,m);if(p!=null&&Math.abs(v[0]-p[0])<t.MAX_PATTERN_DRIFT&&Math.abs(v[1]-p[1])<t.MAX_PATTERN_DRIFT)v=p,b=0;else{if(b>t.SKIPPED_ROW_COUNT_MAX)break;b++}}y-=b+1,d[2]=new Ee(v[0],y),d[3]=new Ee(v[1],y)}return y-a<t.BARCODE_MIN_HEIGHT&&Ht.fill(d,null),d},t.findGuardPattern=function(e,r,n,a,s,l,d){Ht.fillWithin(d,0,d.length,0);for(var h=r,m=0;e.get(h,n)&&h>0&&m++<t.MAX_PIXEL_DRIFT;)h--;for(var p=h,v=0,y=l.length,b=s;p<a;p++){var _=e.get(p,n);if(_!==b)d[v]++;else{if(v===y-1){if(t.patternMatchVariance(d,l,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([h,p]);h+=d[0]+d[1],pt.arraycopy(d,2,d,0,v-1),d[v-1]=0,d[v]=0,v--}else v++;d[v]=1,b=!b}}return v===y-1&&t.patternMatchVariance(d,l,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([h,p-1]):null},t.patternMatchVariance=function(e,r,n){for(var a=e.length,s=0,l=0,d=0;d<a;d++)s+=e[d],l+=r[d];if(s<l)return 1/0;var h=s/l;n*=h;for(var m=0,p=0;p<a;p++){var v=e[p],y=r[p]*h,b=v>y?v-y:y-v;if(b>n)return 1/0;m+=b}return m/s},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),ES=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wa=function(){function t(e,r){if(r.length===0)throw new Te;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var a=1;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),pt.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var a=0;try{for(var s=ES(this.coefficients),l=s.next();!l.done;l=s.next()){var d=l.value;a=this.field.add(a,d)}}catch(v){r={error:v}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a}for(var h=this.coefficients[0],m=this.coefficients.length,p=1;p<m;p++)h=this.field.add(this.field.multiply(e,h),this.coefficients[p]);return h},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new Te("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var a=r;r=n,n=a}var s=new Int32Array(n.length),l=n.length-r.length;pt.arraycopy(n,0,s,0,l);for(var d=l;d<n.length;d++)s[d]=this.field.add(r[d-l],n[d]);return new t(this.field,s)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Te("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Te("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,a=e.coefficients,s=a.length,l=new Int32Array(n+s-1),d=0;d<n;d++)for(var h=r[d],m=0;m<s;m++)l[d+m]=this.field.add(l[d+m],this.field.multiply(h,a[m]));return new t(this.field,l)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new Te;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,a=new Int32Array(n+e),s=0;s<n;s++)a[s]=this.field.multiply(this.coefficients[s],r);return new t(this.field,a)},t.prototype.toString=function(){for(var e=new Fe,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),SS=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new Te;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new ag;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),CS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jS=function(t){CS(e,t);function e(r,n){var a=t.call(this)||this;a.modulus=r,a.expTable=new Int32Array(r),a.logTable=new Int32Array(r);for(var s=1,l=0;l<r;l++)a.expTable[l]=s,s=s*n%r;for(var l=0;l<r-1;l++)a.logTable[a.expTable[l]]=l;return a.zero=new Wa(a,new Int32Array([0])),a.one=new Wa(a,new Int32Array([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new Te;if(n===0)return this.zero;var a=new Int32Array(r+1);return a[0]=n,new Wa(this,a)},e.PDF417_GF=new e(Ye.NUMBER_OF_CODEWORDS,3),e}(SS),OS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TS=function(){function t(){this.field=jS.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var a,s,l=new Wa(this.field,e),d=new Int32Array(r),h=!1,m=r;m>0;m--){var p=l.evaluateAt(this.field.exp(m));d[r-m]=p,p!==0&&(h=!0)}if(!h)return 0;var v=this.field.getOne();if(n!=null)try{for(var y=OS(n),b=y.next();!b.done;b=y.next()){var _=b.value,w=this.field.exp(e.length-1-_),E=new Wa(this.field,new Int32Array([this.field.subtract(0,w),1]));v=v.multiply(E)}}catch(W){a={error:W}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}for(var j=new Wa(this.field,d),A=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),j,r),C=A[0],D=A[1],R=this.findErrorLocations(C),L=this.findErrorMagnitudes(D,C,R),m=0;m<R.length;m++){var $=e.length-1-this.field.log(R[m]);if($<0)throw Jt.getChecksumInstance();e[$]=this.field.subtract(e[$],L[m])}return R.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var a=e;e=r,r=a}for(var s=e,l=r,d=this.field.getZero(),h=this.field.getOne();l.getDegree()>=Math.round(n/2);){var m=s,p=d;if(s=l,d=h,s.isZero())throw Jt.getChecksumInstance();l=m;for(var v=this.field.getZero(),y=s.getCoefficient(s.getDegree()),b=this.field.inverse(y);l.getDegree()>=s.getDegree()&&!l.isZero();){var _=l.getDegree()-s.getDegree(),w=this.field.multiply(l.getCoefficient(l.getDegree()),b);v=v.add(this.field.buildMonomial(_,w)),l=l.subtract(s.multiplyByMonomial(_,w))}h=v.multiply(d).subtract(p).negative()}var E=h.getCoefficient(0);if(E===0)throw Jt.getChecksumInstance();var j=this.field.inverse(E),A=h.multiply(j),C=l.multiply(j);return[A,C]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),a=0,s=1;s<this.field.getSize()&&a<r;s++)e.evaluateAt(s)===0&&(n[a]=this.field.inverse(s),a++);if(a!==r)throw Jt.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var a=r.getDegree(),s=new Int32Array(a),l=1;l<=a;l++)s[a-l]=this.field.multiply(l,r.getCoefficient(l));for(var d=new Wa(this.field,s),h=n.length,m=new Int32Array(h),l=0;l<h;l++){var p=this.field.inverse(n[l]),v=this.field.subtract(0,e.evaluateAt(p)),y=this.field.inverse(d.evaluateAt(p));m[l]=this.field.multiply(v,y)}return m},t}(),Df=function(){function t(e,r,n,a,s){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,a,s)}return t.prototype.constructor_1=function(e,r,n,a,s){var l=r==null||n==null,d=a==null||s==null;if(l&&d)throw new ee;l?(r=new Ee(0,a.getY()),n=new Ee(0,s.getY())):d&&(a=new Ee(e.getWidth()-1,r.getY()),s=new Ee(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=s,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),s.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),s.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var a=this.topLeft,s=this.bottomLeft,l=this.topRight,d=this.bottomRight;if(e>0){var h=n?this.topLeft:this.topRight,m=Math.trunc(h.getY()-e);m<0&&(m=0);var p=new Ee(h.getX(),m);n?a=p:l=p}if(r>0){var v=n?this.bottomLeft:this.bottomRight,y=Math.trunc(v.getY()+r);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);var b=new Ee(v.getX(),y);n?s=b:d=b}return new t(this.image,a,s,l,d)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),DS=function(){function t(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),l0=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function a(l,d,h,m,p,v){if(l==="%%")return"%";if(r[++n]!==void 0){l=m?parseInt(m.substr(1)):void 0;var y=p?parseInt(p.substr(1)):void 0,b;switch(v){case"s":b=r[n];break;case"c":b=r[n][0];break;case"f":b=parseFloat(r[n]).toFixed(l);break;case"p":b=parseFloat(r[n]).toPrecision(l);break;case"e":b=parseFloat(r[n]).toExponential(l);break;case"x":b=parseInt(r[n]).toString(y||16);break;case"d":b=parseFloat(parseInt(r[n],y||10).toPrecision(l)).toFixed(0);break}b=typeof b=="object"?JSON.stringify(b):(+b).toString(y);for(var _=parseInt(h),w=h&&h[0]+""=="0"?"0":" ";b.length<_;)b=d!==void 0?b+w:w+b;return b}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,a)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),RS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fg=function(){function t(e){this.boundingBox=new Df(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new l0,a=0;try{for(var s=RS(this.codewords),l=s.next();!l.done;l=s.next()){var d=l.value;if(d==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,d.getRowNumber(),d.getValue())}}catch(h){e={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),IS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},MS=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),a,s=[],l;try{for(;(e===void 0||e-- >0)&&!(a=n.next()).done;)s.push(a.value)}catch(d){l={error:d}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(l)throw l.error}}return s},uo=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,a=new Array,s=function(v,y){var b={getKey:function(){return v},getValue:function(){return y}};b.getValue()>n?(n=b.getValue(),a=[],a.push(b.getKey())):b.getValue()===n&&a.push(b.getKey())};try{for(var l=IS(this.values.entries()),d=l.next();!d.done;d=l.next()){var h=MS(d.value,2),m=h[0],p=h[1];s(m,p)}}catch(v){e={error:v}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return Ye.toIntArray(a)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),BS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dx=function(t){BS(e,t);function e(r,n){var a=t.call(this,r)||this;return a._isLeft=n,a}return e.prototype.setRowNumbers=function(){var r,n;try{for(var a=rf(this.getCodewords()),s=a.next();!s.done;s=a.next()){var l=s.value;l?.setRowNumberAsRowIndicatorColumn()}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var a=this.getBoundingBox(),s=this._isLeft?a.getTopLeft():a.getTopRight(),l=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=-1,p=1,v=0,y=d;y<h;y++)if(n[y]!=null){var b=n[y],_=b.getRowNumber()-m;if(_===0)v++;else if(_===1)p=Math.max(p,v),v=1,m=b.getRowNumber();else if(_<0||b.getRowNumber()>=r.getRowCount()||_>y)n[y]=null;else{var w=void 0;p>2?w=(p-2)*_:w=_;for(var E=w>=y,j=1;j<=w&&!E;j++)E=n[y-j]!=null;E?n[y]=null:(m=b.getRowNumber(),v=1)}}},e.prototype.getRowHeights=function(){var r,n,a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);var s=new Int32Array(a.getRowCount());try{for(var l=rf(this.getCodewords()),d=l.next();!d.done;d=l.next()){var h=d.value;if(h!=null){var m=h.getRowNumber();if(m>=s.length)continue;s[m]++}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return s},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),s=this._isLeft?n.getBottomLeft():n.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(a.getY())),d=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=this.getCodewords(),m=-1,p=l;p<d;p++)if(h[p]!=null){var v=h[p];v.setRowNumberAsRowIndicatorColumn();var y=v.getRowNumber()-m;y===0||(y===1?m=v.getRowNumber():v.getRowNumber()>=r.getRowCount()?h[p]=null:m=v.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var r,n,a=this.getCodewords(),s=new uo,l=new uo,d=new uo,h=new uo;try{for(var m=rf(a),p=m.next();!p.done;p=m.next()){var v=p.value;if(v!=null){v.setRowNumberAsRowIndicatorColumn();var y=v.getValue()%30,b=v.getRowNumber();switch(this._isLeft||(b+=2),b%3){case 0:l.setValue(y*3+1);break;case 1:h.setValue(y/3),d.setValue(y%3);break;case 2:s.setValue(y+1);break}}}}catch(w){r={error:w}}finally{try{p&&!p.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}if(s.getValue().length===0||l.getValue().length===0||d.getValue().length===0||h.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+d.getValue()[0]<Ye.MIN_ROWS_IN_BARCODE||l.getValue()[0]+d.getValue()[0]>Ye.MAX_ROWS_IN_BARCODE)return null;var _=new DS(s.getValue()[0],l.getValue()[0],d.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(a,_),_},e.prototype.removeIncorrectCodewords=function(r,n){for(var a=0;a<r.length;a++){var s=r[a];if(r[a]!=null){var l=s.getValue()%30,d=s.getRowNumber();if(d>n.getRowCount()){r[a]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:l*3+1!==n.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(l/3)!==n.getErrorCorrectionLevel()||l%3!==n.getRowCountLowerPart())&&(r[a]=null);break;case 2:l+1!==n.getColumnCount()&&(r[a]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(fg),PS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kS=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ye.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var a=1;a<=this.barcodeColumnCount;a++){var s=this.detectionResultColumns[a].getCodewords()[n];s!=null&&(s.setRowNumber(e[n].getRowNumber()),s.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,l=this.barcodeColumnCount+1;l>0&&s<this.ADJUST_ROW_NUMBER_SKIP;l--){var d=this.detectionResultColumns[l].getCodewords()[n];d!=null&&(s=t.adjustRowNumberIfValid(a,s,d),d.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var a=r[n].getRowNumber(),s=0,l=1;l<this.barcodeColumnCount+1&&s<this.ADJUST_ROW_NUMBER_SKIP;l++){var d=this.detectionResultColumns[l].getCodewords()[n];d!=null&&(s=t.adjustRowNumberIfValid(a,s,d),d.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var a,s;if(this.detectionResultColumns[e-1]!=null){var l=n[r],d=this.detectionResultColumns[e-1].getCodewords(),h=d;this.detectionResultColumns[e+1]!=null&&(h=this.detectionResultColumns[e+1].getCodewords());var m=new Array(14);m[2]=d[r],m[3]=h[r],r>0&&(m[0]=n[r-1],m[4]=d[r-1],m[5]=h[r-1]),r>1&&(m[8]=n[r-2],m[10]=d[r-2],m[11]=h[r-2]),r<n.length-1&&(m[1]=n[r+1],m[6]=d[r+1],m[7]=h[r+1]),r<n.length-2&&(m[9]=n[r+2],m[12]=d[r+2],m[13]=h[r+2]);try{for(var p=PS(m),v=p.next();!v.done;v=p.next()){var y=v.value;if(t.adjustRowNumber(l,y))return}}catch(b){a={error:b}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new l0,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}var s=this.detectionResultColumns[a].getCodewords()[n];if(s==null){r.format("    |   ");continue}r.format(" %3d|%3d",s.getRowNumber(),s.getValue())}r.format("%n")}return r.toString()},t}(),LS=function(){function t(e,r,n,a){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),FS=function(){function t(){}return t.initialize=function(){for(var e=0;e<Ye.SYMBOL_TABLE.length;e++)for(var r=Ye.SYMBOL_TABLE[e],n=r&1,a=0;a<Ye.BARS_IN_MODULE;a++){for(var s=0;(r&1)===n;)s+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Ye.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Ye.BARS_IN_MODULE-a-1]=Math.fround(s/Ye.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=We.sum(e),n=new Int32Array(Ye.BARS_IN_MODULE),a=0,s=0,l=0;l<Ye.MODULES_IN_CODEWORD;l++){var d=r/(2*Ye.MODULES_IN_CODEWORD)+l*r/Ye.MODULES_IN_CODEWORD;s+e[a]<=d&&(s+=e[a],a++),n[a]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Ye.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=We.sum(e),n=new Array(Ye.BARS_IN_MODULE);if(r>1)for(var a=0;a<n.length;a++)n[a]=Math.fround(e[a]/r);var s=Ef.MAX_VALUE,l=-1;this.bSymbolTableReady||t.initialize();for(var d=0;d<t.RATIOS_TABLE.length;d++){for(var h=0,m=t.RATIOS_TABLE[d],p=0;p<Ye.BARS_IN_MODULE;p++){var v=Math.fround(m[p]-n[p]);if(h+=Math.fround(v*v),h>=s)break}h<s&&(s=h,l=Ye.SYMBOL_TABLE[d])}return l},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Ye.SYMBOL_TABLE.length).map(function(e){return new Array(Ye.BARS_IN_MODULE)}),t}(),US=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),Rx=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),zS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VS=function(t){zS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Br),HS=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new VS;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new n0;if(n===0)return;for(var a=0;a<n;a++)this.write(e[r+a])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),GS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZS=function(t){GS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Br),XS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qS=function(t){XS(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new Te("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,a=n<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new ZS;a=ze.MAX_VALUE}this.buf=Ht.copyOfUint8Array(this.buf,a)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,a){if(n<0||n>r.length||a<0||n+a-r.length>0)throw new n0;this.ensureCapacity(this.count+a),pt.arraycopy(r,n,this.buf,this.count,a),this.count+=a},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ht.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(HS),ut;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ut||(ut={}));function hg(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Gl;function wa(t){if(typeof Gl>"u"&&(Gl=hg()),Gl===null)throw new Error("BigInt is not supported!");return Gl(t)}function $S(){var t=[];t[0]=wa(1);var e=wa(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var YS=function(){function t(){}return t.decode=function(e,r){var n=new Fe(""),a=Vt.ISO8859_1;n.enableDecoding(a);for(var s=1,l=e[s++],d=new US;s<e[0];){switch(l){case t.TEXT_COMPACTION_MODE_LATCH:s=t.textCompaction(e,s,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:s=t.byteCompaction(l,e,a,s,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[s++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:s=t.numericCompaction(e,s,n);break;case t.ECI_CHARSET:Vt.getCharacterSetECIByValue(e[s++]);break;case t.ECI_GENERAL_PURPOSE:s+=2;break;case t.ECI_USER_DEFINED:s++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:s=t.decodeMacroBlock(e,s,d);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new xe;default:s--,s=t.textCompaction(e,s,n);break}if(s<e.length)l=e[s++];else throw xe.getFormatInstance()}if(n.length()===0)throw xe.getFormatInstance();var h=new Nc(null,n.toString(),null,r);return h.setOther(d),h},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw xe.getFormatInstance();for(var a=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),s=0;s<t.NUMBER_OF_SEQUENCE_CODEWORDS;s++,r++)a[s]=e[r];n.setSegmentIndex(ze.parseInt(t.decodeBase900toBase10(a,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var l=new Fe;r=t.textCompaction(e,r,l),n.setFileId(l.toString());var d=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var h=new Fe;r=t.textCompaction(e,r+1,h),n.setFileName(h.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var m=new Fe;r=t.textCompaction(e,r+1,m),n.setSender(m.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var p=new Fe;r=t.textCompaction(e,r+1,p),n.setAddressee(p.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var v=new Fe;r=t.numericCompaction(e,r+1,v),n.setSegmentCount(ze.parseInt(v.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var y=new Fe;r=t.numericCompaction(e,r+1,y),n.setTimestamp(Rx.parseLong(y.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var b=new Fe;r=t.numericCompaction(e,r+1,b),n.setChecksum(ze.parseInt(b.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var _=new Fe;r=t.numericCompaction(e,r+1,_),n.setFileSize(Rx.parseLong(_.toString()));break;default:throw xe.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw xe.getFormatInstance()}if(d!==-1){var w=r-d;n.isLastSegment()&&w--,n.setOptionalData(Ht.copyOfRange(e,d,d+w))}return r},t.textCompaction=function(e,r,n){for(var a=new Int32Array((e[0]-r)*2),s=new Int32Array((e[0]-r)*2),l=0,d=!1;r<e[0]&&!d;){var h=e[r++];if(h<t.TEXT_COMPACTION_MODE_LATCH)a[l]=h/30,a[l+1]=h%30,l+=2;else switch(h){case t.TEXT_COMPACTION_MODE_LATCH:a[l++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,d=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[l]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,h=e[r++],s[l]=h,l++;break}}return t.decodeTextCompaction(a,s,l,n),r},t.decodeTextCompaction=function(e,r,n,a){for(var s=ut.ALPHA,l=ut.ALPHA,d=0;d<n;){var h=e[d],m="";switch(s){case ut.ALPHA:if(h<26)m=String.fromCharCode(65+h);else switch(h){case 26:m=" ";break;case t.LL:s=ut.LOWER;break;case t.ML:s=ut.MIXED;break;case t.PS:l=s,s=ut.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ut.ALPHA;break}break;case ut.LOWER:if(h<26)m=String.fromCharCode(97+h);else switch(h){case 26:m=" ";break;case t.AS:l=s,s=ut.ALPHA_SHIFT;break;case t.ML:s=ut.MIXED;break;case t.PS:l=s,s=ut.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ut.ALPHA;break}break;case ut.MIXED:if(h<t.PL)m=t.MIXED_CHARS[h];else switch(h){case t.PL:s=ut.PUNCT;break;case 26:m=" ";break;case t.LL:s=ut.LOWER;break;case t.AL:s=ut.ALPHA;break;case t.PS:l=s,s=ut.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ut.ALPHA;break}break;case ut.PUNCT:if(h<t.PAL)m=t.PUNCT_CHARS[h];else switch(h){case t.PAL:s=ut.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ut.ALPHA;break}break;case ut.ALPHA_SHIFT:if(s=l,h<26)m=String.fromCharCode(65+h);else switch(h){case 26:m=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:s=ut.ALPHA;break}break;case ut.PUNCT_SHIFT:if(s=l,h<t.PAL)m=t.PUNCT_CHARS[h];else switch(h){case t.PAL:s=ut.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[d]);break;case t.TEXT_COMPACTION_MODE_LATCH:s=ut.ALPHA;break}break}m!==""&&a.append(m),d++}},t.byteCompaction=function(e,r,n,a,s){var l=new qS,d=0,h=0,m=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var p=new Int32Array(6),v=r[a++];a<r[0]&&!m;)switch(p[d++]=v,h=900*h+v,v=r[a++],v){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,m=!0;break;default:if(d%5===0&&d>0){for(var y=0;y<6;++y)l.write(Number(wa(h)>>wa(8*(5-y))));h=0,d=0}break}a===r[0]&&v<t.TEXT_COMPACTION_MODE_LATCH&&(p[d++]=v);for(var b=0;b<d;b++)l.write(p[b]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!m;){var _=r[a++];if(_<t.TEXT_COMPACTION_MODE_LATCH)d++,h=900*h+_;else switch(_){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:a--,m=!0;break}if(d%5===0&&d>0){for(var y=0;y<6;++y)l.write(Number(wa(h)>>wa(8*(5-y))));h=0,d=0}}break}return s.append(nn.decode(l.toByteArray(),n)),a},t.numericCompaction=function(e,r,n){for(var a=0,s=!1,l=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!s;){var d=e[r++];if(r===e[0]&&(s=!0),d<t.TEXT_COMPACTION_MODE_LATCH)l[a]=d,a++;else switch(d){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break}(a%t.MAX_NUMERIC_CODEWORDS===0||d===t.NUMERIC_COMPACTION_MODE_LATCH||s)&&a>0&&(n.append(t.decodeBase900toBase10(l,a)),a=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=wa(0),a=0;a<r;a++)n+=t.EXP900[r-a-1]*wa(e[a]);var s=n.toString();if(s.charAt(0)!=="1")throw new xe;return s.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=hg()?$S():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),io=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KS=function(){function t(){}return t.decode=function(e,r,n,a,s,l,d){for(var h=new Df(e,r,n,a,s),m=null,p=null,v,y=!0;;y=!1){if(r!=null&&(m=t.getRowIndicatorColumn(e,h,r,!0,l,d)),a!=null&&(p=t.getRowIndicatorColumn(e,h,a,!1,l,d)),v=t.merge(m,p),v==null)throw ee.getNotFoundInstance();var b=v.getBoundingBox();if(y&&b!=null&&(b.getMinY()<h.getMinY()||b.getMaxY()>h.getMaxY()))h=b;else break}v.setBoundingBox(h);var _=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,m),v.setDetectionResultColumn(_,p);for(var w=m!=null,E=1;E<=_;E++){var j=w?E:_-E;if(v.getDetectionResultColumn(j)===void 0){var A=void 0;j===0||j===_?A=new Dx(h,j===0):A=new fg(h),v.setDetectionResultColumn(j,A);for(var C=-1,D=C,R=h.getMinY();R<=h.getMaxY();R++){if(C=t.getStartColumn(v,j,R,w),C<0||C>h.getMaxX()){if(D===-1)continue;C=D}var L=t.detectCodeword(e,h.getMinX(),h.getMaxX(),w,C,R,l,d);L!=null&&(A.setCodeword(R,L),D=C,l=Math.min(l,L.getWidth()),d=Math.max(d,L.getWidth()))}}}return t.createDecoderResult(v)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var a=Df.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new kS(n,a)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var a=e.getRowHeights();if(a==null)return null;var s=t.getMax(a),l=0;try{for(var d=io(a),h=d.next();!h.done;h=d.next()){var m=h.value;if(l+=s-m,m>0)break}}catch(b){r={error:b}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}for(var p=e.getCodewords(),v=0;l>0&&p[v]==null;v++)l--;for(var y=0,v=a.length-1;v>=0&&(y+=s-a[v],!(a[v]>0));v--);for(var v=p.length-1;y>0&&p[v]==null;v--)y--;return e.getBoundingBox().addMissingRows(l,y,e.isLeft())},t.getMax=function(e){var r,n,a=-1;try{for(var s=io(e),l=s.next();!l.done;l=s.next()){var d=l.value;a=Math.max(a,d)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,a,s,l){for(var d=new Dx(r,a),h=0;h<2;h++)for(var m=h===0?1:-1,p=Math.trunc(Math.trunc(n.getX())),v=Math.trunc(Math.trunc(n.getY()));v<=r.getMaxY()&&v>=r.getMinY();v+=m){var y=t.detectCodeword(e,0,e.getWidth(),a,p,v,s,l);y!=null&&(d.setCodeword(v,y),a?p=y.getStartX():p=y.getEndX())}return d},t.adjustCodewordCount=function(e,r){var n=r[0][1],a=n.getValue(),s=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(s<1||s>Ye.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();n.setValue(s)}else a[0]!==s&&n.setValue(s)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),s=[],l=new Array,d=0;d<e.getBarcodeRowCount();d++)for(var h=0;h<e.getBarcodeColumnCount();h++){var m=r[d][h+1].getValue(),p=d*e.getBarcodeColumnCount()+h;m.length===0?n.push(p):m.length===1?a[p]=m[0]:(l.push(p),s.push(m))}for(var v=new Array(s.length),y=0;y<v.length;y++)v[y]=s[y];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,Ye.toIntArray(n),Ye.toIntArray(l),v)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,a,s){for(var l=new Int32Array(a.length),d=100;d-- >0;){for(var h=0;h<l.length;h++)r[a[h]]=s[h][l[h]];try{return t.decodeCodewords(r,e,n)}catch(p){var m=p instanceof Jt;if(!m)throw p}if(l.length===0)throw Jt.getChecksumInstance();for(var h=0;h<l.length;h++)if(l[h]<s[h].length-1){l[h]++;break}else if(l[h]=0,h===l.length-1)throw Jt.getChecksumInstance()}throw Jt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,a,s,l=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),d=0;d<l.length;d++)for(var h=0;h<l[d].length;h++)l[d][h]=new uo;var m=0;try{for(var p=io(e.getDetectionResultColumns()),v=p.next();!v.done;v=p.next()){var y=v.value;if(y!=null)try{for(var b=(a=void 0,io(y.getCodewords())),_=b.next();!_.done;_=b.next()){var w=_.value;if(w!=null){var E=w.getRowNumber();if(E>=0){if(E>=l.length)continue;l[E][m].setValue(w.getValue())}}}}catch(j){a={error:j}}finally{try{_&&!_.done&&(s=b.return)&&s.call(b)}finally{if(a)throw a.error}}m++}}catch(j){r={error:j}}finally{try{v&&!v.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}return l},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,a){var s,l,d=a?1:-1,h=null;if(t.isValidBarcodeColumn(e,r-d)&&(h=e.getDetectionResultColumn(r-d).getCodeword(n)),h!=null)return a?h.getEndX():h.getStartX();if(h=e.getDetectionResultColumn(r).getCodewordNearby(n),h!=null)return a?h.getStartX():h.getEndX();if(t.isValidBarcodeColumn(e,r-d)&&(h=e.getDetectionResultColumn(r-d).getCodewordNearby(n)),h!=null)return a?h.getEndX():h.getStartX();for(var m=0;t.isValidBarcodeColumn(e,r-d);){r-=d;try{for(var p=(s=void 0,io(e.getDetectionResultColumn(r).getCodewords())),v=p.next();!v.done;v=p.next()){var y=v.value;if(y!=null)return(a?y.getEndX():y.getStartX())+d*m*(y.getEndX()-y.getStartX())}}catch(b){s={error:b}}finally{try{v&&!v.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}m++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,a,s,l,d,h){s=t.adjustCodewordStartColumn(e,r,n,a,s,l);var m=t.getModuleBitCount(e,r,n,a,s,l);if(m==null)return null;var p,v=We.sum(m);if(a)p=s+v;else{for(var y=0;y<m.length/2;y++){var b=m[y];m[y]=m[m.length-1-y],m[m.length-1-y]=b}p=s,s=p-v}if(!t.checkCodewordSkew(v,d,h))return null;var _=FS.getDecodedValue(m),w=Ye.getCodeword(_);return w===-1?null:new LS(s,p,t.getCodewordBucketNumber(_),w)},t.getModuleBitCount=function(e,r,n,a,s,l){for(var d=s,h=new Int32Array(8),m=0,p=a?1:-1,v=a;(a?d<n:d>=r)&&m<h.length;)e.get(d,l)===v?(h[m]++,d+=p):(m++,v=!v);return m===h.length||d===(a?n:r)&&m===h.length-1?h:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,a,s,l){for(var d=s,h=a?-1:1,m=0;m<2;m++){for(;(a?d>=r:d<n)&&a===e.get(d,l);){if(Math.abs(s-d)>t.CODEWORD_SKEW_SIZE)return s;d+=h}h=-h,a=!a}return d},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw xe.getFormatInstance();var a=1<<r+1,s=t.correctErrors(e,n,a);t.verifyCodewordCount(e,a);var l=YS.decode(e,""+r);return l.setErrorsCorrected(s),l.setErasures(n.length),l},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw Jt.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw xe.getFormatInstance();var n=e[0];if(n>e.length)throw xe.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw xe.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,a=r.length-1;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new l0,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var a=0;a<e[n].length;a++){var s=e[n][a];s.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",s.getValue()[0],s.getConfidence(s.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new TS,t}(),WS=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rf=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw ee.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof xe||n instanceof Jt?ee.getNotFoundInstance():n}},t.decode=function(e,r,n){var a,s,l=new Array,d=NS.detectMultiple(e,r,n);try{for(var h=WS(d.getPoints()),m=h.next();!m.done;m=h.next()){var p=m.value,v=KS.decode(d.getBits(),p[4],p[5],p[6],p[7],t.getMinCodewordWidth(p),t.getMaxCodewordWidth(p)),y=new pr(v.getText(),v.getRawBytes(),void 0,p,Oe.PDF_417);y.putMetadata(lr.ERROR_CORRECTION_LEVEL,v.getECLevel());var b=v.getOther();b!=null&&y.putMetadata(lr.PDF417_EXTRA_METADATA,b),l.push(y)}}catch(_){a={error:_}}finally{try{m&&!m.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return l.map(function(_){return _})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?ze.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Ye.MODULES_IN_CODEWORD/Ye.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),QS=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ix=function(t){QS(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Br),Mx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},JS=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(bt.TRY_HARDER)!==void 0,n=e==null?null:e.get(bt.POSSIBLE_FORMATS),a=new Array;if(n!=null){var s=n.some(function(l){return l===Oe.UPC_A||l===Oe.UPC_E||l===Oe.EAN_13||l===Oe.EAN_8||l===Oe.CODABAR||l===Oe.CODE_39||l===Oe.CODE_93||l===Oe.CODE_128||l===Oe.ITF||l===Oe.RSS_14||l===Oe.RSS_EXPANDED});s&&!r&&a.push(new co(e)),n.includes(Oe.QR_CODE)&&a.push(new Tf),n.includes(Oe.DATA_MATRIX)&&a.push(new Of),n.includes(Oe.AZTEC)&&a.push(new Cf),n.includes(Oe.PDF_417)&&a.push(new Rf),s&&r&&a.push(new co(e))}a.length===0&&(r||a.push(new co(e)),a.push(new Tf),a.push(new Of),a.push(new Cf),a.push(new Rf),r&&a.push(new co(e))),this.readers=a},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=Mx(this.readers),a=n.next();!a.done;a=n.next()){var s=a.value;s.reset()}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new Ix("No readers where selected, nothing can be read.");try{for(var a=Mx(this.readers),s=a.next();!s.done;s=a.next()){var l=s.value;try{return l.decode(e,this.hints)}catch(d){if(d instanceof Ix)continue}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}throw new ee("No MultiFormat Readers were able to detect the code.")},t}(),e6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){e6(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var a=this,s=new JS;return s.setHints(r),a=t.call(this,s,n)||this,a}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e})(ai);var t6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){t6(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Rf,r)||this}return e})(ai);var r6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){r6(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Tf,r)||this}return e})(ai);var If;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(If||(If={}));const Zl=If;var mg=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Na(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],a=this.field,s=r.length;s<=e;s++){var l=n.multiply(new Na(a,Int32Array.from([1,a.exp(s-1+a.getGeneratorBase())])));r.push(l),n=l}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new Te("No error correction bytes");var n=e.length-r;if(n<=0)throw new Te("No data bytes provided");var a=this.buildGenerator(r),s=new Int32Array(n);pt.arraycopy(e,0,s,0,n);var l=new Na(this.field,s);l=l.multiplyByMonomial(r,1);for(var d=l.divide(a)[1],h=d.getCoefficients(),m=r-h.length,p=0;p<m;p++)e[n+p]=0;pt.arraycopy(h,0,e,n+m,h.length)},t}(),fo=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),l=0;l<s-1;l++)for(var d=n[l],h=0;h<a-1;h++){var m=d[h];m===d[h+1]&&m===n[l+1][h]&&m===n[l+1][h+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),l=0;l<s;l++)for(var d=0;d<a;d++){var h=n[l];d+6<a&&h[d]===1&&h[d+1]===0&&h[d+2]===1&&h[d+3]===1&&h[d+4]===1&&h[d+5]===0&&h[d+6]===1&&(t.isWhiteHorizontal(h,d-4,d)||t.isWhiteHorizontal(h,d+7,d+11))&&r++,l+6<s&&n[l][d]===1&&n[l+1][d]===0&&n[l+2][d]===1&&n[l+3][d]===1&&n[l+4][d]===1&&n[l+5][d]===0&&n[l+6][d]===1&&(t.isWhiteVertical(n,d,l-4,l)||t.isWhiteVertical(n,d,l+7,l+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var a=r;a<n;a++)if(e[a]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(var s=n;s<a;s++)if(e[s][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),a=e.getWidth(),s=e.getHeight(),l=0;l<s;l++)for(var d=n[l],h=0;h<a;h++)d[h]===1&&r++;var m=e.getHeight()*e.getWidth(),p=Math.floor(Math.abs(r*2-m)*10/m);return p*t.N4},t.getDataMaskBit=function(e,r,n){var a,s;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:s=n*r,a=(s&1)+s%3;break;case 6:s=n*r,a=(s&1)+s%3&1;break;case 7:s=n*r,a=s%3+(n+r&1)&1;break;default:throw new Te("Invalid mask pattern: "+e)}return a===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,a=r?e.getHeight():e.getWidth(),s=r?e.getWidth():e.getHeight(),l=e.getArray(),d=0;d<a;d++){for(var h=0,m=-1,p=0;p<s;p++){var v=r?l[d][p]:l[p][d];v===m?h++:(h>=5&&(n+=t.N1+(h-5)),h=1,m=v)}h>=5&&(n+=t.N1+(h-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),n6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a6=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var a=n6(this.bytes),s=a.next();!s.done;s=a.next()){var l=s.value;Ht.fill(l,e)}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,a=this.height;n<a;++n)for(var s=this.bytes[n],l=r.bytes[n],d=0,h=this.width;d<h;++d)if(s[d]!==l[d])return!1;return!0},t.prototype.toString=function(){for(var e=new Fe,r=0,n=this.height;r<n;++r){for(var a=this.bytes[r],s=0,l=this.width;s<l;++s)switch(a[s]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Mf=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new Fe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),i6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xt=function(t){i6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Br),Bx=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,a,s){t.clearMatrix(s),t.embedBasicPatterns(n,s),t.embedTypeInfo(r,a,s),t.maybeEmbedVersionInfo(n,s),t.embedDataBits(e,a,s)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var a=new er;t.makeTypeInfoBits(e,r,a);for(var s=0,l=a.getSize();s<l;++s){var d=a.get(a.getSize()-1-s),h=t.TYPE_INFO_COORDINATES[s],m=h[0],p=h[1];if(n.setBoolean(m,p,d),s<8){var v=n.getWidth()-s-1,y=8;n.setBoolean(v,y,d)}else{var v=8,y=n.getHeight()-7+(s-8);n.setBoolean(v,y,d)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new er;t.makeVersionInfoBits(e,n);for(var a=17,s=0;s<6;++s)for(var l=0;l<3;++l){var d=n.get(a);a--,r.setBoolean(s,r.getHeight()-11+l,d),r.setBoolean(r.getHeight()-11+l,s,d)}}},t.embedDataBits=function(e,r,n){for(var a=0,s=-1,l=n.getWidth()-1,d=n.getHeight()-1;l>0;){for(l===6&&(l-=1);d>=0&&d<n.getHeight();){for(var h=0;h<2;++h){var m=l-h;if(t.isEmpty(n.get(m,d))){var p=void 0;a<e.getSize()?(p=e.get(a),++a):p=!1,r!==255&&fo.getDataMaskBit(r,m,d)&&(p=!p),n.setBoolean(m,d,p)}}d+=s}s=-s,d+=s,l-=2}if(a!==e.getSize())throw new xt("Not all bits consumed: "+a+"/"+e.getSize())},t.findMSBSet=function(e){return 32-ze.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new Te("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Mf.isValidMaskPattern(r))throw new xt("Invalid mask pattern");var a=e.getBits()<<3|r;n.appendBits(a,5);var s=t.calculateBCHCode(a,t.TYPE_INFO_POLY);n.appendBits(s,10);var l=new er;if(l.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(l),n.getSize()!==15)throw new xt("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new xt("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new xt;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var a=0;a<8;++a){if(!t.isEmpty(n.get(e+a,r)))throw new xt;n.setNumber(e+a,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var a=0;a<7;++a){if(!t.isEmpty(n.get(e,r+a)))throw new xt;n.setNumber(e,r+a,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var a=0;a<5;++a)for(var s=t.POSITION_ADJUSTMENT_PATTERN[a],l=0;l<5;++l)n.setNumber(e+l,r+a,s[l])},t.embedPositionDetectionPattern=function(e,r,n){for(var a=0;a<7;++a)for(var s=t.POSITION_DETECTION_PATTERN[a],l=0;l<7;++l)n.setNumber(e+l,r+a,s[l])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var a=7;t.embedVerticalSeparationPattern(a,0,e),t.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),t.embedVerticalSeparationPattern(a,e.getHeight()-a,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,a=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],s=0,l=a.length;s!==l;s++){var d=a[s];if(d>=0)for(var h=0;h!==l;h++){var m=a[h];m>=0&&t.isEmpty(r.get(m,d))&&t.embedPositionAdjustmentPattern(m-2,d-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),s6=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),Px=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return fo.applyMaskPenaltyRule1(e)+fo.applyMaskPenaltyRule2(e)+fo.applyMaskPenaltyRule3(e)+fo.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var a=t.DEFAULT_BYTE_MODE_ENCODING,s=n!==null&&n.get(Zl.CHARACTER_SET)!==void 0;s&&(a=n.get(Zl.CHARACTER_SET).toString());var l=this.chooseMode(e,a),d=new er;if(l===vt.BYTE&&(s||t.DEFAULT_BYTE_MODE_ENCODING!==a)){var h=Vt.getCharacterSetECIByName(a);h!==void 0&&this.appendECI(h,d)}this.appendModeInfo(l,d);var m=new er;this.appendBytes(e,l,m,a);var p;if(n!==null&&n.get(Zl.QR_VERSION)!==void 0){var v=Number.parseInt(n.get(Zl.QR_VERSION).toString(),10);p=Ja.getVersionForNumber(v);var y=this.calculateBitsNeeded(l,d,m,p);if(!this.willFit(y,p,r))throw new xt("Data too big for requested version")}else p=this.recommendVersion(r,l,d,m);var b=new er;b.appendBitArray(d);var _=l===vt.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(_,p,l,b),b.appendBitArray(m);var w=p.getECBlocksForLevel(r),E=p.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(E,b);var j=this.interleaveWithECBytes(b,p.getTotalCodewords(),E,w.getNumBlocks()),A=new Mf;A.setECLevel(r),A.setMode(l),A.setVersion(p);var C=p.getDimensionForVersion(),D=new a6(C,C),R=this.chooseMaskPattern(j,r,p,D);return A.setMaskPattern(R),Bx.buildMatrix(j,r,p,R,D),A.setMatrix(D),A},t.recommendVersion=function(e,r,n,a){var s=this.calculateBitsNeeded(r,n,a,Ja.getVersionForNumber(1)),l=this.chooseVersion(s,e),d=this.calculateBitsNeeded(r,n,a,l);return this.chooseVersion(d,e)},t.calculateBitsNeeded=function(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Vt.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return vt.KANJI;for(var n=!1,a=!1,s=0,l=e.length;s<l;++s){var d=e.charAt(s);if(t.isDigit(d))n=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)a=!0;else return vt.BYTE}return a?vt.ALPHANUMERIC:n?vt.NUMERIC:vt.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=nn.encode(e,Vt.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var a=0;a<n;a+=2){var s=r[a]&255;if((s<129||s>159)&&(s<224||s>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,a){for(var s=Number.MAX_SAFE_INTEGER,l=-1,d=0;d<Mf.NUM_MASK_PATTERNS;d++){Bx.buildMatrix(e,r,n,d,a);var h=this.calculateMaskPenalty(a);h<s&&(s=h,l=d)}return l},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var a=Ja.getVersionForNumber(n);if(t.willFit(e,a,r))return a}throw new xt("Data too big")},t.willFit=function(e,r,n){var a=r.getTotalCodewords(),s=r.getECBlocksForLevel(n),l=s.getTotalECCodewords(),d=a-l,h=(e+7)/8;return d>=h},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new xt("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var a=0;a<4&&r.getSize()<n;++a)r.appendBit(!1);var s=r.getSize()&7;if(s>0)for(var a=s;a<8;a++)r.appendBit(!1);for(var l=e-r.getSizeInBytes(),a=0;a<l;++a)r.appendBits((a&1)===0?236:17,8);if(r.getSize()!==n)throw new xt("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,a,s,l){if(a>=n)throw new xt("Block ID too large");var d=e%n,h=n-d,m=Math.floor(e/n),p=m+1,v=Math.floor(r/n),y=v+1,b=m-v,_=p-y;if(b!==_)throw new xt("EC bytes mismatch");if(n!==h+d)throw new xt("RS blocks mismatch");if(e!==(v+b)*h+(y+_)*d)throw new xt("Total bytes mismatch");a<h?(s[0]=v,l[0]=b):(s[0]=y,l[0]=_)},t.interleaveWithECBytes=function(e,r,n,a){var s,l,d,h;if(e.getSizeInBytes()!==n)throw new xt("Number of bits and data bytes does not match");for(var m=0,p=0,v=0,y=new Array,b=0;b<a;++b){var _=new Int32Array(1),w=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,a,b,_,w);var E=_[0],j=new Uint8Array(E);e.toBytes(8*m,j,0,E);var A=t.generateECBytes(j,w[0]);y.push(new s6(j,A)),p=Math.max(p,E),v=Math.max(v,A.length),m+=_[0]}if(n!==m)throw new xt("Data bytes does not match offset");for(var C=new er,b=0;b<p;++b)try{for(var D=(s=void 0,Px(y)),R=D.next();!R.done;R=D.next()){var L=R.value,j=L.getDataBytes();b<j.length&&C.appendBits(j[b],8)}}catch(ae){s={error:ae}}finally{try{R&&!R.done&&(l=D.return)&&l.call(D)}finally{if(s)throw s.error}}for(var b=0;b<v;++b)try{for(var $=(d=void 0,Px(y)),W=$.next();!W.done;W=$.next()){var L=W.value,A=L.getErrorCorrectionBytes();b<A.length&&C.appendBits(A[b],8)}}catch(ae){d={error:ae}}finally{try{W&&!W.done&&(h=$.return)&&h.call($)}finally{if(d)throw d.error}}if(r!==C.getSizeInBytes())throw new xt("Interleaving error: "+r+" and "+C.getSizeInBytes()+" differ.");return C},t.generateECBytes=function(e,r){for(var n=e.length,a=new Int32Array(n+r),s=0;s<n;s++)a[s]=e[s]&255;new mg(Dr.QR_CODE_FIELD_256).encode(a,r);for(var l=new Uint8Array(r),s=0;s<r;s++)l[s]=a[n+s];return l},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,a){var s=n.getCharacterCountBits(r);if(e>=1<<s)throw new xt(e+" is bigger than "+((1<<s)-1));a.appendBits(e,s)},t.appendBytes=function(e,r,n,a){switch(r){case vt.NUMERIC:t.appendNumericBytes(e,n);break;case vt.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case vt.BYTE:t.append8BitBytes(e,n,a);break;case vt.KANJI:t.appendKanjiBytes(e,n);break;default:throw new xt("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getDigit(e.charAt(a));if(a+2<n){var l=t.getDigit(e.charAt(a+1)),d=t.getDigit(e.charAt(a+2));r.appendBits(s*100+l*10+d,10),a+=3}else if(a+1<n){var l=t.getDigit(e.charAt(a+1));r.appendBits(s*10+l,7),a+=2}else r.appendBits(s,4),a++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,a=0;a<n;){var s=t.getAlphanumericCode(e.charCodeAt(a));if(s===-1)throw new xt;if(a+1<n){var l=t.getAlphanumericCode(e.charCodeAt(a+1));if(l===-1)throw new xt;r.appendBits(s*45+l,11),a+=2}else r.appendBits(s,6),a++}},t.append8BitBytes=function(e,r,n){var a;try{a=nn.encode(e,n)}catch(h){throw new xt(h)}for(var s=0,l=a.length;s!==l;s++){var d=a[s];r.appendBits(d,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=nn.encode(e,Vt.SJIS)}catch(v){throw new xt(v)}for(var a=n.length,s=0;s<a;s+=2){var l=n[s]&255,d=n[s+1]&255,h=l<<8&4294967295|d,m=-1;if(h>=33088&&h<=40956?m=h-33088:h>=57408&&h<=60351&&(m=h-49472),m===-1)throw new xt("Invalid byte sequence");var p=(m>>8)*192+(m&255);r.appendBits(p,13)}},t.appendECI=function(e,r){r.appendBits(vt.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Vt.UTF8.getName(),t})();var o6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){o6(e,t);function e(r,n,a,s,l,d,h,m){var p=t.call(this,d,h)||this;if(p.yuvData=r,p.dataWidth=n,p.dataHeight=a,p.left=s,p.top=l,s+d>n||l+h>a)throw new Te("Crop rectangle does not fit within image data.");return m&&p.reverseHorizontal(d,h),p}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Te("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return pt.arraycopy(this.yuvData,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var a=r*n,s=new Uint8ClampedArray(a),l=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return pt.arraycopy(this.yuvData,l,s,0,a),s;for(var d=0;d<n;d++){var h=d*r;pt.arraycopy(this.yuvData,l,s,h,r),l+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,a,s,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*n),s=this.yuvData,l=this.top*this.dataWidth+this.left,d=0;d<n;d++){for(var h=d*r,m=0;m<r;m++){var p=s[l+m*e.THUMBNAIL_SCALE_FACTOR]&255;a[h+m]=4278190080|p*65793}l+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return a},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var a=this.yuvData,s=0,l=this.top*this.dataWidth+this.left;s<n;s++,l+=this.dataWidth)for(var d=l+r/2,h=l,m=l+r-1;h<d;h++,m--){var p=a[h];a[h]=a[m],a[m]=p}},e.prototype.invert=function(){return new a0(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Ac);var l6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();(function(t){l6(e,t);function e(r,n,a,s,l,d,h){var m=t.call(this,n,a)||this;if(m.dataWidth=s,m.dataHeight=l,m.left=d,m.top=h,r.BYTES_PER_ELEMENT===4){for(var p=n*a,v=new Uint8ClampedArray(p),y=0;y<p;y++){var b=r[y],_=b>>16&255,w=b>>7&510,E=b&255;v[y]=(_+w+E)/4&255}m.luminances=v}else m.luminances=r;if(s===void 0&&(m.dataWidth=n),l===void 0&&(m.dataHeight=a),d===void 0&&(m.left=0),h===void 0&&(m.top=0),m.left+n>m.dataWidth||m.top+a>m.dataHeight)throw new Te("Crop rectangle does not fit within image data.");return m}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new Te("Requested row is outside the image: "+r);var a=this.getWidth();(n==null||n.length<a)&&(n=new Uint8ClampedArray(a));var s=(r+this.top)*this.dataWidth+this.left;return pt.arraycopy(this.luminances,s,n,0,a),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var a=r*n,s=new Uint8ClampedArray(a),l=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return pt.arraycopy(this.luminances,l,s,0,a),s;for(var d=0;d<n;d++){var h=d*r;pt.arraycopy(this.luminances,l,s,h,r),l+=this.dataWidth}return s},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,a,s){return new e(this.luminances,a,s,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new a0(this)},e})(Ac);var c6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u6=function(t){c6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(Vt),d6=function(){function t(){}return t.ISO_8859_1=Vt.ISO8859_1,t}(),Bf,f6=301,h6=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=f6);return{LOG:t,ALOG:e}};Bf=h6([],[]),Bf.LOG;Bf.ALOG;var kx;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(kx||(kx={}));var Lx=129,pg=230,m6=231,p6=235,x6=236,v6=237,g6=238,y6=239,b6=240,nf=254,_6=254,Fx="[)>05",Ux="[)>06",zx="",st=0,sr=1,br=2,Ut=3,Qt=4,fr=5,w6=function(){function t(){}return t.prototype.getEncodingMode=function(){return st},t.prototype.encode=function(e){var r=pn.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),a=pn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode())switch(a){case fr:e.writeCodeword(m6),e.signalEncoderChange(fr);return;case sr:e.writeCodeword(pg),e.signalEncoderChange(sr);return;case Ut:e.writeCodeword(g6),e.signalEncoderChange(Ut);break;case br:e.writeCodeword(y6),e.signalEncoderChange(br);break;case Qt:e.writeCodeword(b6),e.signalEncoderChange(Qt);break;default:throw new Error("Illegal mode: "+a)}else pn.isExtendedASCII(n)?(e.writeCodeword(p6),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(pn.isDigit(e)&&pn.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}(),A6=function(){function t(){}return t.prototype.getEncodingMode=function(){return fr},t.prototype.encode=function(e){var r=new Fe;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var a=pn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(a!==this.getEncodingMode()){e.signalEncoderChange(st);break}}var s=r.length()-1,l=1,d=e.getCodewordCount()+s+l;e.updateSymbolInfo(d);var h=e.getSymbolInfo().getDataCapacity()-d>0;if(e.hasMoreCharacters()||h)if(s<=249)r.setCharAt(0,$e.getCharAt(s));else if(s<=1555)r.setCharAt(0,$e.getCharAt(Math.floor(s/250)+249)),r.insert(1,$e.getCharAt(s%250));else throw new Error("Message length not in valid ranges: "+s);for(var m=0,n=r.length();m<n;m++)e.writeCodeword(this.randomize255State(r.charAt(m).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,a=e+n;return a<=255?a:a-256},t}(),c0=function(){function t(){}return t.prototype.getEncodingMode=function(){return sr},t.prototype.encodeMaximal=function(e){for(var r=new Fe,n=0,a=e.pos,s=0;e.hasMoreCharacters();){var l=e.getCurrentChar();e.pos++,n=this.encodeChar(l,r),r.length()%3===0&&(a=e.pos,s=r.length())}if(s!==r.length()){var d=Math.floor(r.length()/3*2),h=Math.floor(e.getCodewordCount()+d+1);e.updateSymbolInfo(h);var m=e.getSymbolInfo().getDataCapacity()-h,p=Math.floor(r.length()%3);(p===2&&m!==2||p===1&&(n>3||m!==1))&&(e.pos=a)}r.length()>0&&e.writeCodeword(pg),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new Fe;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var a=this.encodeChar(n,r),s=Math.floor(r.length()/3)*2,l=e.getCodewordCount()+s;e.updateSymbolInfo(l);var d=e.getSymbolInfo().getDataCapacity()-l;if(!e.hasMoreCharacters()){var h=new Fe;for(r.length()%3===2&&d!==2&&(a=this.backtrackOneCharacter(e,r,h,a));r.length()%3===1&&(a>3||d!==1);)a=this.backtrackOneCharacter(e,r,h,a);break}var m=r.length();if(m%3===0){var p=pn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(p!==this.getEncodingMode()){e.signalEncoderChange(st);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,a){var s=r.length(),l=r.toString().substring(0,s-a);r.setLengthToZero(),r.append(l),e.pos--;var d=e.getCurrentChar();return a=this.encodeChar(d,n),e.resetSymbolInfo(),a},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),a=r.length()%3,s=e.getCodewordCount()+n;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s;if(a===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(nf)}else if(l===1&&a===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(nf),e.pos--}else if(a===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(l>0||e.hasMoreCharacters())&&e.writeCodeword(nf)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(st)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,a=r%256,s=new Fe;return s.append(n),s.append(a),s.toString()},t}(),N6=function(){function t(){}return t.prototype.getEncodingMode=function(){return Qt},t.prototype.encode=function(e){for(var r=new Fe;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var a=r.length();if(a>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var s=r.toString().substring(4);r.setLengthToZero(),r.append(s);var l=pn.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){e.signalEncoderChange(st);break}}}r.append($e.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),s=e.getRemainingCharacters();if(s>a&&(e.updateSymbolInfo(e.getCodewordCount()+1),a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),s<=a&&a<=2)return}if(n>4)throw new Error("Count must not exceed 4");var l=n-1,d=this.encodeToCodewords(r.toString()),h=!e.hasMoreCharacters(),m=h&&l<=2;if(l<=2){e.updateSymbolInfo(e.getCodewordCount()+l);var a=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();a>=3&&(m=!1,e.updateSymbolInfo(e.getCodewordCount()+d.length))}m?(e.resetSymbolInfo(),e.pos-=l):e.writeCodewords(d)}finally{e.signalEncoderChange(st)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append($e.getCharAt(e-64)):pn.illegalCharacter($e.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),a=r>=2?e.charAt(1).charCodeAt(0):0,s=r>=3?e.charAt(2).charCodeAt(0):0,l=r>=4?e.charAt(3).charCodeAt(0):0,d=(n<<18)+(a<<12)+(s<<6)+l,h=d>>16&255,m=d>>8&255,p=d&255,v=new Fe;return v.append(h),r>=2&&v.append(m),r>=3&&v.append(p),v.toString()},t}(),E6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},et=function(){function t(e,r,n,a,s,l,d,h){d===void 0&&(d=0),h===void 0&&(h=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=a,this.matrixHeight=s,this.dataRegions=l,this.rsBlockData=d,this.rsBlockError=h}return t.lookup=function(e,r,n,a,s){var l,d;r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!0);try{for(var h=S6(j6),m=h.next();!m.done;m=h.next()){var p=m.value;if(!(r===1&&p.rectangular)&&!(r===2&&!p.rectangular)&&!(n!=null&&(p.getSymbolWidth()<n.getWidth()||p.getSymbolHeight()<n.getHeight()))&&!(a!=null&&(p.getSymbolWidth()>a.getWidth()||p.getSymbolHeight()>a.getHeight()))&&e<=p.dataCapacity)return p}}catch(v){l={error:v}}finally{try{m&&!m.done&&(d=h.return)&&d.call(h)}finally{if(l)throw l.error}}if(s)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),C6=function(t){E6(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(et),j6=[new et(!1,3,5,8,8,1),new et(!1,5,7,10,10,1),new et(!0,5,7,16,6,1),new et(!1,8,10,12,12,1),new et(!0,10,11,14,6,2),new et(!1,12,12,14,14,1),new et(!0,16,14,24,10,1),new et(!1,18,14,16,16,1),new et(!1,22,18,18,18,1),new et(!0,22,18,16,10,2),new et(!1,30,20,20,20,1),new et(!0,32,24,16,14,2),new et(!1,36,24,22,22,1),new et(!1,44,28,24,24,1),new et(!0,49,28,22,14,2),new et(!1,62,36,14,14,4),new et(!1,86,42,16,16,4),new et(!1,114,48,18,18,4),new et(!1,144,56,20,20,4),new et(!1,174,68,22,22,4),new et(!1,204,84,24,24,4,102,42),new et(!1,280,112,14,14,16,140,56),new et(!1,368,144,16,16,16,92,36),new et(!1,456,192,18,18,16,114,48),new et(!1,576,224,20,20,16,144,56),new et(!1,696,272,22,22,16,174,68),new et(!1,816,336,24,24,16,136,56),new et(!1,1050,408,18,18,36,175,68),new et(!1,1304,496,20,20,36,163,62),new C6],O6=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(d){return d.charCodeAt(0)}),n=new Fe,a=0,s=r.length;a<s;a++){var l=String.fromCharCode(r[a]&255);if(l==="?"&&e.charAt(a)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(l)}this.msg=n.toString(),this.shape=0,this.codewords=new Fe,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=et.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),T6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D6=function(t){T6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Ut},e.prototype.encode=function(r){for(var n=new Fe;r.hasMoreCharacters();){var a=r.getCurrentChar();r.pos++,this.encodeChar(a,n);var s=n.length();if(s%3===0){this.writeNextTriplet(r,n);var l=pn.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){r.signalEncoderChange(st);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):pn.illegalCharacter($e.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var a=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),s=n.length();r.pos-=s,(r.getRemainingCharacters()>1||a>1||r.getRemainingCharacters()!==a)&&r.writeCodeword(_6),r.getNewEncoding()<0&&r.signalEncoderChange(st)},e}(c0),R6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I6=function(t){R6(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return br},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var a=2;return a+=this.encodeChar(r-128,n),a},e}(c0),pn=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=Lx+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,a,s){r===void 0&&(r=0),n===void 0&&(n=null),a===void 0&&(a=null),s===void 0&&(s=!1);var l=new c0,d=[new w6,l,new I6,new D6,new N6,new A6],h=new O6(e);h.setSymbolShape(r),h.setSizeConstraints(n,a),e.startsWith(Fx)&&e.endsWith(zx)?(h.writeCodeword(x6),h.setSkipAtEnd(2),h.pos+=Fx.length):e.startsWith(Ux)&&e.endsWith(zx)&&(h.writeCodeword(v6),h.setSkipAtEnd(2),h.pos+=Ux.length);var m=st;for(s&&(l.encodeMaximal(h),m=h.getNewEncoding(),h.resetEncoderSignal());h.hasMoreCharacters();)d[m].encode(h),h.getNewEncoding()>=0&&(m=h.getNewEncoding(),h.resetEncoderSignal());var p=h.getCodewordCount();h.updateSymbolInfo();var v=h.getSymbolInfo().getDataCapacity();p<v&&m!==st&&m!==fr&&m!==Qt&&h.writeCodeword("þ");var y=h.getCodewords();for(y.length()<v&&y.append(Lx);y.length()<v;)y.append(this.randomize253State(y.length()+1));return h.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var a=this.lookAheadTestIntern(e,r,n);if(n===Ut&&a===Ut){for(var s=Math.min(r+3,e.length),l=r;l<s;l++)if(!this.isNativeX12(e.charCodeAt(l)))return st}else if(n===Qt&&a===Qt){for(var s=Math.min(r+4,e.length),l=r;l<s;l++)if(!this.isNativeEDIFACT(e.charCodeAt(l)))return st}return a},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var a;n===st?a=[0,1,1,1,1,1.25]:(a=[1,2,2,2,2,2.25],a[n]=0);for(var s=0,l=new Uint8Array(6),d=[];;){if(r+s===e.length){Ht.fill(l,0),Ht.fill(d,0);var h=this.findMinimums(a,d,ze.MAX_VALUE,l),m=this.getMinimumCount(l);if(d[st]===h)return st;if(m===1){if(l[fr]>0)return fr;if(l[Qt]>0)return Qt;if(l[br]>0)return br;if(l[Ut]>0)return Ut}return sr}var p=e.charCodeAt(r+s);if(s++,this.isDigit(p)?a[st]+=.5:this.isExtendedASCII(p)?(a[st]=Math.ceil(a[st]),a[st]+=2):(a[st]=Math.ceil(a[st]),a[st]++),this.isNativeC40(p)?a[sr]+=2/3:this.isExtendedASCII(p)?a[sr]+=8/3:a[sr]+=4/3,this.isNativeText(p)?a[br]+=2/3:this.isExtendedASCII(p)?a[br]+=8/3:a[br]+=4/3,this.isNativeX12(p)?a[Ut]+=2/3:this.isExtendedASCII(p)?a[Ut]+=13/3:a[Ut]+=10/3,this.isNativeEDIFACT(p)?a[Qt]+=3/4:this.isExtendedASCII(p)?a[Qt]+=17/4:a[Qt]+=13/4,this.isSpecialB256(p)?a[fr]+=4:a[fr]++,s>=4){if(Ht.fill(l,0),Ht.fill(d,0),this.findMinimums(a,d,ze.MAX_VALUE,l),d[st]<this.min(d[fr],d[sr],d[br],d[Ut],d[Qt]))return st;if(d[fr]<d[st]||d[fr]+1<this.min(d[sr],d[br],d[Ut],d[Qt]))return fr;if(d[Qt]+1<this.min(d[fr],d[sr],d[br],d[Ut],d[st]))return Qt;if(d[br]+1<this.min(d[fr],d[sr],d[Qt],d[Ut],d[st]))return br;if(d[Ut]+1<this.min(d[fr],d[sr],d[Qt],d[br],d[st]))return Ut;if(d[sr]+1<this.min(d[st],d[fr],d[Qt],d[br])){if(d[sr]<d[Ut])return sr;if(d[sr]===d[Ut]){for(var v=r+s+1;v<e.length;){var y=e.charCodeAt(v);if(this.isX12TermSep(y))return Ut;if(!this.isNativeX12(y))break;v++}return sr}}}}},t.min=function(e,r,n,a,s){var l=Math.min(e,Math.min(r,Math.min(n,a)));return s===void 0?l:Math.min(l,s)},t.findMinimums=function(e,r,n,a){for(var s=0;s<6;s++){var l=r[s]=Math.ceil(e[s]);n>l&&(n=l,Ht.fill(a,0)),n===l&&(a[s]=a[s]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,a=r;a<n&&this.isDigit(e.charCodeAt(a));)a++;return a-r},t.illegalCharacter=function(e){var r=ze.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),af=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vx=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return nn.encode(e,this.charset)!=null}catch{return!1}},t}(),M6=function(){function t(e,r,n){var a,s,l,d,h,m;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(J){return new Vx(u6.forName(J))}),this.encoders=[];var p=[];p.push(new Vx(d6.ISO_8859_1));for(var v=r!=null&&r.name.startsWith("UTF"),y=0;y<e.length;y++){var b=!1;try{for(var _=(a=void 0,af(p)),w=_.next();!w.done;w=_.next()){var E=w.value,j=e.charAt(y),A=j.charCodeAt(0);if(A===n||E.canEncode(j)){b=!0;break}}}catch(J){a={error:J}}finally{try{w&&!w.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}if(!b)try{for(var C=(l=void 0,af(this.ENCODERS)),D=C.next();!D.done;D=C.next()){var E=D.value;if(E.canEncode(e.charAt(y))){p.push(E),b=!0;break}}}catch(J){l={error:J}}finally{try{D&&!D.done&&(d=C.return)&&d.call(C)}finally{if(l)throw l.error}}b||(v=!0)}if(p.length===1&&!v)this.encoders=[p[0]];else{this.encoders=[];var R=0;try{for(var L=af(p),$=L.next();!$.done;$=L.next()){var E=$.value;this.encoders[R++]=E}}catch(J){h={error:J}}finally{try{$&&!$.done&&(m=L.return)&&m.call(L)}finally{if(h)throw h.error}}}var W=-1;if(r!=null){for(var y=0;y<this.encoders.length;y++)if(this.encoders[y]!=null&&r.name===this.encoders[y].name){W=y;break}}this.priorityEncoderIndex=W}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return nn.encode($e.getCharAt(e),this.encoders[r].name)},t}(),B6=3,P6=function(){function t(e,r,n){this.fnc1=n;var a=new M6(e,r,n);if(a.length()===1)for(var s=0;s<this.bytes.length;s++){var l=e.charAt(s).charCodeAt(0);this.bytes[s]=l===n?1e3:l}else this.bytes=this.encodeMinimally(e,a,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new Fe,a=e;a<r;a++){if(this.isECI(a))throw new Error("value at "+a+" is not a character but an ECI");n.append(this.charAt(a))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,a,s,l){var d=e.charAt(a).charCodeAt(0),h=0,m=r.length();r.getPriorityEncoderIndex()>=0&&(d===l||r.canEncode(d,r.getPriorityEncoderIndex()))&&(h=r.getPriorityEncoderIndex(),m=h+1);for(var p=h;p<m;p++)(d===l||r.canEncode(d,p))&&this.addEdge(n,a+1,new Hx(d,r,p,s,l))},t.prototype.encodeMinimally=function(e,r,n){var a=e.length,s=new Hx[a+1][r.length()];this.addEdges(e,r,s,0,null,n);for(var l=1;l<=a;l++){for(var d=0;d<r.length();d++)s[l][d]!=null&&l<a&&this.addEdges(e,r,s,l,s[l][d],n);for(var d=0;d<r.length();d++)s[l-1][d]=null}for(var h=-1,m=ze.MAX_VALUE,d=0;d<r.length();d++)if(s[a][d]!=null){var p=s[a][d];p.cachedTotalSize<m&&(m=p.cachedTotalSize,h=d)}if(h<0)throw new Error('Failed to encode "'+e+'"');for(var v=[],y=s[a][h];y!=null;){if(y.isFNC1())v.unshift(1e3);else for(var b=r.encode(y.c,y.encoderIndex),l=b.length-1;l>=0;l--)v.unshift(b[l]&255);var _=y.previous===null?0:y.previous.encoderIndex;_!==y.encoderIndex&&v.unshift(256+r.getECIValue(y.encoderIndex)),y=y.previous}for(var w=[],l=0;l<w.length;l++)w[l]=v[l];return w},t}(),Hx=function(){function t(e,r,n,a,s){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=a,this.fnc1=s,this.c=e===s?1e3:e;var l=this.isFNC1()?1:r.encode(e,n).length,d=a===null?0:a.encoderIndex;d!==n&&(l+=B6),a!=null&&(l+=a.cachedTotalSize),this.cachedTotalSize=l}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),k6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var Gx;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(Gx||(Gx={}));(function(t){k6(e,t);function e(r,n,a,s,l){var d=t.call(this,r,n,a)||this;return d.shape=s,d.macroId=l,d}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(P6);var L6=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),Zx=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),F6=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),U6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u0=function(t){U6(e,t);function e(r,n,a){var s=t.call(this,r)||this;return s.value=n,s.bitCount=a,s}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+ze.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(F6),z6=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var s in a)a.hasOwnProperty(s)&&(n[s]=a[s])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V6=function(t){z6(e,t);function e(r,n,a){var s=t.call(this,r,0,0)||this;return s.binaryShiftStart=n,s.binaryShiftByteCount=a,s}return e.prototype.appendTo=function(r,n){for(var a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+a],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(u0);function H6(t,e,r){return new V6(t,e,r)}function so(t,e,r){return new u0(t,e,r)}var G6=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ea=0,lc=1,rn=2,xg=3,jn=4,Z6=new u0(null,0,0),sf=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],X6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function q6(t){var e,r;try{for(var n=X6(t),a=n.next();!a.done;a=n.next()){var s=a.value;Ht.fill(s,-1)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[Ea][jn]=0,t[lc][jn]=0,t[lc][Ea]=28,t[xg][jn]=0,t[rn][jn]=0,t[rn][Ea]=15,t}var vg=q6(Ht.createInt32Array(6,6)),$6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y6=function(){function t(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,a=this.token;if(e!==this.mode){var s=sf[this.mode][e];a=so(a,s&65535,s>>16),n+=s>>16}var l=e===rn?4:5;return a=so(a,r,l),new t(a,e,0,n+l)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,a=this.mode===rn?4:5;return n=so(n,vg[this.mode][e],a),n=so(n,r,5),new t(n,this.mode,0,this.bitCount+a+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,a=this.bitCount;if(this.mode===jn||this.mode===rn){var s=sf[n][Ea];r=so(r,s&65535,s>>16),a+=s>>16,n=Ea}var l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new t(r,n,this.binaryShiftByteCount+1,a+l);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(e+1)),d},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=H6(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(sf[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,a=[],s=this.endBinaryShift(e.length).token;s!==null;s=s.getPrevious())a.unshift(s);var l=new er;try{for(var d=$6(a),h=d.next();!h.done;h=d.next()){var m=h.value;m.appendTo(l,e)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return l},t.prototype.toString=function(){return $e.format("%s bits=%d bytes=%d",G6[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(Z6,Ea,0,0),t}();function K6(t){var e=$e.getCharCode(" "),r=$e.getCharCode("."),n=$e.getCharCode(",");t[Ea][e]=1;for(var a=$e.getCharCode("Z"),s=$e.getCharCode("A"),l=s;l<=a;l++)t[Ea][l]=l-s+2;t[lc][e]=1;for(var d=$e.getCharCode("z"),h=$e.getCharCode("a"),l=h;l<=d;l++)t[lc][l]=l-h+2;t[rn][e]=1;for(var m=$e.getCharCode("9"),p=$e.getCharCode("0"),l=p;l<=m;l++)t[rn][l]=l-p+2;t[rn][n]=12,t[rn][r]=13;for(var v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],y=0;y<v.length;y++)t[xg][$e.getCharCode(v[y])]=y;for(var b=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],y=0;y<b.length;y++)$e.getCharCode(b[y])>0&&(t[jn][$e.getCharCode(b[y])]=y);return t}var of=K6(Ht.createInt32Array(5,256)),Xl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W6=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=$e.getCharCode(" "),r=$e.getCharCode(`
`),n=Zx.singletonList(Y6.INITIAL_STATE),a=0;a<this.text.length;a++){var s=void 0,l=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case $e.getCharCode("\r"):s=l===r?2:0;break;case $e.getCharCode("."):s=l===e?3:0;break;case $e.getCharCode(","):s=l===e?4:0;break;case $e.getCharCode(":"):s=l===e?5:0;break;default:s=0}s>0?(n=t.updateStateListForPair(n,a,s),a++):n=this.updateStateListForChar(n,a)}var d=Zx.min(n,function(h,m){return h.getBitCount()-m.getBitCount()});return d.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,a,s=[];try{for(var l=Xl(e),d=l.next();!d.done;d=l.next()){var h=d.value;this.updateStateForChar(h,r,s)}}catch(m){n={error:m}}finally{try{d&&!d.done&&(a=l.return)&&a.call(l)}finally{if(n)throw n.error}}return t.simplifyStates(s)},t.prototype.updateStateForChar=function(e,r,n){for(var a=this.text[r]&255,s=of[e.getMode()][a]>0,l=null,d=0;d<=jn;d++){var h=of[d][a];if(h>0){if(l==null&&(l=e.endBinaryShift(r)),!s||d===e.getMode()||d===rn){var m=l.latchAndAppend(d,h);n.push(m)}if(!s&&vg[e.getMode()][d]>=0){var p=l.shiftAndAppend(d,h);n.push(p)}}}if(e.getBinaryShiftByteCount()>0||of[e.getMode()][a]===0){var v=e.addBinaryShiftChar(r);n.push(v)}},t.updateStateListForPair=function(e,r,n){var a,s,l=[];try{for(var d=Xl(e),h=d.next();!h.done;h=d.next()){var m=h.value;this.updateStateForPair(m,r,n,l)}}catch(p){a={error:p}}finally{try{h&&!h.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}return this.simplifyStates(l)},t.updateStateForPair=function(e,r,n,a){var s=e.endBinaryShift(r);if(a.push(s.latchAndAppend(jn,n)),e.getMode()!==jn&&a.push(s.shiftAndAppend(jn,n)),n===3||n===4){var l=s.latchAndAppend(rn,16-n).latchAndAppend(rn,1);a.push(l)}if(e.getBinaryShiftByteCount()>0){var d=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(d)}},t.simplifyStates=function(e){var r,n,a,s,l=[];try{for(var d=Xl(e),h=d.next();!h.done;h=d.next()){var m=h.value,p=!0,v=function(E){if(E.isBetterThanOrEqualTo(m))return p=!1,"break";m.isBetterThanOrEqualTo(E)&&(l=l.filter(function(j){return j!==E}))};try{for(var y=(a=void 0,Xl(l)),b=y.next();!b.done;b=y.next()){var _=b.value,w=v(_);if(w==="break")break}}catch(E){a={error:E}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}p&&l.push(m)}}catch(E){r={error:E}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return l},t}(),Q6=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var a=new W6(e).encode(),s=ze.truncDivision(a.getSize()*r,100)+11,l=a.getSize()+s,d,h,m,p,v;if(n!==t.DEFAULT_AZTEC_LAYERS){if(d=n<0,h=Math.abs(n),h>(d?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new Te($e.format("Illegal value %s for layers",n));m=t.totalBitsInLayer(h,d),p=t.WORD_SIZE[h];var y=m-m%p;if(v=t.stuffBits(a,p),v.getSize()+s>y)throw new Te("Data to large for user specified layer");if(d&&v.getSize()>p*64)throw new Te("Data to large for user specified layer")}else{p=0,v=null;for(var b=0;;b++){if(b>t.MAX_NB_BITS)throw new Te("Data too large for an Aztec code");if(d=b<=3,h=d?b+1:b,m=t.totalBitsInLayer(h,d),!(l>m)){(v==null||p!==t.WORD_SIZE[h])&&(p=t.WORD_SIZE[h],v=t.stuffBits(a,p));var y=m-m%p;if(!(d&&v.getSize()>p*64)&&v.getSize()+s<=y)break}}}var _=t.generateCheckWords(v,m,p),w=v.getSize()/p,E=t.generateModeMessage(d,h,w),j=(d?11:14)+h*4,A=new Int32Array(j),C;if(d){C=j;for(var b=0;b<A.length;b++)A[b]=b}else{C=j+1+2*ze.truncDivision(ze.truncDivision(j,2)-1,15);for(var D=ze.truncDivision(j,2),R=ze.truncDivision(C,2),b=0;b<D;b++){var L=b+ze.truncDivision(b,15);A[D-b-1]=R-L-1,A[D+b]=R+L+1}}for(var $=new On(C),b=0,W=0;b<h;b++){for(var J=(h-b)*4+(d?9:12),ae=0;ae<J;ae++)for(var be=ae*2,ce=0;ce<2;ce++)_.get(W+be+ce)&&$.set(A[b*2+ce],A[b*2+ae]),_.get(W+J*2+be+ce)&&$.set(A[b*2+ae],A[j-1-b*2-ce]),_.get(W+J*4+be+ce)&&$.set(A[j-1-b*2-ce],A[j-1-b*2-ae]),_.get(W+J*6+be+ce)&&$.set(A[j-1-b*2-ae],A[b*2+ce]);W+=J*8}if(t.drawModeMessage($,d,C,E),d)t.drawBullsEye($,ze.truncDivision(C,2),5);else{t.drawBullsEye($,ze.truncDivision(C,2),7);for(var b=0,ae=0;b<ze.truncDivision(j,2)-1;b+=15,ae+=16)for(var ce=ze.truncDivision(C,2)&1;ce<C;ce+=2)$.set(ze.truncDivision(C,2)-ae,ce),$.set(ze.truncDivision(C,2)+ae,ce),$.set(ce,ze.truncDivision(C,2)-ae),$.set(ce,ze.truncDivision(C,2)+ae)}var me=new L6;return me.setCompact(d),me.setSize(C),me.setLayers(h),me.setCodeWords(w),me.setMatrix($),me},t.drawBullsEye=function(e,r,n){for(var a=0;a<n;a+=2)for(var s=r-a;s<=r+a;s++)e.set(s,r-a),e.set(s,r+a),e.set(r-a,s),e.set(r+a,s);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var a=new er;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=t.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=t.generateCheckWords(a,40,4)),a},t.drawModeMessage=function(e,r,n,a){var s=ze.truncDivision(n,2);if(r)for(var l=0;l<7;l++){var d=s-3+l;a.get(l)&&e.set(d,s-5),a.get(l+7)&&e.set(s+5,d),a.get(20-l)&&e.set(d,s+5),a.get(27-l)&&e.set(s-5,d)}else for(var l=0;l<10;l++){var d=s-5+l+ze.truncDivision(l,5);a.get(l)&&e.set(d,s-7),a.get(l+10)&&e.set(s+7,d),a.get(29-l)&&e.set(d,s+7),a.get(39-l)&&e.set(s-7,d)}},t.generateCheckWords=function(e,r,n){var a,s,l=e.getSize()/n,d=new mg(t.getGF(n)),h=ze.truncDivision(r,n),m=t.bitsToWords(e,n,h);d.encode(m,h-l);var p=r%n,v=new er;v.appendBits(0,p);try{for(var y=Q6(Array.from(m)),b=y.next();!b.done;b=y.next()){var _=b.value;v.appendBits(_,n)}}catch(w){a={error:w}}finally{try{b&&!b.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}return v},t.bitsToWords=function(e,r,n){var a=new Int32Array(n),s,l;for(s=0,l=e.getSize()/r;s<l;s++){for(var d=0,h=0;h<r;h++)d|=e.get(s*r+h)?1<<r-h-1:0;a[s]=d}return a},t.getGF=function(e){switch(e){case 4:return Dr.AZTEC_PARAM;case 6:return Dr.AZTEC_DATA_6;case 8:return Dr.AZTEC_DATA_8;case 10:return Dr.AZTEC_DATA_10;case 12:return Dr.AZTEC_DATA_12;default:throw new Te("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new er,a=e.getSize(),s=(1<<r)-2,l=0;l<a;l+=r){for(var d=0,h=0;h<r;h++)(l+h>=a||e.get(l+h))&&(d|=1<<r-1-h);(d&s)===s?(n.appendBits(d&s,r),l--):(d&s)===0?(n.appendBits(d|1,r),l--):n.appendBits(d,r)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const J6=({onResult:t,onClose:e,isOpen:r})=>{const[n,a]=z.useState(!1),[s,l]=z.useState(""),[d,h]=z.useState(null),m=z.useRef(null),p=z.useRef(null),v=z.useRef(null),y=z.useCallback(()=>{p.current&&p.current.reset(),v.current&&(v.current.getTracks().forEach(w=>w.stop()),v.current=null),a(!1),l("")},[]),b=z.useCallback(async()=>{if(m.current){a(!0),l("");try{p.current=new ai;const w=await p.current.listVideoInputDevices();if(w.length===0)throw new Error("No se encontraron cámaras disponibles");const E=w.find(A=>A.label.toLowerCase().includes("back")||A.label.toLowerCase().includes("rear"))?.deviceId||w[0].deviceId,j=await navigator.mediaDevices.getUserMedia({video:{deviceId:E,width:{ideal:1280},height:{ideal:720},facingMode:{ideal:"environment"}}});v.current=j,m.current.srcObject=j,h(!0),p.current.decodeFromVideoDevice(E,m.current,(A,C)=>{if(A){const D=A.getText();_(D)?(t(D.toUpperCase()),y(),e()):(l("El código escaneado no es un VIN válido"),setTimeout(()=>l(""),3e3))}C&&!(C instanceof ee)&&console.error("Error de escaneo:",C)}),a(!1)}catch(w){console.error("Error al iniciar el escáner:",w),a(!1);const E=w;E.name==="NotAllowedError"?(l("Permiso de cámara denegado. Por favor permite el acceso a la cámara."),h(!1)):E.name==="NotFoundError"?l("No se encontró una cámara disponible."):E.name==="NotReadableError"?l("La cámara está siendo usada por otra aplicación."):l(E.message||"Error al acceder a la cámara")}}},[t,e,y]),_=w=>/^[A-HJ-NPR-Z0-9]{17}$/i.test(w);return z.useEffect(()=>(r?b():y(),()=>{y()}),[r,b,y]),r?c.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex flex-col",children:[c.jsxs("div",{className:"bg-white p-4 shadow-lg",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Escanear Código VIN"}),c.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 text-2xl font-bold",children:"✕"})]}),s&&c.jsx("div",{className:"mt-3 p-3 bg-red-100 border border-red-300 rounded-lg",children:c.jsx("p",{className:"text-red-700 text-sm",children:s})}),d===!1&&c.jsx("div",{className:"mt-3 p-3 bg-yellow-100 border border-yellow-300 rounded-lg",children:c.jsx("p",{className:"text-yellow-700 text-sm",children:"Para usar el escáner, necesitas permitir el acceso a la cámara en tu navegador."})})]}),c.jsxs("div",{className:"flex-1 relative",children:[c.jsx("video",{ref:m,className:"w-full h-full object-cover",autoPlay:!0,playsInline:!0,muted:!0}),n&&c.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:c.jsxs("div",{className:"bg-white p-4 rounded-lg flex items-center space-x-3",children:[c.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),c.jsx("span",{className:"text-gray-700",children:"Iniciando cámara..."})]})}),c.jsx("div",{className:"absolute inset-0 pointer-events-none",children:c.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:c.jsxs("div",{className:"w-80 h-20 border-2 border-red-500 rounded-lg relative",children:[c.jsx("div",{className:"absolute -top-8 left-0 text-white text-sm bg-black bg-opacity-50 px-2 py-1 rounded",children:"Apunte la cámara al código de barras del VIN"}),c.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-t-4 border-l-4 border-red-500"}),c.jsx("div",{className:"absolute top-0 right-0 w-6 h-6 border-t-4 border-r-4 border-red-500"}),c.jsx("div",{className:"absolute bottom-0 left-0 w-6 h-6 border-b-4 border-l-4 border-red-500"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b-4 border-r-4 border-red-500"})]})})})]}),c.jsxs("div",{className:"bg-white p-4",children:[c.jsx("div",{className:"flex justify-center space-x-4",children:c.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"})}),c.jsx("div",{className:"mt-3 text-center",children:c.jsx("p",{className:"text-sm text-gray-600",children:"Mantén el código de barras dentro del recuadro rojo para escanearlo"})})]})]}):null},eC=or().regex(/^\+52[0-9]{10}$/,"Formato: +52 seguido de 10 dígitos"),tC=es({nombre:or().min(1,"Nombre requerido"),telefono:eC,rfc:or().optional()}),Pf=({customer:t,onSuccess:e,onCancel:r})=>{const[n,a]=z.useState(!1),[s,l]=z.useState(null),d=!!t,{register:h,handleSubmit:m,watch:p,setValue:v,formState:{errors:y}}=Zr({resolver:Ji(tC),defaultValues:t?{nombre:t.nombre,telefono:t.telefono,rfc:t.rfc||""}:{telefono:"+52"}}),b=async _=>{a(!0),l(null);try{const w=Object.fromEntries(Object.entries(_).filter(([j,A])=>A!==""&&A!==void 0));let E;d?E=await qn.update(t.customer_id,w):E=await qn.create(w),e?.(E.customer)}catch(w){l(w.response?.data?.message||"Error al guardar el cliente")}finally{a(!1)}};return c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:d?"Editar Cliente":"Registrar Nuevo Cliente"}),r&&c.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),s&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600 text-sm",children:s})}),c.jsxs("form",{onSubmit:m(b),className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),c.jsx("input",{...h("nombre"),type:"text",className:"input-field",placeholder:"Juan Pérez García"}),y.nombre&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.nombre.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono / WhatsApp *"}),c.jsx("input",{...h("telefono"),type:"tel",className:"input-field",placeholder:"+5215512345678"}),y.telefono&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:y.telefono.message}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Formato: +52 seguido de 10 dígitos"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RFC (Opcional)"}),c.jsx("input",{...h("rfc"),type:"text",className:"input-field uppercase",placeholder:"PEGJ801215ABC (opcional)",maxLength:13}),c.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Solo para facturación empresarial"})]})]}),c.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r&&c.jsx("button",{type:"button",onClick:r,className:"btn-secondary",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:n,className:"btn-primary disabled:opacity-50",children:n?d?"Actualizando...":"Registrando...":d?"Actualizar Cliente":"Registrar Cliente"})]})]})]})},rC=es({vin:or().transform(t=>t===""?void 0:t).optional(),marca:or().min(1,"Marca requerida"),modelo:or().min(1,"Modelo requerido"),año:Ka().int().min(1900).max(new Date().getFullYear()+1,"Año inválido"),placa_actual:or().min(1,"Placa requerida"),customer_id:Ka().optional(),kilometraje_actual:Ka().min(0,"Kilometraje no puede ser negativo"),color:or().optional(),numero_motor:or().optional(),tipo_combustible:Yi(["gasolina","diesel","hibrido","electrico"]),transmision:Yi(["manual","automatica"]),notas:or().optional()}),nC=["Nissan","Volkswagen","Chevrolet","Ford","Honda","Toyota","Hyundai","Kia","Mazda","Mitsubishi","Suzuki","Jeep"],Xx=({vehicle:t,onSuccess:e,onCancel:r})=>{const[n,a]=z.useState(!1),[s,l]=z.useState(null),[d,h]=z.useState([]),[m,p]=z.useState(""),[v,y]=z.useState(!1),[b,_]=z.useState(!1),w=!!t,{register:E,handleSubmit:j,setValue:A,watch:C,formState:{errors:D}}=Zr({resolver:Ji(rC),defaultValues:t?{vin:t.vin,marca:t.marca,modelo:t.modelo,año:t.año,placa_actual:t.placa_actual||"",customer_id:t.customer_id||void 0,kilometraje_actual:t.kilometraje_actual,color:t.color||"",numero_motor:t.numero_motor||"",tipo_combustible:t.tipo_combustible,transmision:t.transmision,notas:t.notas||""}:{kilometraje_actual:0,tipo_combustible:"gasolina",transmision:"manual"}}),R=C("customer_id");z.useEffect(()=>{const ae=setTimeout(async()=>{if(m.length>=2)try{const be=await qn.searchByName(m);h(be.customers||[])}catch(be){console.error("Error buscando clientes:",be)}else h([])},300);return()=>clearTimeout(ae)},[m]);const L=async J=>{a(!0),l(null);try{const ae=Object.fromEntries(Object.entries(J).filter(([ce,me])=>me!==""&&me!==void 0));let be;w?be=await Tr.update(t.vin,ae):be=await Tr.create(ae),e?.(be.vehicle)}catch(ae){l(ae.response?.data?.message||"Error al guardar el vehículo")}finally{a(!1)}},$=J=>{A("vin",J),y(!1)},W=J=>{A("customer_id",J.customer_id),p(J.nombre),_(!1),h([])};return c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:w?"Editar Vehículo":"Registrar Nuevo Vehículo"}),r&&c.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),s&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600 text-sm",children:s})}),c.jsxs("form",{onSubmit:j(L),className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"VIN"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{...E("vin"),type:"text",className:"input-field uppercase flex-1",placeholder:"Número de identificación del vehículo (opcional)",disabled:w}),!w&&c.jsxs("button",{type:"button",onClick:()=>y(!0),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-1 whitespace-nowrap",title:"Escanear código de barras VIN",children:[c.jsx("span",{children:"📷"}),c.jsx("span",{className:"hidden sm:inline",children:"Escanear VIN"})]})]}),D.vin&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.vin.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Placas *"}),c.jsx("input",{...E("placa_actual"),type:"text",className:"input-field uppercase",placeholder:"Placas del vehículo"}),D.placa_actual&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.placa_actual.message})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marca *"}),c.jsxs("select",{...E("marca"),className:"input-field",children:[c.jsx("option",{value:"",children:"Seleccionar marca"}),nC.map(J=>c.jsx("option",{value:J,children:J},J)),c.jsx("option",{value:"Otra",children:"Otra"})]}),D.marca&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.marca.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modelo *"}),c.jsx("input",{...E("modelo"),type:"text",className:"input-field",placeholder:"Tsuru, Jetta, Aveo..."}),D.modelo&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.modelo.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Año *"}),c.jsx("input",{...E("año",{valueAsNumber:!0}),type:"number",className:"input-field",min:"1900",max:new Date().getFullYear()+1}),D.año&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.año.message})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kilometraje actual"}),c.jsx("input",{...E("kilometraje_actual",{valueAsNumber:!0}),type:"number",className:"input-field",min:"0",placeholder:"150000"}),D.kilometraje_actual&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:D.kilometraje_actual.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de combustible"}),c.jsxs("select",{...E("tipo_combustible"),className:"input-field",children:[c.jsx("option",{value:"gasolina",children:"Gasolina"}),c.jsx("option",{value:"diesel",children:"Diesel"}),c.jsx("option",{value:"hibrido",children:"Híbrido"}),c.jsx("option",{value:"electrico",children:"Eléctrico"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transmisión"}),c.jsxs("select",{...E("transmision"),className:"input-field",children:[c.jsx("option",{value:"manual",children:"Manual"}),c.jsx("option",{value:"automatica",children:"Automática"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),c.jsx("input",{...E("color"),type:"text",className:"input-field",placeholder:"Blanco, Azul, Rojo..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número de motor"}),c.jsx("input",{...E("numero_motor"),type:"text",className:"input-field",placeholder:"A15123456"})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-1",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Propietario"}),c.jsx("button",{type:"button",onClick:()=>_(!0),className:"text-sm bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 transition-colors",children:"+ Nuevo Cliente"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("input",{type:"text",value:m,onChange:J=>p(J.target.value),className:"input-field",placeholder:"Buscar cliente por nombre..."}),d.length>0&&c.jsx("div",{className:"border border-gray-300 rounded-lg max-h-48 overflow-y-auto",children:d.map(J=>c.jsxs("button",{type:"button",onClick:()=>{A("customer_id",J.customer_id),p(J.nombre),h([])},className:`w-full text-left p-3 hover:bg-gray-50 border-b border-gray-200 last:border-b-0 ${R===J.customer_id?"bg-blue-50":""}`,children:[c.jsx("div",{className:"font-medium",children:J.nombre}),c.jsx("div",{className:"text-sm text-gray-600",children:J.telefono})]},J.customer_id))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),c.jsx("textarea",{...E("notas"),rows:3,className:"input-field",placeholder:"Información adicional sobre el vehículo..."})]}),c.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r&&c.jsx("button",{type:"button",onClick:r,className:"btn-secondary",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:n,className:"btn-primary disabled:opacity-50",children:n?w?"Actualizando...":"Registrando...":w?"Actualizar Vehículo":"Registrar Vehículo"})]})]}),c.jsx(J6,{isOpen:v,onResult:$,onClose:()=>y(!1)}),b&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:c.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:c.jsx(Pf,{onSuccess:W,onCancel:()=>_(!1)})})})]})},aC=es({vehicle_id:Ka().positive("Seleccione un vehículo"),customer_id:Ka().positive("Seleccione un cliente"),tipo_oportunidad:or().min(1,"Tipo de oportunidad requerido"),descripcion:or().min(1,"Nota requerida"),precio_estimado:Ka().positive("Precio debe ser positivo").optional(),fecha_sugerida:or().optional(),prioridad:Yi(["alta","media","baja"]),kilometraje_referencia:Ka().min(0,"Kilometraje no puede ser negativo").optional()}),iC=["afinacion_mayor","cambio_aceite","servicio_frenos","suspension","direccion","alineacion"],kf=({opportunity:t,preselectedVehicleId:e,onSuccess:r,onCancel:n})=>{const{user:a}=vn(),[s,l]=z.useState(!1),[d,h]=z.useState(null),[m,p]=z.useState(null),[v,y]=z.useState(""),[b,_]=z.useState([]),[w,E]=z.useState([]),[j,A]=z.useState([]),[C,D]=z.useState(!1),R=!!t,{register:L,handleSubmit:$,setValue:W,watch:J,formState:{errors:ae}}=Zr({resolver:Ji(aC),defaultValues:t?{vehicle_id:t.vehicle_id,customer_id:t.customer_id,tipo_oportunidad:t.tipo_oportunidad,descripcion:t.descripcion,precio_estimado:t.precio_estimado||void 0,fecha_sugerida:t.fecha_sugerida?t.fecha_sugerida.split("T")[0]:"",prioridad:t.prioridad,kilometraje_referencia:t.kilometraje_referencia||void 0}:{vehicle_id:e||void 0,prioridad:"media"}}),be=J("vehicle_id"),ce=J("customer_id");z.useEffect(()=>{(async()=>{if(e)try{const P=await Tr.getById(e);p(P.vehicle),D(!0),P.vehicle.customer_id&&(console.log("🔧 Auto-seleccionando cliente del vehículo:",P.vehicle.customer?.nombre),W("customer_id",P.vehicle.customer_id))}catch(P){console.error("Error cargando vehículo preseleccionado:",P)}})()},[e,W]),z.useEffect(()=>{const P=setTimeout(async()=>{if(v.length>=2&&!C)try{console.log("Buscando vehículos con:",v);const oe=await Tr.search({placa:v,customer_name:v});console.log("Resultado de búsqueda:",oe),_(oe.vehicles||[])}catch(oe){console.error("Error buscando vehículos:",oe),_([])}else _([])},300);return()=>clearTimeout(P)},[v,C]),z.useEffect(()=>{(async()=>{if(be&&be!==e)try{const P=await Tr.getById(be);p(P.vehicle),P.vehicle.customer_id&&(console.log("🔧 Auto-seleccionando cliente del vehículo:",P.vehicle.customer?.nombre),W("customer_id",P.vehicle.customer_id),W("kilometraje_referencia",P.vehicle.kilometraje_actual))}catch(P){console.error("Error cargando información del vehículo:",P)}})()},[be,W,e]),z.useEffect(()=>{(async()=>{try{const P=await qn.search({limit:100});E(P.customers||[])}catch(P){console.error("Error cargando clientes:",P)}})()},[]),z.useEffect(()=>{(async()=>{try{a&&A([a])}catch(P){console.error("Error cargando usuarios:",P)}})()},[a]);const me=async he=>{l(!0),h(null);try{const P=Object.fromEntries(Object.entries(he).filter(([Y,ve])=>ve!==""&&ve!==void 0&&ve!==null));let oe;R?oe=await mr.update(t.opportunity_id,P):oe=await mr.create(P),r?.(oe.opportunity)}catch(P){h(P.response?.data?.message||"Error al guardar la oportunidad")}finally{l(!1)}},_e=he=>`https://wa.me/52${he.replace(/^\+52/,"")}`;return c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:R?"Editar Oportunidad":"Crear Nueva Oportunidad"}),n&&c.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),d&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600 text-sm",children:d})}),c.jsxs("form",{onSubmit:$(me),className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Vehículo"}),!e&&c.jsxs("div",{className:"space-y-2 mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Buscar vehículo (placas o cliente)"}),c.jsx("input",{type:"text",value:v,onChange:he=>{y(he.target.value),C&&D(!1)},className:"input-field",placeholder:"ABC-123-A o Juan Pérez"}),v.length>=2&&!C&&c.jsx("div",{className:"border border-gray-300 rounded-lg max-h-48 overflow-y-auto",children:b.length>0?b.map(he=>c.jsxs("button",{type:"button",onClick:()=>{console.log("Seleccionando vehículo:",he),W("vehicle_id",he.vehicle_id),y(`${he.marca} ${he.modelo} - ${he.placa_actual}`),_([]),D(!0),he.customer_id&&(console.log("🔧 Auto-seleccionando cliente:",he.customer?.nombre),W("customer_id",he.customer_id))},className:"w-full text-left p-3 hover:bg-gray-50 border-b border-gray-200 last:border-b-0",children:[c.jsxs("div",{className:"font-medium",children:[he.marca," ",he.modelo," ",he.año]}),c.jsxs("div",{className:"text-sm text-gray-600",children:[he.placa_actual," • VIN: ",he.vin||"No registrado"," • ",he.customer?.nombre]})]},he.vehicle_id)):c.jsxs("div",{className:"p-3 text-center text-gray-500 text-sm",children:['No se encontraron vehículos con "',v,'"']})})]}),m&&c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-2",children:[m.marca," ",m.modelo," ",m.año]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Placas:"})," ",m.placa_actual||"No asignadas"]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"VIN:"})," ",m.vin]})]}),c.jsxs("div",{children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Kilometraje:"})," ",m.kilometraje_actual?.toLocaleString()," km"]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Propietario:"})," ",m.customer?.nombre||"No asignado"]})]})]}),m.customer?.whatsapp&&c.jsx("div",{className:"mt-2",children:c.jsx("a",{href:_e(m.customer.whatsapp),target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700 font-medium text-sm",children:"💬 Contactar por WhatsApp"})})]}),c.jsx("input",{type:"hidden",...L("vehicle_id",{valueAsNumber:!0})}),ae.vehicle_id&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:ae.vehicle_id.message})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Información de la Oportunidad"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de oportunidad *"}),c.jsxs("select",{...L("tipo_oportunidad"),className:"input-field",children:[c.jsx("option",{value:"",children:"Seleccionar tipo"}),iC.map(he=>c.jsx("option",{value:he,children:he.replace(/_/g," ").replace(/\b\w/g,P=>P.toUpperCase())},he))]}),ae.tipo_oportunidad&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:ae.tipo_oportunidad.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),c.jsxs("select",{...L("prioridad"),className:"input-field",children:[c.jsx("option",{value:"baja",children:"Baja"}),c.jsx("option",{value:"media",children:"Media"}),c.jsx("option",{value:"alta",children:"Alta"})]})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota *"}),c.jsx("textarea",{...L("descripcion"),rows:3,className:"input-field",placeholder:"Descripción detallada del servicio necesario..."}),ae.descripcion&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:ae.descripcion.message})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Detalles del Servicio"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio estimado (MXN)"}),c.jsx("input",{...L("precio_estimado",{valueAsNumber:!0}),type:"number",className:"input-field",placeholder:"450.00",step:"0.01",min:"0"}),ae.precio_estimado&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:ae.precio_estimado.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha sugerida para el servicio"}),c.jsx("input",{...L("fecha_sugerida"),type:"date",className:"input-field",min:new Date().toISOString().split("T")[0]})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kilometraje sugerido"}),c.jsx("input",{...L("kilometraje_referencia",{valueAsNumber:!0}),type:"number",className:"input-field",placeholder:m?.kilometraje_actual?.toString()||"0",min:"0"})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cliente"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente *"}),ce&&m?.customer?.nombre&&c.jsxs("div",{className:"mb-2 p-2 bg-green-50 border border-green-200 rounded text-sm",children:["✅ ",c.jsx("strong",{children:"Auto-seleccionado:"})," ",m.customer.nombre]}),c.jsxs("select",{...L("customer_id",{valueAsNumber:!0}),className:"input-field",children:[c.jsx("option",{value:"",children:"Seleccionar cliente"}),w.map(he=>c.jsxs("option",{value:he.customer_id,children:[he.nombre," - ",he.telefono]},he.customer_id))]}),ae.customer_id&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:ae.customer_id.message})]})]}),c.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[n&&c.jsx("button",{type:"button",onClick:n,className:"btn-secondary",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:s,className:"btn-primary disabled:opacity-50",children:s?R?"Actualizando...":"Creando...":R?"Actualizar Oportunidad":"Crear Oportunidad"})]})]})]})},sC=({initialMode:t="search",onModeUsed:e})=>{console.log("🚗 VEHICLES COMPONENT LOADED with initialMode:",t);const[r,n]=z.useState(t),[a,s]=z.useState(null);z.useEffect(()=>{t==="create"&&e&&(console.log("🧹 Cleaning up initialMode in parent"),e())},[t,e]);const l=!0,d=w=>{s(w),n("detail")},h=()=>{console.log("🚗 handleCreateNew called"),console.log("Current viewMode:",r),s(null),n("create"),console.log("ViewMode set to: create")},m=()=>{a&&n("edit")},p=w=>{s(w),n("detail")},v=()=>{n("detail")},y=()=>{n("search"),s(null)},b=w=>`https://wa.me/52${w.replace(/^\+52/,"")}`,_=()=>{switch(console.log("📱 Rendering Vehicles with viewMode:",r),r){case"create":return c.jsx(Xx,{onSuccess:p,onCancel:y});case"edit":return c.jsx(Xx,{vehicle:a,onSuccess:p,onCancel:y});case"create-opportunity":return c.jsxs("div",{className:"space-y-4",children:[c.jsx("button",{onClick:()=>n("detail"),className:"flex items-center text-gray-600 hover:text-gray-800",children:"← Regresar al vehículo"}),c.jsx(kf,{preselectedVin:a?.vin,onSuccess:v,onCancel:()=>n("detail")})]});case"detail":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("button",{onClick:()=>n("search"),className:"flex items-center text-gray-600 hover:text-gray-800",children:"← Regresar a búsqueda"}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-6",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[a?.marca," ",a?.modelo," ",a?.año]}),c.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[c.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:a?.placa_actual||"Sin placas"}),c.jsxs("span",{className:"text-gray-600 text-sm",children:["VIN: ",a?.vin]})]})]}),c.jsx("button",{onClick:m,className:"btn-secondary",children:"Editar Vehículo"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Información Básica"}),c.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Marca:"})," ",a?.marca]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Modelo:"})," ",a?.modelo]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Año:"})," ",a?.año]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Color:"})," ",a?.color||"No especificado"]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Información Técnica"}),c.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Kilometraje:"})," ",a?.kilometraje_actual?.toLocaleString()," km"]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Combustible:"})," ",a?.tipo_combustible]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Transmisión:"})," ",a?.transmision]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Motor:"})," ",a?.numero_motor||"No especificado"]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Propietario"}),a?.customer?c.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[c.jsx("p",{className:"font-medium text-gray-900",children:a.customer.nombre}),c.jsxs("p",{children:["📞 ",a.customer.telefono]}),a.customer.whatsapp&&c.jsx("a",{href:b(a.customer.whatsapp),target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700 font-medium",children:"💬 Enviar WhatsApp"}),a.customer.email&&c.jsxs("p",{children:["✉️ ",a.customer.email]})]}):c.jsx("p",{className:"text-sm text-gray-500",children:"No asignado"})]})]}),a?.notas&&c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Notas"}),c.jsx("p",{className:"text-sm text-gray-600",children:a.notas})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("button",{onClick:()=>{s(a),n("create-opportunity")},className:"card p-4 text-center hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"text-2xl mb-2",children:"🔧"}),c.jsx("div",{className:"font-medium",children:"Crear Oportunidad"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Programar servicio"})]}),c.jsxs("button",{className:"card p-4 text-center hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"text-2xl mb-2",children:"📋"}),c.jsx("div",{className:"font-medium",children:"Ver Historial"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Servicios realizados"})]}),a?.customer?.whatsapp&&c.jsxs("a",{href:b(a.customer.whatsapp),target:"_blank",rel:"noopener noreferrer",className:"card p-4 text-center hover:shadow-md transition-shadow block",children:[c.jsx("div",{className:"text-2xl mb-2",children:"💬"}),c.jsx("div",{className:"font-medium",children:"Contactar Cliente"}),c.jsx("div",{className:"text-sm text-gray-600",children:"WhatsApp directo"})]})]})]});default:return console.log("🔍 Rendering VehicleSearch with canModifyVehicles:",l),console.log("🔍 handleCreateNew function:",h),c.jsx(mN,{onVehicleSelect:d,onCreateNew:h})}};return c.jsx("div",{className:"bg-gray-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:_()})})},oC=es({searchType:Yi(["nombre","telefono","email"]),searchValue:or().min(1,"Valor de búsqueda requerido")}),lC=({onCustomerSelect:t,onCreateNew:e})=>{const[r,n]=z.useState([]),[a,s]=z.useState(!1),[l,d]=z.useState(null),{register:h,handleSubmit:m,watch:p,formState:{errors:v}}=Zr({resolver:Ji(oC),defaultValues:{searchType:"nombre"}}),y=p("searchType"),b=()=>{switch(y){case"nombre":return"Juan Pérez";case"telefono":return"+5215512345678";case"email":return"juan@email.com";default:return""}},_=async A=>{s(!0),d(null),n([]);try{let C;switch(A.searchType){case"nombre":C=await qn.searchByName(A.searchValue);break;case"telefono":C=await qn.searchByPhone(A.searchValue);break;case"email":C=await qn.search({email:A.searchValue});break;default:throw new Error("Tipo de búsqueda no válido")}n(C.customers||[]),C.customers?.length===0&&d("No se encontraron clientes que coincidan con la búsqueda")}catch(C){d(C.response?.data?.message||"Error al buscar clientes")}finally{s(!1)}},w=async()=>{s(!0),d(null),n([]);try{const A=await qn.getAll(100);n(A.customers||[]),A.customers?.length===0&&d("No hay clientes registrados en el sistema")}catch(A){d(A.response?.data?.message||"Error al cargar clientes")}finally{s(!1)}},E=A=>`https://wa.me/52${A.replace(/^\+52/,"")}`,j=A=>A.length===13&&A.startsWith("+52")?`+52 ${A.slice(3,5)} ${A.slice(5,9)} ${A.slice(9)}`:A;return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Búsqueda de Clientes"}),c.jsx("form",{onSubmit:m(_),className:"space-y-4",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de búsqueda"}),c.jsxs("select",{...h("searchType"),className:"input-field",children:[c.jsx("option",{value:"nombre",children:"Por Nombre"}),c.jsx("option",{value:"telefono",children:"Por Teléfono"}),c.jsx("option",{value:"email",children:"Por Email"})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor a buscar"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{...h("searchValue"),type:"text",className:"input-field flex-1",placeholder:b()}),c.jsx("button",{type:"submit",disabled:a,className:"btn-primary px-6 disabled:opacity-50",children:a?"Buscando...":"Buscar"}),c.jsx("button",{type:"button",onClick:w,disabled:a,className:"btn-secondary px-6 disabled:opacity-50",children:"Ver Todos"})]}),v.searchValue&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.searchValue.message})]})]})}),e&&c.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:c.jsx("button",{onClick:e,className:"btn-secondary",children:"+ Registrar Nuevo Cliente"})})]}),l&&c.jsx("div",{className:"card p-4 bg-red-50 border border-red-200",children:c.jsx("p",{className:"text-red-600 text-sm",children:l})}),r.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Resultados (",r.length,")"]}),r.map(A=>c.jsx("div",{className:"card p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t?.(A),children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:A.nombre}),A.rfc&&c.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:["RFC: ",A.rfc]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:"📞"}),c.jsx("span",{children:j(A.telefono)})]}),A.whatsapp&&A.whatsapp!==A.telefono&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:"💬"}),c.jsx("span",{children:j(A.whatsapp)})]}),A.email&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:"✉️"}),c.jsx("span",{children:A.email})]})]}),c.jsxs("div",{className:"space-y-1",children:[A.direccion&&c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{children:"📍"}),c.jsx("span",{className:"line-clamp-2",children:A.direccion})]}),A.codigo_postal&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:"📮"}),c.jsxs("span",{children:["CP: ",A.codigo_postal]})]})]})]}),c.jsxs("div",{className:"mt-3 flex items-center space-x-4",children:[A.whatsapp&&c.jsx("a",{href:E(A.whatsapp),target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700 font-medium text-sm",onClick:C=>C.stopPropagation(),children:"💬 WhatsApp"}),c.jsx("a",{href:`tel:${A.telefono}`,className:"text-blue-600 hover:text-blue-700 font-medium text-sm",onClick:C=>C.stopPropagation(),children:"📞 Llamar"}),A.email&&c.jsx("a",{href:`mailto:${A.email}`,className:"text-purple-600 hover:text-purple-700 font-medium text-sm",onClick:C=>C.stopPropagation(),children:"✉️ Email"})]}),A.notas&&c.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:c.jsxs("p",{className:"text-sm text-gray-600 italic",children:['"',A.notas,'"']})})]}),c.jsx("div",{className:"text-right",children:c.jsxs("span",{className:"text-xs text-gray-500",children:["Registrado: ",new Date(A.fecha_registro).toLocaleDateString("es-MX")]})})]})},A.customer_id))]})]})},cC=()=>{const{user:t}=vn(),[e,r]=z.useState("search"),[n,a]=z.useState(null),[s,l]=z.useState([]),[d,h]=z.useState(!1),m=t?.rol==="administrador"||t?.rol==="mecanico",p=async A=>{a(A),r("detail"),h(!0);try{const C=await Tr.search({customer_name:A.nombre});l(C.vehicles||[])}catch(C){console.error("Error cargando vehículos:",C),l([])}finally{h(!1)}},v=()=>{a(null),r("create")},y=()=>{n&&r("edit")},b=A=>{a(A),r("detail")},_=()=>{r("search"),a(null),l([])},w=A=>`https://wa.me/52${A.replace(/^\+52/,"")}`,E=A=>A.length===13&&A.startsWith("+52")?`+52 ${A.slice(3,5)} ${A.slice(5,9)} ${A.slice(9)}`:A,j=()=>{switch(e){case"create":return c.jsx(Pf,{onSuccess:b,onCancel:_});case"edit":return c.jsx(Pf,{customer:n,onSuccess:b,onCancel:_});case"detail":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("button",{onClick:()=>r("search"),className:"flex items-center text-gray-600 hover:text-gray-800",children:"← Regresar a búsqueda"}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:n?.nombre}),c.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[n?.rfc&&c.jsxs("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:["RFC: ",n.rfc]}),c.jsxs("span",{className:"text-gray-600 text-sm",children:["Cliente desde: ",new Date(n?.fecha_registro||"").toLocaleDateString("es-MX")]})]})]}),m&&c.jsx("button",{onClick:y,className:"btn-secondary",children:"Editar Cliente"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Información de Contacto"}),c.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:"📞"}),c.jsx("span",{children:E(n?.telefono||"")}),c.jsx("a",{href:`tel:${n?.telefono}`,className:"text-blue-600 hover:text-blue-700 ml-2",children:"Llamar"})]}),n?.whatsapp&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:"💬"}),c.jsx("span",{children:E(n.whatsapp)}),c.jsx("a",{href:w(n.whatsapp),target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700 ml-2",children:"WhatsApp"})]}),n?.email&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:"✉️"}),c.jsx("span",{children:n.email}),c.jsx("a",{href:`mailto:${n.email}`,className:"text-purple-600 hover:text-purple-700 ml-2",children:"Email"})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Ubicación"}),c.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[n?.direccion?c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{children:"📍"}),c.jsx("span",{children:n.direccion})]}):c.jsx("p",{className:"text-gray-500",children:"No especificada"}),n?.codigo_postal&&c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsx("span",{children:"📮"}),c.jsxs("span",{children:["CP: ",n.codigo_postal]})]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Estadísticas"}),c.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Vehículos:"})," ",s.length]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Último contacto:"})," Hace 2 días"]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Servicios totales:"})," --"]})]})]})]}),n?.notas&&c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Notas"}),c.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:n.notas})]})]}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Vehículos del Cliente (",s.length,")"]}),c.jsx("button",{className:"btn-secondary text-sm",children:"+ Registrar Vehículo para este Cliente"})]}),d?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Cargando vehículos..."})]}):s.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(A=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[c.jsxs("div",{className:"flex justify-between items-start mb-2",children:[c.jsxs("h4",{className:"font-medium text-gray-900",children:[A.marca," ",A.modelo," ",A.año]}),c.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs font-medium",children:A.placa_actual||"Sin placas"})]}),c.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"VIN:"})," ",A.vin]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Kilometraje:"})," ",A.kilometraje_actual?.toLocaleString()," km"]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Último servicio:"})," --"]})]}),c.jsxs("div",{className:"mt-3 flex space-x-2",children:[c.jsx("button",{className:"text-xs bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded",children:"Ver Historial"}),c.jsx("button",{className:"text-xs bg-green-100 hover:bg-green-200 text-green-700 px-2 py-1 rounded",children:"Crear Oportunidad"})]})]},A.vin))}):c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx("p",{children:"Este cliente no tiene vehículos registrados"}),c.jsx("button",{className:"mt-2 btn-secondary text-sm",children:"Registrar Primer Vehículo"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("button",{className:"card p-4 text-center hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"text-2xl mb-2",children:"💬"}),c.jsx("div",{className:"font-medium",children:"Enviar WhatsApp"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Contacto directo"})]}),c.jsxs("button",{className:"card p-4 text-center hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"text-2xl mb-2",children:"🔧"}),c.jsx("div",{className:"font-medium",children:"Crear Oportunidad"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Nuevo servicio"})]}),c.jsxs("button",{className:"card p-4 text-center hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"text-2xl mb-2",children:"📋"}),c.jsx("div",{className:"font-medium",children:"Ver Historial"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Todos los servicios"})]})]})]});default:return c.jsx(lC,{onCustomerSelect:p,onCreateNew:m?v:void 0})}};return c.jsx("div",{className:"bg-gray-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:j()})})},uC={pendiente:"bg-yellow-100 text-yellow-800",contactado:"bg-blue-100 text-blue-800",agendado:"bg-purple-100 text-purple-800",en_proceso:"bg-orange-100 text-orange-800",completado:"bg-green-100 text-green-800",perdido:"bg-red-100 text-red-800"},dC={alta:"bg-red-100 text-red-800",media:"bg-yellow-100 text-yellow-800",baja:"bg-green-100 text-green-800"},fC={pendiente:"Pendiente",contactado:"Contactado",agendado:"Agendado",en_proceso:"En Proceso",completado:"Completado",perdido:"Perdido"},hC={alta:"Alta",media:"Media",baja:"Baja"},gg=({opportunity:t,onSelect:e,onStatusChange:r,onConvertToAppointment:n,onDelete:a,showVehicleInfo:s=!0})=>{const l=b=>b?new Date(b).toLocaleDateString("es-MX",{day:"2-digit",month:"2-digit",year:"numeric"}):"",d=b=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN",minimumFractionDigits:0}).format(b),h=b=>`https://wa.me/52${b.replace(/^\+52/,"")}`,p=(()=>{if(!t.fecha_sugerida)return null;const b=new Date,w=new Date(t.fecha_sugerida).getTime()-b.getTime();return Math.ceil(w/(1e3*60*60*24))})(),v=()=>p?p<0?"border-l-4 border-red-500":p<=3?"border-l-4 border-orange-500":p<=7?"border-l-4 border-yellow-500":"border-l-4 border-green-500":"",y=()=>!t.converted_to_service_id;return c.jsxs("div",{className:`card p-6 hover:shadow-md transition-shadow cursor-pointer ${v()}`,onClick:()=>e?.(t),children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:t.titulo}),c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${uC[t.estado]}`,children:fC[t.estado]}),c.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${dC[t.prioridad]}`,children:["Prioridad ",hC[t.prioridad]]}),t.precio_estimado&&c.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs font-medium",children:d(t.precio_estimado)})]})]}),r&&c.jsx("div",{className:"ml-4",children:c.jsxs("select",{value:t.estado,onChange:b=>{b.stopPropagation(),r(t.opportunity_id,b.target.value)},className:"text-xs border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[c.jsx("option",{value:"pendiente",children:"Pendiente"}),c.jsx("option",{value:"contactado",children:"Contactado"}),c.jsx("option",{value:"agendado",children:"Agendado"}),c.jsx("option",{value:"en_proceso",children:"En Proceso"}),c.jsx("option",{value:"completado",children:"Completado"}),c.jsx("option",{value:"perdido",children:"Perdido"})]})})]}),s&&(t.vehicle_marca||t.vin)||t.customer_nombre?c.jsx("div",{className:"bg-gray-50 p-3 rounded-lg mb-4",children:c.jsxs("div",{className:"flex flex-col lg:flex-row lg:gap-6",children:[s&&(t.vehicle_marca||t.vin)&&c.jsxs("div",{className:"flex-1 mb-3 lg:mb-0",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-1",children:["🚗 ",t.vehicle_marca," ",t.vehicle_modelo," ",t.vehicle_año]}),c.jsxs("p",{className:"text-sm text-gray-600",children:["Placas: ",t.vehicle_placa||"No asignadas"," • VIN: ",t.vin]})]}),t.customer_nombre&&c.jsxs("div",{className:"flex-1",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-1",children:["👤 Cliente: ",t.customer_nombre]}),c.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-600",children:[c.jsxs("span",{children:["📞 ",t.customer_telefono]}),t.customer_whatsapp&&c.jsx("a",{href:h(t.customer_whatsapp),target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700 font-medium",onClick:b=>b.stopPropagation(),children:"💬 WhatsApp"})]})]})]})}):null,c.jsxs("div",{className:"mb-4",children:[c.jsx("p",{className:"text-gray-700 text-sm line-clamp-2",children:t.descripcion}),t.servicio_sugerido&&c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Servicio:"})," ",t.servicio_sugerido]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[c.jsxs("div",{children:[t.fecha_sugerida&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Fecha sugerida:"})," ",l(t.fecha_sugerida),p!==null&&c.jsx("span",{className:`ml-2 ${p<0?"text-red-600 font-medium":p<=3?"text-orange-600 font-medium":p<=7?"text-yellow-600 font-medium":"text-green-600"}`,children:p<0?`(${Math.abs(p)} días vencido)`:p===0?"(Hoy)":p===1?"(Mañana)":`(en ${p} días)`})]}),t.fecha_contacto_sugerida&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Contactar:"})," ",l(t.fecha_contacto_sugerida)]})]}),c.jsxs("div",{children:[t.usuario_asignado_nombre&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Asignado a:"})," ",t.usuario_asignado_nombre]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Creado:"})," ",l(t.fecha_creacion)]})]})]}),c.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200 flex justify-between items-center",children:[c.jsxs("div",{className:"text-xs text-gray-500",children:["Tipo: ",t.tipo_oportunidad.replace(/_/g," "),t.kilometraje_referencia&&c.jsxs("span",{className:"ml-2",children:["• ",t.kilometraje_referencia.toLocaleString()," km"]})]}),c.jsxs("div",{className:"flex space-x-2",children:[t.customer_whatsapp&&c.jsx("a",{href:h(t.customer_whatsapp),target:"_blank",rel:"noopener noreferrer",className:"text-xs bg-green-100 hover:bg-green-200 text-green-700 px-2 py-1 rounded",onClick:b=>b.stopPropagation(),children:"WhatsApp"}),!t.tiene_cita&&t.customer_id&&t.vehicle_id&&n&&c.jsx("button",{onClick:b=>{b.stopPropagation(),n(t)},className:"text-xs bg-purple-100 hover:bg-purple-200 text-purple-700 px-2 py-1 rounded",title:"Convertir a cita programada",children:"📅 Agendar"}),c.jsx("button",{onClick:b=>{b.stopPropagation(),e?.(t)},className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 px-2 py-1 rounded",children:"Ver Detalles"}),y()&&a&&c.jsx("button",{onClick:b=>{b.stopPropagation(),window.confirm(`¿Estás seguro de que deseas eliminar esta oportunidad?

"${t.titulo}"

Esta acción no se puede deshacer.`)&&a(t)},className:"text-xs bg-red-100 hover:bg-red-200 text-red-700 px-2 py-1 rounded transition-colors",title:"Eliminar oportunidad (solo si no tiene servicio asignado)",children:"🗑️ Eliminar"})]})]})]})},mC=({opportunity:t,onSuccess:e,onCancel:r})=>{const[n,a]=z.useState(!1),[s,l]=z.useState(null),{register:d,handleSubmit:h,formState:{errors:m}}=Zr({defaultValues:{cita_descripcion_breve:`${t.vehicle_marca} ${t.vehicle_modelo} ${t.vehicle_año} - ${t.tipo_oportunidad.replace(/_/g," ")}`,cita_telefono_contacto:t.customer_telefono||"",cita_nombre_contacto:t.customer_nombre||"",titulo:`Cita: ${t.titulo}`,descripcion:t.descripcion}}),p=async y=>{a(!0),l(null);try{await mr.convertToAppointment(t.opportunity_id,y),e()}catch(b){l(b.response?.data?.message||"Error al convertir oportunidad a cita")}finally{a(!1)}},v=()=>{const y=new Date;return y.setDate(y.getDate()+1),y.toISOString().split("T")[0]};return c.jsx("div",{className:"max-w-2xl mx-auto",children:c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Convertir a Cita Programada"}),c.jsxs("p",{className:"text-gray-600",children:["Convierte esta oportunidad en una cita programada para el cliente ",t.customer_nombre]})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Oportunidad Actual"}),c.jsxs("div",{className:"text-sm space-y-1",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Cliente:"})," ",t.customer_nombre]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Vehículo:"})," ",t.vehicle_marca," ",t.vehicle_modelo," ",t.vehicle_año]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Placas:"})," ",t.vehicle_placa]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Servicio:"})," ",t.tipo_oportunidad.replace(/_/g," ")]})]})]}),s&&c.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:s}),c.jsxs("form",{onSubmit:h(p),className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de la Cita *"}),c.jsx("input",{type:"date",min:v(),...d("cita_fecha",{required:"La fecha es requerida"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.cita_fecha&&c.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.cita_fecha.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora de la Cita *"}),c.jsx("input",{type:"time",...d("cita_hora",{required:"La hora es requerida"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.cita_hora&&c.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.cita_hora.message})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de Contacto *"}),c.jsx("input",{type:"text",...d("cita_nombre_contacto",{required:"El nombre de contacto es requerido"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.cita_nombre_contacto&&c.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.cita_nombre_contacto.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono de Contacto *"}),c.jsx("input",{type:"tel",...d("cita_telefono_contacto",{required:"El teléfono es requerido"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.cita_telefono_contacto&&c.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.cita_telefono_contacto.message})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción del Vehículo/Servicio *"}),c.jsx("input",{type:"text",...d("cita_descripcion_breve",{required:"La descripción es requerida"}),placeholder:"Ej: Toyota Corolla 2020 - Cambio de aceite",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),m.cita_descripcion_breve&&c.jsx("p",{className:"text-red-600 text-sm mt-1",children:m.cita_descripcion_breve.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título de la Cita (Opcional)"}),c.jsx("input",{type:"text",...d("titulo"),placeholder:"Título personalizado para la cita",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas Adicionales (Opcional)"}),c.jsx("textarea",{rows:3,...d("descripcion"),placeholder:"Notas adicionales sobre la cita",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[c.jsx("button",{type:"button",onClick:r,className:"btn-secondary",disabled:n,children:"Cancelar"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:n,children:n?c.jsxs(c.Fragment,{children:[c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Convirtiendo..."]}):"📅 Convertir a Cita"})]})]})]})})},pC=()=>{const{user:t}=vn(),[e,r]=z.useState("search"),[n,a]=z.useState(null),[s,l]=z.useState([]),[d,h]=z.useState([]),[m,p]=z.useState(!1),[v,y]=z.useState(null),[b,_]=z.useState(!1),w=t?.rol==="administrador"||t?.rol==="mecanico",E=t?.rol==="administrador"||t?.rol==="seguimiento",{register:j,watch:A,reset:C}=Zr(),D=A();z.useEffect(()=>{R(),L()},[]),z.useEffect(()=>{Object.values(D).some(Y=>Y)&&R()},[D]);const R=async()=>{p(!0),y(null);try{const Y=Object.fromEntries(Object.entries(D).filter(([T,V])=>V&&V!=="")),ve=await mr.search(Y);l(ve.opportunities||[])}catch(Y){y(Y.response?.data?.message||"Error al cargar oportunidades")}finally{p(!1)}},L=async()=>{try{const Y=await mr.getRemindersToday();h(Y.reminders||[])}catch(Y){console.error("Error cargando recordatorios:",Y)}},$=Y=>{a(Y),r("detail")},W=()=>{a(null),r("create")},J=()=>{n&&r("edit")},ae=Y=>{a(Y),r("detail"),R(),L()},be=()=>{r("search"),a(null)},ce=async(Y,ve)=>{try{await mr.changeStatus(Y,ve),R(),L()}catch(T){y(T.response?.data?.message||"Error al cambiar estado")}},me=Y=>{a(Y),r("convert-appointment")},_e=async Y=>{try{p(!0),await mr.delete(Y.opportunity_id),alert(`✅ Oportunidad "${Y.titulo}" eliminada exitosamente`),R(),L(),n?.opportunity_id===Y.opportunity_id&&(r("search"),a(null))}catch(ve){console.error("Error eliminando oportunidad:",ve);const T=ve.response?.data?.message||"Error al eliminar la oportunidad";alert(`❌ ${T}`)}finally{p(!1)}},he=()=>{C(),R()},P=Y=>`https://wa.me/52${Y.replace(/^\+52/,"")}`,oe=()=>{switch(e){case"create":return c.jsx(kf,{onSuccess:ae,onCancel:be});case"edit":return c.jsx(kf,{opportunity:n,onSuccess:ae,onCancel:be});case"convert-appointment":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("button",{onClick:()=>r("search"),className:"flex items-center text-gray-600 hover:text-gray-800",children:"← Regresar a oportunidades"}),c.jsx(mC,{opportunity:n,onSuccess:()=>{R(),r("search")},onCancel:()=>r("search")})]});case"detail":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("button",{onClick:()=>r("search"),className:"flex items-center text-gray-600 hover:text-gray-800",children:"← Regresar a oportunidades"}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:n?.titulo}),c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n?.estado==="pendiente"?"bg-yellow-100 text-yellow-800":n?.estado==="contactado"?"bg-blue-100 text-blue-800":n?.estado==="agendado"?"bg-purple-100 text-purple-800":n?.estado==="completado"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:n?.estado?n.estado.charAt(0).toUpperCase()+n.estado.slice(1):""}),c.jsxs("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n?.prioridad==="alta"?"bg-red-100 text-red-800":n?.prioridad==="media"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:["Prioridad ",n?.prioridad]})]})]}),E&&c.jsx("button",{onClick:J,className:"btn-secondary",children:"Editar Oportunidad"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Información del Servicio"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Descripción:"})," ",n?.descripcion]}),n?.servicio_sugerido&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Servicio:"})," ",n.servicio_sugerido]}),n?.precio_estimado&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Precio estimado:"})," $",n.precio_estimado.toLocaleString()]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Tipo:"})," ",n?.tipo_oportunidad.replace(/_/g," ")]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Fechas y Seguimiento"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[n?.fecha_sugerida&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Fecha sugerida:"})," ",new Date(n.fecha_sugerida).toLocaleDateString("es-MX")]}),n?.fecha_contacto_sugerida&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Contactar antes del:"})," ",new Date(n.fecha_contacto_sugerida).toLocaleDateString("es-MX")]}),n?.usuario_asignado_nombre&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Asignado a:"})," ",n.usuario_asignado_nombre]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Creado:"})," ",new Date(n?.fecha_creacion||"").toLocaleDateString("es-MX")]})]})]}),n?.tiene_cita&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[c.jsxs("h3",{className:"font-medium text-green-900 mb-3 flex items-center",children:[c.jsx("span",{className:"mr-2",children:"📅"}),"Información de la Cita"]}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium text-green-800",children:"Fecha:"})," ",new Date(n.cita_fecha||"").toLocaleDateString("es-MX")]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium text-green-800",children:"Hora:"})," ",n.cita_hora]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium text-green-800",children:"Contacto:"})," ",n.cita_nombre_contacto]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium text-green-800",children:"Teléfono:"})," ",n.cita_telefono_contacto]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium text-green-800",children:"Descripción:"})," ",n.cita_descripcion_breve]})]})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("button",{className:"card p-4 text-center hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"text-2xl mb-2",children:"💬"}),c.jsx("div",{className:"font-medium",children:"Contactar Cliente"}),c.jsx("div",{className:"text-sm text-gray-600",children:"WhatsApp o llamada"})]}),!n?.tiene_cita&&n?.customer_id&&n?.vehicle_id?c.jsxs("button",{onClick:()=>me(n),className:"card p-4 text-center hover:shadow-md transition-shadow hover:bg-purple-50",children:[c.jsx("div",{className:"text-2xl mb-2",children:"📅"}),c.jsx("div",{className:"font-medium",children:"Programar Cita"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Convertir a cita programada"})]}):n?.tiene_cita?c.jsxs("div",{className:"card p-4 text-center bg-green-50 border-green-200",children:[c.jsx("div",{className:"text-2xl mb-2",children:"✅"}),c.jsx("div",{className:"font-medium text-green-700",children:"Ya es una Cita"}),c.jsxs("div",{className:"text-sm text-green-600",children:["📅 ",new Date(n.cita_fecha||"").toLocaleDateString("es-MX"),c.jsx("br",{}),"🕐 ",n.cita_hora]})]}):c.jsxs("div",{className:"card p-4 text-center bg-gray-50 border-gray-200",children:[c.jsx("div",{className:"text-2xl mb-2",children:"⏳"}),c.jsx("div",{className:"font-medium text-gray-700",children:"Sin Cliente/Vehículo"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Asigna cliente y vehículo primero"})]}),c.jsxs("button",{className:"card p-4 text-center hover:shadow-md transition-shadow",children:[c.jsx("div",{className:"text-2xl mb-2",children:"📝"}),c.jsx("div",{className:"font-medium",children:"Agregar Nota"}),c.jsx("div",{className:"text-sm text-gray-600",children:"Seguimiento"})]})]})]});default:return c.jsxs("div",{className:"space-y-6",children:[d.length>0&&c.jsxs("div",{className:"card p-6 border-l-4 border-orange-500",children:[c.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:["⏰ Recordatorios de Hoy (",d.length,")"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.slice(0,6).map(Y=>c.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:Y.titulo}),c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Y.customer_nombre}),c.jsxs("p",{className:"text-sm text-gray-600",children:[Y.vehicle_marca," ",Y.vehicle_modelo]}),c.jsxs("div",{className:"mt-2 flex space-x-2",children:[Y.customer_whatsapp&&c.jsx("a",{href:P(Y.customer_whatsapp),target:"_blank",rel:"noopener noreferrer",className:"text-xs bg-green-100 hover:bg-green-200 text-green-700 px-2 py-1 rounded",children:"WhatsApp"}),c.jsx("button",{onClick:()=>$(Y),className:"text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 px-2 py-1 rounded",children:"Ver"})]})]},Y.opportunity_id))}),d.length>6&&c.jsxs("p",{className:"text-sm text-gray-600 mt-3",children:["Y ",d.length-6," recordatorios más..."]})]}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Oportunidades de Venta"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>_(!b),className:"btn-secondary text-sm",children:b?"Ocultar Filtros":"Mostrar Filtros"}),w&&c.jsx("button",{onClick:W,className:"btn-primary text-sm",children:"+ Nueva Oportunidad"})]})]}),b&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),c.jsxs("select",{...j("estado"),className:"input-field text-sm",children:[c.jsx("option",{value:"",children:"Todos"}),c.jsx("option",{value:"pendiente",children:"Pendiente"}),c.jsx("option",{value:"contactado",children:"Contactado"}),c.jsx("option",{value:"agendado",children:"Agendado"}),c.jsx("option",{value:"en_proceso",children:"En Proceso"}),c.jsx("option",{value:"completado",children:"Completado"}),c.jsx("option",{value:"perdido",children:"Perdido"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),c.jsxs("select",{...j("prioridad"),className:"input-field text-sm",children:[c.jsx("option",{value:"",children:"Todas"}),c.jsx("option",{value:"alta",children:"Alta"}),c.jsx("option",{value:"media",children:"Media"}),c.jsx("option",{value:"baja",children:"Baja"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),c.jsx("input",{...j("fecha_desde"),type:"date",className:"input-field text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),c.jsx("input",{...j("fecha_hasta"),type:"date",className:"input-field text-sm"})]}),c.jsx("div",{className:"md:col-span-2 lg:col-span-4",children:c.jsx("button",{onClick:he,className:"btn-secondary text-sm",children:"Limpiar Filtros"})})]})]}),v&&c.jsx("div",{className:"card p-4 bg-red-50 border border-red-200",children:c.jsx("p",{className:"text-red-600 text-sm",children:v})}),m?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando oportunidades..."})]}):s.length>0?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[s.length," oportunidades encontradas"]}),s.map(Y=>c.jsx(gg,{opportunity:Y,onSelect:$,onStatusChange:E?ce:void 0,onConvertToAppointment:me,onDelete:E?_e:void 0},Y.opportunity_id))]}):c.jsx("div",{className:"card p-8 text-center",children:c.jsx("p",{className:"text-gray-600",children:"No hay oportunidades que coincidan con los filtros"})})]})}};return c.jsx("div",{className:"bg-gray-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:oe()})})},xC=()=>{const{user:t}=vn(),[e,r]=z.useState("list"),[n,a]=z.useState(null),[s,l]=z.useState([]),[d,h]=z.useState([]),[m,p]=z.useState(!1),[v,y]=z.useState(null),[b,_]=z.useState(!1),[w,E]=z.useState({page:1,limit:20,total:0,totalPages:0}),[j,A]=z.useState({active:!1}),C=t?.rol==="administrador"||t?.rol==="mecanico",{register:D,watch:R,reset:L,handleSubmit:$,setValue:W}=Zr(),J=R(),ae=ne=>ne.toISOString().split("T")[0],be=async(ne,je)=>{W("fecha_desde",ae(ne)),W("fecha_hasta",ae(je)),W("estado",""),W("cliente",""),E(wt=>({...wt,page:1}));const rt={fecha_desde:ae(ne),fecha_hasta:ae(je)};await T(rt)},ce=async()=>{A({active:!1}),L(),E(ne=>({...ne,page:1})),await T({},1,!0)},me={yesterday:()=>{const ne=new Date;ne.setDate(ne.getDate()-1),be(ne,ne)},currentWeek:()=>{const ne=new Date,je=new Date(ne);je.setDate(ne.getDate()-ne.getDay()+1),be(je,ne)},currentMonth:()=>{const ne=new Date,je=new Date(ne.getFullYear(),ne.getMonth(),1);be(je,ne)}},{register:_e,handleSubmit:he,reset:P,formState:{isSubmitting:oe}}=Zr();z.useEffect(()=>{ve(),V()},[]);const Y=ne=>{const je=ne.fecha_desde,rt=ne.fecha_hasta;if((je||rt)&&(!je||!rt)){y('Para buscar por fechas, debes completar ambos campos "Desde" y "Hasta"');return}E(wt=>({...wt,page:1})),ve()},ve=async(ne=1)=>{p(!0),y(null);try{let je;if(j.active&&j.customerId)console.log(`🔍 Frontend: Consultando historial para cliente ${j.customerId}`),je=await En.getServicesByCustomer(j.customerId),console.log(`✅ Frontend: Recibidos ${je.services?.length||0} servicios`),console.log(`👥 Frontend: Customer ID esperado: ${j.customerId}, recibido: ${je.customer_id}`),l(je.services||[]),E({page:1,limit:je.services?.length||0,total:je.services?.length||0,totalPages:1});else{const rt=Object.fromEntries(Object.entries(J).filter(([wt,$n])=>$n&&$n!==""));je=await En.getServices(rt,ne,w.limit),l(je.services||[]),E({page:je.page||1,limit:je.limit||20,total:je.total||0,totalPages:je.total_pages||0})}}catch(je){console.error("Error cargando servicios:",je),y(je.response?.data?.message||"Error al cargar servicios")}finally{p(!1)}},T=async(ne,je=1,rt=!1)=>{p(!0),y(null);try{let wt;if(!rt&&j.active&&j.customerId)wt=await En.getServicesByCustomer(j.customerId),l(wt.services||[]),E({page:1,limit:wt.services?.length||0,total:wt.services?.length||0,totalPages:1});else{const $n=Object.fromEntries(Object.entries(ne).filter(([kr,ts])=>ts&&ts!==""));wt=await En.getServices($n,je,w.limit),l(wt.services||[]),E({page:wt.page||1,limit:wt.limit||20,total:wt.total||0,totalPages:wt.total_pages||0})}}catch(wt){console.error("Error cargando servicios:",wt),y(wt.response?.data?.message||"Error al cargar servicios")}finally{p(!1)}},V=async()=>{try{const ne=await En.getAvailableMechanics();h(ne.mechanics||[])}catch(ne){console.error("Error cargando mecánicos:",ne)}},ue=ne=>{a(ne),r("detail")},fe=()=>{n&&(P(n),r("edit"))},U=async(ne,je)=>{try{await En.updateServiceStatus(ne,je),ve(w.page),n&&n.service_id===ne&&a({...n,estado:je})}catch(rt){console.error("Error cambiando estado:",rt),y(rt.response?.data?.message||"Error al cambiar estado")}},k=async ne=>{if(n)try{y(null);const je=await En.updateService(n.service_id,{tipo_servicio:ne.tipo_servicio,descripcion:ne.descripcion,precio:ne.precio?Number(ne.precio):void 0,estado:ne.estado,notas:ne.notas,kilometraje_servicio:ne.kilometraje_servicio?Number(ne.kilometraje_servicio):void 0,refacciones_usadas:ne.refacciones_usadas,proximo_servicio_km:ne.proximo_servicio_km?Number(ne.proximo_servicio_km):void 0,proximo_servicio_fecha:ne.proximo_servicio_fecha,garantia_meses:ne.garantia_meses?Number(ne.garantia_meses):void 0,mechanic_id:ne.mechanic_id?Number(ne.mechanic_id):null}),rt=await En.getServiceById(n.service_id);a(rt.service),r("detail"),ve(w.page)}catch(je){console.error("Error actualizando servicio:",je),y(je.response?.data?.message||"Error al actualizar servicio")}},de=()=>{L(),E(ne=>({...ne,page:1})),ve()},Ge=async(ne,je)=>{console.log(`🔄 Activando modo historial - Customer ID: ${ne}, Nombre: ${je}`),A({active:!0,customerId:ne,customerName:je}),console.log("✅ Estado historial actualizado"),r("list"),L(),console.log("🔍 Iniciando carga de servicios para historial");try{p(!0),y(null),console.log(`🔍 Frontend: Consultando historial directo para cliente ${ne}`);const rt=await En.getServicesByCustomer(ne);console.log(`✅ Frontend: Recibidos ${rt.services?.length||0} servicios directos`),console.log(`👥 Frontend: Customer ID enviado: ${ne}, recibido: ${rt.customer_id}`),l(rt.services||[]),E({page:1,limit:rt.services?.length||0,total:rt.services?.length||0,totalPages:1})}catch(rt){console.error("Error cargando historial:",rt),y(rt.response?.data?.message||"Error al cargar historial del cliente")}finally{p(!1)}},Ze=async()=>{console.log("🔄 Desactivando modo historial"),A({active:!1}),L(),E(ne=>({...ne,page:1})),console.log("🔍 Forzando vista normal desde historial"),await T({},1,!0)},Rt=ne=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(ne),Pr=ne=>{switch(ne){case"cotizado":return"Cotizado";case"autorizado":return"Autorizado";case"en_proceso":return"En Proceso";case"completado":return"Completado";case"cancelado":return"Cancelado";default:return ne}},tr=()=>{switch(e){case"edit":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("button",{onClick:()=>r("detail"),className:"flex items-center text-gray-600 hover:text-gray-800",children:"← Regresar a detalle"}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["Editar Servicio #",n?.service_id]}),c.jsxs("form",{onSubmit:he(k),className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Información del Servicio"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Servicio *"}),c.jsx("input",{..._e("tipo_servicio"),type:"text",className:"input-field",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción *"}),c.jsx("textarea",{..._e("descripcion"),className:"input-field",rows:3,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio ($)"}),c.jsx("input",{..._e("precio"),type:"number",step:"0.01",min:"0",className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),c.jsxs("select",{..._e("estado"),className:"input-field",children:[c.jsx("option",{value:"cotizado",children:"Cotizado"}),c.jsx("option",{value:"autorizado",children:"Autorizado"}),c.jsx("option",{value:"en_proceso",children:"En Proceso"}),c.jsx("option",{value:"completado",children:"Completado"}),c.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mecánico Asignado"}),c.jsxs("select",{..._e("mechanic_id"),className:"input-field",children:[c.jsx("option",{value:"",children:"Sin asignar"}),d.map(ne=>c.jsxs("option",{value:ne.mechanic_id,children:[ne.alias?`"${ne.alias}" - `:"",ne.nombre," ",ne.apellidos,"(",ne.nivel_experiencia," - ",ne.branch_nombre,")"]},ne.mechanic_id))]})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Detalles Adicionales"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kilometraje del Servicio"}),c.jsx("input",{..._e("kilometraje_servicio"),type:"number",min:"0",className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Refacciones Usadas"}),c.jsx("textarea",{..._e("refacciones_usadas"),className:"input-field",rows:2,placeholder:"Lista de refacciones utilizadas..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Próximo Servicio (KM)"}),c.jsx("input",{..._e("proximo_servicio_km"),type:"number",min:"0",className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Próximo Servicio (Fecha)"}),c.jsx("input",{..._e("proximo_servicio_fecha"),type:"date",className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Garantía (meses)"}),c.jsx("input",{..._e("garantia_meses"),type:"number",min:"0",max:"60",className:"input-field"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),c.jsx("textarea",{..._e("notas"),className:"input-field",rows:3,placeholder:"Notas adicionales sobre el servicio..."})]}),c.jsxs("div",{className:"flex justify-end space-x-4",children:[c.jsx("button",{type:"button",onClick:()=>r("detail"),className:"btn-secondary",disabled:oe,children:"Cancelar"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:oe,children:oe?"Guardando...":"Guardar Cambios"})]})]})]})]});case"detail":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("button",{onClick:()=>r("list"),className:"flex items-center text-gray-600 hover:text-gray-800",children:"← Regresar a servicios"}),c.jsxs("div",{className:"card p-4 md:p-6",children:[c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsx("div",{children:c.jsxs("h2",{className:"text-xl md:text-2xl font-bold text-gray-900",children:["Servicio #",n?.service_id]})}),c.jsxs("div",{className:"flex flex-col gap-4",children:[c.jsx("div",{className:`self-start px-3 py-2 md:px-6 md:py-3 rounded-xl text-sm md:text-lg font-bold shadow-lg transform transition-all duration-200 hover:scale-105 ${n?.estado==="cotizado"?"bg-gradient-to-r from-yellow-400 to-yellow-500 text-yellow-900":n?.estado==="autorizado"?"bg-gradient-to-r from-blue-400 to-blue-500 text-blue-900":n?.estado==="en_proceso"?"bg-gradient-to-r from-purple-400 to-purple-500 text-purple-900":n?.estado==="completado"?"bg-gradient-to-r from-green-400 to-green-500 text-green-900":n?.estado==="cancelado"?"bg-gradient-to-r from-red-400 to-red-500 text-red-900":"bg-gradient-to-r from-gray-400 to-gray-500 text-gray-900"}`,children:c.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2",children:[c.jsx("span",{className:"text-lg md:text-2xl",children:n?.estado==="cotizado"?"📋":n?.estado==="autorizado"?"✅":n?.estado==="en_proceso"?"🔧":n?.estado==="completado"?"🎉":n?.estado==="cancelado"?"❌":"❓"}),c.jsx("span",{className:"uppercase tracking-wide",children:Pr(n?.estado||"")})]})}),c.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 px-3 py-2 md:px-4 md:py-3 rounded-lg border-l-4 border-green-500 self-start",children:[c.jsx("div",{className:"text-xs md:text-sm text-green-700 font-medium",children:"Total Facturado"}),c.jsx("div",{className:"text-lg md:text-2xl font-bold text-green-800",children:n?.precio?Rt(n.precio):"$0.00"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Información del Servicio"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Tipo:"})," ",n?.tipo_servicio]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Descripción:"})," ",n?.descripcion]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Fecha:"})," ",n?.fecha_servicio?new Date(n.fecha_servicio).toLocaleDateString("es-MX"):""]}),n?.kilometraje_servicio&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Kilometraje:"})," ",n.kilometraje_servicio.toLocaleString()," km"]}),n?.refacciones_usadas&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Refacciones:"})," ",n.refacciones_usadas]}),n?.notas&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Notas:"})," ",n.notas]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Cliente y Vehículo"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Cliente:"})," ",n?.cliente_nombre||"N/A"]}),n?.cliente_telefono&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",n.cliente_telefono]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Vehículo:"})," ",n?.vehiculo_marca," ",n?.vehiculo_modelo," ",n?.vehiculo_año]}),n?.placa_actual&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Placas:"})," ",n.placa_actual]}),n?.mecanico_nombre&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Mecánico:"})," ",n.mecanico_nombre]}),n?.sucursal_nombre&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Sucursal:"})," ",n.sucursal_nombre]})]}),n?.customer_id&&n?.cliente_nombre&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("button",{onClick:()=>{console.log(`🔍 Botón historial clickeado - Customer ID: ${n.customer_id}, Nombre: ${n.cliente_nombre}`),Ge(n.customer_id,n.cliente_nombre)},className:"w-full px-4 py-2 text-sm bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-lg transition-all duration-200 hover:shadow-lg flex items-center justify-center space-x-2",children:[c.jsx("span",{children:"📚"}),c.jsxs("span",{children:["Ver Historial Completo de ",n.cliente_nombre]})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:"Muestra todos los servicios históricos de este cliente"})]})]})]}),(n?.proximo_servicio_km||n?.proximo_servicio_fecha)&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Próximo Servicio"}),c.jsxs("div",{className:"text-sm space-y-1",children:[n?.proximo_servicio_km&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Kilometraje:"})," ",n.proximo_servicio_km.toLocaleString()," km"]}),n?.proximo_servicio_fecha&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Fecha sugerida:"})," ",new Date(n.proximo_servicio_fecha).toLocaleDateString("es-MX")]})]})]}),C&&c.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Cambiar Estado Manualmente"}),c.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Puedes cambiar el estado a cualquier valor, incluso revertir cambios accidentales."}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[n?.estado!=="cotizado"&&c.jsx("button",{onClick:()=>U(n.service_id,"cotizado"),className:"px-3 py-2 text-sm bg-yellow-100 hover:bg-yellow-200 text-yellow-800 rounded-lg transition-colors",children:"→ Cotizado"}),n?.estado!=="autorizado"&&c.jsx("button",{onClick:()=>U(n.service_id,"autorizado"),className:"px-3 py-2 text-sm bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg transition-colors",children:"→ Autorizado"}),n?.estado!=="en_proceso"&&c.jsx("button",{onClick:()=>U(n.service_id,"en_proceso"),className:"px-3 py-2 text-sm bg-purple-100 hover:bg-purple-200 text-purple-800 rounded-lg transition-colors",children:"→ En Proceso"}),n?.estado!=="completado"&&c.jsx("button",{onClick:()=>U(n.service_id,"completado"),className:"px-3 py-2 text-sm bg-green-100 hover:bg-green-200 text-green-800 rounded-lg transition-colors",children:"→ Completado"}),n?.estado!=="cancelado"&&c.jsx("button",{onClick:()=>U(n.service_id,"cancelado"),className:"px-3 py-2 text-sm bg-red-100 hover:bg-red-200 text-red-800 rounded-lg transition-colors",children:"→ Cancelado"})]}),c.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Estado actual: ",c.jsx("strong",{children:Pr(n?.estado||"")})]})]}),C&&c.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:c.jsxs("button",{onClick:fe,className:"btn-primary flex items-center justify-center space-x-2 w-full",children:[c.jsx("span",{children:"✏️"}),c.jsx("span",{children:"Editar Servicio"})]})})]})]});default:return c.jsxs("div",{className:"space-y-6",children:[j.active&&c.jsx("div",{className:"card p-4 bg-gradient-to-r from-blue-50 to-blue-100 border-l-4 border-blue-500",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"text-2xl",children:"📚"}),c.jsxs("div",{children:[c.jsxs("h3",{className:"font-semibold text-blue-900",children:["Historial Completo de ",j.customerName]}),c.jsx("p",{className:"text-sm text-blue-700",children:"Mostrando todos los servicios históricos de este cliente (incluye completados y cancelados)"})]})]}),c.jsxs("button",{onClick:Ze,className:"px-4 py-2 text-sm bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-2",children:[c.jsx("span",{children:"←"}),c.jsx("span",{children:"Regresar a Vista Normal"})]})]})}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Servicios"}),c.jsx("button",{onClick:()=>_(!b),className:"btn-secondary text-sm",children:b?"Ocultar Filtros":"Mostrar Filtros"})]}),!j.active&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"🚀 Filtros Rápidos"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-2",children:[c.jsxs("button",{onClick:ce,className:"px-3 py-2 text-sm font-semibold bg-gradient-to-r from-yellow-400 to-yellow-500 hover:from-yellow-500 hover:to-yellow-600 text-yellow-900 rounded-lg border-2 border-yellow-600 transition-all duration-200 hover:shadow-md flex items-center justify-center space-x-1",disabled:m,children:[c.jsx("span",{children:"🏠"}),c.jsx("span",{children:"Vista Normal"})]}),c.jsx("button",{onClick:me.yesterday,className:"px-3 py-2 text-sm bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg border border-blue-200 transition-all duration-200 hover:shadow-md",disabled:m,children:"📅 Ayer"}),c.jsx("button",{onClick:me.currentWeek,className:"px-3 py-2 text-sm bg-green-50 hover:bg-green-100 text-green-700 rounded-lg border border-green-200 transition-all duration-200 hover:shadow-md",disabled:m,children:"📊 Esta Semana"}),c.jsx("button",{onClick:me.currentMonth,className:"px-3 py-2 text-sm bg-purple-50 hover:bg-purple-100 text-purple-700 rounded-lg border border-purple-200 transition-all duration-200 hover:shadow-md",disabled:m,children:"📈 Este Mes"})]}),c.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Acceso rápido a vistas comunes. Para rangos personalizados usa los filtros de fecha."})]}),b&&j.active&&c.jsx("div",{className:"p-4 bg-gray-50 rounded-lg mb-4 border border-gray-200",children:c.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[c.jsx("span",{children:"ℹ️"}),c.jsx("span",{className:"text-sm",children:"Los filtros están deshabilitados en el modo historial. Se muestran todos los servicios del cliente seleccionado."})]})}),b&&!j.active&&c.jsxs("form",{onSubmit:$(Y),className:"p-4 bg-gray-50 rounded-lg mb-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),c.jsxs("select",{...D("estado"),className:"input-field text-sm",children:[c.jsx("option",{value:"",children:"Todos"}),c.jsx("option",{value:"cotizado",children:"Cotizado"}),c.jsx("option",{value:"autorizado",children:"Autorizado"}),c.jsx("option",{value:"en_proceso",children:"En Proceso"}),c.jsx("option",{value:"completado",children:"Completado"}),c.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),c.jsx("input",{...D("cliente"),type:"text",placeholder:"Buscar por nombre...",className:"input-field text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desde"}),c.jsx("input",{...D("fecha_desde"),type:"date",className:"input-field text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hasta"}),c.jsx("input",{...D("fecha_hasta"),type:"date",className:"input-field text-sm"})]})]}),(J.fecha_desde||J.fecha_hasta)&&!(J.fecha_desde&&J.fecha_hasta)&&c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[c.jsx("span",{className:"text-yellow-600",children:"⚠️"}),c.jsx("span",{className:"text-sm text-yellow-700",children:'Para buscar por fechas, completa ambos campos "Desde" y "Hasta"'})]})}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("button",{type:"submit",className:"btn-primary text-sm flex items-center space-x-2",disabled:m,children:[c.jsx("span",{children:"🔍"}),c.jsx("span",{children:m?"Buscando...":"Buscar"})]}),c.jsx("button",{type:"button",onClick:de,className:"btn-secondary text-sm",children:"Limpiar Filtros"})]})]})]}),v&&c.jsx("div",{className:"card p-4 bg-red-50 border border-red-200",children:c.jsx("p",{className:"text-red-600 text-sm",children:v})}),m?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando servicios..."})]}):s.length>0?c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.active?`${w.total} servicios en el historial de ${j.customerName}`:`${w.total} servicios encontrados (página ${w.page} de ${w.totalPages})`}),c.jsx("div",{className:"space-y-4",children:s.map(ne=>c.jsxs("div",{className:"card p-4 md:p-6 hover:shadow-lg hover:border-blue-200 transition-all duration-200 cursor-pointer transform hover:-translate-y-1",onClick:()=>ue(ne),children:[c.jsxs("div",{className:"space-y-3",children:[c.jsx("div",{className:"w-full",children:c.jsxs("h3",{className:"text-lg md:text-xl font-medium text-gray-900 leading-tight",children:["Servicio #",ne.service_id," - ",ne.tipo_servicio]})}),c.jsxs("div",{className:"flex items-center justify-between gap-3",children:[c.jsx("div",{className:`px-3 py-2 rounded-lg font-semibold text-sm shadow-md ${ne.estado==="cotizado"?"bg-gradient-to-r from-yellow-400 to-yellow-500 text-yellow-900":ne.estado==="autorizado"?"bg-gradient-to-r from-blue-400 to-blue-500 text-blue-900":ne.estado==="en_proceso"?"bg-gradient-to-r from-purple-400 to-purple-500 text-purple-900":ne.estado==="completado"?"bg-gradient-to-r from-green-400 to-green-500 text-green-900":ne.estado==="cancelado"?"bg-gradient-to-r from-red-400 to-red-500 text-red-900":"bg-gradient-to-r from-gray-400 to-gray-500 text-gray-900"}`,children:c.jsxs("span",{className:"flex items-center space-x-1",children:[c.jsx("span",{children:ne.estado==="cotizado"?"📋":ne.estado==="autorizado"?"✅":ne.estado==="en_proceso"?"🔧":ne.estado==="completado"?"🎉":ne.estado==="cancelado"?"❌":"❓"}),c.jsx("span",{className:"uppercase tracking-wide",children:Pr(ne.estado)})]})}),c.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-green-100 px-3 py-2 rounded-lg border border-green-200",children:[c.jsx("div",{className:"text-xs text-green-700 font-medium mb-1",children:"Total"}),c.jsx("div",{className:"text-lg font-bold text-green-800",children:Rt(ne.precio)})]})]}),c.jsx("div",{className:"w-full",children:c.jsx("p",{className:"text-sm text-gray-600",children:ne.descripcion})}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-2 text-sm text-gray-500",children:[c.jsxs("span",{className:"flex items-center space-x-1",children:[c.jsx("span",{children:"📅"}),c.jsx("span",{className:"truncate",children:new Date(ne.fecha_servicio).toLocaleDateString("es-MX")})]}),c.jsxs("span",{className:"flex items-center space-x-1",children:[c.jsx("span",{children:"👤"}),c.jsx("span",{className:"truncate",children:ne.cliente_nombre||"Cliente no disponible"})]}),c.jsxs("span",{className:"flex items-center space-x-1",children:[c.jsx("span",{children:"🚗"}),c.jsxs("span",{className:"truncate",children:[ne.vehiculo_marca," ",ne.vehiculo_modelo]})]})]}),ne.mecanico_nombre&&c.jsx("div",{className:"w-full",children:c.jsxs("span",{className:"inline-flex items-center space-x-1 text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-lg",children:[c.jsx("span",{children:"🔧"}),c.jsxs("span",{children:["Mecánico: ",ne.mecanico_nombre]})]})})]}),ne.notas&&c.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400",children:c.jsxs("div",{className:"flex items-start space-x-2",children:[c.jsx("span",{className:"text-blue-500 font-medium text-sm",children:"💬 Notas:"}),c.jsx("span",{className:"text-sm text-blue-700",children:ne.notas})]})})]},ne.service_id))}),!j.active&&w.totalPages>1&&c.jsxs("div",{className:"flex justify-center space-x-2 mt-6",children:[c.jsx("button",{onClick:()=>ve(w.page-1),disabled:w.page===1,className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"← Anterior"}),c.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700",children:["Página ",w.page," de ",w.totalPages]}),c.jsx("button",{onClick:()=>ve(w.page+1),disabled:w.page===w.totalPages,className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente →"})]})]}):c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx("p",{className:"text-gray-600",children:"No hay servicios que coincidan con los filtros"}),Object.values(J).some(ne=>ne)&&c.jsx("button",{onClick:de,className:"mt-4 btn-secondary text-sm",children:"Limpiar filtros"})]})]})}};return c.jsx("div",{className:"bg-gray-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:tr()})})},vC=()=>{const{user:t}=vn(),[e,r]=z.useState([]),[n,a]=z.useState(!0),[s,l]=z.useState(null),[d,h]=z.useState("today"),m=t?.rol==="administrador"||t?.rol==="seguimiento";z.useEffect(()=>{p()},[d]);const p=async()=>{a(!0),l(null);try{let E;switch(d){case"today":E=await mr.getRemindersToday(),r(E.reminders||[]);break;case"upcoming":const j=new Date;j.setDate(j.getDate()+7),E=await mr.search({estado:"pendiente",fecha_hasta:j.toISOString().split("T")[0]}),r(E.opportunities||[]);break;case"overdue":const A=new Date;A.setDate(A.getDate()-1),E=await mr.search({estado:"pendiente",fecha_hasta:A.toISOString().split("T")[0]}),r(E.opportunities||[]);break}}catch(E){l(E.response?.data?.message||"Error al cargar recordatorios")}finally{a(!1)}},v=async(E,j)=>{try{await mr.changeStatus(E,j),p()}catch(A){l(A.response?.data?.message||"Error al cambiar estado")}},y=async E=>{try{a(!0),await mr.delete(E.opportunity_id),alert(`✅ Oportunidad "${E.titulo}" eliminada exitosamente`),p()}catch(j){console.error("Error eliminando oportunidad:",j);const A=j.response?.data?.message||"Error al eliminar la oportunidad";alert(`❌ ${A}`)}finally{a(!1)}},b=E=>`https://wa.me/52${E.replace(/^\+52/,"")}`,w=(()=>{if(d!=="today")return null;const E=e.reduce((j,A)=>(j[A.prioridad]=(j[A.prioridad]||0)+1,j),{});return{total:e.length,alta:E.alta||0,media:E.media||0,baja:E.baja||0}})();return c.jsx("div",{className:"bg-gray-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Recordatorios y Seguimiento"}),c.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona los recordatorios de contacto con clientes"})]}),w&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsx("div",{className:"card p-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Hoy"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:w.total})]}),c.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:c.jsx("span",{className:"text-blue-600 text-xl",children:"📅"})})]})}),c.jsx("div",{className:"card p-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Prioridad Alta"}),c.jsx("p",{className:"text-2xl font-bold text-red-600",children:w.alta})]}),c.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:c.jsx("span",{className:"text-red-600 text-xl",children:"🔥"})})]})}),c.jsx("div",{className:"card p-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Prioridad Media"}),c.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:w.media})]}),c.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:c.jsx("span",{className:"text-yellow-600 text-xl",children:"⚡"})})]})}),c.jsx("div",{className:"card p-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Prioridad Baja"}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:w.baja})]}),c.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:c.jsx("span",{className:"text-green-600 text-xl",children:"📝"})})]})})]}),c.jsxs("div",{className:"card",children:[c.jsx("div",{className:"border-b border-gray-200",children:c.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[c.jsxs("button",{onClick:()=>h("today"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="today"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Hoy",d==="today"&&c.jsx("span",{className:"bg-blue-100 text-blue-600 ml-2 py-0.5 px-2 rounded-full text-xs",children:e.length})]}),c.jsxs("button",{onClick:()=>h("upcoming"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="upcoming"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Próximos 7 días",d==="upcoming"&&c.jsx("span",{className:"bg-blue-100 text-blue-600 ml-2 py-0.5 px-2 rounded-full text-xs",children:e.length})]}),c.jsxs("button",{onClick:()=>h("overdue"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="overdue"?"border-red-500 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Vencidos",d==="overdue"&&c.jsx("span",{className:"bg-red-100 text-red-600 ml-2 py-0.5 px-2 rounded-full text-xs",children:e.length})]})]})}),c.jsxs("div",{className:"p-6",children:[s&&c.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:c.jsx("p",{className:"text-red-600 text-sm",children:s})}),n?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando recordatorios..."})]}):e.length>0?c.jsxs("div",{className:"space-y-4",children:[d==="today"&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📞 Clientes para contactar hoy"}),c.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[c.jsx("p",{className:"text-blue-800 text-sm mb-3",children:c.jsx("strong",{children:"Sugerencia de flujo de trabajo:"})}),c.jsxs("ol",{className:"text-blue-700 text-sm space-y-1 list-decimal list-inside",children:[c.jsx("li",{children:"Contactar primero las prioridades altas 🔥"}),c.jsx("li",{children:"Enviar mensaje de WhatsApp con el template sugerido"}),c.jsx("li",{children:'Marcar como "Contactado" después de enviar mensaje'}),c.jsx("li",{children:"Programar seguimiento si es necesario"})]})]})]}),e.map(E=>c.jsxs("div",{className:"relative",children:[c.jsx(gg,{opportunity:E,onStatusChange:m?v:void 0,onDelete:m?y:void 0,showVehicleInfo:!0}),E.customer_whatsapp&&c.jsx("div",{className:"absolute top-4 right-4",children:c.jsxs("a",{href:b(E.customer_whatsapp),target:"_blank",rel:"noopener noreferrer",className:"bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-lg text-sm font-medium flex items-center space-x-2 shadow-lg",children:[c.jsx("span",{children:"💬"}),c.jsx("span",{children:"WhatsApp"})]})})]},E.opportunity_id))]}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"text-6xl mb-4",children:d==="today"?"🎉":d==="upcoming"?"📅":"✅"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:d==="today"?"¡Excelente! No hay recordatorios para hoy":d==="upcoming"?"No hay recordatorios próximos":"¡Perfecto! No hay recordatorios vencidos"}),c.jsx("p",{className:"text-gray-600",children:d==="today"?"Puedes revisar los recordatorios próximos o crear nuevas oportunidades.":d==="upcoming"?"Los próximos recordatorios aparecerán aquí cuando se acerquen las fechas.":"Mantén este estado al día contactando a los clientes oportunamente."})]})]})]}),d==="today"&&e.length>0&&c.jsxs("div",{className:"card p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"💬 Templates de WhatsApp Sugeridos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Recordatorio General"}),c.jsx("p",{className:"text-sm text-gray-700 italic",children:'"Hola [Cliente], espero que esté bien. Su [Marca Modelo Placas] necesita [Servicio]. ¿Cuándo le conviene traerlo al taller? Saludos - Henry Diagnostics"'})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Seguimiento de Cotización"}),c.jsx("p",{className:"text-sm text-gray-700 italic",children:'"Buenos días [Cliente], recordamos que tiene una cotización pendiente para su [Vehículo Placas]. ¿Podemos agendarlo? - Henry Diagnostics"'})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Mantenimiento Programado"}),c.jsx("p",{className:"text-sm text-gray-700 italic",children:'"Su [Marca Modelo Placas] ha recorrido [Kilometraje] desde el último servicio. Es momento de [Servicio]. ¿Le conviene esta semana? - Henry Diagnostics"'})]}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Prioridad Alta"}),c.jsx("p",{className:"text-sm text-gray-700 italic",children:'"⚠️ [Cliente], es importante revisar su [Vehículo] para [Motivo]. ¿Puede traerlo hoy o mañana? - Henry Diagnostics"'})]})]})]})]})})})},gC=async()=>{try{return(await ye.get("/users/stats")).data}catch(t){throw console.error("Error al obtener estadísticas de usuarios:",t),t}},yC=async t=>{try{const e=new URLSearchParams;return t?.search&&e.append("search",t.search),t?.rol&&e.append("rol",t.rol),t?.activo!==void 0&&e.append("activo",t.activo.toString()),t?.page&&e.append("page",t.page.toString()),t?.limit&&e.append("limit",t.limit.toString()),(await ye.get(`/users?${e.toString()}`)).data}catch(e){throw console.error("Error al obtener usuarios:",e),e}},bC=async t=>{try{return(await ye.post("/users",t)).data}catch(e){throw console.error("Error al crear usuario:",e),e}},_C=async(t,e)=>{try{return(await ye.put(`/users/${t}`,e)).data}catch(r){throw console.error("Error al actualizar usuario:",r),r}},wC=async t=>{try{return(await ye.post(`/users/${t}/reset-password`)).data}catch(e){throw console.error("Error al restablecer contraseña:",e),e}},AC=async(t,e=1,r=20)=>{try{return(await ye.get(`/users/${t}/activity?page=${e}&limit=${r}`)).data}catch(n){throw console.error("Error al obtener actividades del usuario:",n),n}},NC=({user:t,isOpen:e,onClose:r,onSubmit:n,loading:a=!1})=>{const[s,l]=z.useState({email:"",nombre:"",rol:"mecanico",telefono:"",activo:!0}),[d,h]=z.useState({});z.useEffect(()=>{l(t?{email:t.email,nombre:t.nombre,rol:t.rol,telefono:t.telefono||"",activo:t.activo}:{email:"",nombre:"",rol:"mecanico",telefono:"",activo:!0}),h({})},[t,e]);const m=()=>{const y={};return s.email.trim()?/\S+@\S+\.\S+/.test(s.email)||(y.email="El email no es válido"):y.email="El email es requerido",s.nombre.trim()?s.nombre.trim().length<2&&(y.nombre="El nombre debe tener al menos 2 caracteres"):y.nombre="El nombre es requerido",s.rol||(y.rol="El rol es requerido"),h(y),Object.keys(y).length===0},p=y=>{if(y.preventDefault(),!m())return;const b={email:s.email.trim(),nombre:s.nombre.trim(),rol:s.rol,telefono:s.telefono.trim()||void 0,...t&&{activo:s.activo}};n(b)},v=(y,b)=>{l(_=>({..._,[y]:b})),d[y]&&h(_=>({..._,[y]:""}))};return e?c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:c.jsx("div",{className:"relative top-10 mx-auto p-5 border w-full max-w-lg shadow-lg rounded-md bg-white",children:c.jsxs("div",{className:"mt-3",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t?"Editar Usuario":"Crear Nuevo Usuario"}),c.jsxs("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:[c.jsx("span",{className:"sr-only",children:"Cerrar"}),c.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),c.jsx("input",{type:"email",id:"email",value:s.email,onChange:y=>v("email",y.target.value),className:`input ${d.email?"border-red-500":""}`,placeholder:"usuario@ejemplo.com",disabled:a}),d.email&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre Completo *"}),c.jsx("input",{type:"text",id:"nombre",value:s.nombre,onChange:y=>v("nombre",y.target.value),className:`input ${d.nombre?"border-red-500":""}`,placeholder:"Juan Pérez",disabled:a}),d.nombre&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.nombre})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"rol",className:"block text-sm font-medium text-gray-700 mb-1",children:"Rol *"}),c.jsxs("select",{id:"rol",value:s.rol,onChange:y=>v("rol",y.target.value),className:`input ${d.rol?"border-red-500":""}`,disabled:a,children:[c.jsx("option",{value:"mecanico",children:"Técnico/Mecánico"}),c.jsx("option",{value:"seguimiento",children:"Personal de Seguimiento"}),c.jsx("option",{value:"administrador",children:"Administrador"})]}),d.rol&&c.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.rol}),c.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[s.rol==="administrador"&&"Acceso completo al sistema",s.rol==="mecanico"&&"Gestión de vehículos y servicios",s.rol==="seguimiento"&&"Seguimiento de oportunidades y clientes"]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),c.jsx("input",{type:"tel",id:"telefono",value:s.telefono,onChange:y=>v("telefono",y.target.value),className:"input",placeholder:"+1 234 567 8900",disabled:a})]}),t&&c.jsxs("div",{children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"checkbox",checked:s.activo,onChange:y=>v("activo",y.target.checked),className:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:a}),c.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Usuario activo"})]}),c.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Los usuarios inactivos no pueden iniciar sesión en el sistema"})]}),!t&&c.jsx("div",{className:"bg-blue-50 p-4 rounded-md",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Contraseña temporal"}),c.jsx("div",{className:"mt-2 text-sm text-blue-700",children:c.jsx("p",{children:"Se generará automáticamente una contraseña temporal que deberás proporcionar al usuario."})})]})]})}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-6",children:[c.jsx("button",{type:"button",onClick:r,className:"btn-secondary",disabled:a,children:"Cancelar"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:a,children:a?c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),t?"Actualizando...":"Creando..."]}):t?"Actualizar Usuario":"Crear Usuario"})]})]})]})})}):null},EC=({user:t,activities:e,isOpen:r,onClose:n})=>{if(!r||!t)return null;const a=m=>new Date(m).toLocaleString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),s=m=>{switch(m){case"user_created":return"Usuario creado";case"user_updated":return"Usuario actualizado";case"password_reset":return"Contraseña restablecida";case"login":return"Inicio de sesión";case"logout":return"Cierre de sesión";case"password_changed":return"Contraseña cambiada";default:return m}},l=m=>{switch(m){case"user_created":return"➕";case"user_updated":return"✏️";case"password_reset":return"🔑";case"login":return"🔓";case"logout":return"🔒";case"password_changed":return"🔐";default:return"📝"}},d=m=>{switch(m){case"user_created":return"text-green-600 bg-green-50";case"user_updated":return"text-blue-600 bg-blue-50";case"password_reset":return"text-yellow-600 bg-yellow-50";case"login":return"text-green-600 bg-green-50";case"logout":return"text-gray-600 bg-gray-50";case"password_changed":return"text-purple-600 bg-purple-50";default:return"text-gray-600 bg-gray-50"}},h=m=>{if(!m.detalles)return null;try{const p=typeof m.detalles=="string"?JSON.parse(m.detalles):m.detalles;return c.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[m.accion==="user_updated"&&p.changes&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Cambios realizados:"}),c.jsx("ul",{className:"list-disc list-inside ml-2 mt-1",children:Object.entries(p.changes).map(([v,y])=>c.jsxs("li",{children:[c.jsxs("span",{className:"capitalize",children:[v,":"]})," ",String(y)]},v))})]}),m.accion==="user_created"&&p.created_user&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Usuario creado:"}),c.jsxs("div",{className:"ml-2 mt-1",children:["Email: ",p.created_user.email,c.jsx("br",{}),"Rol: ",p.created_user.rol]})]}),m.accion==="password_reset"&&p.reset_by&&c.jsxs("div",{children:[c.jsx("span",{className:"font-medium",children:"Restablecido por:"})," ",p.reset_by]})]})}catch{return c.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:["Detalles: ",String(m.detalles)]})}};return c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:c.jsxs("div",{className:"relative top-10 mx-auto p-0 border w-full max-w-2xl shadow-lg rounded-md bg-white",children:[c.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 rounded-t-md",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Actividad de Usuario"}),c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.nombre," (",t.email,")"]})]}),c.jsxs("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:[c.jsx("span",{className:"sr-only",children:"Cerrar"}),c.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]})}),c.jsx("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:e.length===0?c.jsxs("div",{className:"text-center py-8",children:[c.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"📋"}),c.jsx("p",{className:"text-gray-500",children:"No hay actividades registradas para este usuario"})]}):c.jsx("div",{className:"space-y-4",children:e.map(m=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[c.jsx("div",{className:"flex items-start justify-between",children:c.jsxs("div",{className:"flex items-start space-x-3",children:[c.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${d(m.accion)}`,children:c.jsx("span",{className:"text-sm",children:l(m.accion)})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:s(m.accion)}),c.jsx("p",{className:"text-sm text-gray-500",children:a(m.fecha)}),m.performed_by_name&&c.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Realizado por: ",m.performed_by_name]}),h(m)]})]})}),(m.ip_address||m.user_agent)&&c.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:c.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[m.ip_address&&c.jsxs("div",{children:["IP: ",m.ip_address]}),m.user_agent&&c.jsxs("div",{className:"truncate",children:["Navegador: ",m.user_agent]})]})})]},m.log_id))})}),c.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-6 py-3 rounded-b-md",children:c.jsx("div",{className:"flex justify-end",children:c.jsx("button",{onClick:n,className:"btn-secondary",children:"Cerrar"})})})]})})},SC=()=>{const[t,e]=z.useState([]),[r,n]=z.useState(null),[a,s]=z.useState(!0),[l,d]=z.useState(""),[h,m]=z.useState(null),[p,v]=z.useState(!1),[y,b]=z.useState(!1),[_,w]=z.useState(!1),[E,j]=z.useState([]),[A,C]=z.useState(""),[D,R]=z.useState(!1),[L,$]=z.useState({page:1,limit:10}),[W,J]=z.useState({page:1,limit:10,total:0,totalPages:0,hasNext:!1,hasPrev:!1});z.useEffect(()=>{ae()},[L]);const ae=async()=>{try{s(!0);const[Y,ve]=await Promise.all([yC(L),gC()]);e(Y.users),J(Y.pagination),n(ve)}catch(Y){d("Error al cargar datos de usuarios"),console.error(Y)}finally{s(!1)}},be=async Y=>{try{const ve=await bC(Y);C(ve.temporary_password),R(!0),v(!1),ae()}catch(ve){d("Error al crear usuario"),console.error(ve)}},ce=async Y=>{if(h)try{await _C(h.user_id,Y),b(!1),m(null),ae()}catch(ve){d("Error al actualizar usuario"),console.error(ve)}},me=async Y=>{try{const ve=await wC(Y);C(ve.temporary_password),R(!0)}catch(ve){d("Error al restablecer contraseña"),console.error(ve)}},_e=async Y=>{try{m(Y);const ve=await AC(Y.user_id);j(ve.activities),w(!0)}catch(ve){d("Error al cargar actividades del usuario"),console.error(ve)}},he=Y=>{switch(Y){case"administrador":return"Administrador";case"mecanico":return"Técnico/Mecánico";case"seguimiento":return"Personal de Seguimiento";default:return Y}},P=Y=>{switch(Y){case"administrador":return"bg-red-100 text-red-800";case"mecanico":return"bg-blue-100 text-blue-800";case"seguimiento":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},oe=Y=>new Date(Y).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return a?c.jsx("div",{className:"flex items-center justify-center h-64",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Usuarios"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Administra usuarios del sistema"})]}),l&&c.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:l}),r&&c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[c.jsx("div",{className:"text-2xl font-bold text-blue-600",children:r.total_usuarios}),c.jsx("div",{className:"text-sm text-gray-600",children:"Total Usuarios"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.usuarios_activos}),c.jsx("div",{className:"text-sm text-gray-600",children:"Activos"})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:r.passwords_temporales}),c.jsx("div",{className:"text-sm text-gray-600",children:"Contraseñas Temp."})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border",children:[c.jsx("div",{className:"text-2xl font-bold text-purple-600",children:r.activos_mes}),c.jsx("div",{className:"text-sm text-gray-600",children:"Activos Este Mes"})]})]}),c.jsx("div",{className:"bg-white p-4 rounded-lg shadow border mb-6",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",className:"input",value:L.search||"",onChange:Y=>$({...L,search:Y.target.value,page:1})}),c.jsxs("select",{className:"input",value:L.rol||"",onChange:Y=>$({...L,rol:Y.target.value||void 0,page:1}),children:[c.jsx("option",{value:"",children:"Todos los roles"}),c.jsx("option",{value:"administrador",children:"Administrador"}),c.jsx("option",{value:"mecanico",children:"Técnico/Mecánico"}),c.jsx("option",{value:"seguimiento",children:"Personal de Seguimiento"})]}),c.jsxs("select",{className:"input",value:L.activo?.toString()||"",onChange:Y=>$({...L,activo:Y.target.value?Y.target.value==="true":void 0,page:1}),children:[c.jsx("option",{value:"",children:"Todos los estados"}),c.jsx("option",{value:"true",children:"Activos"}),c.jsx("option",{value:"false",children:"Inactivos"})]})]}),c.jsx("button",{onClick:()=>v(!0),className:"btn-primary whitespace-nowrap",children:"+ Nuevo Usuario"})]})}),c.jsxs("div",{className:"bg-white shadow border rounded-lg overflow-hidden",children:[c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Último Acceso"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(Y=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:Y.nombre}),c.jsx("div",{className:"text-sm text-gray-500",children:Y.email}),Y.password_temp&&c.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"Contraseña temporal"})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P(Y.rol)}`,children:he(Y.rol)})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Y.activo?"Activo":"Inactivo"})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Y.ultimo_login?oe(Y.ultimo_login):"Nunca"}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[c.jsx("button",{onClick:()=>{m(Y),b(!0)},className:"text-blue-600 hover:text-blue-900",children:"Editar"}),c.jsx("button",{onClick:()=>me(Y.user_id),className:"text-yellow-600 hover:text-yellow-900",children:"Reset Password"}),c.jsx("button",{onClick:()=>_e(Y),className:"text-green-600 hover:text-green-900",children:"Actividad"})]})]},Y.user_id))})]})}),W.totalPages>1&&c.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200",children:[c.jsxs("div",{className:"text-sm text-gray-700",children:["Mostrando ",(W.page-1)*W.limit+1," a ",Math.min(W.page*W.limit,W.total)," de ",W.total," usuarios"]}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>$({...L,page:W.page-1}),disabled:!W.hasPrev,className:"btn-secondary disabled:opacity-50",children:"Anterior"}),c.jsx("button",{onClick:()=>$({...L,page:W.page+1}),disabled:!W.hasNext,className:"btn-secondary disabled:opacity-50",children:"Siguiente"})]})]})]}),D&&c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:c.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:c.jsxs("div",{className:"mt-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contraseña Temporal Generada"}),c.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Contraseña temporal:"}),c.jsx("p",{className:"text-lg font-mono font-bold text-blue-600 bg-white p-2 rounded border",children:A})]}),c.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"⚠️ Guarda esta contraseña temporal. El usuario deberá cambiarla en su primer inicio de sesión."}),c.jsx("div",{className:"flex justify-end mt-6",children:c.jsx("button",{onClick:()=>{R(!1),C("")},className:"btn-primary",children:"Entendido"})})]})})}),c.jsx(NC,{user:y?h:void 0,isOpen:p||y,onClose:()=>{v(!1),b(!1),m(null)},onSubmit:y?ce:be,loading:a}),c.jsx(EC,{user:h,activities:E,isOpen:_,onClose:()=>{w(!1),m(null),j([])}})]})};class CC{async getCitasDelDia(e){const r=e?`?fecha=${e}`:"";return(await ye.get(`/reception/citas${r}`)).data}async processWalkInClient(e){return(await ye.post("/reception/walk-in",e)).data}async convertOpportunityToCita(e){return(await ye.post("/reception/convert-opportunity",e)).data}async receptionarCita(e,r){return(await ye.post(`/reception/recepcionar/${e}`,r)).data}async buscarCliente(e){return(await ye.get(`/customers/search?nombre=${encodeURIComponent(e)}`)).data}async getVehiculosCliente(e){return(await ye.get(`/customers/${e}/vehicles`)).data}async buscarVehiculo(e){return(await ye.get(`/vehicles/search?placa=${encodeURIComponent(e)}`)).data}}const oo=new CC,jC=()=>{const[t,e]=z.useState([]),[r,n]=z.useState(!0),[a,s]=z.useState(new Date().toISOString().split("T")[0]),[l,d]=z.useState(!1),[h,m]=z.useState(!1),[p,v]=z.useState(null),[y,b]=z.useState(""),[_,w]=z.useState([]),[E,j]=z.useState(null),[A,C]=z.useState([]),[D,R]=z.useState(!0),[L,$]=z.useState("nuevo"),[W,J]=z.useState({accion:"servicio_inmediato",cliente_nuevo:{nombre:"",telefono:"",whatsapp:"",email:"",direccion:""},vehiculo_nuevo:{marca:"",modelo:"",año:new Date().getFullYear(),placa_actual:"",color:"",kilometraje_actual:0},servicio_inmediato:{tipo_servicio:"",descripcion:"",precio_estimado:0}}),[ae,be]=z.useState({tipo_servicio:"",descripcion:"",precio_estimado:0,usuario_mecanico:null}),ce=async()=>{try{n(!0);const U=await oo.getCitasDelDia(a);e(U.citas)}catch(U){console.error("Error cargando citas:",U),alert("Error cargando citas del día")}finally{n(!1)}},me=async()=>{if(y.trim().length<2){w([]);return}try{console.log("🔍 Buscando clientes con query:",y);const U=await oo.buscarCliente(y.trim());console.log("📋 Respuesta de búsqueda:",U);const k=U.customers||[];w(k),console.log("✅ Clientes encontrados:",k.length)}catch(U){console.error("❌ Error buscando clientes:",U),w([])}},_e=async U=>{j(U),b(U.nombre),w([]);try{console.log("🚗 Cargando vehículos para cliente:",U.customer_id,U.nombre);const k=await oo.getVehiculosCliente(U.customer_id);console.log("📋 Respuesta de vehículos:",k);const de=k.vehicles||[];C(de),R(!0),console.log("✅ Vehículos encontrados:",de.length),de.length>0&&console.log("🚙 Lista de vehículos:",de)}catch(k){console.error("❌ Error cargando vehículos:",k),C([]),R(!1)}},he=U=>{console.log("🚗 Vehículo seleccionado:",U),J(k=>({...k,cliente_existente_id:E.customer_id,vehiculo_existente_id:U.vehicle_id,cliente_nuevo:void 0,vehiculo_nuevo:void 0})),R(!1),setTimeout(()=>{const k=document.querySelector("h4");k&&k.textContent?.includes("Servicio")&&k.scrollIntoView({behavior:"smooth",block:"center"})},100)},P=z.useCallback(oe(()=>{me()},500),[y]);z.useEffect(()=>{ce()},[a]),z.useEffect(()=>(y.trim().length>=2?P():w([]),()=>{P.cancel&&P.cancel()}),[y,P]);function oe(U,k){let de;const Ge=(...Ze)=>{clearTimeout(de),de=setTimeout(()=>U.apply(null,Ze),k)};return Ge.cancel=()=>clearTimeout(de),Ge}const Y=async U=>{U.preventDefault();try{await oo.processWalkInClient(W),alert("Cliente walk-in procesado exitosamente"),d(!1),T(),ce()}catch(k){console.error("Error procesando walk-in:",k),alert(k.response?.data?.details||"Error procesando cliente")}},ve=async U=>{if(U.preventDefault(),!!p)try{await oo.receptionarCita(p.opportunity_id,ae),alert("Cita recepcionada exitosamente"),m(!1),v(null),V(),ce()}catch(k){console.error("Error recepcionando cita:",k),alert(k.response?.data?.details||"Error recepcionando cita")}},T=()=>{J({accion:"servicio_inmediato",cliente_nuevo:{nombre:"",telefono:"",whatsapp:"",email:"",direccion:""},vehiculo_nuevo:{marca:"",modelo:"",año:new Date().getFullYear(),placa_actual:"",color:"",kilometraje_actual:0},servicio_inmediato:{tipo_servicio:"",descripcion:"",precio_estimado:0}}),b(""),w([]),j(null),C([]),R(!0),$("nuevo")},V=()=>{be({tipo_servicio:"",descripcion:"",precio_estimado:0,usuario_mecanico:null})},ue=U=>{const k={opportunity:"bg-blue-100 text-blue-800",llamada_cliente:"bg-green-100 text-green-800",walk_in:"bg-purple-100 text-purple-800",seguimiento:"bg-orange-100 text-orange-800",manual:"bg-gray-100 text-gray-800"},de={opportunity:"Seguimiento",llamada_cliente:"Llamada",walk_in:"Walk-in",seguimiento:"Seguimiento",manual:"Manual"},Ge=k[U]||"bg-gray-100 text-gray-800",Ze=de[U]||U;return c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Ge}`,children:Ze})},fe=U=>U==="cita_rapida"?c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Datos Incompletos"}):c.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Datos Completos"});return c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Recepción"}),c.jsx("p",{className:"text-gray-600",children:"Gestión de llegada de clientes y citas"})]}),c.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[c.jsx("span",{className:"mr-2",children:"👤"}),"Cliente Walk-In"]})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700",children:"Fecha"}),c.jsx("input",{id:"date",type:"date",value:a,onChange:U=>s(U.target.value),className:"mt-1 block w-48 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsx("div",{className:"bg-white shadow rounded-lg",children:c.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[c.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:["📅 Citas del Día - ",new Date(a).toLocaleDateString("es-MX")]}),r?c.jsx("p",{children:"Cargando citas..."}):t.length===0?c.jsx("p",{className:"text-gray-500",children:"No hay citas programadas para este día"}):c.jsx("div",{className:"space-y-4",children:t.map(U=>c.jsx("div",{className:"border border-gray-200 rounded-lg p-4 border-l-4 border-l-blue-500",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{children:"⏰"}),c.jsx("span",{className:"font-semibold",children:U.cita_hora})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{children:"👤"}),c.jsx("span",{children:U.cita_nombre_contacto})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("span",{children:"📞"}),c.jsx("span",{children:U.cita_telefono_contacto})]})]}),c.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[c.jsx("span",{children:"🚗"}),c.jsx("span",{children:U.cita_descripcion_breve})]}),U.placa_actual&&c.jsxs("div",{className:"text-sm text-gray-600",children:[U.marca," ",U.modelo," - ",U.placa_actual]}),c.jsxs("div",{className:"flex gap-2",children:[ue(U.origen_cita),fe(U.tipo_cita)]})]}),c.jsx("div",{className:"flex gap-2",children:U.tipo_cita==="cita_completa"?c.jsxs("button",{onClick:()=>{v(U),m(!0)},className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[c.jsx("span",{className:"mr-1",children:"✅"}),"Recepcionar"]}):c.jsx("button",{disabled:!0,className:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-md text-gray-400 bg-gray-100 cursor-not-allowed",children:"Completar Datos Primero"})})]})},U.opportunity_id))})]})}),l&&c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:c.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:c.jsxs("div",{className:"mt-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cliente Walk-In"}),c.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Procesar cliente que llegó sin cita previa"}),c.jsxs("form",{onSubmit:Y,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Cliente"}),c.jsxs("div",{className:"flex space-x-4 mb-4",children:[c.jsxs("label",{className:"inline-flex items-center",children:[c.jsx("input",{type:"radio",value:"nuevo",checked:L==="nuevo",onChange:U=>{const k=U.target.value;$(k),b(""),w([]),j(null),C([]),J(de=>({...de,cliente_existente_id:void 0,vehiculo_existente_id:void 0,cliente_nuevo:k==="nuevo"?de.cliente_nuevo:void 0,vehiculo_nuevo:de.vehiculo_nuevo}))},className:"form-radio h-4 w-4 text-blue-600"}),c.jsx("span",{className:"ml-2 text-sm",children:"Cliente Nuevo"})]}),c.jsxs("label",{className:"inline-flex items-center",children:[c.jsx("input",{type:"radio",value:"existente",checked:L==="existente",onChange:U=>{const k=U.target.value;$(k),b(""),w([]),j(null),C([]),J(de=>({...de,cliente_existente_id:void 0,vehiculo_existente_id:void 0,cliente_nuevo:k==="nuevo"?de.cliente_nuevo:void 0,vehiculo_nuevo:de.vehiculo_nuevo}))},className:"form-radio h-4 w-4 text-blue-600"}),c.jsx("span",{className:"ml-2 text-sm",children:"Cliente Existente"})]})]}),L==="existente"?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Buscar Cliente"}),c.jsx("input",{type:"text",value:y,onChange:U=>b(U.target.value),placeholder:"Buscar por nombre o teléfono... (mín. 2 caracteres)",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),_.length>0&&c.jsx("div",{className:"mt-2 border border-gray-300 rounded-md shadow-sm max-h-40 overflow-y-auto",children:_.map(U=>c.jsxs("div",{onClick:()=>_e(U),className:"px-3 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",children:[c.jsx("div",{className:"font-medium text-sm",children:U.nombre}),c.jsx("div",{className:"text-xs text-gray-600",children:U.telefono})]},U.customer_id))})]}),E&&c.jsxs("div",{className:"bg-blue-50 p-3 rounded-md",children:[c.jsx("div",{className:"text-sm font-medium text-blue-900",children:"Cliente Seleccionado:"}),c.jsx("div",{className:"text-sm text-blue-800",children:E.nombre}),c.jsx("div",{className:"text-xs text-blue-700",children:E.telefono})]})]}):c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre *"}),c.jsx("input",{type:"text",required:!0,value:W.cliente_nuevo?.nombre||"",onChange:U=>J(k=>({...k,cliente_nuevo:{...k.cliente_nuevo,nombre:U.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono *"}),c.jsx("input",{type:"tel",required:!0,value:W.cliente_nuevo?.telefono||"",onChange:U=>J(k=>({...k,cliente_nuevo:{...k.cliente_nuevo,telefono:U.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Vehículo"}),L==="existente"&&E?c.jsxs("div",{className:"space-y-4",children:[A.length>0?c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Seleccionar Vehículo del Cliente"}),c.jsx("button",{type:"button",onClick:()=>R(!D),className:"text-xs text-blue-600 hover:text-blue-800",children:D?"▼ Ocultar":"▶ Mostrar"})]}),D&&c.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:A.map(U=>c.jsxs("div",{onClick:()=>he(U),className:`p-3 border rounded-md cursor-pointer hover:bg-gray-50 ${W.vehiculo_existente_id===U.vehicle_id?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[c.jsxs("div",{className:"font-medium text-sm",children:[U.marca," ",U.modelo," ",U.año]}),c.jsxs("div",{className:"text-xs text-gray-600",children:["Placas: ",U.placa_actual," • KM: ",U.kilometraje_actual]})]},U.vehicle_id))}),c.jsx("div",{className:"mt-3 pt-3 border-t",children:c.jsxs("label",{className:"inline-flex items-center",children:[c.jsx("input",{type:"checkbox",checked:!W.vehiculo_existente_id,onChange:U=>{U.target.checked&&J(k=>({...k,vehiculo_existente_id:void 0,vehiculo_nuevo:{marca:"",modelo:"",año:new Date().getFullYear(),placa_actual:"",color:"",kilometraje_actual:0}}))},className:"form-checkbox h-4 w-4 text-blue-600"}),c.jsx("span",{className:"ml-2 text-sm",children:"Es un vehículo nuevo del cliente"})]})})]}):c.jsx("div",{className:"bg-yellow-50 p-3 rounded-md",children:c.jsx("div",{className:"text-sm text-yellow-800",children:"Este cliente no tiene vehículos registrados. Se registrará un nuevo vehículo."})}),W.vehiculo_existente_id&&c.jsx("div",{className:"bg-green-50 p-4 rounded-md border border-green-200",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsxs("div",{className:"ml-3",children:[c.jsx("div",{className:"text-sm font-medium text-green-800",children:"Vehículo Seleccionado:"}),(()=>{const U=A.find(k=>k.vehicle_id===W.vehiculo_existente_id);return U?c.jsxs("div",{className:"text-sm text-green-700",children:[U.marca," ",U.modelo," ",U.año," - Placas: ",U.placa_actual]}):null})()]})]})}),(A.length===0||!W.vehiculo_existente_id)&&c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Marca *"}),c.jsx("input",{type:"text",required:!0,value:W.vehiculo_nuevo?.marca||"",onChange:U=>J(k=>({...k,vehiculo_nuevo:{...k.vehiculo_nuevo,marca:U.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Modelo *"}),c.jsx("input",{type:"text",required:!0,value:W.vehiculo_nuevo?.modelo||"",onChange:U=>J(k=>({...k,vehiculo_nuevo:{...k.vehiculo_nuevo,modelo:U.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Año *"}),c.jsx("input",{type:"number",required:!0,min:"1900",max:new Date().getFullYear()+1,value:W.vehiculo_nuevo?.año||new Date().getFullYear(),onChange:U=>J(k=>({...k,vehiculo_nuevo:{...k.vehiculo_nuevo,año:parseInt(U.target.value)}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Placas *"}),c.jsx("input",{type:"text",required:!0,value:W.vehiculo_nuevo?.placa_actual||"",onChange:U=>J(k=>({...k,vehiculo_nuevo:{...k.vehiculo_nuevo,placa_actual:U.target.value.toUpperCase()}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]}):c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Marca *"}),c.jsx("input",{type:"text",required:!0,value:W.vehiculo_nuevo?.marca||"",onChange:U=>J(k=>({...k,vehiculo_nuevo:{...k.vehiculo_nuevo,marca:U.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Modelo *"}),c.jsx("input",{type:"text",required:!0,value:W.vehiculo_nuevo?.modelo||"",onChange:U=>J(k=>({...k,vehiculo_nuevo:{...k.vehiculo_nuevo,modelo:U.target.value}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Año *"}),c.jsx("input",{type:"number",required:!0,min:"1900",max:new Date().getFullYear()+1,value:W.vehiculo_nuevo?.año||new Date().getFullYear(),onChange:U=>J(k=>({...k,vehiculo_nuevo:{...k.vehiculo_nuevo,año:parseInt(U.target.value)}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Placas *"}),c.jsx("input",{type:"text",required:!0,value:W.vehiculo_nuevo?.placa_actual||"",onChange:U=>J(k=>({...k,vehiculo_nuevo:{...k.vehiculo_nuevo,placa_actual:U.target.value.toUpperCase()}})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Servicio"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"¿Qué quiere hacer el cliente?"}),c.jsxs("select",{value:W.accion,onChange:U=>J(k=>({...k,accion:U.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[c.jsx("option",{value:"servicio_inmediato",children:"Servicio inmediato"}),c.jsx("option",{value:"agendar_cita",children:"Agendar cita para después"})]})]}),W.accion==="servicio_inmediato"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de servicio *"}),c.jsx("input",{type:"text",required:!0,value:W.servicio_inmediato?.tipo_servicio||"",onChange:U=>J(k=>({...k,servicio_inmediato:{...k.servicio_inmediato,tipo_servicio:U.target.value}})),placeholder:"Ej: Cambio de aceite, Reparación de frenos...",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descripción"}),c.jsx("textarea",{value:W.servicio_inmediato?.descripcion||"",onChange:U=>J(k=>({...k,servicio_inmediato:{...k.servicio_inmediato,descripcion:U.target.value}})),placeholder:"Detalles del servicio requerido...",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",rows:3})]})]})]})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:W.accion==="servicio_inmediato"?"Crear Servicio":"Agendar Cita"})]})]})]})})}),h&&p&&c.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:c.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-2/3 lg:w-1/3 shadow-lg rounded-md bg-white",children:c.jsxs("div",{className:"mt-3",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recepcionar Cita"}),c.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Cliente: ",p.cita_nombre_contacto," - ",p.cita_descripcion_breve]}),c.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de servicio"}),c.jsx("input",{type:"text",value:ae.tipo_servicio,onChange:U=>be(k=>({...k,tipo_servicio:U.target.value})),placeholder:p.cita_descripcion_breve,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descripción detallada"}),c.jsx("textarea",{value:ae.descripcion,onChange:U=>be(k=>({...k,descripcion:U.target.value})),placeholder:"Detalles del diagnóstico y trabajo a realizar...",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",rows:3})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Precio estimado"}),c.jsx("input",{type:"number",min:"0",step:"0.01",value:ae.precio_estimado,onChange:U=>be(k=>({...k,precio_estimado:parseFloat(U.target.value)||0})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Crear Servicio"})]})]})]})})})]})},OC=()=>{const{user:t}=vn(),[e,r]=z.useState("list"),[n,a]=z.useState(null),[s,l]=z.useState([]),[d,h]=z.useState([]),[m,p]=z.useState(!1),[v,y]=z.useState(null),[b,_]=z.useState(!1),[w,E]=z.useState({page:1,limit:20,total:0,totalPages:0}),j=t?.rol==="administrador",{register:A,watch:C,reset:D}=Zr(),R=C(),{register:L,handleSubmit:$,reset:W,formState:{isSubmitting:J},setValue:ae,watch:be}=Zr(),ce=be("especialidades")||[];z.useEffect(()=>{me(),_e()},[]),z.useEffect(()=>{Object.values(R).some(k=>k)&&(E(k=>({...k,page:1})),me())},[R]);const me=async(k=1)=>{p(!0),y(null);try{const de=Object.fromEntries(Object.entries(R).filter(([Ze,Rt])=>Rt&&Rt!=="")),Ge=await yr.getMechanics({...de,page:k,limit:w.limit});l(Ge.mechanics||[]),E({page:Ge.pagination?.page||1,limit:Ge.pagination?.limit||20,total:Ge.pagination?.total||0,totalPages:Ge.pagination?.totalPages||0})}catch(de){console.error("Error cargando mecánicos:",de),y(de.response?.data?.message||"Error al cargar mecánicos")}finally{p(!1)}},_e=async()=>{try{const k=await yr.getBranches();h(k.branches||[])}catch(k){console.error("Error cargando sucursales:",k)}},he=async k=>{try{const de=await yr.getMechanicById(k.mechanic_id);a(de.mechanic),r("detail")}catch(de){console.error("Error cargando detalle del mecánico:",de),y(de.response?.data?.message||"Error al cargar detalle del mecánico")}},P=()=>{W({branch_id:d[0]?.branch_id||1,especialidades:[],nivel_experiencia:"junior",comision_porcentaje:0}),r("create")},oe=()=>{n&&(W({...n}),r("edit"))},Y=async k=>{try{if(y(null),e==="create")await yr.createMechanic(k);else if(e==="edit"&&n){const de=await yr.updateMechanic(n.mechanic_id,k);a(de.mechanic)}await me(w.page),r(e==="create"?"list":"detail")}catch(de){console.error("Error guardando mecánico:",de),y(de.response?.data?.message||"Error al guardar mecánico")}},ve=async k=>{if(confirm("¿Estás seguro de que deseas eliminar este mecánico?"))try{y(null),await yr.deleteMechanic(k),await me(w.page),r("list"),a(null)}catch(de){console.error("Error eliminando mecánico:",de),y(de.response?.data?.message||"Error al eliminar mecánico")}},T=()=>{D(),E(k=>({...k,page:1})),me()},V=k=>{k&&!ce.includes(k)&&ae("especialidades",[...ce,k])},ue=k=>{ae("especialidades",ce.filter((de,Ge)=>Ge!==k))},fe=k=>{switch(k){case"master":return"bg-gradient-to-r from-purple-500 to-purple-600 text-white";case"senior":return"bg-gradient-to-r from-blue-500 to-blue-600 text-white";case"intermedio":return"bg-gradient-to-r from-green-500 to-green-600 text-white";case"junior":return"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white";default:return"bg-gray-100 text-gray-800"}},U=()=>{switch(e){case"create":case"edit":return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("button",{onClick:()=>r(e==="create"?"list":"detail"),className:"flex items-center text-gray-600 hover:text-gray-800",children:["← Regresar ",e==="create"?"a lista":"a detalle"]}),c.jsxs("div",{className:"card p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:e==="create"?"Crear Nuevo Mecánico":`Editar Mecánico #${n?.mechanic_id}`}),c.jsxs("form",{onSubmit:$(Y),className:"space-y-6",children:[c.jsx("div",{className:"space-y-6",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"font-medium text-gray-900",children:"Información del Mecánico"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sucursal *"}),c.jsx("select",{...L("branch_id"),className:"input-field",required:!0,children:d.map(k=>c.jsx("option",{value:k.branch_id,children:k.nombre},k.branch_id))})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre *"}),c.jsx("input",{...L("nombre"),type:"text",className:"input-field",required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Apellidos *"}),c.jsx("input",{...L("apellidos"),type:"text",className:"input-field",required:!0})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Alias/Sobrenombre",c.jsx("span",{className:"text-xs text-gray-500 ml-2",children:'(máximo 15 caracteres - ej: "Pepe", "El Checo")'})]}),c.jsx("input",{...L("alias"),type:"text",className:"input-field",placeholder:"Sobrenombre para identificación rápida",maxLength:15})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),c.jsx("input",{...L("telefono"),type:"tel",className:"input-field",placeholder:"Opcional"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nivel de Experiencia *"}),c.jsxs("select",{...L("nivel_experiencia"),className:"input-field",required:!0,children:[c.jsx("option",{value:"junior",children:"Junior"}),c.jsx("option",{value:"intermedio",children:"Intermedio"}),c.jsx("option",{value:"senior",children:"Senior"}),c.jsx("option",{value:"master",children:"Master"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salario Base"}),c.jsx("input",{...L("salario_base"),type:"number",step:"0.01",className:"input-field",placeholder:"Opcional"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comisión (%)"}),c.jsx("input",{...L("comision_porcentaje"),type:"number",step:"0.01",min:"0",max:"100",className:"input-field",placeholder:"0"})]})]}),e==="edit"&&c.jsxs("div",{className:"flex items-center",children:[c.jsx("input",{...L("activo"),type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),c.jsx("label",{className:"ml-2 text-sm font-medium text-gray-700",children:"Activo"})]})]})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Especialidades"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("div",{className:"flex flex-wrap gap-2",children:ce.map((k,de)=>c.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[k,c.jsx("button",{type:"button",onClick:()=>ue(de),className:"ml-2 text-blue-600 hover:text-blue-800",children:"×"})]},de))}),c.jsx("div",{className:"flex flex-wrap gap-2",children:yr.getCommonSpecialties().filter(k=>!ce.includes(k)).map(k=>c.jsxs("button",{type:"button",onClick:()=>V(k),className:"px-3 py-1 text-sm border border-gray-300 rounded-full hover:bg-gray-50",children:["+ ",k]},k))})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),c.jsx("textarea",{...L("notas"),className:"input-field",rows:3,placeholder:"Notas adicionales sobre el mecánico..."})]}),c.jsxs("div",{className:"flex justify-end space-x-4",children:[c.jsx("button",{type:"button",onClick:()=>r(e==="create"?"list":"detail"),className:"btn-secondary",disabled:J,children:"Cancelar"}),c.jsx("button",{type:"submit",className:"btn-primary",disabled:J,children:J?"Guardando...":e==="create"?"Crear Mecánico":"Guardar Cambios"})]})]})]})]});case"detail":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("button",{onClick:()=>r("list"),className:"flex items-center text-gray-600 hover:text-gray-800",children:"← Regresar a mecánicos"}),c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-6",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:yr.formatName(n)}),c.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[c.jsxs("span",{className:`px-4 py-2 rounded-lg font-semibold text-sm ${fe(n.nivel_experiencia)}`,children:["🏆 ",yr.formatExperienceLevel(n.nivel_experiencia)]}),c.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${n.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.activo?"✅ Activo":"❌ Inactivo"})]})]}),j&&c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("button",{onClick:oe,className:"btn-primary flex items-center space-x-2",children:[c.jsx("span",{children:"✏️"}),c.jsx("span",{children:"Editar"})]}),c.jsx("button",{onClick:()=>ve(n.mechanic_id),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"🗑️ Eliminar"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Información Personal"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Empleado:"})," ",n.numero_empleado]}),n.alias&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Alias:"})," ",c.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:['"',n.alias,'"']})]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Sucursal:"})," ",n.branch_nombre]}),n.telefono&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Teléfono:"})," ",n.telefono]}),n.email&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Email:"})," ",n.email]}),n.fecha_nacimiento&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Nacimiento:"})," ",yr.formatDate(n.fecha_nacimiento)]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Ingreso:"})," ",yr.formatDate(n.fecha_ingreso)]})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Información Laboral"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[n.salario_base&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Salario:"})," ",yr.formatSalary(n.salario_base)]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Comisión:"})," ",n.comision_porcentaje,"%"]}),n.horario_trabajo&&c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Horario:"})," ",n.horario_trabajo]})]})]})]}),n.especialidades.length>0&&c.jsxs("div",{className:"mt-6",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Especialidades"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:n.especialidades.map((k,de)=>c.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:k},de))})]}),n.notas&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[c.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Notas"}),c.jsx("p",{className:"text-sm text-gray-700",children:n.notas})]})]})]});default:return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"card p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Mecánicos"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("button",{onClick:()=>_(!b),className:"btn-secondary text-sm",children:b?"Ocultar Filtros":"Mostrar Filtros"}),j&&c.jsxs("button",{onClick:P,className:"btn-primary text-sm flex items-center space-x-2",children:[c.jsx("span",{children:"➕"}),c.jsx("span",{children:"Nuevo Mecánico"})]})]})]}),b&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 bg-gray-50 rounded-lg mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar"}),c.jsx("input",{...A("search"),type:"text",placeholder:"Nombre, apellido o número...",className:"input-field text-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sucursal"}),c.jsxs("select",{...A("branch_id"),className:"input-field text-sm",children:[c.jsx("option",{value:"",children:"Todas"}),d.map(k=>c.jsx("option",{value:k.branch_id,children:k.nombre},k.branch_id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Experiencia"}),c.jsxs("select",{...A("nivel_experiencia"),className:"input-field text-sm",children:[c.jsx("option",{value:"",children:"Todos"}),c.jsx("option",{value:"junior",children:"Junior"}),c.jsx("option",{value:"intermedio",children:"Intermedio"}),c.jsx("option",{value:"senior",children:"Senior"}),c.jsx("option",{value:"master",children:"Master"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),c.jsxs("select",{...A("activo"),className:"input-field text-sm",children:[c.jsx("option",{value:"",children:"Todos"}),c.jsx("option",{value:"true",children:"Activos"}),c.jsx("option",{value:"false",children:"Inactivos"})]})]}),c.jsx("div",{className:"md:col-span-2 lg:col-span-4",children:c.jsx("button",{onClick:T,className:"btn-secondary text-sm",children:"Limpiar Filtros"})})]})]}),v&&c.jsx("div",{className:"card p-4 bg-red-50 border border-red-200",children:c.jsx("p",{className:"text-red-600 text-sm",children:v})}),m?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando mecánicos..."})]}):s.length>0?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:[w.total," mecánicos encontrados (página ",w.page," de ",w.totalPages,")"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(k=>c.jsxs("div",{className:"card p-6 hover:shadow-lg hover:border-blue-200 transition-all duration-200 cursor-pointer",onClick:()=>he(k),children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[c.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:[k.nombre," ",k.apellidos]}),k.alias&&c.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:['"',k.alias,'"']})]}),c.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["#",k.numero_empleado]}),c.jsx("p",{className:"text-sm text-gray-600",children:k.branch_nombre})]}),c.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${k.activo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:k.activo?"✅":"❌"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:`px-3 py-2 rounded-lg text-sm font-semibold ${fe(k.nivel_experiencia)}`,children:["🏆 ",yr.formatExperienceLevel(k.nivel_experiencia)]}),k.especialidades.length>0&&c.jsxs("div",{className:"flex flex-wrap gap-1",children:[k.especialidades.slice(0,2).map((de,Ge)=>c.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:de},Ge)),k.especialidades.length>2&&c.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:["+",k.especialidades.length-2]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mt-3",children:[c.jsxs("span",{children:["📅 ",yr.formatDate(k.fecha_ingreso)]}),k.telefono&&c.jsxs("span",{children:["📱 ",k.telefono]})]})]})]},k.mechanic_id))}),w.totalPages>1&&c.jsxs("div",{className:"flex justify-center space-x-2 mt-6",children:[c.jsx("button",{onClick:()=>me(w.page-1),disabled:w.page===1,className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"← Anterior"}),c.jsxs("span",{className:"px-4 py-2 text-sm text-gray-700",children:["Página ",w.page," de ",w.totalPages]}),c.jsx("button",{onClick:()=>me(w.page+1),disabled:w.page===w.totalPages,className:"px-4 py-2 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente →"})]})]}):c.jsxs("div",{className:"card p-8 text-center",children:[c.jsx("p",{className:"text-gray-600 mb-4",children:"No hay mecánicos que coincidan con los filtros"}),j&&c.jsx("button",{onClick:P,className:"btn-primary",children:"Crear Primer Mecánico"}),Object.values(R).some(k=>k)&&c.jsx("button",{onClick:T,className:"mt-4 btn-secondary text-sm",children:"Limpiar filtros"})]})]})}};return c.jsx("div",{className:"bg-gray-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:U()})})},TC=()=>{const[t,e]=z.useState("dashboard");z.useEffect(()=>{const l=d=>{e(d.detail)};return window.addEventListener("navigate",l),()=>window.removeEventListener("navigate",l)},[]);const[r,n]=z.useState(!1),a=()=>{console.log("🎯 MainApp: Navigating to vehicle creation form"),n(!0),e("vehicles")},s=()=>{switch(t){case"appointmentList":return c.jsx(fN,{});case"appointments":return c.jsx(dN,{});case"vehicles":return c.jsx(sC,{initialMode:r?"create":"search",onModeUsed:()=>n(!1)});case"customers":return c.jsx(cC,{});case"opportunities":return c.jsx(pC,{});case"services":return c.jsx(xC,{});case"reminders":return c.jsx(vC,{});case"reception":return c.jsx(jC,{});case"users":return c.jsx(SC,{});case"mechanics":return c.jsx(OC,{});default:return c.jsx(lN,{onNavigate:e,onNavigateToVehicleForm:a})}};return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(sN,{currentPage:t,onPageChange:e}),s()]})},DC=new ub({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});function RC(){const{user:t,isLoading:e}=vn();return e?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando..."})]})}):t?c.jsx(TC,{}):c.jsx(iN,{})}function IC(){return c.jsx(fb,{client:DC,children:c.jsx(G_,{children:c.jsx(RC,{})})})}z2.createRoot(document.getElementById("root")).render(c.jsx(z.StrictMode,{children:c.jsx(IC,{})}));
